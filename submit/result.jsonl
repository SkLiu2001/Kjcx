{"id": 1, "query": "PCF与NRF对接时，一般需要配置哪些数据？", "recall": "[1]:配置NRF服务器\r: 配置NRF服务器\r\n\r\n摘要\r\n\r\nNRF(NF Repository Function, 网络仓储功能)用于接收服务提供者的注册信息，供服务使用者发现服务提供者。\r\n\r\n本节介绍如何配置PCF对接的NRF信息。当PCF部署成功后，需要配置NRF的地址和端口号。配置成功后，PCF会向NRF注册，并在用户业务流程中通过NRF发现其他合适的NF实例。\r\n\r\nPCF通常对接主备2个NRF，如果NRF地址为IPv6，则关联IPv6的HTTP客户端模板；如果NRF的地址为IPv4，则关联IPv4的HTTP客户端模板。\r\n\r\n  * PCF向NRF注册服务，便于AMF、SMF、AF等NF发现PCF服务。\r\n\r\n  * PCF通过NRF发现并订阅CHF、UDR、AMF、SMF、BSF等服务，获得用户签约、计费等信息，及业务相关信息。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n  1. 在EM客户端配置页面的左侧命令树中，展开PCF节点，选择CommonS_HTTP_LB_0。\r\n\r\n  2. 执行ADD SBINRFGROUP命令，新增NRF服务器分组配置。\r\n\r\n配置参数说明参见表1。\r\n\r\n表1 新增NRF服务器分组参数| 参数名称| 参数配置  \r\n---|---|---  \r\nID| NRF服务器组编号| 该参数用于设置NRF服务器组编号。  \r\nDESC| 描述信息| 该参数用于设置NRF服务器组的描述信息。  \r\n  \r\n  3. 执行ADD SBINRFNODE命令，新增NRF服务器节点配置。\r\n\r\n配置参数说明参见表2。\r\n\r\n表2 新增NRF服务器节点参数| 参数名称| 参数配置  \r\n---|---|---  \r\nID| NRF服务器节点编号| 该参数用于设置NRF服务器节点编号。  \r\nSERVERIPADDR| NRF服务器IP地址| 该参数用于设置NRF服务器IP地址，支持IPv4和IPv6。  \r\nSERVERPORT| NRF服务器端口| 该参数用于设置NRF服务器端口。  \r\nSERVERFQDN| NRF服务器FQDN| 该参数用于设置NRF服务器FQDN，暂时空置，不设置。  \r\nSCHEME| URI scheme| 该参数用于设置NRF服务器支持的URI scheme，默认值为HTTP。  \r\nAPIVERSION| API版本| 该参数用于设置NRF的API版本，比如v1或v2，默认值为v1。  \r\nCLIENTPROFILEID| HTTP客户端模板编号| 该参数用于设置向NRF服务器发送请求时使用的HTTP客户端模板编号。  \r\nNOTIFYSVRPROFILEID| 通知时使用的HTTP服务端模板编号| 该参数用于设置接收NRF服务器的通知时使用的HTTP服务端模板编号。  \r\nPRIORITY| NRF服务器节点优先级| 该参数用于设置NRF服务器节点优先级。默认值为0，优先级最高。值越小优先级越高。  \r\nGROUPID| 归属的NRF服务器组编号| 该参数用于设置NRF服务器节点归属的NRF服务器组编号。  \r\n  \r\n  4.\n\n[2]:配置CHF对接数据\r: 配置CHF对接数据\r\n\r\nZXUN RCP通过N28接口从CHF获取消费门限信息。\r\n\r\n  * 动态CHF配置\r\n\r\n通常PCF通过NRF发现CHF。使用NRF动态发现CHF时，PCF需订阅条件配置，PCF向NRF订阅CHF变更通知，以便在CHF信息变更或故障时NRF能及时通知PCF。\r\n\r\n  * 静态CHF配置\r\n\r\n如果不支持动态发现，则通过静态配置对接信息。中国电信使用静态配置方式。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n目前仅中国电信部分省份开启PCF和CHF之间的N28接口。中国联通及中国移动均不使用N28接口。\r\n\r\n子主题：\r\n\r\n  * 配置动态发现CHF\r\n\r\n  * 配置静态CHF对接数据\n\n[3]:PCF对接数据配置\r: PCF对接数据配置\r\n\r\n子主题：\r\n\r\n  * 服务配置\r\n\r\n  * 配置NRF对接数据\r\n\r\n  * 配置SMF对接数据\r\n\r\n  * 配置BSF对接数据\r\n\r\n  * 配置CHF对接数据\n\n[4]:配置NRF服务器\r: 切换到Npcf_PolicyManagement_0节点，设置NRF策略配置。\r\n\r\n纯数据PCF或者数据语音混合PCF：\r\n\r\nSET NRFPATTERN:NOSEGREG=\"NO\"\r\n\r\n纯语音PCF：\r\n\r\nSET NRFPATTERN:NOSEGREG=\"YES\"\n\n[5]:配置NRF服务器\r: 执行ADD SBINRFPROFILESEL命令，新增NRF服务器模板选择配置。\r\n\r\n配置参数说明参见表9。\r\n\r\n表10 新增NRF服务器模板选择参数| 参数名称| 参数配置  \r\n---|---|---  \r\nNFTYPE| NF类型| 该参数用于设置选择NRF服务器模板的NF类型。如果是NF注册，则该参数设置为需要注册的NF类型，其他情况设置为目的NF类型。  \r\nNRFPROFILEID| NRF服务器模板编号| 该参数用于设置被选择的NRF服务器模板编号。  \r\n  \r\n  12. 执行ADD GLOBALPARAMETER命令，新增全局参数配置。\r\n\r\n配置参数说明参见表11。\r\n\r\n表11 新增全局参数参数| 参数名称| 参数配置  \r\n---|---|---  \r\nID| 编号| 该参数用于表示待设置的某个全局参数编号。该命令需要配合动态命令SHOW GLOBAL PARAMETER使用，先查询出ID对应的全局参数的描述。  \r\nVALUE| 参数值| 该参数用于设置全局参数值。该命令需要配合动态命令SHOW GLOBAL PARAMETER使用，设置的值范围需要在SHOW GLOBAL PARAMETER命令查询结果定义的范围内。  \r\n  \r\n  13. 切换到Npcf_PolicyManagement_0节点，执行SET NRFPATTERN命令，设置NRF策略配置，即PCF未配置服务号段时是否允许向NRF进行注册。\r\n\r\n配置参数说明参见表12。\r\n\r\n表12 修改NRF策略参数| 参数名称| 参数配置  \r\n---|---|---  \r\nNOSEGREG| 无号段时允许注册| 该参数用于表示PCF未配置服务号段时是否允许向NRF进行注册。\r\n     * 纯数据PCF或者数据语音混合PCF，保持默认值否。\r\n     * 纯语音PCF需要设置为是。  \r\n  \r\n\r\n\r\n\r\n举例\r\n\r\n配置示例如下。\r\n\r\n  1. 在EM客户端配置页面的左侧命令树中，展开PCF节点，选择CommonS_HTTP_LB_0。\r\n\r\n  2. 新增NRF服务器分组配置。\r\n\r\nADD SBINRFGROUP:ID=1,DESC=NRF Master\r\n\r\nADD SBINRFGROUP:ID=2,DESC=NRF Slave\r\n\r\n  3. 新增NRF服务器节点配置。\r\n\r\n需要双栈则全部配置，需要单栈则仅配置IPv4或IPv6。中国移动的NRF服务器端口设置为80，中国电信/中国联通的NRF服务器端口设置为8080。\r\n\r\nADD SBINRFNODE:ID=1,SERVERIPADDR=\"2409:800B:5003:1103:0000:0000:000F:0101\",SERVERPORT=80,SCHEME=\"HTTP\",APIVERSION=\"V1\",CLIENTPROFILEID=1,NOTIFYSVRPROFILEID=1,PRIORITY=1,GROUPID=1\r\n\r\nADD SBINRFNODE:ID=2,SERVERIPADDR=\"10.119.159.48\",SERVERPORT=80,SCHEME=\"HTTP\",APIVERSION=\"V1\",CLIENTPROFILEID=2,NOTIFYSVRPROFILEID=2,PRIORITY=2,GROUPID=1\r\n\r\nADD SBINRFNODE:ID=3,SERVERIPADDR=\"2409:801D:5003:1103:0000:0000:000F:0201\",SERVERPORT=80,SCHEME=\"HTTP\",APIVERSION=\"V1\",CLIENTPROFILEID=1,NOTIFYSVRPROFILEID=1,PRIORITY=1,GROUPID=2\r\n\r\nADD SBINRFNODE:ID=4,SERVERIPADDR=\"10.119.175.112\",SERVERPORT=80,SCHEME=\"HTTP\",APIVERSION=\"V1\",CLIENTPROFILEID=2,NOTIFYSVRPROFILEID=2,PRIORITY=2,GROUPID=2\r\n\r\n  4.", "answer": "PCF与NRF对接时，一般需要配置以下数据：\n\n1. NRF服务器分组配置：\n   - NRF服务器组编号（ID）\n   - 描述信息（DESC）\n\n2. NRF服务器节点配置：\n   - NRF服务器节点编号（ID）\n   - NRF服务器IP地址（SERVERIPADDR）\n   - NRF服务器端口（SERVERPORT）\n   - NRF服务器FQDN（SERVERFQDN，通常不设置）\n   - URI scheme（SCHEME）\n   - API版本（APIVERSION）\n   - HTTP客户端模板编号（CLIENTPROFILEID）\n   - 通知时使用的HTTP服务端模板编号（NOTIFYSVRPROFILEID）\n   - NRF服务器节点优先级（PRIORITY）\n   - 归属的NRF服务器组编号（GROUPID）\n\n3. NRF策略配置：\n   - 是否允许无号段时注册（NOSEGREG）\n\n4. NRF服务器模板选择配置：\n   - NF类型（NFTYPE）\n   - NRF服务器模板编号（NRFPROFILEID）\n\n5. 全局参数配置（如果需要）：\n   - 编号（ID）\n   - 参数值（VALUE）\n\n以上配置根据不同的网络环境和业务需求可能会有所变化。"}
{"id": 2, "query": "ZXUN RCP部署成功后，各个虚机个数都是最少个数，是否可以一次性扩容完成？有哪些注意事项？", "recall": "[1]:配置虚机弹扩\r: 配置虚机弹扩\r\n\r\n摘要\r\n\r\n在ZXUN RCP实例化成功后，各个虚机都是最少个数，商用场景需要的虚机个数一般都比实例化时的个数多，操作员需要根据商务合同，将各个虚机的数量，弹扩到要求的数量。\r\n\r\n本节介绍弹扩ZXUN RCP虚机的操作。\r\n\r\n相关信息\r\n\r\n弹性是通过弹扩（增加资源）或弹缩（减少资源）来协调系统的资源占用与系统性能间的平衡，弹性功能包括弹扩和弹缩。\r\n\r\n  * 弹扩（Scale Out）\r\n\r\n即申请所占用的虚拟资源。\r\n\r\n  * 弹缩（Scale In）\r\n\r\n即释放所占用的虚拟资源。\r\n\r\n\r\n\r\n\r\n一个NF(Network Function, 网络功能)由多个类型的虚机组成，一种类型的虚机包含多个NFS(Network Function Service, 网络功能服务)，NFS是一种可独立开发、测试、部署的单元，每个NFS包含多个SC。\r\n\r\n每个虚机可运行不同的SC(Service Component, 服务组件)数量，根据HLD中虚机数量计算需要增加的SC数量，将每种SC类型的虚机扩容到HLD配置数量，满足商用容量要求。\r\n\r\n以**商用大规格** 场景为例，ZXUN RCP涉及到弹性伸缩的虚机类型参见表1。\r\n\r\n表1 弹性虚机的伸缩类型虚机类型| 规格| SC类型名称| 单虚机SC数量（最小弹性步长）| 建议每次扩容最大SC个数  \r\n---|---|---|---|---  \r\nCDU| C-C4M32| sc-cudr-cdn-l-001/sc-cudr-cdn-l| 3| 15  \r\nsc-cudr-cdn-r-001/sc-cudr-cdn-r| 3| 15  \r\nGSU (Policy Control)| Common-C8M32| sc-pcf-pcm| 1| 5  \r\nGSU (HTTP LB)| Common-C8| sc-http-lb| 1| 5  \r\nGSU (SIG LB)| Common-C8| sc-sig| 1| 5  \r\nsc-pcf-siglb| 1| 5  \r\nGSU (CGW)| Common-C8| sc-cudr-access-cgw| 1| 4  \r\nsc-tmsp-nff| 1| 4  \r\nIPU| C8| sc-ips| 1| 5  \r\nLOG| Common-C8M24| sc-pcf-log| 1| 5  \r\nLSU| C12| sc-pcf-lsu| 1| 5  \r\n  \r\n  1. 合入UDSF插件实例化后的CDU虚机的SC类型为**sc-cudr-cdn-l-001** 和**sc-cudr-cdn-r-001** 。\r\n\r\n  2. 未合入UDSF插件实例化后的CDU虚机的SC类型为**sc-cudr-cdn-l** 和**sc-cudr-cdn-r** 。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n首次扩容的SC数量固定设置为**最小弹性步长** ，等单个虚机扩容成功后，后续扩容可以将SC数量设置为需要扩容的数量，最大不能超过**建议每次扩容最大SC个数** 。\r\n\r\n步骤\r\n\r\n打开自动扩缩容开关\r\n\r\n  1. 登录NFVO客户端，选择菜单编排→应用→VNF，在界面右侧默认显示VNF页面，如图1所示。\r\n\r\n图1 VNF页面\r\n\r\n  2.\n\n[2]:配置虚机弹扩\r: 配置虚机弹扩\r\n\r\n摘要\r\n\r\n在ZXUN RCP实例化成功后，各个虚机都是最少个数，商用场景需要的虚机个数一般都比实例化时的个数多，操作员需要根据商务合同，将各个虚机的数量，弹扩到要求的数量。\r\n\r\n本节介绍弹扩ZXUN RCP虚机的操作。\r\n\r\n相关信息\r\n\r\n弹性是通过弹扩（增加资源）或弹缩（减少资源）来协调系统的资源占用与系统性能间的平衡，弹性功能包括弹扩和弹缩。\r\n\r\n  * 弹扩（Scale Out）\r\n\r\n即申请所占用的虚拟资源。\r\n\r\n  * 弹缩（Scale In）\r\n\r\n即释放所占用的虚拟资源。\r\n\r\n\r\n\r\n\r\n一个NF(Network Function, 网络功能)由多个类型的虚机组成，一种类型的虚机包含多个NFS(Network Function Service, 网络功能服务)，NFS是一种可独立开发、测试、部署的单元，每个NFS包含多个SC。\r\n\r\n每个虚机可运行不同的SC(Service Component, 服务组件)数量，根据HLD中虚机数量计算需要增加的SC数量，将每种SC类型的虚机扩容到HLD配置数量，满足商用容量要求。\r\n\r\n以**商用大规格** 场景为例，ZXUN RCP涉及到弹性伸缩的虚机类型参见表1。\r\n\r\n表1 弹性虚机的伸缩类型虚机类型| 规格| SC类型名称| 单虚机SC数量（最小弹性步长）| 建议每次扩容最大SC个数  \r\n---|---|---|---|---  \r\nCDU| C-C4M32| sc-cudr-cdn-l-001/sc-cudr-cdn-l| 3| 15  \r\nsc-cudr-cdn-r-001/sc-cudr-cdn-r| 3| 15  \r\nGSU (Policy Control)| Common-C8M32| sc-pcf-pcm| 1| 5  \r\nGSU (HTTP LB)| Common-C8| sc-http-lb| 1| 5  \r\nGSU (SIG LB)| Common-C8| sc-sig| 1| 5  \r\nsc-pcf-siglb| 1| 5  \r\nGSU (CGW)| Common-C8| sc-cudr-access-cgw| 1| 4  \r\nsc-tmsp-nff| 1| 4  \r\nIPU| C8| sc-ips| 1| 5  \r\nLOG| Common-C8M24| sc-pcf-log| 1| 5  \r\nLSU| C12| sc-pcf-lsu| 1| 5  \r\n  \r\n  1. 合入UDSF插件实例化后的CDU虚机的SC类型为**sc-cudr-cdn-l-001** 和**sc-cudr-cdn-r-001** 。\r\n\r\n  2. 未合入UDSF插件实例化后的CDU虚机的SC类型为**sc-cudr-cdn-l** 和**sc-cudr-cdn-r** 。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n首次扩容的SC数量固定设置为**最小弹性步长** ，等单个虚机扩容成功后，后续扩容可以将SC数量设置为需要扩容的数量，最大不能超过**建议每次扩容最大SC个数** 。\r\n\r\n步骤\r\n\r\n打开自动扩缩容开关\r\n\r\n  1. 登录NFVO客户端，选择菜单编排→应用→VNF，在界面右侧默认显示VNF页面，如图1所示。\r\n\r\n图1 VNF页面\r\n\r\n  2.\n\n[3]:配置虚机弹扩\r: 配置虚机弹扩\r\n\r\n摘要\r\n\r\n在ZXUN RCP实例化成功后，各个虚机都是最少个数，商用场景需要的虚机个数一般都比实例化时的个数多，操作员需要根据商务合同，将各个虚机的数量，弹扩到要求的数量。\r\n\r\n本节介绍弹扩ZXUN RCP虚机的操作。\r\n\r\n相关信息\r\n\r\n弹性是通过弹扩（增加资源）或弹缩（减少资源）来协调系统的资源占用与系统性能间的平衡，弹性功能包括弹扩和弹缩。\r\n\r\n  * 弹扩（Scale Out）\r\n\r\n即申请所占用的虚拟资源。\r\n\r\n  * 弹缩（Scale In）\r\n\r\n即释放所占用的虚拟资源。\r\n\r\n\r\n\r\n\r\n一个NF(Network Function, 网络功能)由多个类型的虚机组成，一种类型的虚机包含多个NFS(Network Function Service, 网络功能服务)，NFS是一种可独立开发、测试、部署的单元，每个NFS包含多个SC。\r\n\r\n每个虚机可运行不同的SC(Service Component, 服务组件)数量，根据HLD中虚机数量计算需要增加的SC数量，将每种SC类型的虚机扩容到HLD配置数量，满足商用容量要求。\r\n\r\n以**商用大规格** 场景为例，ZXUN RCP涉及到弹性伸缩的虚机类型参见表1。\r\n\r\n表1 弹性虚机的伸缩类型虚机类型| 规格| SC类型名称| 单虚机SC数量（最小弹性步长）| 建议每次扩容最大SC个数  \r\n---|---|---|---|---  \r\nCDU| C-C4M32| sc-cudr-cdn-l-001/sc-cudr-cdn-l| 3| 15  \r\nsc-cudr-cdn-r-001/sc-cudr-cdn-r| 3| 15  \r\nGSU (Policy Control)| Common-C8M32| sc-pcf-pcm| 1| 5  \r\nGSU (HTTP LB)| Common-C8| sc-http-lb| 1| 5  \r\nGSU (SIG LB)| Common-C8| sc-sig| 1| 5  \r\nsc-pcf-siglb| 1| 5  \r\nGSU (CGW)| Common-C8| sc-cudr-access-cgw| 1| 4  \r\nsc-tmsp-nff| 1| 4  \r\nIPU| C8| sc-ips| 1| 5  \r\nLOG| Common-C8M24| sc-pcf-log| 1| 5  \r\nLSU| C12| sc-pcf-lsu| 1| 5  \r\n  \r\n  1. 合入UDSF插件实例化后的CDU虚机的SC类型为**sc-cudr-cdn-l-001** 和**sc-cudr-cdn-r-001** 。\r\n\r\n  2. 未合入UDSF插件实例化后的CDU虚机的SC类型为**sc-cudr-cdn-l** 和**sc-cudr-cdn-r** 。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n首次扩容的SC数量固定设置为**最小弹性步长** ，等单个虚机扩容成功后，后续扩容可以将SC数量设置为需要扩容的数量，最大不能超过**建议每次扩容最大SC个数** 。\r\n\r\n步骤\r\n\r\n打开自动扩缩容开关\r\n\r\n  1. 登录NFVO客户端，选择菜单编排→应用→VNF，在界面右侧默认显示VNF页面，如图1所示。\r\n\r\n图1 VNF页面\r\n\r\n  2.\n\n[4]:配置虚机弹扩\r: 在命令输入框中执行如下命令：\r\n\r\nINC SC:NFSNAME=\"Npcf_SMPolicyControl_0\",SCTYPE=\"sc-pcf-pcm\",SCNUM=1\r\n\r\n本示例中需要新增的GSU虚机个数为1。**sc-pcf-pcm** 的弹扩最小步长为1，即增加1个SC就增加一个GSU。如果要弹扩2个GSU，需要进行弹性的SC数量需要设置为2，以此类推。\r\n\r\n说明：\r\n\r\n首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n\r\n\r\n\r\nGSU (HTTP LB)虚机扩容SC\r\n\r\n  1. 在命令输入框中执行如下命令，查询当前GSU (HTTP LB)虚机的SC类型名称和SC个数。\r\n\r\nSHOW SCTYPE:NFSNAME=\"CommonS_HTTP_LB_0\"\r\n\r\n  2. 在命令输入框中执行如下命令：\r\n\r\nINC SC:NFSNAME=\"CommonS_HTTP_LB_0\",SCTYPE=\"sc-http-lb\",SCNUM=1\r\n\r\n本示例中需要新增的GSU虚机个数为1。**sc-http-lb** 的弹扩最小步长为1，即增加1个SC就增加一个GSU。如果要弹扩2个GSU，需要进行弹性的SC数量需要设置为2，以此类推。\r\n\r\n说明：\r\n\r\n首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n\r\n\r\n\r\nGSU (SIG LB)虚机扩容SC\r\n\r\n说明：\r\n\r\n扩容GSU (SIG LB)虚机需要扩容**sc-sig** 和**sc-pcf-siglb** 两种类型SC。先扩容**sc-pcf-siglb** 类型SC，再扩容**sc-sig** 类型SC。\r\n\r\n  * **sc-pcf-siglb** 类型SC：首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n  * **sc-sig** 类型SC：首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n\r\n\r\n\r\n  1. 在命令输入框中执行如下命令，查询当前GSU (SIG LB)虚机的SC类型名称和个数。\r\n\r\nSHOW SCTYPE:NFSNAME=\"Npcf_SIGLB_0\"\r\n\r\n  2. 在命令输入框中执行如下命令：\r\n\r\nINC SC:NFSNAME=\"Npcf_SIGLB_0\",SCTYPE=\"sc-pcf-siglb\",SCNUM=1\r\n\r\n本示例中需要新增的GSU虚机个数为1。**sc-pcf-siglb** 的弹扩最小步长为1，即增加1个SC就增加一个GSU。如果要弹扩2个GSU，需要进行弹性的SC数量需要设置为2，以此类推。\r\n\r\n\r\n\r\n  1. 在命令输入框中执行如下命令，查询当前GSU（SIG LB）虚机的SC类型名称和个数。\r\n\r\nSHOW SCTYPE:NFSNAME=\"CommonS_SIG_0\"\r\n\r\n  2.\n\n[5]:配置虚机弹扩\r: 在命令输入框中执行如下命令：\r\n\r\nINC SC:NFSNAME=\"Npcf_SMPolicyControl_0\",SCTYPE=\"sc-pcf-pcm\",SCNUM=1\r\n\r\n本示例中需要新增的GSU虚机个数为1。**sc-pcf-pcm** 的弹扩最小步长为1，即增加1个SC就增加一个GSU。如果要弹扩2个GSU，需要进行弹性的SC数量需要设置为2，以此类推。\r\n\r\n说明：\r\n\r\n首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n\r\n\r\n\r\nGSU (HTTP LB)虚机扩容SC\r\n\r\n  1. 在命令输入框中执行如下命令，查询当前GSU (HTTP LB)虚机的SC类型名称和SC个数。\r\n\r\nSHOW SCTYPE:NFSNAME=\"CommonS_HTTP_LB_0\"\r\n\r\n  2. 在命令输入框中执行如下命令：\r\n\r\nINC SC:NFSNAME=\"CommonS_HTTP_LB_0\",SCTYPE=\"sc-http-lb\",SCNUM=1\r\n\r\n本示例中需要新增的GSU虚机个数为1。**sc-http-lb** 的弹扩最小步长为1，即增加1个SC就增加一个GSU。如果要弹扩2个GSU，需要进行弹性的SC数量需要设置为2，以此类推。\r\n\r\n说明：\r\n\r\n首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n\r\n\r\n\r\nGSU (SIG LB)虚机扩容SC\r\n\r\n说明：\r\n\r\n扩容GSU (SIG LB)虚机需要扩容**sc-sig** 和**sc-pcf-siglb** 两种类型SC。先扩容**sc-pcf-siglb** 类型SC，再扩容**sc-sig** 类型SC。\r\n\r\n  * **sc-pcf-siglb** 类型SC：首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n  * **sc-sig** 类型SC：首次扩容SC_NUM步长固定设置为1，等单个虚机扩容成功后，后续扩容可以将SC_NUM步长设置为需要扩容的数量，SC_NUM最大不能超过5。\r\n\r\n\r\n\r\n\r\n  1. 在命令输入框中执行如下命令，查询当前GSU (SIG LB)虚机的SC类型名称和个数。\r\n\r\nSHOW SCTYPE:NFSNAME=\"Npcf_SIGLB_0\"\r\n\r\n  2. 在命令输入框中执行如下命令：\r\n\r\nINC SC:NFSNAME=\"Npcf_SIGLB_0\",SCTYPE=\"sc-pcf-siglb\",SCNUM=1\r\n\r\n本示例中需要新增的GSU虚机个数为1。**sc-pcf-siglb** 的弹扩最小步长为1，即增加1个SC就增加一个GSU。如果要弹扩2个GSU，需要进行弹性的SC数量需要设置为2，以此类推。\r\n\r\n\r\n\r\n  1. 在命令输入框中执行如下命令，查询当前GSU（SIG LB）虚机的SC类型名称和个数。\r\n\r\nSHOW SCTYPE:NFSNAME=\"CommonS_SIG_0\"\r\n\r\n  2.", "answer": "可以一次性扩容完成，但需要注意以下几点：\n\n1. 首次扩容的SC数量应设置为最小弹性步长。\n2. 每种SC类型的虚机扩容数量应满足HLD配置要求，以符合商用容量需求。\n3. 扩容时，SC数量的增加不能超过建议的每次扩容最大SC个数。\n4. 对于GSU (SIG LB)虚机，需要先扩容sc-pcf-siglb类型的SC，再扩容sc-sig类型的SC。\n5. 扩容操作需要通过NFVO客户端进行，确保自动扩缩容开关已打开。\n\n遵循以上注意事项，操作员可以根据商务合同一次性将各个虚机扩容到要求的数量。"}
{"id": 3, "query": "如何排查PCF侧建立专载失败，发起Rx-ASR释放问题？", "recall": "[1]:PCF侧建立专载失败，发起Rx-ASR释放\r: PCF侧建立专载失败，发起Rx-ASR释放\r\n\r\n故障现象\r\n\r\n5G语音呼叫失败，查看PCF侧信令跟踪消息，发现PCF在Rx-AAR(Answer-Auth-Request, 应答鉴权请求)触发建立专载后立即回复了Rx-ASR(Abort-Session-Request, 中断会话请求)，SBC发起Rx-STR(Session-Termination-Request, 会话终止请求)释放。\r\n\r\n故障分析\r\n\r\n可能原因如下：\r\n\r\n  * PCF侧关联HTTP客户端模板配置错误（模板ID错误）。\r\n\r\n  * SMF在发给PCF的N7-create请求消息中未携带notificationUri字段，该情况通常是SMF侧PCC功能关联的HTTP服务端模板（执行SHOW PCFDYNAMICPROFILE命令查询）和与配置的HTTP服务端模板ID（执行SHOW SERVERPROFILE命令查询）不一致导致。\r\n\r\n\r\n\r\n\r\n故障处理\r\n\r\n  1. PCF侧，执行SHOW SVCHTTPCLTPROF命令，查询关联HTTP客户端模板配置。执行SHOW CLIENTPROFILE命令，查询HTTP客户端模板ID配置。确认各服务关联的HTTP IPv4模板ID和HTTP IPv6模板ID是否与HTTP客户端模板配置的ID一致。\r\n\r\n     * 是→3\r\n\r\n     * 否→2\r\n\r\n  2. PCF侧，执行SET SVCHTTPCLTPROF命令，修改相关服务关联的HTTP IPv4模板ID和HTTP IPv6模板ID，与HTTP客户端模板配置的ID一致。查看故障是否解决。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. SMF侧检查配置，确认PCC功能模板关联的HTTP服务端模板是否与配置的HTTP服务端模板ID一致。\r\n\r\n     * 是→5\r\n\r\n     * 否→4\r\n\r\n  4. 联系SMF侧维护人员，修改PCC功能模板关联的HTTP服务端模板ID配置，确认与配置的HTTP服务端模板ID一致。查看故障是否解决。\r\n\r\n     * 是→结束\r\n\r\n     * 否→5\r\n\r\n  5. 联系中兴通讯技术支持。\r\n\r\n\r\n\r\n\r\n故障处理结果确认\r\n\r\nPCF侧建立专载正常，语音呼叫正常。\n\n[2]:配置类业务故障\r: 配置类业务故障\r\n\r\n子主题：\r\n\r\n  * SMF所有会话建立请求都失败\r\n\r\n  * PCF未下发预期规则\r\n\r\n  * PCF侧建立专载失败，发起Rx-ASR释放\r\n\r\n  * 语音呼叫失败，SBC主动触发Rx-STR释放Rx会话\r\n\r\n  * PCF始终收不到SBC侧的Rx-STR消息，呼叫流程错乱\r\n\r\n  * VoLTE呼叫场景，PCF收到Rx-AAR-U消息后，删除语音规则，导致呼叫失败\r\n\r\n  * VoNR呼叫场景，PCF更新语音规则后SMF上报规则安装失败，导致呼叫失败\r\n\r\n  * N7会话创建，PCF的Npcf_SMPolicyControl_Create Response消息回复503失败\r\n\r\n  * 语音呼叫创建，PCF的Npcf_SMPolicyControl_Create Response消息回复500失败\r\n\r\n  * 语音呼叫，PCF无法发现可用的BSF，PCF的Npcf_SMPolicyControl_Create Response消息回复500失败\r\n\r\n  * N7会话创建，PCF的Npcf_SMPolicyControl_Create Response消息回复403失败\r\n\r\n  * 用户接入失败，PCF的Npcf_SMPolicyControl_Create Response消息回复400失败\r\n\r\n  * PCF收到SMF发送Npcf_SMPolicyControl_Update消息（UEIP更新），未触发BSF注册流程消息\r\n\r\n  * PCF向NRF注册失败\n\n[3]:* 通讯故障\r: * 通讯故障\r\n    * PCF和SBC之间通讯异常\r\n  * 业务故障\r\n    * 接口类业务故障\r\n      * N7接口故障\r\n      * N15接口故障\r\n      * Rx接口故障\r\n    * 配置类业务故障\r\n      * SMF所有会话建立请求都失败\r\n      * PCF未下发预期规则\r\n      * PCF侧建立专载失败，发起Rx-ASR释放\r\n      * 语音呼叫失败，SBC主动触发Rx-STR释放Rx会话\r\n      * PCF始终收不到SBC侧的Rx-STR消息，呼叫流程错乱\r\n      * VoLTE呼叫场景，PCF收到Rx-AAR-U消息后，删除语音规则，导致呼叫失败\r\n      * VoNR呼叫场景，PCF更新语音规则后SMF上报规则安装失败，导致呼叫失败\r\n      * N7会话创建，PCF的Npcf_SMPolicyControl_Create Response消息回复503失败\r\n      * 语音呼叫创建，PCF的Npcf_SMPolicyControl_Create Response消息回复500失败\r\n      * 语音呼叫，PCF无法发现可用的BSF，PCF的Npcf_SMPolicyControl_Create Response消息回复500失败\r\n      * N7会话创建，PCF的Npcf_SMPolicyControl_Create Response消息回复403失败\r\n      * 用户接入失败，PCF的Npcf_SMPolicyControl_Create Response消息回复400失败\r\n      * PCF收到SMF发送Npcf_SMPolicyControl_Update消息（UEIP更新），未触发BSF注册流程消息\r\n      * PCF向NRF注册失败\r\n  * 网管故障\r\n    * 性能数据缺失\r\n    * 核心网网元的性能数据不完整\r\n    * 测量任务管理中存在不正常的测量任务\r\n    * 网元和EM服务器上的告警数据不一致\r\n  * 故障处理记录表\r\n  * 缩略语\r\n    * AAA\r\n    * AAR\r\n    * AMF\r\n    * ASR\r\n    * EM\r\n    * PCF\r\n    * RAR\r\n    * SBC\r\n    * SCTP\r\n    * SMF\r\n    * STR\n\n[4]:语音呼叫失败，SBC主动触发Rx-STR释放Rx会话\r: 语音呼叫失败，SBC主动触发Rx-STR释放Rx会话\r\n\r\n故障现象\r\n\r\n语音呼叫流程，SBC发起Rx-AAR(Answer-Auth-Request, 应答鉴权请求)消息建立专载，PCF侧按照配置通过N7-NotifyUpdate消息完成专载规则下发，且SMF收到专载规则后回复成功响应。\r\n\r\n等待一段时间，SMF无信息上报，SBC发起Rx-STR(Session-Termination-Request, 会话终止请求)通知PCF释放Rx接口会话，语音呼叫失败。\r\n\r\n故障分析\r\n\r\n可能的原因如下：\r\n\r\n  * SBC侧订阅了该N7-Update消息，SMF没有在N7-Update消息中上报位置信息（AN_INFO）更新。\r\n\r\n  * SBC侧订阅了该N7-Update消息，SBC触发了Rx-STR消息后，SMF在N7-Update消息中上报位置信息（AN_INFO）更新。\r\n\r\n\r\n\r\n\r\n故障处理\r\n\r\n  1. 查看SBC在Rx-AAR(Answer-Auth-Request, 应答鉴权请求)消息中的Specific-Action(513)参数是否携带ACCESS_NETWORK_INFO_REPORT(12)这个枚举值（SBC会向PCF订阅位置信息，PCF会根据规则配置给SMF下发专载规则，同时向SMF订阅位置事件AN_INFO）。\r\n\r\n     * 是→2\r\n\r\n     * 否→6\r\n\r\n  2. 查看SMF是否给PCF上报位置信息（消息样例见图1，PCF收到位置上报信息后，会给SBC发送Rx-RAR(Re-Auth-Request, 重新鉴权请求)反向通知位置信息），继续语音呼叫流程。\r\n\r\n图1 消息样例\r\n     * 是→3\r\n\r\n     * 否→5\r\n\r\n  3. 查看SMF位置上报（AN_INFO）消息是否是在SBC触发了Rx-STR之后才上报。\r\n\r\n     * 是→5\r\n\r\n     * 否→4\r\n\r\n  4. 联系SBC侧维护人员确认触发Rx-STR(Session-Termination-Request, 会话终止请求)的原因。\r\n\r\n  5. 联系SMF侧维护人与确认位置上报异常的原因。\r\n\r\n  6. 联系中兴通讯技术支持。\r\n\r\n\r\n\r\n\r\n故障处理结果确认\r\n\r\n语音呼叫正常，专载建立正常。\n\n[5]:PCF始终收不到SBC侧的Rx-STR消息，呼叫流程错乱\r: PCF始终收不到SBC侧的Rx-STR消息，呼叫流程错乱\r\n\r\n故障现象\r\n\r\n查看信令跟踪消息，PCF侧一直收不到SBC侧触发的Rx-STR(Session-Termination-Request, 会话终止请求)消息，但是在SBC侧查看跟踪可以观察到Rx-STR消息已经发出。\r\n\r\n在该情况下，PCF会根据设置定时器等待SBC侧的Rx-STR消息，导致部分流程等待超时，不符合预期正确流程。\r\n\r\n故障分析\r\n\r\n可能的原因如下：\r\n\r\nPCF的本局配置、Diameter链路配置和对端DRA配置的主机名和域名不一致，导致Rx-AAR(Answer-Auth-Request, 应答鉴权请求)里面PCF信息和Rx-AAA(Answer-Auth-Answer, 应答鉴权响应)里面PCF信息不一致。\r\n\r\n故障处理\r\n\r\n  1. 查看信令跟踪消息，确认Rx-AAR消息和Rx-AAA消息中的主机名和域名是否一致。\r\n\r\n     * 是→4\r\n\r\n     * 否→2\r\n\r\n  2. 检查PCF的本局配置、Diameter链路配置和对端DRA配置的主机名和域名是否一致。\r\n\r\n执行SHOW NFINFO命令，查询PCF的本局配置。\r\n\r\n执行SHOW DIM RCPLINK命令，查询Diameter链路配置。\r\n\r\n     * 是→4\r\n\r\n     * 否→3\r\n\r\n  3. 修改PCF的本局配置、Diameter链路配置与对端DRA配置保持一致。查看故障是否解决。\r\n\r\n执行SET NFINFO命令，修改PCF的本局配置。\r\n\r\n执行SET DIM RCPLINK命令，修改Diameter链路配置。\r\n\r\n     * 是→结束\r\n\r\n     * 否→4\r\n\r\n  4. 联系中兴通讯技术支持。\r\n\r\n\r\n\r\n\r\n故障处理结果确认\r\n\r\nPCF收到SBC侧的Rx-STR消息，呼叫流程正常。", "answer": "排查PCF侧建立专载失败，发起Rx-ASR释放问题的步骤如下：\n\n1. 检查PCF侧关联的HTTP客户端模板配置是否正确。\n   - 执行SHOW SVCHTTPCLTPROF命令，查询关联的HTTP客户端模板配置。\n   - 执行SHOW CLIENTPROFILE命令，查询HTTP客户端模板ID配置。\n   - 确认各服务关联的HTTP IPv4模板ID和HTTP IPv6模板ID是否与HTTP客户端模板配置的ID一致。\n\n2. 如果配置不一致，进行修改。\n   - 使用SET SVCHTTPCLTPROF命令，修改相关服务关联的HTTP IPv4模板ID和HTTP IPv6模板ID，使其与HTTP客户端模板配置的ID一致。\n\n3. 如果配置一致或修改后仍未解决问题，检查SMF侧的配置。\n   - 确认PCC功能模板关联的HTTP服务端模板是否与配置的HTTP服务端模板ID一致。\n\n4. 如果SMF侧的配置不一致，联系SMF侧维护人员修改。\n   - 修改PCC功能模板关联的HTTP服务端模板ID配置，确认与配置的HTTP服务端模板ID一致。\n\n5. 如果以上步骤都不能解决问题，联系技术支持。\n   - 联系中兴通讯技术支持寻求进一步的帮助。\n\n通过以上步骤，可以排查并处理PCF侧建立专载失败，发起Rx-ASR释放的问题。"}
{"id": 4, "query": "Npcf_SMPolicyControl服务包含哪些操作？", "recall": "[1]:服务操作解释\r: Delete| 用于去注册流程。AMF调用Npcf_UEPolicyControl_Delete向PCF请求删除UE策略关联，释放相关资源。  \r\nUpdate| 用于AMF发起的UE策略关联更新流程。当策略控制请求触发器满足预置条件，或者AMF变更，新AMF定位到原PCF，AMF调用Npcf_UEPolicyControl_Update，向PCF上报策略执行情况，或者更新AMF信息。PCF根据AMF新上报的信息更新UE策略关联，并将其下发给AMF。  \r\n  \r\n子主题：\r\n\r\n  * Npcf_SMPolicyControl_Create\r\n\r\n  * Npcf_SMPolicyControl_UpdateNotify\r\n\r\n  * Npcf_SMPolicyControl_Delete\r\n\r\n  * Npcf_SMPolicyControl_Update\r\n\r\n  * Npcf_AMPolicyControl_Create\r\n\r\n  * Npcf_AMPolicyControl_UpdateNotify\r\n\r\n  * Npcf_AMPolicyControl_Delete\r\n\r\n  * Npcf_AMPolicyControl_Update\r\n\r\n  * Npcf_UEPolicyControl_Create\r\n\r\n  * Npcf_UEPolicyControl_UpdateNotify\r\n\r\n  * Npcf_UEPolicyControl_Delete\r\n\r\n  * Npcf_UEPolicyControl_Update\n\n[2]:Npcf_SMPolicyControl_UpdateNotify\r: Npcf_SMPolicyControl_UpdateNotify\r\n\r\n服务操作| 操作语义| 服务操作的解释  \r\n---|---|---  \r\nNpcf_SMPolicyControl_UpdateNotify| Subscribe/Notify| 当PCF收到Rx/N5接口消息，或者PCF内部定时器/用户签约信息变更，触发策略变更时，PCF调用Npcf_SMPolicyControl_UpdateNotify，指示SMF更新或者删除SM策略关联。\r\n\r\n  * 对于SM策略关联更新流程：PCF发送POST请求消息中包含SmPolicyNotification数据类型的对象。如果成功，SMF应响应状态码“200 OK”，或者“204 No Content”。如果失败，SMF应返回400/401/404/411/413/415/500/503的HTTP状态码，并且消息体应包含一个ErrorReport数据结构。\r\n  * 对于SM策略关联删除流程：PCF发送POST请求消息中包含TerminationNotification数据类型的对象。SMF收到请求消息后，应响应状态码“204 No Content”。之后SMF调用Npcf_SMPolicyControl_Delete操作，删除SM策略关联。如果失败，PCF应返回400/401/404/411/413/415/500/503的HTTP状态码，并且消息体应包含一个ProblemDetails数据结构。\n\n[3]:Npcf_SMPolicyControl_Create\r: Npcf_SMPolicyControl_Create\r\n\r\n服务操作| 操作语义| 服务操作的解释  \r\n---|---|---  \r\nNpcf_SMPolicyControl_Create| Request/Response| 当SMF收到AMF发送的Nsmf_PDUSession_CreateSMContext Request请求创建SM上下文时，如果SMF判断需要向PCF获取PCC规则，则SMF调用Npcf_SMPolicyControl_Create，请求创建SM策略关联。SMF发送POST请求消息中包含SmPolicyContextData数据类型的对象。如果成功，PCF应响应状态码“201 Created”，并且PUT响应的消息体应包含SmPolicyDecision数据类型的对象，其中包含PccRule和policyCtrlReqTriggers数据类型的对象。如果失败，PCF应返回400/403/404/411/413/415/500/503的HTTP状态码，并且消息体应包含一个ProblemDetails数据结构。\n\n[4]:Npcf_SMPolicyControl_Update\r: Npcf_SMPolicyControl_Update\r\n\r\n服务操作| 操作语义| 服务操作的解释  \r\n---|---|---  \r\nNpcf_SMPolicyControl_Update| Request/Response| 当策略控制请求触发器满足预置条件时，SMF调用Npcf_SMPolicyControl_Update，向PCF上报策略执行情况，PCF根据SMF新上报的信息更新SM策略关联，并将其下发给SMF。SMF发送POST请求消息中包含SmPolicyUpdateContextData数据类型的对象，其中包含repPolicyCtrlReqTriggers数据类型的对象。如果成功，PCF应响应状态码“200 OK”，并且PUT响应消息体应包含SmPolicyDecision数据类型的对象。如果失败，PCF应返回400/401/403/411/413/415/500/503的HTTP状态码，并且消息体应包含一个ProblemDetails数据结构。\n\n[5]:服务操作解释\r: 服务操作解释\r\n\r\n每个NF可以提供多个服务，每个服务中定义了多个服务操作（Service Operation），NF的同一种Service Operation可以通过服务化接口被其他多个NF调用，实现特定功能。Npcf接口上提供的各服务以及各服务支持的服务操作见下表：\r\n\r\n服务名称| 服务操作| 服务操作的解释  \r\n---|---|---  \r\nNpcf_SMPolicyControl| Create| 用于PDU会话建立流程。SMF调用Npcf_SMPolicyControl_Create向PCF发送PDU会话相关信息，请求创建SM策略关联。  \r\nUpdateNotify| 用于PCF发起的PDU会话更新流程。当PCF收到Rx/N5接口消息，或者PCF内部定时器/用户签约信息变更，触发策略变更时，PCF调用Npcf_SMPolicyControl_UpdateNotify，指示SMF更新或者删除SM策略关联。  \r\nDelete| 用于PDU会话释放流程。SMF调用Npcf_SMPolicyControl_Delete向PCF请求删除PDU会话，释放相关资源。  \r\nUpdate| 用于SMF发起的PDU会话更新流程。当策略控制请求触发器满足预置条件时，SMF调用Npcf_SMPolicyControl_Update，向PCF上报策略执行情况，PCF根据SMF新上报的信息更新SM策略关联，并将其下发给SMF。  \r\nNpcf_AMPolicyControl| Create| 用于注册流程和AMF变更流程。在注册流程中，AMF调用Npcf_AMPolicyControl_Create向PCF提供UE上下文信息，请求创建AM策略关联。在AMF变更流程中，新AMF定位不到或者没有获取到PCF ID， 则AMF会选择一个新PCF。AMF调用Npcf_AMPolicyControl_Create向PCF提供UE上下文信息，请求创建AM策略关联。  \r\nUpdateNotify| 用于PCF发起的AM策略关联更新流程。PCF内部定时器或签约变更触发策略变更时，PCF调用Npcf_AMPolicyControl_UpdateNotify，指示AMF更新或者删除AM策略关联。  \r\nDelete| 用于去注册流程。AMF调用Npcf_AMPolicyControl_Delete向PCF请求删除AM策略关联，释放相关资源。  \r\nUpdate| 用于AMF发起的AM策略关联更新流程。当策略控制请求触发器满足预置条件，或者AMF变更，新AMF定位到原PCF，AMF调用Npcf_AMPolicyControl_Update，向PCF上报策略执行情况，或者更新AMF信息。PCF根据AMF新上报的信息更新AM策略关联，并将其下发给AMF。  \r\nNpcf_UEPolicyControl| Create| 用于注册流程和AMF变更流程。在注册流程中，AMF调用Npcf_UEPolicyControl_Create向PCF提供UE上下文信息，请求创建UE策略关联。在AMF变更流程中，新AMF定位不到或者没有获取到PCF ID， 则AMF会选择一个新PCF。AMF调用Npcf_UEPolicyControl_Create向PCF提供UE上下文信息，请求创建UE策略关联。  \r\nUpdateNotify| 用于PCF发起的UE策略关联更新流程。PCF内部定时器或签约变更触发策略变更时，PCF调用Npcf_UEPolicyControl_UpdateNotify，指示AMF更新或者删除UE策略关联。  \r\nDelete| 用于去注册流程。AMF调用Npcf_UEPolicyControl_Delete向PCF请求删除UE策略关联，释放相关资源。", "answer": "Npcf_SMPolicyControl服务包含以下操作：\n\n1. Create：用于PDU会话建立流程，请求创建SM策略关联。\n2. UpdateNotify：用于PCF发起的PDU会话更新流程，指示SMF更新或删除SM策略关联。\n3. Delete：用于PDU会话释放流程，请求删除PDU会话，释放相关资源。\n4. Update：用于SMF发起的PDU会话更新流程，向PCF上报策略执行情况，PCF根据上报信息更新SM策略关联。"}
{"id": 5, "query": "什么是裸金属", "recall": "[1]:发布裸金属\r: 发布裸金属\r\n\r\n摘要\r\n\r\n裸金属是没有安装操作系统的一组硬件资源（例如刀片等），可供直接部署并进行管理。\r\n\r\n本节描述发布裸金属的操作步骤。\r\n\r\n前提\r\n\r\n使用获得相应操作权限的账户登录TECS Director。\r\n\r\n相关信息\r\n\r\n发布裸金属的步骤中需要使用多种角色权限，具体如下：\r\n\r\n步骤| 角色权限  \r\n---|---  \r\n上传镜像| 领域管理员  \r\n发布虚机规格| 领域管理员  \r\n添加服务器| Provider系统操作权限  \r\n注册服务器| 领域管理员  \r\n创建带裸金属配额的VDC| 领域管理员/业务经理  \r\n发布裸金属| 组织/子组织管理员  \r\n裸金属的关机、开机、删除| 组织/子组织管理员  \r\n  \r\n步骤\r\n\r\n上传镜像-裸金属\r\n\r\n  1. 参见上传镜像中的操作步骤，上传镜像文件，如图1所示。\r\n\r\n说明：\r\n\r\n裸金属镜像包括内核镜像、内存镜像和操作系统镜像三种类型，上传时都需要勾选ironic使用。\r\n\r\n如果...| 那么...  \r\n---|---  \r\n上传内核镜像| 镜像格式和容器格式选择aki   \r\n上传内存镜像| 镜像格式和容器格式选择ari  \r\n上传操作系统镜像| 根据实际选择镜像格式和容器格式  \r\n图1 上传镜像-裸金属\r\n\r\n  2. 在云镜像页面中单击发布镜像按钮，打开发布镜像页面。\r\n\r\n  3. 单击选择镜像文件按钮，打开镜像文件详情页面，选择需要发布该镜像的云环境。\r\n\r\n  4. 单击确认按钮，进入发布镜像页面。\r\n\r\n  5. 单击发布，发布云镜像。\r\n\r\n\r\n\r\n\r\n创建虚机规格-裸金属\r\n\r\n  1. 参见创建虚机规格中的操作步骤，创建虚机规格。\r\n\r\n  2. 勾选裸金属选项，并且虚机规格需要与裸金属主机的规格一致。\r\n\r\n  3. 单击创建按钮。\r\n\r\n\r\n\r\n\r\n添加服务器\r\n\r\n  1. 使用领域管理员账户登录TECS Director，单击TECS Director顶部菜单栏中的按钮，选择基础设施→数据中心→云环境，打开云环境页面。\r\n\r\n  2. 找到在3中发布了裸金属镜像的云环境，单击URL列的网址，跳转到Provider系统的硬件管理页面，如图2所示。\r\n\r\n图2 硬件管理\r\n\r\n  3. 在左侧导航栏中单击服务器→架式服务器节点，打开架式服务器页面。\r\n\r\n  4. 单击添加按钮，打开添加机架服务器页面，如图3所示。\r\n\r\n图3 添加机架服务器\r\n\r\n  5. 填入服务器的参数信息，单击确定按钮。\r\n\r\n  6. 添加完成后，在左侧导航树上单击服务器→概览，打开服务器概览页面。\r\n\r\n  7. 在服务器列表中找到刚添加的服务器，单击操作列的设置主机类型，打开修改主机类型对话框，如图4所示。\r\n\r\n图4 修改主机类型\r\n\r\n  8. 将主机类型设置为未分配，单击确定按钮。\r\n\r\n\r\n\r\n\r\n注册服务器\r\n\r\n  1.\n\n[2]:发布裸金属\r: 将主机类型设置为未分配，单击确定按钮。\r\n\r\n\r\n\r\n\r\n注册服务器\r\n\r\n  1. 使用领域管理员账户登录TECS Director，在导航栏中选择物理设备→服务器，默认打开概览页面。\r\n\r\n  2. 在服务器列表中找到之前添加的服务器项，单击操作列中的注册按钮，打开注册服务器页面，如图5所示。\r\n\r\n图5 注册服务器\r\n\r\n  3. 设置内核镜像和内存镜像，部署驱动类型选择PXE，单击注册按钮。\r\n\r\n  4. 在导航栏中选择基础设施→计算节点，在左侧导航栏中单击计算→裸金属服务器 ，打开裸金属服务器页面，可以看到刚才注册的裸金属处于**inpsecting** 状态，等待注册完成。\r\n\r\n  5. 注册完成后，裸金属状态切换为manageable，单击操作列的状态迁移，如图6所示，弹出状态迁移页面。\r\n\r\n图6 裸金属状态\r\n\r\n  6. 在状态迁移页面，选择操作下拉列表框中的provide，完成裸金属纳管，如图7所示。此时裸金属状态切换为available。\r\n\r\n图7 裸金属状态迁移\r\n\r\n\r\n\r\n\r\n创建带裸金属配额的VDC\r\n\r\n  1. 参见创建VDC中操作步骤添加VDC(Virtual Data Center, 虚拟数据中心)，在设置资源配额时设置裸金属数量。\r\n\r\n\r\n\r\n\r\n发布裸金属\r\n\r\n  1. 使用组织管理员账户登录TECS Director，单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→组织管理，打开组织管理页面，选择待发布裸金属的组织，单击组织名称，打开组织详情页面，如图8所示。\r\n\r\n图8 组织详情页面\r\n\r\n  2. 单击详情页面中的裸金属图标，打开裸金属页面。\r\n\r\n  3. 单击+发布裸金属按钮，打开发布裸金属页面，如图9所示。\r\n\r\n图9 发布裸金属\r\n\r\n  4. 选择带裸金属配额的VDC(Virtual Data Center, 虚拟数据中心)，云环境、裸金属规格、操作系统镜像和网卡等信息，单击发布裸金属按钮。发布完成后裸金属状态显示为active。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n  * 在裸金属列表的操作列选择不同的菜单项，可对裸金属进行硬重启、软重启、关机、开机、删除、锁定、解锁操作。\r\n\r\n  * 发布完成的裸金属支持编辑VIP\r\n\r\n    1. 在组织详情页面中单击虚拟机图标，打开虚拟机页面。\r\n\r\n    2. 单击虚拟机的名字，打开该虚拟机的详情页面。\r\n\r\n    3. 单击网卡，切换到网卡页签，如图10所示。\r\n\r\n图10 网卡页签\r\n\r\n    4. 单击网卡IP所在行操作列中的下拉列表框，选择配置VIP，弹出配置VIP对话框。\r\n\r\n    5. 根据规划配置相关参数，单击保存按钮。\n\n[3]:绑定裸金属端口\r: 绑定裸金属端口\r\n\r\n摘要\r\n\r\n本节描述裸金属端口绑定的配置过程。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择基础设施→虚拟资源→计算，默认打开可用域页面，在左侧导航树中选择计算→裸金属服务器，打开裸金属服务器页面，如图1所示。\r\n\r\n图1 裸金属页面\r\n\r\n  2. （可选）如果待绑定裸金属状态列下的状态不是manageable，则单击操作列下的**状态迁移** ，在打开的**状态迁移** 对话框中选择manageable，单击**确认** ，如图2所示。\r\n\r\n图2 修改裸金属状态\r\n\r\n说明：\r\n\r\n只有当裸金属的状态为manageable时，才能进行绑定操作。如果状态迁移对话框中没有manageable选项，则联系研发人员进行查改。\r\n\r\n  3. 对于待绑定端口的裸金属，单击操作列下的**设置bonding** ，进入该裸金属的信息页面，如图3和图4所示。\r\n\r\n图3 设置bonding图4 裸金属信息页面\r\n\r\n  4. （可选）如果没有裸金属需要绑定的端口组，则先创建需要的端口组。\r\n\r\n    1. 在**端口组** 选项卡页面中单击**创建端口组** ，如图5所示。\r\n\r\n图5 创建端口组\r\n\r\n    2. 根据规划填写参数，单击**添加** 按钮。\r\n\r\n  5. 单击**端口** 选项卡，对于待绑定的端口，在操作列下单击**绑定组** ，打开**绑定组** 页面，如图6所示。\r\n\r\n图6 绑定端口组\r\n\r\n如果没有需要绑定的端口组，可单击**绑定组** 页面上的**创建端口组** 进行端口组创建，操作方法同步骤4。\r\n\r\n  6. 选择需要绑定的端口组，单击**绑定** 。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n  * 在裸金属页面单击某个裸金属名称，可进入该裸金属的详细信息页面。\r\n\r\n  * 在某个裸金属详细页信息面中，单击**端口组** 选项卡可查看端口组信息，单击，如图7所示，可查看更多端口组信息（例如：MAC地址，端口数，模式，uuId，描述），如图8所示。\r\n\r\n图7 查看端口组信息图8 端口组信息\r\n\r\n  * 在端口选项卡页面中，在操作列下单击解绑定，打开解绑定对话框，单击解绑可将裸金属端口与端口组解绑。\r\n\r\n图9 裸金属端口解绑\n\n[4]:裸金属BMS\r: 裸金属BMS\r\n\r\n基本信息\r\n\r\n  * 产品大类：云基础计算\r\n\r\n  * 产品小类：计算\r\n\r\n  * 产品名称：裸金属服务器\r\n\r\n  * 产品ID：zte-bms\r\n\r\n  * 产品标题：裸金属服务器\r\n\r\n  * 产品描述：为用户提供专属物理服务器\r\n\r\n  * 云环境类型：openstack\r\n\r\n\r\n\r\n\r\n页面路由信息\r\n\r\n  * 产品申请页面URL：/ecm-portal/main/zte-bms/add\r\n\r\n  * 产品资源详情页面URL：-\r\n\r\n  * 产品控制台页面URL：/ecm-portal/main/zte-bms/list\r\n\r\n  * 产品管理门户页面URL：-\r\n\r\n\r\n\r\n\r\n资源实施接口信息\r\n\r\n  * 微服务名：zte-bms\r\n\r\n  * 版本号：-\r\n\r\n  * 资源申请接口URL：/api/v1.0/zte-bms/resourcesApplication\r\n\r\n  * 资源变配接口URL：-\r\n\r\n  * 资源释放接口URL：POST /api/v1.0/zte-bms/resourcesRelease\r\n\r\n  * 资源管理接口URL：-\r\n\r\n\r\n\r\n\r\n配额项\r\n\r\nkey| 名称| 单位  \r\n---|---|---  \r\nbm_core| 裸机核数| 个  \r\nbm_ram| 裸机内存| GB  \r\nbare_metal| 裸机实例| 个  \r\nbm_local_gb| 裸机本地存储| GB\n\n[5]:裸金属\r: 裸金属\r\n\r\n子主题：\r\n\r\n  * C100790001 裸金属CPU核数\r\n\r\n  * C100791001 裸金属内存总量\r\n\r\n  * C100791002 裸金属内存使用量\r\n\r\n  * C100792001 裸金属磁盘总量\r\n\r\n  * C100792002 裸金属磁盘使用量", "answer": "裸金属是一组没有安装操作系统的硬件资源，例如刀片服务器等，它们可以直接被部署和管理。裸金属服务器为用户提供专属的物理服务器资源，可以支持用户直接在其上安装和运行操作系统。"}
{"id": 6, "query": "RCP策略决策包括哪些策略类型？", "recall": "[1]:场景\r: 场景\r\n\r\n概述\r\n\r\nRCP网元根据策略决策输出动作的作用或输出动作的适用范围，将策略决策划分为不同的策略类型。场景通过场景的入口可以确定一系列策略规则的使用前提，这些策略规则可以属于不同的策略类型。这样就实现了在一个场景下可以输出不同作用或使用范围的动作。\r\n\r\n本节主要介绍如何配置场景。\r\n\r\n操作步骤\r\n\r\n  1. 登录**RCP策略管理** 页面，如图1所示。\r\n\r\n图1 策略管理页面\r\n\r\n  2. 单击场景，弹出场景页面，如图2所示。\r\n\r\n图2 场景页面\r\n\r\n  3. 单击按钮，弹出场景参数页面，如图3所示。\r\n\r\n图3 场景参数页面\r\n\r\n场景参数说明参见表1。\r\n\r\n表1 场景参数说明参数名称| 参数说明  \r\n---|---  \r\n场景名称| 该参数用于唯一标识一个场景，场景名称可修改。  \r\n使能开关| 该参数用于控制对应的场景配置是否生效。新增一个场景时，使能开关默认打开。将使能开关关闭后，对应的场景配置仍然保留，但不生效。若后续希望使用该场景，只需将使能开关打开并保存即可。  \r\n入口| 通过入口可以确定场景下策略规则的使用前提。\r\n     * 每个场景最多设置3个入口。\r\n     * 多个场景的入口不能完全相同。  \r\n入口类型| 表示入口条件中策略变量的类别。先确定入口类型，之后可以快速选择入口条件的策略变量。  \r\n已选入口| 表示入口条件的策略变量。  \r\n取值| 表示入口条件的参考值。  \r\n策略类型| RCP网元将策略规则划分为不同的策略类型。不同策略类型的策略规则可以输出不同作用或不同应用范围的动作参数。该参数用于确定场景下需要关联的策略规则的类型。可多选。\r\n     * 套餐动态优先级决策：可以动态调整套餐的优先级或使套餐失效。该类型的策略规则的条件表达式中应该包含套餐ID条件，表示这个规则是用于调整这个套餐的优先级。在RCP网元为用户进行套餐选择时使用。例如，用户签约多个套餐，每个套餐可以提供不同的QoS。运营者希望随时能为用户提供最高Qos的套餐。这时，RCP需要实时的根据每个套餐的用量消耗情况动态调整套餐的动态优先级，RCP需要配置这种策略类型的规则。\r\n     * 业务预下发控制策略：该类型的策略规则的输出动作决定了RCP网元需要对哪些受控业务下发PCC规则。目前RCP网元提供两种方式：一是根据用户的签约业务进行下发，二是根据指定的受控业务标识下发。\n\n[2]:规则\r: 规则\r\n\r\n概述\r\n\r\n一个策略规则包含一个条件表达式和一个动作参数集，并且策略规则具有优先级属性。当用户满足某种触发条件时，RCP网元执行其动作参数集中指定的动作参数。\r\n\r\n本节介绍如何配置策略规则。\r\n\r\n操作步骤\r\n\r\n  1. 登录**RCP策略管理** 页面，如图1所示。\r\n\r\n图1 策略管理页面\r\n\r\n  2. 单击规则，弹出规则页面，如图2所示。\r\n\r\n图2 规则页面\r\n\r\n  3. 单击按钮，设置规则参数，如图3所示。\r\n\r\n图3 规则参数配置页面\r\n\r\n规则参数说明参见表1。\r\n\r\n表1 规则参数说明参数名称| 参数说明  \r\n---|---  \r\n规则名称| 唯一标识一个策略规则，名称可修改。  \r\n优先级| 确定一个策略规则的优先级。在同一场景中存在多个同类型的策略规则时，使用优先级确定策略规则的执行顺序。数值高则优先级高。  \r\n策略类型| RCP网元将策略规则划分为不同的策略类型。不同策略类型的策略规则可以输出不同作用或不同应用范围的动作参数。该参数用于确定场景下需要关联的策略规则的类型。可多选。\r\n     * 套餐动态优先级决策：可以动态调整套餐的优先级或使套餐失效。该类型的策略规则的条件表达式中应该包含套餐ID条件，表示这个规则是用于调整这个套餐的优先级。在RCP网元为用户进行套餐选择时使用。例如，用户签约多个套餐，每个套餐可以提供不同的QoS。运营者希望随时能为用户提供最高Qos的套餐。这时，RCP需要实时的根据每个套餐的用量消耗情况动态调整套餐的动态优先级，RCP需要配置这种策略类型的规则。\r\n     * 套餐预定义策略：该类型的策略规则用于向指定套餐下发PCC规则。\r\n     * 业务预下发控制策略：该类型的策略规则的输出动作决定了RCP网元需要对哪些受控业务下发PCC规则。目前RCP网元提供两种方式：一是根据用户的签约业务进行下发，二是根据指定的受控业务标识下发。\r\n     * AMF接入移动策略：该类型的策略规则用于RCP网元向AMF下发N15会话的策略参数。\r\n     * UE路由选择策略：该类型的策略规则用于RCP网元向AMF下发UE路由选择的策略参数。\r\n     * N7会话决策：该类型的策略规则可以向SMF下发N7会话的QoS参数和计费地址等参数。\r\n     * N7业务决策：改类型的策略规则可以向SMF下发对指定的受控业务下发N7 PCC规则参数。\r\n     * 业务控制策略：该类型的策略规则可以对指定的受控业务下发PCC规则参数。\n\n[3]:场景\r: 目前RCP网元提供两种方式：一是根据用户的签约业务进行下发，二是根据指定的受控业务标识下发。\r\n     * AMF接入移动策略：该类型的策略规则可以下发N15接口的RFSP索引、允许和限制区域。\r\n     * N7会话控制决策：该类型的策略规则可以下发N7会话的QoS参数和计费地址等参数。\r\n     * N7业务控制决策：改类型的策略规则可以对指定的受控业务下发N7 PCC规则参数。\r\n     * Gx业务控制策略：该类型的策略规则可以对指定的受控业务下发PCC规则参数。目前RCP网元可以下发Gx、Sd接口上的业务规则参数。\r\n     * Gx承载控制策略：该类型的策略规则可以下发承载的QoS参数。目前使用的比较少。\r\n     * Gx会话控制策略：该类型的策略规则可以下发会话的QoS参数和计费地址等参数。\r\n     * 通知策略：该类型的策略规则表示在满足特定条件时，RCP网元按照输出动作参数中的通知内容和通知方式向用户发送通知。同时RCP网元提供通知防骚扰功能，所需要的防骚扰参数也可以通过输出的动作参数确定。\r\n     * 业务级用量监控策略：3GPP协议中规定PCEF/SMF可以上报两个级别的用量，分别是业务级和会话级。该类型的策略规则用于RCP网元向PCEF下发业务级的用量监控参数，使PCEF在检测到用量达到监控阀值时能够向RCP网元上报用量。\r\n     * 会话级用量监控策略：该类型的策略规则用于RCP网元向PCEF下发会话级的用量监控参数，使PCEF在检测到用量达到监控阀值时能够向RCP网元上报用量。\r\n     * Rx接口接纳策略：该类型的策略规则用于RCP网元控制Rx接口的AF会话是否允许接入。在预置的条件下，RCP可以拒绝接入用户的AF会话。\r\n     * Gx黑白名单策略：是私有接口上支持的策略类型。在ZTE PCEF上预先配置一些策略集合，每个集合使用一个ID表示。通过配置这种类型的策略规则，在满足特定条件时，RCP网元仅下发一个集合ID，ZTE PCEF可以使用ID对应的集合中的策略。\r\n     * 套餐预定义策略：该类型的策略规则用于向指定套餐下发PCC规则。\r\n     * UE路由选择策略：该类型的策略规则用于RCP网元向AMF下发UE路由选择的策略参数。\r\n选择一种策略类型，在场景查询页面下方会弹出相应的策略查询页面，如操作步骤4。  \r\n场景描述| 可以对场景进行简单描述，方便查看。  \r\n  \r\n  4.\n\n[4]:# ADD DM COND \r: * GX_EVENT（事件上报）：枚举型。该策略变量表示RCP网元的对端网元上报的所有事件， \r\n      * SGSN_CHANGE（SGSN相关信息改变）\r\n      * QOS_CHANGE（QoS相关信息改变）\r\n      * RAT_CHANGE（RAT改变）\r\n      * TFT_CHANGE（TFT改变）\r\n      * PLMN_CHANGE（PLMN相关信息改变）\r\n      * LOSS_OF_BEARER（承载丢失）\r\n      * RECOVERY_OF_BEARER（承载恢复）\r\n      * IP_CAN_CHANGE（IP-CAN类型改变）\r\n      * QOS_CHANGE_EXCEEDING_AUTHORIZATION（Qos超出授权）\r\n      * RAI_CHANGE（RAI相关信息改变）\r\n      * USER_LOCATION_CHANGE（用户位置信息改变）\r\n      * OUT_OF_CREDIT（信用度不足）\r\n      * REALLOCATION_OF_CREDIT（信用度被重新分配）\r\n      * REVALIDATION_TIMEOUT（Revalidation_Time 超时）\r\n      * UE_IP_ADDRESS_ALLOCATE（用户地址被重新分配）\r\n      * UE_IP_ADDRESS_RELEASE（用户地址被释放）\r\n      * DEFAULT_EPS_BEARER_QOS_CHANGE（默认EPS承载QoS改变）\r\n      * AN_GW_CHANGE（接入网关改变）\r\n      * SUCCESSFUL_RESOURCE_ALLOCATION（资源分配成功）\r\n      * RESOURCE_MODIFICATION_REQUEST（UE发起承载资源变更）\r\n      * PGW_TRACE_CONTROL（PGW跟踪激活或去激活）\r\n      * UE_TIME_ZONE_CHANGE（用户时区变化）\r\n      * USAGE_REPORT（用量上报）\r\n      * TAI_CHANGE（TAI改变）\r\n      * ECGI_CHANGE（ECGI改变）\r\n      * CHARGING_CORRELATION_EXCHANGE（计费关联改变）\r\n      * TIMEZONE_CHANGE（时区变化）\r\n      * APN_AMBR_MODIFICATION_FAILURE（APN AMBR修改失败）\r\n      * USER_CSG_INFORMATION_CHANGE（用户小区信息改变）\r\n      * DEFAULT_EPS_BEARER_QOS_MODIFICATION_FAILURE（默认EPS承载QoS修改失败）\r\n      * USER_CSG_HYBRID_SUBSCRIBED_INFORMATION（用户小区签约信息改变）\r\n      * USER_CSG_HYBRID_UNSUBSCRIBED_INFORAMTION（用户小区未签约信息改变）\r\n      * ROUTING_RULE_CHANGE（路由安装规则改变）\r\n      * MAX_MBR_APN_AMBR_CHANGE（最大APN AMBR改变）\r\n      * APPLICATION_START（应用开始）\r\n      * APPLICATION_STOP（应用停止）\r\n      * ADC_REVALIDATION_TIMEOUT（）\r\n      * SUBNET_CHANGE（子网改变）\r\n      * TETHERING_START（无线共享启动）\r\n      * TETHERING_STOP（无线共享停止）\r\n      * TETHERING_COUNT_CHANGE（用户共享下挂数量变更）\r\n      * CHANGE_OF_UE_PRESENCE_IN_PRESENCE_REPORTING_AREA_REPORT（PRA状态变更上报）\r\n      * HOTSPOT_SHARE_START（热点共享启动）\r\n    * ATTACH_DETACH_PERIOD_EVENT（用户上下线周期事件）：枚举型。该策略变量表示用户上下线周期事件。通常在通知策略规则中使用。 \r\n      * FIRST_ATTACH_EACH_DAY（每天第一次上线）\r\n      * FIRST_ATTACH_EACH_WEEK（每周第一次上线）\r\n      * FIRST_ATTACH_EACH_MONTH（每月第一次上线）\r\n      * ATTACH_EACH_TIMES（每次上线）\r\n      * DETACH_EACH_TIMES（每次下线）\r\n    * REDIREC_CONFIRM_STATE（重定向确认状态）：枚举型。该策略变量表示重定向是否被确认。 \r\n      * UNCONFIRMED（未确认）\r\n    * HPCRF_CHARG_RULE_NAME（H-PCRF决策业务规则名）：1~31位字符串型。该策略变量表示当RCP网元位于拜访网络时，由归属地PCRF决策出的业务规则名。\n\n[5]:# ADD DM RULE \r: # ADD DM RULE \r\n\r\n## 命令功能\r\n\r\n该命令用于增加规则。\r\n\r\nRCP网元要实现策略控制，需要先使用本命令配置规则。然后，将规则应用在场景中。配置完成后，RCP可以进行策略决策。\r\n\r\n## 注意事项\r\n\r\n该命令的执行前提条件：条件、动作参数必须已经配置。\r\n\r\n执行该命令后传表即可生效。\r\n\r\n## 输入参数说明\r\n\r\n标识 | 名称 | 类型 | 说明  \r\n---|---|---|---  \r\nNAME | 规则名称 | 参数可选性:必选参数；参数类型:字符型；参数范围为:1~127个字符。 | 本参数用于标识一个规则。规则名称可以根据规划配置或由运维人员自行定义。  \r\nPLCTYPE | 策略类型 | 参数可选性:必选参数；参数类型:枚举。 参见枚举定义。 | 本参数用于确定当前规则的类型，具体如下所示：\r\n\r\n  * Rx接口接纳策略：该类型的策略规则用于RCP网元控制Rx接口会话是否允许接入。在满足条件表达式的情况下，RCP可以拒绝接入Rx接口会话。\r\n  * 业务预下发控制策略：该类型的策略规则的输出动作决定了RCP网元需要对哪些受控业务下发PCC规则。目前RCP网元提供两种方式：一是根据用户的签约业务进行下发，二是根据指定的受控业务标识下发。\r\n  * 业务控制策略：该类型的策略规则可以对指定的受控业务下发PCC规则参数。目前RCP网元可以下发Gx、Sd接口上的业务规则参数。\r\n  * 承载控制策略：该类型的策略规则可以下发承载的QoS参数。目前使用的比较少。\r\n  * 黑白名单策略：是私有接口上支持的策略类型。在ZTE PCEF上预先配置一些策略集合，每个集合使用一个ID表示。通过配置这种类型的策略规则，在满足条件表达式的情况下，RCP网元仅下发一个集合ID，ZTE PCEF可以使用ID对应的集合中的策略。\r\n  * 会话控制策略：该类型的策略规则可以下发会话的QoS参数和计费地址等参数。\r\n  * 通知策略：该类型的策略规则表示在满足条件表达式的情况下，RCP网元按照输出动作参数中的通知内容和通知方式向用户发送通知。同时RCP网元提供通知防骚扰功能，所需要的防骚扰参数也可以通过输出的动作参数确定。\r\n  * 业务级用量监控策略：3GPP协议中规定PCEF可以上报两个级别的用量，分别是业务级和会话级。该类型的策略规则用于RCP网元向PCEF下发业务级的用量监控参数，使PCEF在检测到用量达到监控阀值时能够向RCP网元上报用量。", "answer": "RCP策略决策包括以下策略类型：\n\n1. 套餐动态优先级决策：可以动态调整套餐的优先级或使套餐失效。\n2. 业务预下发控制策略：决定了RCP网元需要对哪些受控业务下发PCC规则。\n3. AMF接入移动策略：用于下发N15接口的RFSP索引、允许和限制区域。\n4. N7会话控制决策：可以下发N7会话的QoS参数和计费地址等参数。\n5. N7业务控制决策：可以对指定的受控业务下发N7 PCC规则参数。\n6. Gx业务控制策略：可以对指定的受控业务下发PCC规则参数。\n7. Gx承载控制策略：可以下发承载的QoS参数。\n8. Gx会话控制策略：可以下发会话的QoS参数和计费地址等参数。\n9. 通知策略：在满足特定条件时，RCP网元按照输出动作参数中的通知内容和通知方式向用户发送通知。\n10. 业务级用量监控策略：用于下发业务级的用量监控参数。\n11. 会话级用量监控策略：用于下发会话级的用量监控参数。\n12. Rx接口接纳策略：用于控制Rx接口的AF会话是否允许接入。\n13. Gx黑白名单策略：是私有接口上支持的策略类型。\n14. 套餐预定义策略：用于向指定套餐下发PCC规则。\n15. UE路由选择策略：用于向AMF下发UE路由选择的策略参数。\n\n以上是根据上下文信息整理的策略类型，实际可能还有其他类型未在文本中提及。"}
{"id": 7, "query": "Director中的VDC是什么概念？", "recall": "[1]:添加组织\r: 添加组织\r\n\r\n组织是指VDC(Virtual Data Center, 虚拟数据中心)使用人，即云资源和服务的使用方，可以是一个单位或一个单位的一个组织，一个组织可以关联多个VDC(Virtual Data Center, 虚拟数据中心)，组织由组织管理员来管理。\r\n\r\n用户可以在TECS Director门户在线添加组织，或者使用模板批量导入组织。\r\n\r\n子主题：\r\n\r\n  * 在线添加组织\r\n\r\n  * 批量导入组织\n\n[2]:资源配额管理\r: 资源配额管理\r\n\r\n资源配额是指分配给组织的一个资源使用额度，通过额度可以控制组织的资源用量。\r\n\r\n租户在获取到资源配额后，能够灵活的分配到其内部组织中，并能够控制资源的用量。\r\n\r\n资源配额是分配给组织实际可以使用的资源额度，资源配额包含了计算资源（CPU(Central Processing Unit, 中央处理器)、内存）、存储资源（硬盘）、网络资源（vlan范围、IP(Internet Protocol, 因特网协议)地址池、公网IP个数等）和服务实例数量（ECS、VPC等数量）的额度。资源配额管理包含了资源配额的创建、删除和修改。当超过该额度时，用户将无法再继续创建资源。\r\n\r\n  * 组织管理员在组织树的节点可查看组织内资源配额的使用情况。\r\n\r\n  * 支持组织管理员为子组织分配配额：管理员创建组织时，给组织分配配额，组织管理员可以把配额分配给子组织。\r\n\r\n\r\n\r\n\r\nVDC(Virtual Data Center, 虚拟数据中心)是组织的资源使用集合，每个组织/子组织使用多个VDC资源。通过VDC提供组织/子组织维度的虚拟计算、存储、网络资源、裸金属资源，并实现组织的资源隔离。组织与VDC的关系如图1所示。\r\n\r\n图1 TECS Director组织与VDC关系\r\n\r\n说明：\r\n\r\n  * 系统管理员可创建多个一级组织。\r\n\r\n  * 支持组织嵌套：可自定义组织内架构，满足企业内部分级管理需求。\r\n\r\n  * 支持组织内的分权分域。\r\n\r\n  * 基于VDC进行资源隔离。\n\n[3]:组织和VDC管理\r: 组织和VDC管理\r\n\r\nTECS Director支持领域管理员和业务经理分别进行组织和VDC(Virtual Data Center, 虚拟数据中心)的配置管理，两者创建的组织互相独立，但可指定同一个组织管理员进行管理。组织和VDC(Virtual Data Center, 虚拟数据中心)的配置流程如图1所示。\r\n\r\n图1 配置流程\r\n\r\n说明：\r\n\r\n只有领域管理员可进行设置云环境资源等级操作。\r\n\r\n子主题：\r\n\r\n  * 设置云环境资源服务等级（可选）\r\n\r\n  * 添加组织\r\n\r\n  * 创建VDC\r\n\r\n  * 绑定VDC和云环境用户（可选）\r\n\r\n  * 绑定VDC和云环境租户\r\n\r\n  * 添加组织管理员\r\n\r\n  * 添加组织用户\r\n\r\n  * 绑定组织和VDC\r\n\r\n  * 申请VDC\r\n\r\n  * 修改组织配额\n\n[4]:绑定VDC和云环境租户\r: 绑定VDC和云环境租户\r\n\r\n摘要\r\n\r\nTECS Director提供对VDC(Virtual Data Center, 虚拟数据中心)和云环境已有租户的绑定操作。\r\n\r\n本节介绍绑定VDC(Virtual Data Center, 虚拟数据中心)和云环境租户的步骤。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→VDC，打开VDC页面，如图1所示。\r\n\r\n图1 VDC页面\r\n\r\n  2. 选择要绑定的VDC(Virtual Data Center, 虚拟数据中心)，单击操作列下拉菜单中的绑定&解绑项目，打开绑定&解绑项目页面，如图2所示。\r\n\r\n图2 绑定&解绑项目页面\r\n\r\n  3. 选择租户所在云环境，单击操作列下的绑定按钮，弹出绑定项目对话框，如图3所示。\r\n\r\n图3 绑定项目页面\r\n\r\n  4. 勾选要绑定的租户，单击确认按钮，完成VDC(Virtual Data Center, 虚拟数据中心)和云环境租户的绑定。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n在VDC页面中，选择已经绑定租户的VDC，单击操作列下拉菜单中的绑定&解绑项目，可对已绑定租户进行解绑操作。\n\n[5]:创建VDC\r: 创建VDC\r\n\r\n摘要\r\n\r\nVDC(Virtual Data Center, 虚拟数据中心)（Virtual Data Centers）是一组虚拟资源的容器，是IaaS(Infrastructure as a Service, 基础设施即服务)云向租户（组织）提供资源的基本单位。\r\n\r\n本节描述如何创建VDC(Virtual Data Center, 虚拟数据中心)。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n相关信息\r\n\r\nVDC(Virtual Data Center, 虚拟数据中心)具备以下特征：\r\n\r\n  * VDC(Virtual Data Center, 虚拟数据中心)是独立的实体，具备自身的IP(Internet Protocol, 因特网协议)地址、自身的通信网络、甚至有自身的管理系统等。\r\n\r\n  * 1个物理DC(Data Center, 数据中心)可以被多个VDC(Virtual Data Center, 虚拟数据中心)共享。\r\n\r\n  * 1个VDC(Virtual Data Center, 虚拟数据中心)可以跨多个物理DC(Data Center, 数据中心)。\r\n\r\n  * VDC(Virtual Data Center, 虚拟数据中心)包含资源和服务两方面内容。\r\n\r\n  * VDC(Virtual Data Center, 虚拟数据中心)能提供端到端的业务。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→VDC，打开VDC页面，如图1所示。\r\n\r\n图1 VDC页面\r\n\r\n  2. 单击+创建VDC按钮，打开创建VDC页面，在**基本信息** 选项卡页面中，填写配置参数，如图2所示。\r\n\r\n图2 创建VDC-基本信息\r\n\r\n说明：\r\n\r\n只能选择当前登录用户拥有的VDC域。\r\n\r\n  3. 单击下一步按钮，进入选择云环境选项卡，为VDC(Virtual Data Center, 虚拟数据中心)选择云环境，如图3所示。\r\n\r\n图3 创建VDC-选择云环境\r\n\r\n  4. 单击下一步按钮，进入资源配置选项卡页面，依次配置云环境下的配额、计算资源、存储资源、网络资源和项目名称参数，如图4所示。\r\n\r\n图4 创建VDC-资源配置\r\n\r\n说明：\r\n\r\n其中，网络资源中可添加的物理网络为云环境侧已配置的物理网络。\r\n\r\n  5. 单击项目名称设置下的开关，选择云环境上已有租户，可以将已有的项目纳管进来，如图5所示。\r\n\r\n图5 设置项目名称\r\n\r\n说明：\r\n\r\n使用已建租户创建VDC(Virtual Data Center, 虚拟数据中心)，设置修改的配额会同步更改到对应租户上。\r\n\r\n  6. 单击下一步按钮，进入检查确认选项卡页面，检查创建VDC(Virtual Data Center, 虚拟数据中心)的参数是否正确。\r\n\r\n  7.", "answer": "Director中的VDC是指虚拟数据中心（Virtual Data Center），它是组织使用的云资源和服务的集合，是IaaS云向租户提供资源的基本单位。以下是VDC的特点：\n\n1. VDC是独立的实体，拥有自己的IP地址、通信网络，甚至可能有自己的管理系统。\n2. 一个物理数据中心（Data Center）可以被多个VDC共享。\n3. 一个VDC可以跨越多个物理数据中心。\n4. VDC包含资源和服务两方面的内容。\n5. VDC能够提供端到端的业务。"}
{"id": 8, "query": "RCP在IaaS架构下有哪些GSU虚机？", "recall": "[1]:登录PP虚机\r: 登录PP虚机\r\n\r\n摘要\r\n\r\nPP虚机包括除OMU虚机外的GSU、CDU虚机。\r\n\r\nIaaS组网下，PP虚机一般无法直接登录，需要在登录OMU虚机后，通过PP虚机管理面IP地址跳转到所在的PP虚机。\r\n\r\n本节介绍PP虚机的登录方法。\r\n\r\n步骤\r\n\r\n  1. 查询PP虚机的管理面地址。\r\n\r\n    1. 在EM客户端的配置页面中，选择RCP名称→NF节点→CommonS_TMSP_0。\r\n\r\n    2. 执行SHOW VRU命令，查询PP虚机名称。\r\n\r\n    3. 执行SHOW VM命令，查询虚机信息。\r\n\r\n根据查询结果，得到PP虚机管理面IP地址为193.168.116.5。\r\n\r\n  2. 登录OMU虚机。详细操作参见登录OMU虚机。\r\n\r\n  3. 在OMU虚机上跳转登录PP虚机，操作如下。\r\n\r\n    1. 执行如下命令。登录用户名为admin，密码Admin_123。\r\n        \r\n                ssh admin@PP虚机管理面IP地址\r\n        Password:\r\n\r\n    2. 切换到root用户，密码为ZTE_ossdbg1。\r\n\r\n  4. 退出PP虚机（回到OMU虚机），操作如下。\r\n\r\n    1. 执行**exit** 命令，退出root用户。\r\n\r\n    2. 执行**exit** 命令，退出PP虚机。\r\n    \r\n        [root@localhost admin]# exit  //退出root用户\r\n    exit\r\n    [admin@localhost ~]$ exit    //退出登录\r\n    logout\r\n    Connection to 193.168.116.5 closed.\n\n[2]:GSU虚机配置\r: GSU虚机配置\r\n\r\n概述\r\n\r\nGSU虚机需要分别配置**GSU (HTTP LB)** 、**GSU (Policy Control)** 、**GSU (SIG LB)** 和**GSU (GW)** 虚机类型的规格及虚机数量信息。\r\n\r\n以商用大规格场景为例，GSU各个虚机类型配置的规格和默认虚机个数参见下表。\r\n\r\n虚机类型| 虚机规格| 虚机初始个数| 虚机最大个数  \r\n---|---|---|---  \r\nGSU (HTTP LB)| GSU-Common-C8| 2| 16  \r\nGSU (Policy Control)| GSU-Common-C8M32 | 2| 128  \r\nGSU (SIG LB)| GSU-C8-N | 2| 16  \r\nGSU (GW)| GSU-CGW-C8 | 0| 16  \r\n  \r\n虚机配置\r\n\r\n虚机配置如图1所示。\r\n\r\n图1 虚机配置\r\n\r\n亲和策略参数配置参见表1。\r\n\r\n表1 亲和策略参数配置参数名称| 参数含义  \r\n---|---  \r\n虚机配置| 虚机逻辑类型| GSU虚机的逻辑类型固定设置为GSU。  \r\n虚机规格数量信息| 虚机规格| 配置**GSU (HTTP LB)** 虚机类型对应的虚机规格。虚机规格与“快速创建VNF部署包”的步骤2中选择的**场景** 关联，建议保持默认值。  \r\n虚机初始个数| \r\n\r\n  * 虚机初始个数决定实例化ZXUN RCP时，系统生成的初始GSU虚机个数。\r\n  * 虚机最大个数决定实例化ZXUN RCP时，系统生成的最大可弹性伸缩的GSU虚机个数。\r\n\r\n建议保持默认值。  \r\n虚机最大个数  \r\n亲和策略| 亲和类型：该参数建议设置为**软反亲和** 。  \r\n反亲和组个数：该参数建议设置为**1** 。  \r\n虚机规格数量信息| 虚机规格| 配置**GSU (PolicyControl)** 虚机类型对应的虚机规格。建议保持默认值。  \r\n虚机初始个数| 建议保持默认值。  \r\n虚机最大个数  \r\n亲和策略| 亲和类型：该参数建议设置为**软反亲和** 。  \r\n反亲和组个数：该参数建议设置为**1** 。  \r\n虚机规格数量信息| 虚机规格| 配置**GSU (SIG LB)** 虚机类型对应的虚机规格。建议保持默认值。  \r\n虚机初始个数| 建议保持默认值。  \r\n虚机最大个数  \r\n亲和策略| 亲和类型：该参数建议设置为**软反亲和** 。  \r\n反亲和组个数：该参数建议设置为**1** 。  \r\n虚机规格数量信息| 虚机规格| 配置**GSU (GW)** 虚机类型对应的虚机规格。建议保持默认值。  \r\n虚机初始个数| 建议保持默认值。如果运营商有热备容灾功能，且内置UDSF，则需要参见“激活预埋服务（可选）”，在实例化后激活预埋的Ncudr_Access服务。  \r\n虚机最大个数  \r\n亲和策略| 亲和类型：该参数建议设置为**软反亲和** 。  \r\n反亲和组个数：该参数建议设置为**1** 。\n\n[3]:GSU虚机配置\r: 反亲和组个数：该参数建议设置为**1** 。  \r\n  \r\n其余参数说明参见“OMU虚机配置”。\r\n\r\n虚机网卡配置\r\n\r\n虚机网卡配置如图2所示。\r\n\r\n图2 虚机网卡配置\r\n\r\n虚机网卡配置参数说明参见表2。\r\n\r\n表2 虚机网卡配置参数说明参数名称| 参数含义  \r\n---|---  \r\n关联网络名称| 此参数表示GSU(General Service Unit, 通用业务单元)虚机关联的网络平面名称，GSU虚机需要关联的网络平面如下。\r\n\r\n  * ZTE_PCF_x_MGT_NET\r\n  * ZTE_PCF_x_SERVICE_NET\r\n\r\n  \r\n  \r\n其他参数说明参见“OMU虚机配置”。\r\n\r\n虚机参数配置\r\n\r\n参数说明参见“OMU虚机配置”。\n\n[4]:Info文件参数说明\r: Info文件参数说明\r\n\r\n子主题：\r\n\r\n  * 通用配置\r\n\r\n  * 网元配置\r\n\r\n  * OMU虚机配置\r\n\r\n  * CDU虚机配置\r\n\r\n  * GSU虚机配置\r\n\r\n  * IPU虚机配置\r\n\r\n  * LOG虚机配置\r\n\r\n  * LSU虚机配置\r\n\r\n  * AMU虚机配置\n\n[5]:VM Parameters\r: 短消息业务)消息分发。  \r\nGSU(General Service Unit, 通用业务单元)（PolicyControl）| 处理PCF(Policy Control Function, 策略控制功能)和PCRF(Policy and Charging Rules Function, 策略和计费规则功能)业务逻辑，提供AMPolicyControl、UEPolicyControl、SMPolicyControl和PolicyAuthorization服务。  \r\nGSU(General Service Unit, 通用业务单元)（GW）| UDSF(Unstructured Data Storage Function, 非结构化数据存储功能)统一接入网关。  \r\nIPU| IP接口虚拟机，收发IP承载的控制面信令和用户面报文。  \r\nLOG| 策略日志单元，产生策略日志并存入云盘或LSU，并可通过FTP(File Transfer Protocol, 文件传输协议)/SFTP(Secure File Transfer Protocol, 安全文件传输协议)上传给外部服务器。  \r\nLSU| 策略日志存储单元，用于策略日志分析。  \r\n  \r\nZXUN RCP各个虚机类型的参数配置说明参见表2。\r\n\r\n表2 虚机类型参数配置说明虚机类型| 参数配置说明  \r\n---|---  \r\nCDU| CDU虚机的**VM Count** 建议保持默认值。如果ZXUN RCP在后续使用过程中不再需要已部署的CDU虚机，则参见“去激活服务（可选）”，去激活Ncudr_Access服务和Nudsf_UnstructuredDataManagement服务，回收CDU虚机。  \r\nGSU| GSU虚机分别配置**GSU (HTTP LB)** 、**GSU (PolicyControl)** 、**GSU (SIG LB)** 和**GSU (GW)** 虚机类型。以图1为例，在**商用大规格** 场景下，GSU各个虚机类型与虚机规格（**VM Flavor** ）的对应关系如下：\r\n\r\n  * GSU (HTTP LB)：GSU-Common-C8\r\n  * GSU (PolicyControl)：GSU-Common-C8M32\r\n  * GSU (SIG LB)：GSU-C8-N\r\n  * GSU (GW)：GSU-CGW-C8\r\n\r\n其中，**GSU (GW)** 虚机类型的**VM Count** 需要配置为**0** 。如果运营商有热备容灾功能，且内置UDSF，则需要参见“激活预埋服务（可选）”，在实例化后激活预埋的Ncudr_Access服务。  \r\nLOG| 若运营商选择的部署场景涉及LOG虚机，则**VM Count** 配置为**0** ，且在ZXUN RCP实例化后参见“激活预埋服务（可选）”，激活预埋的Npcf_LOG服务。  \r\nLSU| 若运营商选择的部署场景涉及LSU虚机，则**VM Count** 配置为**0** ，且在ZXUN RCP实例化后参见“激活预埋服务（可选）”，激活预埋的Npcf_LogStoreUnit服务。  \r\n  \r\n参数说明参见表3。\r\n\r\n表3 参数说明参数名称| 参数说明  \r\n---|---  \r\nVM Flavor| 本参数用于设置ZXUN RCP虚机的规格，包括：\r\n\r\n  * vCPU：CPU核数\r\n  * Memory (GB)：内存数\r\n  * Local Storage(GB)：本地存储\r\n  * Remote Storage(GB)：远端存储\r\n\r\n这些参数不需要操作员配置，是由“VNF Scenario”页签中的参数VNF Scenario Name决定的。", "answer": "在IaaS架构下，RCP包括以下几种GSU虚机：\n\n   1. GSU (HTTP LB)：负责HTTP负载均衡。\n   2. GSU (Policy Control)：处理策略控制功能。\n   3. GSU (SIG LB)：负责信号负载均衡。\n   4. GSU (GW)：作为非结构化数据存储功能（UDSF）的统一接入网关。\n\n这些GSU虚机需要分别配置对应的规格和虚机数量信息。"}
{"id": 9, "query": "RCP如何将VoNR呼叫的Rx会话绑定到对应的N7会话？", "recall": "[1]:特性描述\r: AF收到IMS用户注册请求或新的呼叫请求，构造Rx接口的AAR消息发送给DRA(Diameter Routing Agent, Diameter路由代理)，AAR消息中的如下信息可用于DRA寻址RCP。\r\n\r\n     * Destination-Realm：目标域名\r\n\r\n     * Framed-IPv4-Address/Framed-IPv6-Prefix：用户IPv4地址或IPv6地址前缀\r\n\r\n  2. DRA（需改造升级BSF接口）收到AAR(Answer-Auth-Request, 应答鉴权请求)消息，如果在本地找不到对应的Gx会话绑定信息，则向BSF查询N7会话绑定信息（如果DRA本地未配置BSF地址，则在向BSF发起查询前，先要通过NRF(NF Repository Function, 网络仓储功能)发现BSF，这里不再详述），DRA向BSF发送Nbsf_Management_Discovery请求。请求中必须包含用户IP地址，可选包含GPSI、DNN、IP地址域等参数。\r\n\r\n  3. BSF查询到RCP注册的N7会话绑定信息，使用Nbsf_Management_Discovery响应向DRA提供该绑定信息。\r\n\r\n  4. DRA（假设是Proxy模式）从绑定信息中读取RCP在Rx接口的Diameter主机名和域名，将AAR请求发送到对应的RCP。\r\n\r\n  5. RCP处理AAR消息，回复AAA(Answer-Auth-Answer, 应答鉴权响应)消息。\r\n\r\n  6. DRA转发AAA消息给AF。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n如果运营商不改造现网DRA支持BSF查询，而是引入融合BSF/DRA，现网DRA将Rx请求发送给融合BSF/DRA，这时上述流程图中DRA和BSF间的流程为融合BSF/DRA的内部流程，融合BSF/DRA以Proxy或Redirect方式转发Rx请求到RCP。\r\n\r\nP-CSCF订阅信令路径事件\r\n\r\n图4 P-CSCF订阅信令路径事件流程\r\n\r\nAF（P-CSCF）订阅信令路径事件是一个可选流程，流程如下：\r\n\r\n  1.\n\n[2]:特性描述\r: AF返回成功Rx-ASA响应。\r\n\r\n9\\. AF发送Rx-STR释放AF会话，但仍保持用户的呼叫。\r\n\r\n10\\. RCP释放AF会话，给AF回复成功Rx-STA响应。\r\n\r\nP-CSCF容灾增强\r\n\r\n图9 P-CSCF容灾增强流程\r\n\r\n和VoLTE类似，VoNR也支持P-CSCF容灾增强，流程如下：\r\n\r\n  1. N7会话建立后，UE通过某个P-CSCF注册到IMS，之后如果该P-CSCF发生故障，UE发起呼叫时的SIP Invite消息会发到备用P-CSCF，备用P-CSCF没有该UE上下文，会向RCP发送AAR消息，携带如下信息：\r\n\r\n     * Rx-Request-Type：Rx请求类型，此流程中置为PCSCF_RESTORATION，表示P-CSCF发生了容灾切换。\r\n\r\n     * Auth-Session-State置为NO_STATE_MAINTAINED，表示该AF会话不需要保持状态。\r\n\r\n     * 若备用P-CSCF无法获取到IP地址信息，则需要携带用户的IMSI及APN 信息。\r\n\r\n  2. RCP回复成功AAA响应，并携带Auth-Session-State（NO_STATE_MAINTAINED），但不建立新的AF会话。\r\n\r\n  3. RCP根据IP或IMSI和APN信息查找到所有的N7会话，静默删除这些会话绑定的AF会话（不发送Rx-ASR通知），并删除相关联的PCC规则，给SMF下发Npcf_SMPolicyControl_UpdateNotify请求，携带pcscfRestIndication，取值为TRUE，在该请求中还指示SMF删除相关PCC规则。\r\n\r\n  4. SMF返回成功Npcf_SMPolicyControl_UpdateNotify响应，并触发专有QoS Flow的释放。\r\n\r\n  5. 如果UE支持在一个PDU会话内重选P-CSCF，则SMF通知UE重选P-CSCF，否则SMF通过释放PDU会话触发UE重建PDU会话并重选P-CSCF。若PDU会话释放，则SMF发起N7会话释放流程，给RCP发送Npcf_SMPolicyControl_Delete请求。\r\n\r\n  6. RCP释放N7会话，回复成功Npcf_SMPolicyControl_Delete响应。\r\n\r\n\r\n\r\n\r\nEPS回落\r\n\r\n图10 EPS回落流程\r\n\r\nEPS回落（EPS Fallback）指的是5G NR不提供语音业务，当EPS Fallback终端发起呼叫或者接受呼叫需在NR上建立音视频承载时，触发终端的重定向或切换流程，回落至LTE网络，由VoLTE网络为终端提供音视频业务。流程如下：\r\n\r\n  1. 用户在IMS DNN上的N7会话建立成功后，AF向RCP发送AAR消息，AAR中包含：\r\n\r\n     * Framed-IPv4-Address/Framed-IPv6-Prefix：用户IPv4地址或IPv6地址前缀。\r\n\r\n     * Media-Component-Description：媒体组件信息，VoNR的每条媒体流（音频/视频）构造一条媒体组件信息。\r\n\r\n     * Specific-Action：订阅事件信息，通常包含IP接入网改变事件（IP-CAN_CHANGE）、接入网信息查询事件（ACCESS_NETWORK_INFO_REPORT），还可以包含EPS回落事件（EPS_FALLBACK）及其他事件。\r\n\r\n  2.\n\n[3]:特性描述\r: 如果UE IP地址（一般是 IPv6地址前缀）发生变化，SMF再通过Npcf_SMPolicyControl_Update请求向RCP上报新的UE IP地址。\r\n\r\n  10. RCP记录下UE IP地址信息，向BSF更新绑定信息，RCP向BSF发送Nbsf_Management_Register请求。\r\n\r\n  11. BSF记录下绑定信息，向RCP回复Nbsf_Management_Register响应。\r\n\r\n  12. RCP向SMF回复NPCF_SMPolicyControl_Update响应。\r\n\r\n  13. 用户下线，SMF向RCP发送Npcf_SMPolicyControl_Delete请求。\r\n\r\n  14. RCP向BSF发送Nbsf_Management_Deregister请求。\r\n\r\n  15. BSF回复Nbsf_Management_Deregister响应。\r\n\r\n  16. RCP向SMF回复Npcf_SMPolicyControl_Delete响应。\r\n\r\n\r\n\r\n\r\nAF通过SMF内置BSF寻址RCP过程\r\n\r\n以VoNR流程中AF（P-CSCF）寻址RCP的流程为例（需要改造DRA，支持Nbsf服务化接口发现绑定的RCP），具体描述如下：\r\n\r\n  1. AF收到IMS用户注册请求或新的呼叫请求，构造Rx接口的AAR消息发送给DRA，AAR消息中的如下信息可用以DRA寻址RCP：\r\n\r\n     * 目标域名（Destination-Realm）\r\n\r\n     * 用户IPv4地址（Framed-IPv4-Address）或IPv6地址前缀（Framed-IPv6-Prefix)\r\n\r\n  2. DRA（需改造升级BSF接口）收到AAR消息，如果在本地找不到对应的Gx会话绑定信息，则向BSF查询N7会话绑定信息（如果DRA本地未配置BSF地址，则在向BSF发起查询前，先要通过NRF发现BSF，这里不再详述），DRA向BSF发送Nbsf_Management_Discovery请求。请求中必须包含用户 IP地址，可选包含GPSI、DNN、IP地址域等参数。\r\n\r\n  3. BSF查询到RCP注册的N7会话绑定信息，使用Nbsf_Management_Discovery响应向DRA提供该绑定信息。\r\n\r\n  4. DRA（假设是Proxy模式）从绑定信息中读取RCP在Rx接口的Diameter主机名和域名，将AAR请求发送到对应的RCP。\r\n\r\n  5. RCP处理AAR消息，回复AAA消息。\r\n\r\n  6. DRA转发AAA消息给AF。\r\n\r\n\r\n\r\n\r\nAF通过外置BSF寻址RCP过程\r\n\r\n仍以VoNR流程中AF（P-CSCF）寻址RCP的流程为例（不需要改造DRA，BSF已有绑定的RCP信息），具体描述如下：\r\n\r\n  1. AF收到IMS用户注册请求或新的呼叫请求，构造Rx接口的AAR消息发送给DRA，AAR消息中的如下信息可用以DRA寻址RCP：\r\n\r\n     * 目标域名（Destination-Realm）\r\n\r\n     * 用户IPv4地址（Framed-IPv4-Address）或IPv6地址前缀（Framed-IPv6-Prefix)\r\n\r\n  2. DRA收到AAR消息，直接转发AAR消息给BSF。\r\n\r\n  3. BSF查询到RCP注册的N7会话绑定信息，将AAR消息再次转发给RCP。\r\n\r\n  4. RCP处理AAR消息，回复AAA消息。\r\n\r\n  5. BSF转发AAA消息给DRA。\r\n\r\n  6.\n\n[4]:特性描述\r: RCP进行策略决策，向SMF发送Npcf_SMPolicyControl_Create响应，响应消息主要包含：\r\n\r\n     * location：即HTTP消息头域的location字段，格式为{authority}/npcf-smpolicycontrol/v1/sm-policies/{smPolicyId}，例如：http://[2409:8069:5003:803::2:121]:80/npcf-smpolicycontrol/v1/sm-policies/ims-gpsi_8618287920067.11682ba252e3054f.。其中smPolicyId为RCP根据supi+pduSessionId+时间戳等信息生成的SM策略关联ID，唯一定位SMF和RCP间的一个SM策略关联（即一个N7会话）。\r\n\r\n     * sessRules：会话规则集，在VoNR场景PCF通常只下发一个会话规则，其中包含授权的会话聚合带宽（Authorizeded Session AMBR）和授权的缺省QoS（AuthorizedDefault QoS）。对VoNR业务来说，RCP一般按Create请求消息中的Subscribed Session AMBR和Subscribed Default QoS来填写这两个参数。Default QoS应用于缺省QoS Flow。在VoNR业务中，缺省QoS Flow用于IMS信令传输，其5QI取值通常是5。\r\n\r\n  3. SMF收到Create响应后，为UE分配IP地址，再通过Npcf_SMPolicyControl_Update请求（以下简称Update请求）向RCP上报UE IP地址，Update请求中主要包含：\r\n\r\n     * ipv4Address/ipv6AddressPrefix：用户IPv4(Internet Protocol Version 4, 互联网通信协议第四版)地址或IPv6(Internet Protocol Version 6, 互联网通信协议第六版)地址前缀，VoNR通常用IPv6地址前缀。\r\n\r\n     * ipDomain：IP地址域（可选），IPv4地址池重复时，ipDomain+ipv4Address可以唯一定位一个IPv4地址。\r\n\r\n     * policyCtrlReqTriggers：其中包含IP地址改变（UE_IP_CH）事件。\r\n\r\n  4. RCP向BSF注册N7会话绑定信息，即N7会话和RCP的关联信息。RCP记录下UE IP地址信息后，向BSF发送Nbsf_Management_Register请求，请求包含如下关键参数：\r\n\r\n     * ipv4Address/ipv6AddressPrefix：携带相关N7会话的用户IPv4地址和/或IPv6地址前缀。\r\n\r\n     * dnn：携带相关N7会话的dnn。\r\n\r\n     * snssai：携带相关N7会话的snssai。\r\n\r\n     * pcfDiamHost/pcfDiamRealm：RCP在Rx接口的Diameter主机名和域名。\r\n\r\n     * supi：携带相关N7会话的supi。\r\n\r\n     * gpsi：携带相关N7会话的gpsi。\r\n\r\n     * ipDomain：携带相关N7会话的ipDomain。\r\n\r\n     * pcfId：PCF标识。\r\n\r\n  5. BSF记录下绑定信息，向RCP回复Nbsf_Management_Register响应。\r\n\r\n  6. RCP收到BSF回复的Nbsf_Management_Register响应后，向SMF回复Npcf_SMPolicyControl_Update响应。\r\n\r\n\r\n\r\n\r\nP-CSCF寻址RCP\r\n\r\n图3 P-CSCF寻址RCP流程\r\n\r\n在VoNR流程中，AF(Application Function, 应用功能)（P-CSCF(Proxy-Call Session Control Function, 代理呼叫会话控制功能)）寻址RCP的流程如下：\r\n\r\n  1.\n\n[5]:特性描述\r: RCP删除该AF会话关联的PCC规则，通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF，请求中将相关PCC规则ID置为null，并携带policyCtrlReqTriggers和lastReqRuleData，填写方法和步骤3相同。\r\n\r\n  11. SMF返回成功Npcf_SMPolicyControl_UpdateNotify响应，并触发专有QoS Flow的释放，以及用户最新接入网信息的查询。\r\n\r\n  12. 专有承载释放后，上报用户的位置或时区信息，触发SMF通过Npcf_SMPolicyControl_Update请求上报给RCP，并携带接入网信息。\r\n\r\n  13. RCP释放AF会话，给AF回复成功Rx-STA响应。并携带SMF上报的接入网信息。\r\n\r\n  14. RCP给SMF回复成功的Npcf_SMPolicyControl_Update响应。\r\n\r\n\r\n\r\n\r\n(e)SRVCC切换\r\n\r\n图8 (e)SRVCC切换流程\r\n\r\n和VoLTE(Voice over LTE, LTE语音)类似，VoNR呼叫也支持(e)SRVCC(Single Radio Voice Call Continuity, 单射频语音呼叫连续性)切换流程，允许VoNR音频媒体流回落到3G电路域，但不支持VoNR视频媒体流回落，流程如下：\r\n\r\n1\\. N7会话建立后，用户使用VoNR业务时，触发AF向RCP发送AAR消息建立AF会话。AAR中携带媒体信息（Media-Component-Description）等。其中媒体可能为音频媒体（Media-Type = AUDIO）或视频媒体（Media-Type = VIDEO）。\r\n\r\n2\\. RCP校验AAR请求，根据IP等信息绑定IPCAN承载会话。若绑定成功，存储AF会话、媒体等信息。RCP对VoNR业务进行决策，构造PCC规则通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF。音频流PCC规则的5QI应当设置为1（承载侧判断5QI=1的QoS Flow支持SRVCC切换），VoNR视频流目前还不支持SRVCC功能。\r\n\r\n3\\. SMF校验规则信息通过，返回Npcf_SMPolicyControl_UpdateNotify响应，并触发专有QoS Flow建立。\r\n\r\n4\\. RCP向AF回复AAA消息。\r\n\r\nVoNR的SRVCC切换分两种场景：\r\n\r\n  * 场景a：4G切换到3G电路域，这时N7会话仍然保留\r\n\r\n\r\n\r\n\r\n5a. SMF向RCP发送Npcf_SMPolicyControl_Update请求，其中ruleReport的failureCode指示PS_TO_CS_HAN。\r\n\r\n6a. RCP回复Npcf_SMPolicyControl_Update响应。\r\n\r\n  * 场景b：5G直接切换到3G电路域，这时N7会话不再保留\r\n\r\n\r\n\r\n\r\n5b. SMF向RCP发送Npcf_SMPolicyControl_Delete请求，其中PduSessionRelCause指示PS_TO_CS_HO。\r\n\r\n6b. RCP回复Npcf_SMPolicyControl_Delete响应。\r\n\r\n7\\. RCP分析出失效规则影响到AF会话的所有媒体信息，通过Rx-ASR通知AF释放会话，并且携带Abort-Cause指示专有承载失效的原因是PS_TO_CS_HANDOVER。\r\n\r\n8\\. AF返回成功Rx-ASA响应。\r\n\r\n9\\. AF发送Rx-STR释放AF会话，但仍保持用户的呼叫。\r\n\r\n10\\.", "answer": "RCP将VoNR呼叫的Rx会话绑定到对应的N7会话的过程如下：\n\n1. AF收到IMS用户注册请求或新的呼叫请求，构造Rx接口的AAR消息发送给DRA，AAR消息中包含用于DRA寻址RCP的信息，如目标域名和用户IPv4地址或IPv6地址前缀。\n\n2. DRA（需改造升级BSF接口）收到AAR消息后，如果本地找不到对应的Gx会话绑定信息，则向BSF查询N7会话绑定信息。\n\n3. BSF查询到RCP注册的N7会话绑定信息，使用Nbsf_Management_Discovery响应向DRA提供该绑定信息。\n\n4. DRA从绑定信息中读取RCP在Rx接口的Diameter主机名和域名，将AAR请求发送到对应的RCP。\n\n5. RCP处理AAR消息，并在处理过程中将Rx会话绑定到对应的N7会话。\n\n6. RCP向BSF注册N7会话绑定信息，即N7会话和RCP的关联信息，通过发送Nbsf_Management_Register请求，请求包含关键参数如用户IPv4地址和/或IPv6地址前缀、DNN、SNSSAI、RCP在Rx接口的Diameter主机名和域名等。\n\n7. BSF记录下绑定信息，并向RCP回复Nbsf_Management_Register响应。\n\n通过上述步骤，RCP将会话绑定信息注册到BSF，从而将VoNR呼叫的Rx会话绑定到对应的N7会话。"}
{"id": 10, "query": "Director部署过程中有个网卡固化操作，那是在什么场景下做？", "recall": "[1]:网卡固化（可选）\r: 网卡固化（可选）\r\n\r\n网卡固化操作仅在虚机场景下执行。SSH到有版本包的节点上，进入/paasdata/<director版本包>/install-script/mytools/nic_curing目录下，执行如下命令：\r\n    \r\n    \r\n    mkdir -p /etc/udev/rules.d\r\n    cp nic_name.sh /root/\r\n    cp 10-nic-name.rules /etc/udev/rules.d\r\n    \r\n    cd /root && sh nic_name.sh\r\n\r\n每个节点重复执行上述操作。\n\n[2]:TECS资源池节点准备\r: 执行与上一步相同的操作，固化net_iapi地址。\r\n\r\n  3. 设置虚机所有网卡文件中BOOTPROTO的值为static，不启用dhcp，如图11所示。\r\n\r\n图11 设置BOOTPROTO\r\n\r\n  4. 执行service network restart，查看网卡上IP地址已经生效，如图12所示。\r\n\r\n图12 查看配置生效\n\n[3]:vmware资源池节点准备\r: 选择需要挂载的网络，单击确定完成网络挂载。\r\n\r\n说明：\r\n\r\n挂载网络时必须严格按照网络的先后顺序进行挂载。\r\n\r\n控制节点1和控制节点2虚机依次（顺序不能变）挂载 net_iapi（运维网络）,net_north（北向网络），TecsClient网络，Public API（南向public），容灾网络（可选），存储数据面网络（可选）。\r\n\r\n控制节点3虚机挂载net_iapi（运维网络）。\r\n\r\n所有计算节点虚机不需要再挂载网络（计算节点仅需要内部网络，在虚机创建步骤已经完成）。\r\n\r\n  4. 虚机网络挂载完成后，在虚机摘要页签的虚拟机硬件区域可看到网络全部挂载完毕，如图24所示。\r\n\r\n图24 虚拟机硬件网络适配器\r\n\r\n\r\n\r\n\r\n固化网络\r\n\r\n说明：\r\n\r\n需要固化的网络为net_api(内部网络)、net_iapi(运维网络)，其他网络不需要固化 （固化的IP地址在网络规划时已经确定）。\r\n\r\n  1. 确认虚机网卡挂载网络。\r\n\r\n    1. 在虚机摘要页签的虚拟机硬件区域，单击网络适配器可查看mac地址和网络信息对应关系，如图25所示。\r\n\r\n图25 查看mac地址和网络信息对应关系\r\n\r\n    2. 登录到虚机节点，执行ifconfig -a，可查看虚机网卡的mac地址，如图26所示。\r\n\r\n图26 查看虚机网卡的mac地址\r\n\r\n通过mac地址就可以确定虚机网卡挂载的网络信息。\r\n\r\n  2. 固化net_api(内部网络)地址。\r\n\r\n    1. 进入虚机/etc/sysconfig/network-scripts目录下，net_api网卡文件已经存在。\r\n\r\n    2. 查看文件是否需要补充IP信息，如果缺少就要补齐。如是双栈，则ipv4和ip6地址都要存在，下图为双栈net_api网卡文件固化信息。\r\n\r\n  3. （可选）固化net_iapi(运维网络)地址。\r\n\r\n拷贝ifcfg-lo文件并重命名为ifcfg- **ensX修改文件增加IP信息** ，net_iapi对应哪个ensX可以参考前面步骤。\r\n\r\n说明：\r\n\r\n仅在控制节点执行，计算节点没有运维网络不需要执行该步骤。\r\n\r\n设置虚机所有网卡文件中BOOTPROTO的值为static，不启用dhcp。\r\n\r\n  4. 复位网络。执行service network restart，执行ifconfig查看网卡上ip地址已经生效，如图27所示。\r\n\r\n图27 查看网卡上ip地址\r\n\r\n\r\n\r\n\r\n创建虚机快照\r\n\r\n说明：\r\n\r\n虚机快照可在Director部署失败后快速恢复虚机到初始未安装状态。\r\n\r\n  1. 切换至虚机快照页签，单击生成快照，如图28所示。\r\n\r\n图28 生成快照\r\n\r\n  2. 在生成快照页面，修改快照名称，描述等信息，如图29所示。\r\n\r\n图29 修改快照信息\r\n\r\n  3. 单击创建按钮，生成快照如图30所示。\r\n\r\n图30 已生成的快照\n\n[4]:版本及节点配置\r: 版本及节点配置\r\n\r\n子主题：\r\n\r\n  * 软件版本\r\n\r\n  * 虚机场景节点准备\r\n\r\n  * 网卡固化（可选）\n\n[5]:准备模板\r: xlsx模板的应用网络配置sheet页中，基础网络名称也是physnet0（与内部网络的物理网络平面名称一致）。\r\n\r\n图5 网络配置（虚机）\r\n\r\n说明：\r\n\r\n虚机场景注意事项：\r\n\r\n       * 运维网络”VIP填写运维网络浮动IP，地址池填写预置虚机所有节点的真实运维IP地址（固化到虚机网卡文件的net_iapi运维网络地址）\r\n\r\n       * 内部网络”VIP分配20个地址，地址池至少填写12+2个地址，地址池中前N个（节点个数）地址为固化到虚机网卡文件的net_api内部网络地址\r\n\r\n       * “Director北向”VIP默认不填，地址池填写北向网络IP地址（若TecsClient、PublicApi 和北向三网独立，那么填写规则和北向一致）\r\n\r\n       * VIP和地址池中的地址不能重复\r\n\r\n       * VIP、地址池、网关、 路由下一跳地址都要在对应cidr范围内\r\n\r\n       * 业务网络（北向网络、publiapi网络、tecsclient网络、容灾网络、对象存储管理网络等）中地址池信息中填写规划的地址信息\r\n\r\n容灾场景注意事项：\r\n\r\n       * \"容灾功能\" 选择 开启\r\n\r\n       * “容灾网络”，只能选择单栈（ipv4或者ipv6）\r\n\r\n    3.", "answer": "网卡固化操作仅在虚机场景下执行。"}
{"id": 11, "query": "发布虚机时最多可以为虚机分配几块网卡？", "recall": "[1]:C100040030 虚机端口流出包数\r: C100040030 虚机端口流出包数\r\n\r\n描述\r\n\r\n每个统计周期内，虚拟机网卡发送包数，针对每个虚拟机的每个网卡统计。\r\n\r\n采集方式\r\n\r\n累加值\r\n\r\n单位\r\n\r\npacket\n\n[2]:C100040034 虚机端口流出错包数\r: C100040034 虚机端口流出错包数\r\n\r\n描述\r\n\r\n每个统计周期内，虚拟机网卡流出错包数。针对每个虚拟机的每个网卡统计。\r\n\r\n采集方式\r\n\r\n累加值\r\n\r\n单位\r\n\r\npacket\n\n[3]:C100040033 虚机端口流入错包数\r: C100040033 虚机端口流入错包数\r\n\r\n描述\r\n\r\n每个统计周期内，虚拟机网卡流入错包数。针对每个虚拟机的每个网卡统计。\r\n\r\n采集方式\r\n\r\n累加值\r\n\r\n单位\r\n\r\npacket\n\n[4]:C100040030 虚机端口流出包数\r: C100040030 虚机端口流出包数\r\n\r\n描述\r\n\r\n每个统计周期内，虚拟机网卡发送包数，针对每个虚拟机的每个网卡统计。\r\n\r\n采集方式\r\n\r\n累加值\r\n\r\n单位\r\n\r\npacket\n\n[5]:C100040032 虚机端口流出丢包数\r: C100040032 虚机端口流出丢包数\r\n\r\n描述\r\n\r\n每个统计周期内，虚拟机网卡流出丢包数。针对每个虚拟机的每个网卡统计。\r\n\r\n采集方式\r\n\r\n累加值\r\n\r\n单位\r\n\r\npacket", "answer": "根据提供的上下文信息，无法直接得出关于最多可以为虚机分配几块网卡的明确答案。上下文信息仅描述了与虚拟机网卡相关的几个统计指标，而没有提及分配网卡的个数限制。因此，对于这个问题，我的回答是不确定。"}
{"id": 12, "query": "虚拟资源包括哪些种类", "recall": "[1]:资源纳管\r: 资源纳管\r\n\r\n概述\r\n\r\nTECS Director通过连接器（接口适配层）接入多个虚拟化环境的资源，将物理上分散的资源构建成逻辑上统一的云资源池，进行资源统一纳管、统一编排、统一监控和运维。\r\n\r\nTECS Director支持公有云、私有云的统一纳管，如TECS(Tulip Elastic Cloud System, 郁金香弹性云系统) Openstack、VMware vCenter、H3C CAS、Redhat OpenStack等私有云、TECS OpenPalette等容器云、TECS CloudFoundation等双核云平台和阿里云等公有云，向租户提供虚机、容器、裸金属的混合资源统一管理。\r\n\r\n私有云、公有云统一管理\r\n\r\nTECS Director支持公有云、私有云的纳管，如TECS Openstack、VMware vCenter、H3C CAS、Redhat OpenStack等私有云和阿里云等公有云，如图1所示。\r\n\r\n  * 在OpenStack平台框架内，通过集成异构虚拟化平台的Driver、Agent或Plugin实现异构资源池的纳管。\r\n\r\n  * 通过公有云API(Application Program Interface, 应用程序接口)对接阿里云等公有云。\r\n\r\n图1 TECS Director私有云、公有云统一管理\r\n\r\n\r\n\r\n\r\n异构&双核资源池统一管理\r\n\r\nTECS Director支持虚机、容器、裸金属的统一管理。当前支持的虚拟化资源池包含H3C CAS、VMware vCenter等，支持的云平台包含ZTE OpenStack、第三方OpenStack（如RedHat OpenStack）等，支持的容器云平台包括基于kubernetes的ZTE(Zhongxing Telecommunications Equipment, 中兴通讯) 容器云TECS OpenPalette，如图2所示。\r\n\r\n图2 异构资源池统一管理\r\n\r\n  * 支持虚机、容器和裸机混合部署，满足多种应用场景。\r\n\r\n  * 支持虚机、容器和裸机的统一管理，按需分配。\r\n\r\n\r\n\r\n\r\n云环境层次化管理\r\n\r\nTECS Director支持将多个数据中心内的云环境按照归属分支机构和物理位置以TOPO方式层次化展示，方便查看云环境在整个系统的位置和云环境的归属，方便对云环境按照归属和物理位置进行分权分域管理，提高维护效率。\r\n\r\n物理设备统一管理\r\n\r\nTECS Director提供多个云环境计算、存储、网络物理设备的集中管理，同时硬件管理作为资产管理中的一环，提供设备配置和运行数据，帮助资产管理系统实时掌握数据中心的资产现状。集中设备管理主要功能：\r\n\r\n  * 集中管理多个云环境的计算、网络、存储物理设备的信息，并及时更新和同步。\r\n\r\n  * 支持设备资产管理和资产数据的导出。\r\n\r\n\r\n\r\n\r\n虚拟资源统一管理\r\n\r\nTECS Director管理IaaS虚拟资源管理功能包括：\r\n\r\n  * IaaS云环境管理\r\n\r\n云环境指OpenStack或VMware vCenter等IaaS(Infrastructure as a Service, 基础设施即服务)基础架构，一个数据中心内可以包含一个或多个同构/异构的云环境。\n\n[2]:虚拟资源\r: 虚拟资源\r\n\r\n子主题：\r\n\r\n  * 虚机\r\n\r\n  * 主机\r\n\r\n  * 主机网络\r\n\r\n  * 虚拟网络\r\n\r\n  * 云环境\r\n\r\n  * 虚机磁盘\r\n\r\n  * 主机磁盘分区\r\n\r\n  * 主机链路\r\n\r\n  * 数据中心\r\n\r\n  * 主机集群\r\n\r\n  * 可用域\r\n\r\n  * 裸金属\n\n[3]:资源纳管\r: * 虚拟机管理\r\n\r\n虚拟机是在物理服务器上划分出来的一台或者多台虚拟化的计算机系统。\r\n\r\n虚拟机管理的功能包括查询虚拟机列表、查看虚拟机详情、虚拟机操作（启动、停止、暂停、备份、快照、资源规格调整）。\r\n\r\n  * 裸金属管理\r\n\r\nTECS Director提供了将物理机作为计算资源，类似虚拟机一样，直接分配给用户使用的管理功能。系统支持物理裸机的发现、分配与部署、管理（开机/关机、重启、锁定/解锁、更新、重建、安装操作系统、裸金属生成镜像等）、删除等功能。\r\n\r\n  * 亲和组、反亲和组管理\r\n\r\nTECS Director提供亲和组、反亲和组功能，通过亲和组将多台虚机部署在相同的宿主机上，通过反亲和组将多台虚机分散部署在不同的宿主机上。\r\n\r\n  * 块存储管理\r\n\r\n存储管理包括物理存储设备的监控、云盘的创建、删除、查看、编辑和转让等。\r\n\r\n  * 文件存储管理\r\n\r\nTECS Director提供文件存储（共享文件）管理功能，支持文件存储（共享文件）从创建到删除的整个生命周期管理。\r\n\r\n  * 对象存储管理\r\n\r\nTECS Director提供对象存储管理功能，支持对象存储从创建到删除的整个生命周期管理。\r\n\r\n  * 网络管理\r\n\r\n    * 物理网络设备状态监控，包括中兴通讯自研及各厂商主流交换机、路由器设备。\r\n\r\n    * 云网络管理：支持虚拟网络、子网、虚拟路由、端口、安全组、虚拟防火墙、虚拟负载均衡等网络资源的生命周期管理，包括创建、删除、查看等，同时支持网络QoS(Quality of Service, 服务质量)策略配置。\r\n\r\n    * 支持网络配置：支持IP(Internet Protocol, 因特网协议)/VLAN(Virtual Local Area Network, 虚拟局域网)池配置管理，用户的IP(Internet Protocol, 因特网协议)地址和VLAN(Virtual Local Area Network, 虚拟局域网)选取来自相关资源池；支持虚机配置SR-IOV网卡；支持NFV(Network Functions Virtualization, 网络功能虚拟化)包括vFW/vLB的配置开通。支持相关策略配置。\r\n\r\n    * 虚拟私有云（Virtual Private Cloud，VPC）管理：基于云环境为虚机构建一套逻辑隔离的虚拟网络环境，可自定义子网、自行创建防火墙、VPN网关等，提升用户虚拟资源的安全性，简化用户的网络部署。 \r\n\r\n支持虚拟私有云的创建、修改、删除等能力，同时VPC通过出口/多出口、专线方式支持虚机访问外部网络。\r\n\r\n  * 镜像管理\r\n\r\nTECS Director提供多个云环境的镜像统一管理，并支持将镜像分发到一个或多个环境，以便创建虚拟机时使用。\r\n\r\n镜像管理功能包括镜像仓库管理和云环境镜像管理。\n\n[4]:虚拟资源\r: 虚拟资源\r\n\r\n子主题：\r\n\r\n  * 虚机\r\n\r\n  * 主机\r\n\r\n  * 主机网络\r\n\r\n  * 虚机网络\r\n\r\n  * 云环境\r\n\r\n  * 虚机磁盘\r\n\r\n  * 主机磁盘分区\r\n\r\n  * 主机链路\r\n\r\n  * 主机集群\r\n\r\n  * 数据中心\r\n\r\n  * 可用域\r\n\r\n  * 裸机实例\n\n[5]:管理对象\r: 管理对象\r\n\r\ndirector-monitorcenter-object-infrastructure-inventory\r\n\r\n摘要\r\n\r\nTECS Director系统支持所有云环境的主机和虚机对象详情及DomainAdmin账户创建的VDC(Virtual Data Center, 虚拟数据中心)的对象详情的清单查看。\r\n\r\nTECS Director系统支持各数据中心内的物理资源和逻辑资源的拓扑管理，且支持拓扑图节点的当前告警管理。\r\n\r\n  * 物理拓扑的显示规则为：选择基础设施→数据中心→云环境，单击云环境名称，进入详细信息页面，单击物理资源子页面，如图1所示，查看POD(Point of Deployment, 部署单元)、机架、机框、刀片、磁阵、交换机、机架式服务器、路由器、防火墙、负载均衡等信息。\r\n\r\n图1 物理资源页面\r\n\r\n  * 逻辑拓扑的显示规则为：选择基础设施→数据中心→云环境，单击云环境名称进入详细信息页面，单击虚拟资源子页面，如图2所示，查看可用域、主机集群、主机、虚机、裸金属、裸金属服务器等信息。\r\n\r\n图2 虚拟资源页面\r\n\r\n    * 可用域（AZ(Availability Zone, 可用性区域)）：通常是一组具有独立电力设备供电的节点集合。\r\n\r\n    * 主机集群：通常将具有某一相同硬件资源属性的主机（如固态硬盘的主机、内存超过32 G的主机）划分为一个主机集群。在部署虚机时，云管平台会根据虚机的属性自动选择合适的主机集群。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n查看清单\r\n\r\n  1. 登录云管统一平台后，单击导航菜单，选择运维→运维分析→资源对象，打开基础设施清单页面，如图3所示。\r\n\r\n图3 基础设施清单页面\r\n\r\n  2. 单击某一对象名称（以主机对象为例），打开概述页面，查看该对象的健康状况、风险、效率及告警信息，如图4所示。\r\n\r\n说明：\r\n\r\n单击高级筛选按钮，展开筛选区域框，可选择各个筛选项来筛选出需要的清单。例如：\r\n\r\n     * 对象类型选择容器POD，单击筛选按钮可以筛选出所有对象类型为容器POD的对象。\r\n\r\n     * 对象类型选择主机，单击筛选按钮可以筛选出所有对象类型为主机的对象。\r\n\r\n图4 主机清单页面\r\n\r\n  3. （可选）切换到综合指标、时间轴、网络拓扑、虚机页面，查看详细信息。\r\n\r\n说明：\r\n\r\n在网络拓扑页签，支持虚拟网络与物理网络拓扑可视化。\r\n\r\n单击主机承载的物理设备，如图5所示，可跳转到物理设备信息页面，如图6所示。\r\n\r\n图5 主机的网络拓扑页签举例图6 物理设备页面\r\n\r\n\r\n\r\n\r\n管理行政归属拓扑\r\n\r\n  1.", "answer": "虚拟资源包括以下种类：\n\n  * 虚机\n  * 主机\n  * 主机网络\n  * 虚拟网络\n  * 云环境\n  * 虚机磁盘\n  * 主机磁盘分区\n  * 主机链路\n  * 数据中心\n  * 主机集群\n  * 可用域\n  * 裸金属\n  * 块存储\n  * 文件存储\n  * 对象存储\n  * 网络资源（如虚拟路由、端口、安全组、虚拟防火墙、虚拟负载均衡等）\n  * 镜像资源\n\n以上内容基于上下文信息中关于虚拟资源的描述整理而成。"}
{"id": 13, "query": "物理机通用场景纳管1500台主机需要哪种部署规模、几个节点？", "recall": "[1]:物理机场景\r: 物理机场景\r\n\r\n物理机场景下节点规格参见表1。\r\n\r\n表1 节点规格场景| 节点| 部署规模| 管理规模| Paas规格  \r\n---|---|---|---|---  \r\nvCPU（core）| 内存（GB）| 存储（GB）  \r\n通用场景| 单节点| tiny| <=100主机 ，等效1000虚机| 24| 128| 600  \r\n三节点| small| <=1000主机 ，等效10000虚机| 2000  \r\n六节点| medium| 1001~2000主机，等效20000虚机| 控制节点2000计算节点1500  \r\n九节点| large| 2001~6000主机，等效60000虚机| 控制节点2000计算节点1500  \r\n十二节点| 20k| 大于6000主机，等效60000虚机| 控制节点2000计算节点1500  \r\nMEO场景| 六节点| large| 2001~6000主机，等效60000虚机| 20| 128| 600  \r\n  \r\n磁盘分区参见表2（部署所需最小磁盘空间规划，现场实际使用大小需要规划给出参考HLD）。\r\n\r\n表2 磁盘分区分区| 挂载目录| 空间规格(GB)| 说明  \r\n---|---|---|---  \r\n根分区| /| 40| OS根分区| 使用默认值，用户无需修改  \r\n/paasdata/offline分区| /paasdata/offline| 100| /paasdata/offline分区  \r\nPaaS分区| /paasdata| 220| PaaS分区、 应用版本镜像、容器运行空间  \r\n调测日志| /var/zte-log| 20| 记录Director服务调测日志  \r\nPG| /paasdata/op-comsrv/data/PostgreSQL_VNPM| >72| PG的log 32 GB + 40 GB业务数据| 可修改，当取最小值时仅考虑能安全部署起来空间，不做业务量的评估（现场实际使用大小需要规划给出参考HLD）  \r\nPGCache| /paasdata/op-comsrv/data/PostgreSQLCACHE_VNPM| >40| PG的log 32 GB  \r\nES| /paasdata/op-comsrv/data/ES-5.4.3| >40| ES清理最小监控粒度  \r\nCassandra| /paasdata/volume/cassandra| >30| tiny规格时取最小值  \r\nKafka| /paasdata/op-comsrv/data/Apache-Kafka/kafka-director-external| >30| tiny规格时取最小值  \r\nGlusterFS| /glusterdata/volumedata| >60| OKI默认配置最小值\n\n[2]:虚机场景\r: 虚机场景\r\n\r\n虚机场景下节点规格参见表1。\r\n\r\n表1 节点规格场景| 节点| 部署规模| 管理规模| Paas规格  \r\n---|---|---|---|---  \r\nvCPU（core）| 内存（GB）| 存储（GB）  \r\n通用场景| 单节点| tiny| <=100主机 ，等效1000虚机| 24| 128| 600  \r\n三节点| tiny| <=100主机 ，等效1000虚机| 840  \r\nsmall| 101~500主机 ， 等效5000虚机| 2000  \r\n六节点| medium| 501~1000主机， 等效10000虚机| 控制节点2000计算节点1500  \r\n九节点| large| 1000~2000主机，等效20000虚机| 控制节点2000计算节点1500  \r\nCCM场景| 三节点| tiny| <=100主机 ，等效1000虚机| 16| 64| 700  \r\nMEO场景| 六节点| large| 1000~2000主机，等效20000虚机| 20| 128| 600  \r\n  \r\n磁盘分区参见表2。\r\n\r\n表2 磁盘分区盘符| 分区| 挂载目录| 空间规格(GB)| 说明  \r\n---|---|---|---|---  \r\nvda系统盘| 根分区| /| 40| OS根分区| 使用默认值，用户无需修改  \r\n/paasdata/offline分区| /paasdata/offline| 100| /paasdata/offline分区  \r\nPaaS分区| /paasdata| 220| PaaS分区、 应用版本镜像、容器运行空间  \r\n调测日志| /var/zte-log| >20| 记录Director服务调测日志  \r\nvdb数据盘| PG| /paasdata/op-comsrv/data/PostgreSQL_VNPM| >72| PG的log 32 GB + 40 GB业务数据| 可修改，当取最小值时仅考虑能安全部署起来的空间，不做业务量的评估（现场实际使用大小需要规划给出参考HLD）  \r\nPGCache| /paasdata/op-comsrv/data/PostgreSQLCACHE_VNPM| >40| PG的log 32 GB  \r\nES| /paasdata/op-comsrv/data/ES-5.4.3| >40| ES清理最小监控粒度  \r\nCassandra| /paasdata/volume/cassandra| >30| tiny规格时取最小值  \r\nKafka| /paasdata/op-comsrv/data/Apache-Kafka/kafka-director-external| >30| tiny规格时取最小值  \r\nGlusterFS| /glusterdata/volumedata| >60| OKI默认配置最小值\n\n[3]:物理机非容灾场景\r: 物理机非容灾场景\r\n\r\n物理机非容灾场景的网络配置组网图如图1所示。\r\n\r\n图1 组网图\r\n\r\n网络平面配置参见表1。\r\n\r\n表1 网络平面配置逻辑网络平面| 承载物理网口| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---|---  \r\n北向网络| 外部物理网口（bond0）| 6| 手动设3个固定ip到控制节点，临时配置不能固化，其他2个浮动ip系统安装时自动配置| 客户端访问Director网络，Dirctor访问NTP-Server网络| \r\n\r\n  * 平台运维和北向业务网络合一\r\n  * 地址：3+1+1+1；平台运维：3个固定地址，1个VIP\r\n  * 业务SLB 1个地址\r\n  * DaisySeed 1个地址\r\n\r\n  \r\nTecsClient网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务一个地址  \r\nPubApi网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务一个地址  \r\nSto-Data网络（存储网络数据面）| 存储物理网口（bond2）| N(N为节点个数)| 人工规划，系统安装时自动配置| 外置存储数据平面| 可选： 如果使用本地盘，则不需要规划该平面  \r\nSto-Mgt网络（存储网络管理面）| 存储物理网口（bond2）| 3| 人工规划，系统安装时自动配置| 外置存储管理平面| 可选： 如果是预置卷（提前建好了卷），则不需要规划该平面  \r\nPXE网络| 内部物理网口（bond1）| >N(N为节点个数)| 人工规划，在DaisySeed侧配置地址池；| 按照裸机操作系统所用网络平面| vlan需要配置成同交换机端口native vlan一致  \r\n内部网络池（Net-API）| 内部物理网口（bond1）| PaaS自动分配| 人工规划20个连续的VLANID ，1000个IP并配置| TCF 内部网络管理分配| 物理机场景使用underlay网络，每个租户网络是独立vlan  \r\n带外网络| DaisySeed使用| 1| 人工配置| 安装操作系统，使用带外启动裸机| -\n\n[4]:物理机容灾场景\r: 物理机容灾场景\r\n\r\n物理机容灾场景的网络配置组网图如图1所示。\r\n\r\n图1 组网图\r\n\r\n网络平面配置参见表1。\r\n\r\n表1 网络平面配置逻辑网络平面| 承载物理网口| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---|---  \r\n北向/运维网络平面| 外部物理网口（bond0）| 5| 手动设3个固定ip到控制节点，临时配置不能固化，其他2个浮动ip系统安装时自动配置| 客户端访问Director网络，Dirctor访问NTP-Server网络| \r\n\r\n  * 平台运维和北向业务网络合一\r\n  * 地址：3+1+1\r\n  * 平台运维：3个固定地址，1个VIP\r\n  * 业务SLB 1个地址\r\n\r\n  \r\nTecs Client网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务1个地址  \r\nPublic Api网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务1个地址  \r\nSto-Data网络（存储网络数据面）| 存储物理网口（bond2）| N(N为节点个数)| 人工规划，系统安装时自动配置| 外置存储数据平面| 可选： 如果使用本地盘，则不需要规划该平面  \r\nSto-Mgt网络（存储网络管理面）| 存储物理网口（bond2）| 3| 人工规划，系统安装时自动配置| 外置存储管理平面| 可选： 如果是预置卷（提前建好了卷），则不需要规划该平面  \r\nPXE网络（部署网络）| 内部物理网口（bond1）| >N+1(N为节点个数)| 人工规划，在DaisySeed侧配置地址池| 按照裸机操作系统所用网络平面| vlan需要配置成同交换机端口native vlan一致  \r\n内部网络池（Net-API网络）| 内部物理网口（bond1）| PaaS自动分配| 人工规划20个连续的VLANID ，1000个IP并配置| TCF 内部网络管理分配| 物理机场景使用underlay网络，每个租户网络是独立vlan  \r\nGR-Net| 外部物理网络（eth0）| 1| 人工规划，系统安装时自动配置| 中间容灾网络（FTP/PG/ES）| -  \r\nGR-Cassandra| 外部物理网络（eth0）| N(N为节点个数)| 自动分配| cassandra异地容网络| 这个是应用网络，需要站点间互通  \r\n带外网络平面（BMC网络）| DaisySeed需要接入| 1| 人工规划| 部署裸机，重启服务器使用| 部署裸机，重启服务器使用  \r\n  \r\n容灾需要配置防火墙开启，参见表2。\r\n\r\n表2 防火墙配置网络平面| 源| 目的| 开放端口| 作用  \r\n---|---|---|---|---  \r\nGR-NET| 站点1 SLB IP| 站点2 SLB IP| 3011,3012| NDR Https  \r\nGR-NET| 站点2 SLB IP| 站点1 SLB IP| 3011,\n\n[5]:虚机非容灾场景\r: 虚机非容灾场景\r\n\r\n通用场景\r\n\r\n通用场景的网络配置组网图如图1所示。\r\n\r\n图1 通用场景组网图\r\n\r\n通用场景的网络平面配置参见表1。\r\n\r\n表1 通用场景网络平面配置网络平面| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---  \r\n北向网络| 1| 人工规划，系统安装时自动配置| 客户端访问Director portal网络，以及北向上报网络| SLB 托管网络  \r\nTecsClient网络（南向网络）| 1| 人工规划，系统安装时自动配置| Director访问TECS的TECSCLIENT平面| SLB 托管网络  \r\nPubApi网络（南向网络）| 1| 人工规划，系统安装时自动配置| Director访问TECS的PUBLICAPI平面| SLB 托管网络  \r\n运维网络（net-iapi）| 5| 手动配置3个固定IP到环境并固化到文件，1个VIP系统安装时自动配置| 节点SSH和NTP服务网络平面、Director访问对象存储的S3平面（DNS）| \r\n\r\n  * 主机网络，3个固定IP，1个VIP\r\n  * DaisySeed 需要1个\r\n\r\n  \r\n内部网络（net-api）| 地址池：N+2+20（N = 节点个数）| \r\n\r\n  * 每个节点的net_api网络ip（规划的前N+2）， 当前版本约束需要多出2个地址，否则会部署失败\r\n  * 其余20个规划PaaS内部组件VIP使用\r\n\r\n| PaaS内部网络，东西向流量| -", "answer": "物理机通用场景下，纳管1500台主机需要的部署规模为“medium”，对应六个节点。"}
{"id": 14, "query": "EPS回落流程中，PCF向SBC上报几次用户位置吗，分别使用什么事件？", "recall": "[1]:EPS Fallback语音呼叫\r: PCF发起专用QoS Flow建立流程，当流程到(R)AN后，(R)AN根据配置判断是否发起EPS Fallback的流程。\r\n\r\n     * EPS Fallback之前，(R)AN会通知UE_B测量LTE(Long Term Evolution, 长期演进)的信号，再通过切换或者重定向的方式向E-UTRAN回落。整个回落过程，没有信令通知IMS，故IMS不感知EPS Fallback流程的触发。\r\n\r\n     * EPS Fallback之后，回落到LTE网络，由VoLTE提供服务。\r\n\r\n  15. PCF将回落后的位置信息通过RAR(Re-Auth-Request, 重新鉴权请求)消息发送给P-CSCF，此时的位置信息为回落后4G的信息，其中IP-CAN-Type、RAT-Type和3GPP-User-Location-Info AVP都携带4G的信元。\r\n\r\n  16. P-CSCF收到RAR消息后，向PCF返回RAA(Re-Auth-Answer, 重新鉴权响应)响应。\r\n\r\n  17. P-CSCF根据RAR消息中的位置信息刷新SIP消息中的PANI头域，增加Network-Provided参数，随着183消息转发给S-CSCF。\r\n\r\n  18. S-CSCF向AS转发183消息。AS收到183消息后，解析出用户的PANI(P-Access-Network-Info, 接入网信息（SIP私有扩展之一）)，识别出4G信息，确认用户的PANI头域增加E-UTRAN相关接入信息如“3GPP-E-UTRAN-FDD”或“3GPP-E-UTRAN-TDD”， 即可使用VoLTE的所有功能，则向被叫UE_B提供语音业务并将被叫UE_B的PANI写入CDR(Charging Data Record, 计费数据记录)。\r\n\r\n  19. AS经I/S-CSCF向主叫侧返回183消息。\r\n\r\n  20. 主叫侧向被叫侧发送的PRACK请求，表示主叫侧成功接收183响应，并且进行资源预留。\r\n\r\n  21. 被叫侧返回针对PRACK请求的200 OK响应，表示成功接收PRACK请求。\r\n\r\n  22. 被叫侧返回180响应，表示被叫振铃。\r\n\r\n  23. 主叫UE_A向被叫侧发送PRACK请求，表示主叫侧成功接收180响应，并且已完成资源预留。\r\n\r\n  24. 被叫侧返回针对PRACK请求的200 OK响应，表示成功接收PRACK请求。\r\n\r\n  25. 被叫摘机，向主叫侧返回200 OK响应。\r\n\r\n  26. 主叫侧返回INVITE消息的ACK响应消息，主被叫进入通话。\r\n\r\n  27. 挂机释放流程。\n\n[2]:# AM上报事件配置\r: # AM上报事件配置\r\n\r\n## 背景知识\r\n\r\nAM事件上报是PCF用来向AMF订阅事件的配置，包括用户位置改变（LOC_CH）和切片改变（ALLOWED_NSSAI_CH）事件。\r\n\r\n当PCF下发了用户位置改变/切片改变事件订阅，若AMF检测到用户位置变化/切片变化，需要上报更新的用户位置/切片。参见协议29507，4.2.3.2 Policy Control Request Triggers。\r\n\r\n此配置可以设置PCF在N15会话中下发的事件，自由决定是否订阅用户位置/切片变化信息。\r\n\r\n## 功能描述\r\n\r\n在Npcf_AMPolicyControl以及Npcf_UEPolicyControl服务中，可使用此配置进行订阅事件的设置和查询，对其它功能以及系统无影响。\r\n\r\n维护人员可通过查询AM上报事件配置命令对当前事件进行查询；可通过修改AM上报事件配置命令，对位置改变事件/切片改变事件进行设置。pcf在Npcf_AMPolicyControl_Create Response消息里面会下发设置好的位置/切片trigger，当UE出现位置改变/切片变化，AMF会把新的位置/切片上报给PCF。\r\n\r\n## 相关主题\r\n\r\n  * **SET AMEVENT**  \r\n\r\n  * **SHOW AMEVENT**  \r\n\r\n\r\n\r\n\r\n**父主题：** AM数据配置\n\n[3]:# 用量同步阈值配置\r: # 用量同步阈值配置\r\n\r\n## 背景知识\r\n\r\n为了保证SPR（Subscription Profile Repository，用户签约数据库）准确及时地累计用量，方便计费，PCF（Policy Control Function，策略控制功能）在收到SMF（Session Management Function，会话管理功能）上报的用量后累计，如果当前累计用量与上次累计用量的差额大于等于一个阈值，则PCF必须向SPR同步用量。\r\n\r\nSPR向PCF下发用户可用用量，用户向PCF上报用户使用用量。PCF累计用户使用用量，向SPR同步用户使用用量，SPR累计并保存用户已使用用量，方便BOSS（Business and Operation Support System，运营和运维支撑系统）计费。\r\n\r\n## 功能描述\r\n\r\n用量同步阈值配置用于配置PCF触发向SPR同步用量的阈值。当PCF需要设置向SPR同步的阈值时，需要执行此配置。\r\n\r\n执行成功后，当PCF在收到SMF上报的用量后累计，如果当前累计用量与上次累计用量的差额，大于等于用量同步阈值配置的值，PCF会向SPR同步用量。\r\n\r\n如果不配置，则PCF经过用量同步时间间隔向SPR同步用量（通过命令修改用量公共参数配置）。满足其中一个配置，PCF就会向SPR同步用量。\r\n\r\n## 相关主题\r\n\r\n  * **SET USGTHRESH**  \r\n\r\n  * **SHOW USGTHRESH**  \r\n\r\n\r\n\r\n\r\n**父主题：** 用量数据配置\n\n[4]:# SET DEFPCEFEVENT \r: 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nSAREACH | 服务区域改变 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于服务区域改变时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nSCNNCH | 服务CN节点改变 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于服务CN节点改变时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\n  \r\n## 命令举例\r\n\r\n修改默认上报事件配置。\r\n\r\n修改SGSN相关信息改变为YES，SGSN相关信息改变会上报该事件。\r\n\r\n修改QoS相关信息改变为YES，QoS相关信息改变会上报该事件。\r\n\r\n修改RAT改变为YES，RAT改变会上报该事件。\r\n\r\n修改TFT改变为YES，TFT改变会上报该事件。\r\n\r\n修改PLMN相关信息改变为YES，PLMN相关信息改变会上报该事件。\r\n\r\n修改IP-CAN类型改变为YES，IP-CAN类型改变会上报该事件。\r\n\r\n修改承载恢复为YES，承载恢复会上报该事件。\r\n\r\n修改时区变化为YES，时区变化会上报该事件。\r\n\r\n修改信用度不足为YES，信用度不足会上报该事件。\r\n\r\n修改信用度被重新分配为YES，信用度被重新分配会上报该事件。\r\n\r\n修改最大APN AMBR改变为NO，最大APN AMBR改变不会上报该事件。\r\n\r\nSET DEFPCEFEVENT:SGSN=\"YES\",QOS=\"YES\",RAT=\"YES\",TFT=\"YES\",PLMN=\"YES\",IPCAN=\"YES\",BEARERRECOV=\"YES\",TIMEZONE=\"NO\",OUTCREDIT=\"YES\",REALLOCCREDIT=\"YES\",MAXMBRAPNAMBRCHG=\"NO\";\r\n\r\n## 相关命令\r\n\r\n查询默认上报事件\r\n\r\n**父主题：** 默认上报事件配置\n\n[5]:# ADD PCEFEVENT \r: 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nCMSESFAIL | 信用管理会话失败 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于配置信用管理会话失败时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nPSDAOFF | PS数据离线状态改变 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于配置PS数据离线状态改变时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nQOSNTFCTL | QoS通知控制 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于QoS流的GFBR在QoS流有效期内不能(或者再一次)保证时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nRESRELEASE | 资源释放结果指示 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于规则关联的资源释放时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nREFQOSINDCH | 反射QoS指示改变 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于反射QoS指示改变时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nSAREACH | 服务区域改变 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于服务区域改变时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nSCNNCH | 服务CN节点改变 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 | 参数作用：该参数用于服务CN节点改变时是否上报该事件。 数据来源：本端规划。 配置原则：如果需要SMF在该事件变化时上报该事件，则配置为上报，否则配置为不上报。  \r\nREMARK | 备注 | 参数可选性:任选参数；参数类型:字符型；参数范围为:0~256个字符。 | 备注  \r\n  \r\n## 命令举例\r\n\r\n增加上报事件配置。上报事件配置编号为1，应用标识为1，用户类型为1，新增SGSN相关信息改变为NO，新增QoS相关信息改变为NO，新增RAT改变为NO，新增TFT改变为NO，新增PLMN相关信息改变为YES，新增IP-CAN类型改变为YES。\r\n\r\nADD PCEFEVENT:ID=1,APPID=1,USERTYPE=1,SGSN=\"NO\",QOS=\"NO\",RAT=\"NO\",TFT=\"NO\",", "answer": "在EPS回落流程中，根据提供的上下文信息，PCF向SBC上报用户位置的次数和所使用的事件如下：\n\n1. 第一次上报：在EPS Fallback之前，(R)AN会通知UE_B测量LTE的信号，并通过RAR(Re-Auth-Request, 重新鉴权请求)消息发送给P-CSCF回落后4G的位置信息。这次上报是在用户准备进行EPS Fallback时进行的，上报的是用户即将从5G网络回落到4G网络的位置信息。\n\n   事件：此次上报使用的是RAR消息中的位置信息更新。\n\n2. 第二次上报：在用户完成回落到LTE网络后，PCF通过RAR消息发送给P-CSCF回落后4G的信息，包括IP-CAN-Type、RAT-Type和3GPP-User-Location-Info AVP等。\n\n   事件：此次上报同样是通过RAR消息进行的，上报的是用户已经回落到4G网络后的位置信息。\n\n根据上下文信息，上述两次上报是明确的。至于是否有其他上报，则没有在上下文中提供相关信息，因此无法确定。"}
{"id": 15, "query": "发布虚机前有哪些准备工作？", "recall": "[1]:发布虚机\r: 单击操作列的下拉按钮，选择暂停。\r\n  2. 在弹出的暂停对话框中，再次单击暂停按钮。\r\n\r\n  \r\n挂起虚机| \r\n\r\n  1. 单击操作列的下拉按钮，选择挂起。\r\n  2. 在弹出的挂起对话框中，再次单击挂起按钮。\r\n\r\n  \r\n锁定虚机| \r\n\r\n  1. 单击操作列的下拉按钮，选择锁定。\r\n  2. 在弹出的锁定对话框中，再次单击锁定按钮。\r\n\r\n  \r\n修改虚机名称| \r\n\r\n  1. 单击操作列的下拉按钮，选择修改名称。\r\n  2. 在弹出的修改名称对话框中，输入新名称，单击保存按钮。\r\n\r\n  \r\n修改虚机类型| \r\n\r\n  1. 单击操作列的下拉按钮，选择修改类型。\r\n  2. 在弹出的修改类型对话框中，选择新类型，单击保存按钮。\r\n\r\n  \r\n调整虚机规格| \r\n\r\n  1. 单击操作列的下拉按钮，选择规格调整。\r\n  2. 在弹出的规格调整对话框中，选择新的规格，单击保存按钮。\r\n\r\n  \r\n在线扩容虚机| \r\n\r\n  1. 单击操作列的下拉按钮，选择在线扩容。\r\n  2. 在弹出的在线扩容对话框中，选择新的规格，单击保存按钮。\r\n\r\n  \r\n创建镜像快照| \r\n\r\n  1. 单击操作列的下拉按钮，选择创建镜像快照。\r\n  2. 在弹出的创建镜像快照对话框中，选择创建方式，输入快照名称，单击确认按钮。\r\n\r\n  \r\n配置CPU| \r\n\r\n  1. 单击操作列的下拉按钮，选择CPU配置。\r\n  2. 在弹出的CPU配置对话框中，输入频率上限和频率下限，单击保存按钮。\r\n\r\n  \r\n配置内存| \r\n\r\n  1. 单击操作列的下拉按钮，选择内存配置。\r\n  2. 在弹出的内存配置对话框中，输入内存上限和内存下限，单击保存按钮。\r\n\r\n  \r\n重建虚机| \r\n\r\n  1. 单击操作列的下拉按钮，选择重建。\r\n  2. 在弹出的重建对话框中，选择镜像和磁盘分区方式，单击确认按钮。\r\n\r\n  \r\n备份虚机| \r\n\r\n  1. 单击操作列的下拉按钮，选择虚机备份。\r\n  2. 在弹出的创建备份任务对话框中，输入名称，选择备份类型、备份方式、保存天数，单击确定按钮。\r\n\r\n  \r\n迁移/热迁移虚机| \r\n\r\n  1. 单击操作列的下拉按钮，选择迁移或热迁移。\r\n  2. 在弹出的迁移或热迁移对话框中，选择可用域和主机，单击确认按钮。\n\n[2]:虚机发布管理\r: 虚机发布管理\r\n\r\n组织管理员虚机发布管理的流程如图1所示。\r\n\r\n图1 组织管理员虚机发布管理流程\r\n\r\n子主题：\r\n\r\n  * 登录云管平台\r\n\r\n  * 准备虚机启动源：镜像启动或云盘启动\r\n\r\n  * 添加虚机云网络\r\n\r\n  * 添加安全组\r\n\r\n  * 发布虚机\n\n[3]:发布虚机\r: 单击操作列的下拉按钮，选择暂停。\r\n    2. 在弹出的暂停对话框中，再次单击暂停按钮。  \r\n挂起虚机| \r\n    1. 单击操作列的下拉按钮，选择挂起。\r\n    2. 在弹出的挂起对话框中，再次单击挂起按钮。  \r\n锁定虚机| \r\n    1. 单击操作列的下拉按钮，选择锁定。\r\n    2. 在弹出的锁定对话框中，再次单击锁定按钮。  \r\n修改虚机名称| \r\n    1. 单击操作列的下拉按钮，选择修改名称。\r\n    2. 在弹出的修改名称对话框中，输入新名称，单击保存按钮。  \r\n修改虚机类型| \r\n    1. 单击操作列的下拉按钮，选择修改类型。\r\n    2. 在弹出的修改类型对话框中，选择新类型，单击保存按钮。  \r\n调整虚机规格| \r\n    1. 单击操作列的下拉按钮，选择规格调整。\r\n    2. 在弹出的规格调整对话框中，选择新的规格，单击保存按钮。  \r\n在线扩容虚机| \r\n    1. 单击操作列的下拉按钮，选择在线扩容。\r\n    2. 在弹出的在线扩容对话框中，选择新的规格，单击保存按钮。  \r\n创建镜像快照| \r\n    1. 单击操作列的下拉按钮，选择创建镜像快照。\r\n    2. 在弹出的创建镜像快照对话框中，选择创建方式，输入快照名称，单击确认按钮。  \r\n配置CPU| \r\n    1. 单击操作列的下拉按钮，选择CPU配置。\r\n    2. 在弹出的CPU配置对话框中，输入频率上限和频率下限，单击保存按钮。  \r\n配置内存| \r\n    1. 单击操作列的下拉按钮，选择内存配置。\r\n    2. 在弹出的内存配置对话框中，输入内存上限和内存下限，单击保存按钮。  \r\n重建虚机| \r\n    1. 单击操作列的下拉按钮，选择重建。\r\n    2. 在弹出的重建对话框中，选择镜像和磁盘分区方式，单击确认按钮。  \r\n备份虚机| \r\n    1. 单击操作列的下拉按钮，选择虚机备份。\r\n    2. 在弹出的创建备份任务对话框中，输入名称，选择备份类型、备份方式、保存天数，单击确定按钮。  \r\n迁移/热迁移虚机| \r\n    1. 单击操作列的下拉按钮，选择迁移或热迁移。\r\n    2. 在弹出的迁移或热迁移对话框中，选择可用域和主机，单击确认按钮。  \r\n  \r\n  * 修改VNC密码\r\n\r\n虚机关机的状态下，单击虚机名称，进入虚机详情页面，在高级配置区域单击VNC密码右侧的图标，即可对VNC密码进行修改。\n\n[4]:发布虚机\r: 发布虚机\r\n\r\n摘要\r\n\r\n本节介绍发布虚机的操作步骤。\r\n\r\n前提\r\n\r\n  * 使用组织管理员账户登录TECS Director。\r\n\r\n  * 已上传并发布镜像。\r\n\r\n  * 已创建网络。\r\n\r\n  * 已创建虚机规格。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→组织资源管理，打开组织资源管理页面，单击组织名称，打开组织的详情页面。\r\n\r\n  2. 单击详情页面中的虚拟机图标，打开虚拟机页面，如图1所示。\r\n\r\n图1 虚拟机页面\r\n\r\n  3. 单击+发布虚机按钮，打开发布虚机-基本信息页面，根据规划填写相应参数，如图2所示。\r\n\r\n图2 发布虚机-基本信息\r\n\r\n说明：\r\n\r\n组织管理员批量创建虚机的个数上限为50。\r\n\r\n选择不同的部署策略需设置不同的参数。\r\n\r\n如果…| 那么…  \r\n---|---  \r\n按云环境部署| 根据需求选择云环境和虚机规格。  \r\n按VDC部署| 根据需求选择VDC和虚机规格。  \r\n  \r\n  4. 单击下一步按钮，打开发布虚机-启动源页面，为虚机选择启动源，如图3所示。\r\n\r\n图3 发布虚机-启动源\r\n\r\n  5. 单击下一步按钮，打开发布虚机-云硬盘页面，为虚机选择是否增加云硬盘，如图4所示。\r\n\r\n图4 发布虚机-云硬盘\r\n\r\n  6. 单击下一步按钮，打开发布虚机-网络页面，为虚机增加网卡，如图5所示。\r\n\r\n图5 发布虚机-网络\r\n\r\n  7. 单击下一步按钮，打开发布虚机-高级配置页面，如图6所示。\r\n\r\n图6 发布虚机-高级配置\r\n\r\n  8. 根据规划填写相应配置参数，用户可根据需要勾选秘钥对配置虚机，秘钥对的创建步骤参见创建密钥对。\r\n\r\n  9. 单击发布虚机按钮。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n  * 发布完成的虚机可在虚机列表中进行以下操作：\r\n\r\n如果...| 那么...  \r\n---|---  \r\n打开虚机控制台| \r\n    1. 单击操作列的控制台按钮。\r\n    2. 在弹出的窗口中输入密码进入控制台。  \r\n关闭虚机| \r\n    1. 单击操作列的下拉按钮，选择关机。\r\n    2. 在弹出的关机对话框中，再次单击关机按钮。  \r\n重启虚机| \r\n    * 硬重启：\r\n      1. 单击操作列的下拉按钮，选择硬重启。\r\n      2. 在弹出的硬重启对话框中，输入验证码，单击重启按钮。\r\n    * 软重启：\r\n      1. 单击操作列的下拉按钮，选择软重启。\r\n      2. 在弹出的软重启对话框中，输入验证码，单击重启按钮。  \r\n删除虚机| \r\n    1. 单击操作列的下拉按钮，选择删除。\r\n    2. 在弹出的删除对话框中，如果需要删除虚机挂载的云硬盘，可以一并勾选，单击确认按钮。  \r\n暂停虚机| \r\n    1.\n\n[5]:虚机发布管理\r: 虚机发布管理\r\n\r\nTECS Director支持组织管理员/子组织管理员发布本组织/子组织所使用的虚机。两者操作步骤类似，本节以组织管理员的操作步骤为例进行描述。\r\n\r\n发布虚机的操作流程，如图1所示。\r\n\r\n图1 发布虚机流程\r\n\r\n说明：\r\n\r\n虚机等资源已在MANO上创建，TECS Director与MANO对接后，在TECS Director上可进行资源的查询操作。\r\n\r\n子主题：\r\n\r\n  * 上传VDC镜像（可选）\r\n\r\n  * 添加虚机云网络\r\n\r\n  * 添加安全组\r\n\r\n  * 创建密钥对\r\n\r\n  * 创建云硬盘\r\n\r\n  * 发布虚机\r\n\r\n  * 扩容虚机磁盘", "answer": "发布虚机前的准备工作包括：\n\n1. 使用组织管理员账户登录TECS Director。\n2. 已上传并发布镜像。\n3. 已创建网络。\n4. 已创建虚机规格。\n5. 对于按云环境部署，需根据需求选择云环境和虚机规格。\n6. 对于按VDC部署，需根据需求选择VDC和虚机规格。\n7. 准备虚机启动源：镜像启动或云盘启动。\n8. 添加虚机云网络。\n9. 添加安全组。\n10. 创建密钥对（可选）。\n11. 创建云硬盘（如果需要）。"}
{"id": 16, "query": "发布镜像时，镜像源支持哪几种方式？", "recall": "[1]:上传公共镜像（可选）\r: 上传公共镜像（可选）\r\n\r\n摘要\r\n\r\n镜像用于创建虚机，镜像分为公共镜像与私有镜像，公共镜像由云管理员统一上传。通过此操作上传的镜像可被各个组织使用。\r\n\r\n如果不存在公共镜像，可以跳过此节。\r\n\r\n本节介绍上传镜像的操作步骤。\r\n\r\n前提\r\n\r\n使用超级管理员账户登录TECS Director。\r\n\r\n相关信息\r\n\r\nTECS Director中超级管理员和组织管理员都支持上传镜像操作，超级管理员上传的镜像支持所有组织使用；组织管理员上传的VDC(Virtual Data Center, 虚拟数据中心)镜像只支持本组织使用。组织管理员上传VDC(Virtual Data Center, 虚拟数据中心)镜像的操作步骤参见上传VDC镜像（可选）。\r\n\r\n镜像源文件支持本地文件、ftp网络文件和http(s)网络文件上传三种方式。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择基础设置→虚拟资源→镜像，默认打开云镜像页面。在左侧功能导航树中选择镜像→文件仓库，打开文件仓库页面。\r\n\r\n  2. 单击+上传镜像按钮，打开上传镜像页面，如图1所示。\r\n\r\n图1 上传镜像\r\n\r\n  3. 根据不同的上传方式，选择执行如下操作。\r\n\r\n如果...| 那么...  \r\n---|---  \r\n选择本地文件方式| \r\n    1. 在镜像源中单击本地文件。\r\n    2. 根据规划设置镜像参数，单击上传按钮。  \r\n选择ftp网络文件方式| \r\n    1. 在镜像源中单击ftp网络文件，弹出FTP参数配置对话框，如图2所示。\r\n    2. 根据规划配置FTP参数，单击确认按钮。\r\n    3. 根据规划配置剩余的镜像参数，单击上传按钮。  \r\n选择http(s)网络文件方式| \r\n    1. 在镜像源中单击http(s)网络文件，弹出HTTP/HTTPS参数配置对话框，如图3所示。\r\n    2. 根据规划配置HTTP(Hypertext Transfer Protocol, 超文本传输协议)或HTTPS(Hypertext Transfer Protocol Secure, 超文本传输安全协议)参数。\r\n    3. （可选）单击URL检测按钮，可检查填写的URL是否连通。\r\n    4. 单击确认按钮。\r\n    5. 根据规划配置剩余的镜像参数，单击上传按钮。  \r\n图2 FTP参数配置图3 HTTP/HTTPS参数配置\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n镜像上传完成后可执行如下操作：\r\n\r\n如果...| 那么...  \r\n---|---  \r\n发布镜像| \r\n\r\n  1. 在左侧导航树中选择镜像→云镜像节点，打开云镜像页面。\r\n  2. 单击发布镜像按钮，打开发布镜像页面。\r\n  3. 选择需发布的镜像和云环境，单击发布按钮。\r\n\r\n  \r\n删除镜像| 在云镜像列表中单击需删除镜像所在行的删除按钮，删除镜像的同时即取消发布该镜像。  \r\n查看镜像详情| 在云镜像或文件仓库页面中单击镜像名称，可查看镜像详情和镜像发布信息。  \r\n编辑镜像| 在文件仓库页面中，单击某个镜像操作列下拉菜单中的编辑按钮，可编辑镜像名称、最小磁盘、最小内存、元数据等参数。\n\n[2]:上传镜像\r: 上传镜像\r\n\r\n摘要\r\n\r\n通过此操作上传的镜像可被各个组织使用。\r\n\r\n本节介绍上传镜像的操作步骤。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n相关信息\r\n\r\nTECS Director中领域管理员和组织管理员都支持上传镜像操作，领域管理员上传的镜像支持所有组织使用；组织管理员上传的VDC(Virtual Data Center, 虚拟数据中心)镜像只支持本组织使用。组织管理员上传VDC(Virtual Data Center, 虚拟数据中心)镜像的操作步骤参见上传VDC镜像（可选）。\r\n\r\n镜像源文件支持本地文件、ftp网络文件和http(s)网络文件上传三种方式。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择基础设施→虚拟资源→镜像，默认打开云镜像页面。在左侧导航树中选择镜像→镜像仓库，打开镜像仓库页面。\r\n\r\n  2. 单击+上传镜像按钮，打开上传镜像页面，如图1所示。\r\n\r\n图1 上传镜像\r\n\r\n  3. 根据不同的上传方式，选择执行如下操作。\r\n\r\n如果...| 那么...  \r\n---|---  \r\n选择本地文件方式| \r\n    1. 在镜像源中单击本地文件。\r\n    2. 根据规划设置镜像参数，单击上传按钮。  \r\n选择ftp网络文件方式| \r\n    1. 在镜像源中单击ftp网络文件，弹出FTP参数配置对话框，如图2所示。\r\n    2. 根据规划配置FTP参数，单击确认按钮。\r\n    3. 根据规划配置剩余的镜像参数，单击上传按钮。  \r\n选择http(s)网络文件方式| \r\n    1. 在镜像源中单击http(s)网络文件，弹出HTTP参数配置对话框，如图3所示。\r\n    2. 根据规划配置HTTP(Hypertext Transfer Protocol, 超文本传输协议)参数。\r\n    3. （可选）单击URL检测按钮，可检查填写的URL是否连通。\r\n    4. 单击确认按钮。\r\n    5. 根据规划配置剩余的镜像参数，单击上传按钮。  \r\n  \r\n图2 FTP参数配置图3 HTTP参数配置\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n镜像上传完成后可执行如下操作：\r\n\r\n如果...| 那么...  \r\n---|---  \r\n删除镜像| 在云镜像列表中单击需删除镜像所在行的删除按钮，删除镜像的同时即取消发布该镜像。  \r\n查看镜像详情| 在云镜像或文件仓库页面中单击镜像名称，可查看镜像详情和镜像发布信息。  \r\n编辑镜像| 在文件仓库页面中，单击某个镜像操作列下拉菜单中的编辑按钮，可编辑镜像名称、最小磁盘、最小内存、元数据等参数。  \r\n清理镜像| \r\n\r\n  1. 在云镜像页面，单击右上角的镜像清理，打开镜像清理页面。\r\n  2. 单击切换页签可以查看不同时间段内未使用的镜像，可对镜像进行删除和批量删除操作。\n\n[3]:上传VDC镜像（可选）\r: 上传VDC镜像（可选）\r\n\r\n摘要\r\n\r\n在TECS Director中组织管理员除了可以使用公共镜像外，也可以上传、查询本组织专用的VDC(Virtual Data Center, 虚拟数据中心)镜像文件。在镜像管理列表中可以查看来源，状态，云环境等相关信息。\r\n\r\n本节介绍上传VDC(Virtual Data Center, 虚拟数据中心)镜像的步骤。\r\n\r\n前提\r\n\r\n使用组织管理员账户登录TECS Director。\r\n\r\n相关信息\r\n\r\n镜像源文件支持本地文件、FTP(File Transfer Protocol, 文件传输协议)网络文件和http（s）网络文件三种方式上传。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→组织资源管理，打开组织资源管理页面，单击组织名称，打开组织的详情页面，如图1所示。\r\n\r\n图1 组织资源管理页面\r\n\r\n  2. 单击详情页面中的镜像图标，打开镜像页面，默认显示私有镜像页签，如图2所示。\r\n\r\n图2 镜像页面\r\n\r\n  3. 单击镜像仓库，切换至镜像仓库页签，如图3所示。\r\n\r\n图3 文件仓库\r\n\r\n  4. 单击+上传镜像按钮，打开上传镜像页面。\r\n\r\n  5. 根据规划选择镜像源文件并填写相关参数。\r\n\r\n  6. 单击上传按钮，完成VDC(Virtual Data Center, 虚拟数据中心)镜像的上传。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n在镜像页面的镜像列表中，已上传的VDC(Virtual Data Center, 虚拟数据中心)镜像支持以下操作：\r\n\r\n  * 在操作列中选择不同的下拉菜单项，可对该镜像进行删除/编辑等操作。\r\n\r\n  * 单击某个镜像名称，可查看该镜像详情。\n\n[4]:上传VDC镜像（可选）\r: 上传VDC镜像（可选）\r\n\r\n摘要\r\n\r\n在TECS Director中组织管理员除了可以使用公共镜像外，也可以上传、查询本组织专用的VDC(Virtual Data Center, 虚拟数据中心)镜像文件。在镜像管理列表中可以查看来源，状态，云环境等相关信息。\r\n\r\n本节介绍上传VDC(Virtual Data Center, 虚拟数据中心)镜像的步骤。\r\n\r\n前提\r\n\r\n使用组织管理员账户登录TECS Director。\r\n\r\n相关信息\r\n\r\n镜像源文件支持本地文件、FTP(File Transfer Protocol, 文件传输协议)网络文件和http（s）网络文件三种方式上传。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→组织资源管理，打开组织资源管理页面，单击组织名称，打开组织的详情页面，如图1所示。\r\n\r\n图1 组织资源管理页面\r\n\r\n  2. 单击详情页面中的镜像图标，打开镜像页面，默认显示私有镜像页签，如图2所示。\r\n\r\n图2 镜像页面\r\n\r\n  3. 单击镜像仓库，切换至镜像仓库页签，如图3所示。\r\n\r\n图3 文件仓库\r\n\r\n  4. 单击+上传镜像按钮，打开上传镜像页面。\r\n\r\n  5. 根据规划选择镜像源文件并填写相关参数。\r\n\r\n  6. 单击上传按钮，完成VDC(Virtual Data Center, 虚拟数据中心)镜像的上传。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n在镜像页面的镜像列表中，已上传的VDC(Virtual Data Center, 虚拟数据中心)镜像支持以下操作：\r\n\r\n  * 在操作列中选择不同的下拉菜单项，可对该镜像进行删除/编辑等操作。\r\n\r\n  * 单击某个镜像名称，可查看该镜像详情。\n\n[5]:准备虚机启动源：镜像启动或云盘启动\r: 准备虚机启动源：镜像启动或云盘启动\r\n\r\n虚机支持通过镜像、云硬盘、云硬盘快照三种方式创建。\r\n\r\n  * 镜像：镜像分为公有镜像与私有镜像，公有镜像由云管理员上传，私有镜像由组织用户上传，具体操作参见上传VDC镜像（可选）。\r\n\r\n  * 云硬盘：通过已有的云硬盘创建虚机。\r\n\r\n  * 云硬件快照：对云硬盘进行快照，然后使用云硬盘快照启动虚机。\r\n\r\n\r\n\r\n\r\n子主题：\r\n\r\n  * 上传VDC镜像（可选）\r\n\r\n  * 创建云硬盘", "answer": "发布镜像时，镜像源支持以下几种方式：\n   1. 本地文件方式\n   2. ftp网络文件方式\n   3. http(s)网络文件方式"}
{"id": 17, "query": "Director告警南向设置是在哪个界面上", "recall": "[1]:对接PaaS的QoS告警\r: 在南向设置页面，切换到告警SNMP V3设置页签，如图4所示。\r\n\r\n图4 告警SNMP V3设置页签\r\n\r\n  5. 单击修改按钮，设置参数，完成南向设置接收来自PaaS告警。\r\n\r\n表2 告警SNMP V3设置参数说明参数| 说明  \r\n---|---  \r\nSNMP协议类型| 填写V3  \r\n用户名| 用户名需要与PaaS的系统管理→告警管理→SNMP北向地址中用户名一致  \r\n安全级别| 选择认证&加密  \r\n认证模式| 需要与PaaS的系统管理→告警管理→SNMP北向地址中认证方式一致  \r\n认证密码| 填写认证密码，需要与PaaS的系统管理→告警管理→SNMP北向中设置一致。密码长度至少8位，必须包含大写字母、小写字母、数字和特殊符号中的三种  \r\n加密模式| 需要与PaaS的系统管理→告警管理→SNMP北向地址中加密方式一致  \r\n加密密码| 填写加密密码，需要与PaaS的系统管理→告警管理→SNMP北向中设置一致。密码长度至少8位，必须包含大写字母、小写字母、数字和特殊符号中的三种  \r\n  \r\n  6. 单击确定按钮。\r\n\r\n\r\n\r\n\r\n启用QoS告警\r\n\r\n  1. 在OpenPalette系统，选择系统设置→告警管理，打开告警管理页面。\r\n\r\n  2. 在告警管理页面，切换到QoS配置页签，如图5所示。\r\n\r\n图5 QoS配置页签\r\n\r\n  3.\n\n[2]:配置南向参数\r: 配置南向参数\r\n\r\n摘要\r\n\r\n本节介绍设置南向的资源，性能及告警通道相关参数的步骤。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n设置性能南向FTP服务器\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择更多→系统管理→系统设置，默认打开北向设置页面，在左侧导航树中选择系统设置→南向设置，打开南向设置页面，如图1所示。\r\n\r\n图1 南向设置页面\r\n\r\n\r\n\r\n  1. 在性能南向FTP服务器设置页签中，单击+添加FTP服务器按钮，打开添加FTP服务器页面，如图2所示。\r\n\r\n图2 添加FTP服务器-性能南向\r\n\r\n  2. 根据规划设置配置参数，单击添加按钮，完成FTP服务器的设置。\r\n\r\n\r\n\r\n\r\n设置资源南向FTP服务器\r\n\r\n  1. 单击资源南向FTP服务器设置，切换至资源南向FTP服务器设置页签，单击+添加FTP服务器按钮，打开添加FTP服务器页面，如图3所示。\r\n\r\n图3 添加FTP服务器-资源南向\r\n\r\n  2. 根据规划设置配置参数，单击创建按钮。\r\n\r\n\r\n\r\n\r\n设置告警SNMP V3\r\n\r\n  1. 单击告警SNMPV3设置，切换至告警SNMPV3设置页签。\r\n\r\n  2. 单击修改按钮，告警SNMP V3参数变为可编辑状态，如图4所示。\r\n\r\n图4 设置告警SNMP V3\r\n\r\n  3. 根据规划填写参数，设置接收PaaS(Platform as a Service, 平台即服务)的告警，参数说明参见表1。\r\n\r\nPaaS端告警上报设置参见“对接PaaS的QoS告警”。\r\n\r\n表1 参数说明参数名称| 配置说明  \r\n---|---  \r\nSNMP协议类型| 默认为V3  \r\n用户名| 需要与PaaS中SNMP北向地址设置的用户名一致  \r\n安全级别| 填写认证、加密  \r\n认证方式| 需要与PaaS中SNMP北向地址设置的认证方式一致  \r\n加密方式| 需要与PaaS中SNMP北向地址设置的加密方式一致\n\n[3]:对接纯O云环境\r: 在北向设置页签，SNMP TRAP设置区域，单击添加TRAP按钮，选择一个SNMP用户，添加TECS Director的ip地址和40002端口，如图5所示。\r\n\r\n图5 添加TRAP\r\n\r\n  4. 在TECS Director系统，单击导航菜单，选择系统设置→南向设置，打开南向设置页面。\r\n\r\n  5. 在告警SNMP V3设置页签，如图6所示，设置参数与纯O云环境中保持一致。\r\n\r\n说明：\r\n\r\n设置用户名与纯O云环境中的设置的一致，选择认证&加密，认证密码和加密密码与纯O云环境的一致，默认为Admin@123。\r\n\r\n图6 告警SNMP V3设置\r\n\r\n  6. 单击确定按钮， TECS Director与纯O云环境对接成功。\n\n[4]:对接纯K云环境\r: 在北向设置页签，SNMP TRAP设置区域，单击添加TRAP按钮，选择一个SNMP用户，添加TECS Director的ip地址和40002端口，如图5所示。\r\n\r\n图5 添加TRAP\r\n\r\n  4. 在TECS Director系统，单击导航菜单，选择系统设置→南向设置，打开南向设置页面。\r\n\r\n  5. 在告警SNMP V3设置页签，如图6所示，设置参数与纯K云环境中保持一致。\r\n\r\n说明：\r\n\r\n设置用户名与纯K云环境中的设置的一致，选择认证&加密，认证密码和加密密码与纯K云环境的一致，默认为Admin@123。\r\n\r\n图6 告警SNMP V3设置\r\n\r\n  6. 单击确定按钮， TECS Director与纯K云环境对接成功。\n\n[5]:对接PaaS的QoS告警\r: 对接PaaS的QoS告警\r\n\r\n摘要\r\n\r\nTECS Director产品的QoS(Quality of Service, 服务质量)告警是由PaaS(Platform as a Service, 平台即服务)平台进行监控。当PaaS(Platform as a Service, 平台即服务)平台根据预定义阈值触发告警时，会通过SNMP(Simple Network Management Protocol, 简单网络管理协议) Trap将告警发送给TECS Director进行呈现，因此需要完成PaaS(Platform as a Service, 平台即服务)平台告警北向上报配置以及TECS Director产品SNMP(Simple Network Management Protocol, 简单网络管理协议)南向配置，从而实现上述QoS(Quality of Service, 服务质量)告警呈现。\r\n\r\n前提\r\n\r\n  * 已经获取PaaS平台登录用户名、密码。\r\n\r\n  * 已经获取管登录TECS Director系统的管理员账户。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n配置PaaS SNMP北向\r\n\r\n  1. 在浏览器地址输入栏中，输入PaaS平台环境登录地址（https://ip:1043/portaladmin），单击回车键。\r\n\r\n  2. 输入用户名、密码，单击登录按钮，如图1所示。\r\n\r\n图1 OpenPalette页面\r\n\r\n  3. 在OpenPalette系统，选择系统设置→告警管理，打开告警管理页面。\r\n\r\n  4. 在告警管理页面，切换到SNMP北向地址页签，如图2所示。\r\n\r\n图2 SNMP北向地址\r\n\r\n  5. 单击添加SNMP北向地址按钮，打开添加SNMP北向地址页面，如图3所示。\r\n\r\n图3 添加SNMP北向地址页面\r\n\r\n  6. 配置添加SNMP北向地址参数，参数说明参见表1。\r\n\r\n表1 添加SNMP北向地址参数说明参数| 说明  \r\n---|---  \r\nIP地址| 填写TECS Director浮动地址  \r\n端口| 填写40002  \r\nSNMP协议类型| 选择SNMP v3版本  \r\n用户名| 用户名需要与TECS Director的系统管理→南向设置→告警SNMPV3中设置的用户名一致  \r\n安全级别| 选择认证&加密  \r\n认证模式| 需要与TECS Director的系统管理→南向设置→告警SNMPV3设置中认证方式一致，建议填写MD5  \r\n认证密码| 填写认证密码，需要与TECS Director的系统管理→南向设置→告警SNMPV3中设置一致。密码长度至少8位，必须包含大写字母、小写字母、数字和特殊符号中的三种  \r\n加密模式| 需要与TECS Director的系统管理→南向设置→告警SNMPV3设置中加密方式一致，建议填写DES  \r\n加密密码| 填写加密密码，需要与TECS Director的系统管理→南向设置→告警SNMPV3中设置一致。密码长度至少8位，必须包含大写字母、小写字母、数字和特殊符号中的三种  \r\n  \r\n  7. 单击添加按钮。\r\n\r\n\r\n\r\n\r\n配置云管系统 SNMP南向\r\n\r\n  1. 在浏览器地址输入栏中，输入TECS Director环境登录地址（https://ip/uportal/），单击回车键。\r\n\r\n  2. 输入用户名、密码，单击登录按钮。\r\n\r\n  3. 在TECS Director系统首页，单击导航菜单，选择系统管理→系统设置→南向设置，打开南向设置页面。\r\n\r\n  4. 在南向设置页面，切换到告警SNMP V3设置页签，如图4所示。\r\n\r\n图4 告警SNMP V3设置页签\r\n\r\n  5.", "answer": "Director告警南向设置是在系统管理→系统设置→南向设置的界面上进行的。具体来说，需要在南向设置页面中切换到告警SNMP V3设置页签进行相关配置。"}
{"id": 18, "query": "RCP包含哪些数据存储类服务？", "recall": "[1]:服务组成\r: sc-oam-web| 提供本地网管web服务。  \r\nRCP Policy Management| RCP(Resource Control Platform, 资源控制平台)策略管理，又称Npcf_PolicyManagement。| PCF| sc-npcf-policymanagement| RCP策略管理单元，提供RCP策略配置功能。  \r\nRCP System Management| RCP系统管理，又称Npcf_SystemManagement。| PCF| sc-pcf-dap| RCP系统管理单元，负责Diameter连接管理及网元公共配置维护操作。  \r\n接口管理&转发类| Tunnel Encryption| 隧道加密，又称CommonS_IPSec。| 公共服务，服务于：SMF/AMF/PCF/UPF……| sc-ipsec-mp| 本服务SC(Service Component, 服务组件)控制单元，负责升级控制、动态命令。  \r\nsc-ipsec| 提供信令报文加密服务。  \r\nInterface Management| 接口处理，又称CommonS_IPS。| sc-ips-mp| 本服务的SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。  \r\nsc-ips| 转发接口服务，提供报文分发服务以及IP路由转发功能。  \r\nHTTP Service| HTTP服务，又称CommonS_HTTP_LB。| 公共服务，同时服务于：SMF/AMF/PCF/UPF……| sc-http-lb-mp| 本服务的SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。  \r\nsc-http-lb| HTTP协议处理，提供能力开发查询功能。  \r\nSIG Service| 信令服务，又称CommonS_SIG。| 公共服务，同时服务于：AMF/PCF/UDM……| sc-sig-mp| 本服务的SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-sig| SCTP协议处理和负载均衡。  \r\nRCP Signal Service| RCP信令服务，又称Npcf_SIGLB。| PCF| sc-pcf-siglb-mp| 本服务的SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-pcf-siglb| SMS(Short Message Service, 短消息业务)协议处理和负载均衡。  \r\n信令业务类| RCP Policy Control| RCP策略控制，又称Npcf_PolicyControl。| PCF| sc-pcm-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-pcm| 策略和计费控制单元，负责2/3/4/5G策略和计费控制业务逻辑。  \r\n数据存储类| UDSF Management| 非结构化数据管理，又称Nudsf_UnstructuredDataManagement。| 公共服务，服务于：SMF/AMF/PCF……| sc-cudr-cdn-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-cudr-cdn-l| 内存数据库（左域），提供数据存储、备份和同步。  \r\nsc-cudr-cdn-r| 内存数据库（右域），提供数据存储、备份和同步。\n\n[2]:缩略语\r: Object Access Protocol简单对象访问协议\r\n\r\nSPR\r\n\r\nSubscription Profile Repository用户签约数据库\r\n\r\nSUPI\r\n\r\nSubscriber Permanent Identifier用户永久标识\r\n\r\nTAI\r\n\r\nTracking Area Identity跟踪区标识\r\n\r\nTDF\r\n\r\nTraffic Detection Function流量检测功能\r\n\r\nTECS\r\n\r\nTulip Elastic Cloud System郁金香弹性云系统\r\n\r\nUDM\r\n\r\nUnified Data Management统一数据管理\r\n\r\nUDR\r\n\r\nUser Data Request用户数据（读取）请求\r\n\r\nUnified Data Repository统一数据存储\r\n\r\nUDSF\r\n\r\nUnstructured Data Storage Function非结构化数据存储功能\r\n\r\nUE\r\n\r\nUser Equipment用户设备\r\n\r\nUPF\r\n\r\nUser Plane Function用户平面功能\r\n\r\nURLLC\r\n\r\nUltra Reliable Low Latency Communication超高可靠超低时延通信\r\n\r\nVIM\r\n\r\nVirtualized Infrastructure Manager虚拟化基础设施管理系统\r\n\r\nVNF\r\n\r\nVirtualized Network Function虚拟化网络功能\r\n\r\nVNFM\r\n\r\nVirtualized Network Function Manager虚拟化网络功能管理器\r\n\r\nVPLMN\r\n\r\nVisited Public Land Mobile Network拜访公众陆地移动网\r\n\r\nVoLTE\r\n\r\nVoice over LTELTE语音\r\n\r\nVoNR\r\n\r\nVoice over New Radio新空口承载语音\r\n\r\neMBB\r\n\r\nEnhanced Mobile Broadband增强移动宽带\r\n\r\neNodeB\r\n\r\nEvolved NodeB演进的NodeB\r\n\r\nmMTC\r\n\r\nMassive Machine Type Communication海量机器类通信\n\n[3]:缩略语\r: 缩略语\r\n\r\n5GC\r\n\r\n5G Core Network5G核心网\r\n\r\nAAA\r\n\r\nAnswer-Auth-Answer应答鉴权响应\r\n\r\nAAR\r\n\r\nAnswer-Auth-Request应答鉴权请求\r\n\r\nAF\r\n\r\nApplication Function应用功能\r\n\r\nAMF\r\n\r\nAccess and Mobility Management Function接入和移动管理功能\r\n\r\nAPI\r\n\r\nApplication Programming Interface应用编程接口\r\n\r\nBSF\r\n\r\nBinding Support Function绑定支持功能\r\n\r\nBSS\r\n\r\nBusiness Support System业务支撑系统\r\n\r\nCIM\r\n\r\nContainer Infrastructure Manager容器基础设施管理器\r\n\r\nCOTS\r\n\r\nCommercial Off The Shelf商用货架产品\r\n\r\nCP\r\n\r\nContent Provider内容提供商\r\n\r\nDN\r\n\r\nData Network数据网\r\n\r\nDRA\r\n\r\nDiameter Routing AgentDiameter路由代理\r\n\r\nDVS\r\n\r\nDistributed Virtual Switch分布式虚拟交换机\r\n\r\nEMC\r\n\r\nElastic Management Center弹性管理中心\r\n\r\nEMS\r\n\r\nElement Management System网元管理系统\r\n\r\nETSI\r\n\r\nEuropean Telecommunications Standards Institute欧洲电信标准化协会\r\n\r\nHTTP\r\n\r\nHypertext Transfer Protocol超文本传输协议\r\n\r\nIMS\r\n\r\nIP Multimedia SubsystemIP多媒体子系统\r\n\r\nIaaS\r\n\r\nInfrastructure as a Service基础设施即服务\r\n\r\nKPI\r\n\r\nKey Performance Indicator关键性能指标\r\n\r\nLIB\r\n\r\nLabel Information Base标签信息库\r\n\r\nLTM\r\n\r\nLogical Topology Management逻辑拓扑管理\r\n\r\nNF\r\n\r\nNetwork Function网络功能\r\n\r\nNFS\r\n\r\nNetwork Function Service网络功能服务\r\n\r\nNFV\r\n\r\nNetwork Functions Virtualization网络功能虚拟化\r\n\r\nNFVO\r\n\r\nNetwork Functions Virtualization Orchestrator网络功能虚拟化编排器\r\n\r\nNR\r\n\r\nNew Radio新无线\r\n\r\nNS\r\n\r\nNetwork Service网络服务\r\n\r\nOAM\r\n\r\nOperation, Administration and Maintenance操作管理维护\r\n\r\nOSS\r\n\r\nOperation Support System运营支撑系统\r\n\r\nPCC\r\n\r\nPolicy and Charging Control计费和策略控制\r\n\r\nPCF\r\n\r\nPolicy Control Function策略控制功能\r\n\r\nPCRF\r\n\r\nPolicy and Charging Rules Function策略和计费规则功能\r\n\r\nPDU\r\n\r\nPacket Data Unit分组数据单元\r\n\r\nPOD\r\n\r\nPoint of Deployment部署单元\r\n\r\nPaaS\r\n\r\nPlatform as a Service平台即服务\r\n\r\nQoS\r\n\r\nQuality of Service服务质量\r\n\r\nRAA\r\n\r\nRe-Auth-Answer重新鉴权响应\r\n\r\nRAN\r\n\r\nRadio Access Network无线接入网\r\n\r\nRAR\r\n\r\nRe-Auth-Request重新鉴权请求\r\n\r\nRCP\r\n\r\nResource Control Platform资源控制平台\r\n\r\nSC\r\n\r\nService Component服务组件\r\n\r\nSCCU\r\n\r\nService Component Control Unit服务组件控制单元\r\n\r\nSCR\r\n\r\nService Component Repository服务组件仓库\r\n\r\nSDK\r\n\r\nSoftware Development Kit软件开发工具\r\n\r\nSMF\r\n\r\nSession Management Function会话管理功能\r\n\r\nSMS\r\n\r\nShort Message Service短消息业务\r\n\r\nSP\r\n\r\nService Provider服务提供商\r\n\r\nSPR\r\n\r\nSubscription Profile Repository用户签约数据库\r\n\r\nSR-IOV\r\n\r\nSingle-Root I/O Virtualization单根I/O虚拟化\r\n\r\nSSH\r\n\r\nSecure Shell安全外壳协议\r\n\r\nSaaS\r\n\r\nSoftware as a Service软件即服务\r\n\r\nUE\r\n\r\nUser Equipment用户设备\r\n\r\nVIM\r\n\r\nVirtualized Infrastructure Manager虚拟化基础设施管理系统\r\n\r\nVM\r\n\r\nVirtual Machine虚拟机\r\n\r\nVNF\r\n\r\nVirtualized Network Function虚拟化网络功能\r\n\r\nVNFM\r\n\r\nVirtualized Network Function Manager虚拟化网络功能管理器\r\n\r\nVRU\r\n\r\nVirtual Running Unit虚拟运行单元\r\n\r\nVoNR\r\n\r\nVoice over New Radio新空口承载语音\n\n[4]:服务组成\r: sc-cudr-cdn-r| 内存数据库（右域），提供数据存储、备份和同步。  \r\nCUDR System Management| 云数据系统管理，又称Ncudr_SystemManagement。| sc-cudr-sys-mp| 数据存储控制中心，负责CDN组件的弹性策略控制。  \r\nCUDR Access| 云数据接入管理，又称Ncudr_Access。| sc-cudr-access-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-cudr-access| 数据存储接入单元，负责局间CDN访问和数据同步。  \r\nsc-tmsp-nff| TMSP网络转发框架，提供高性能网络报文收发通道。  \r\nCUDR Access Management| 云数据接入系统管理， 又称Ncudr_AccessManagement。| sc-cudr-accessmgt-mp| 数据接入控制中心，负责数据接入组件的弹性策略控制。  \r\n策略日志类| RCP Policy Log File Management| RCP策略日志文件管理，又称Npcf_LOG。| PCF| sc-log-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-log| 策略日志单元，负责生成策略日志文件，并可将策略日志文件传递给**RCP Policy Log Database** 或外部日志服务器。  \r\nRCP Policy Log Database| RCP策略日志数据库，又称Npcf_LogStoreUnit。| sc-lsu-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-lsu| 策略日志数据库，对**RCP Policy Log File Management** 提供的策略日志文件进行分析和入库，生成策略报表。\n\n[5]:服务组成\r: 服务组成\r\n\r\n业务服务和服务组件说明\r\n\r\n为了适应5GC(5G Core Network, 5G核心网)网络的灵活性、扩展性，ZXUN RCP采用服务化架构。服务化架构由一系列业务服务NFS(Network Function Service, 网络功能服务)和服务组件SC(Service Component, 服务组件)构成。\r\n\r\n  * 业务服务，是NF(Network Function, 网络功能)的具体功能，能够独立完成某个具体功能的软件实体。服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征。多个业务服务组合可实现一定的业务功能。\r\n\r\n  * 服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。\r\n\r\n\r\n\r\n\r\n业务服务模型和资源模型的映射关系\r\n\r\n业务服务模型和资源模型是解耦的。业务服务既可以运行在VM(Virtual Machine, 虚拟机)资源模型（IaaS形态）。业务功能逻辑呈现一致，底层的部署方式不同。\r\n\r\n服务组件的运行载体为在IaaS形态部署时呈现为容器实例。\r\n\r\n业务服务模型和资源模型的映射关系如图1所示。\r\n\r\n图1 业务服务模型和资源模型的映射关系\r\n\r\n各业务服务和服务组件介绍\r\n\r\nZXUN RCP的服务组成如图2所示。\r\n\r\n图2 ZXUN RCP服务组成\r\n\r\n各业务服务及其包含的服务组件介绍参见下表。\r\n\r\n服务分类| 服务| 说明| 归属NF| 服务组件| 功能描述  \r\n---|---|---|---|---|---  \r\n平台支撑&网管类| Service Governance| 微服务治理，又称CommonS_TMSP。| 公共服务，服务于：SMF/AMF/PCF/UPF……| sc-tmsp-mgt| 管理SC，服务部署资源的编排、升级、自愈。  \r\nsc-tmsp-smc| 管理SC，服务管理、服务注册、发现、升级。  \r\nsc-tmsp-mp| 本服务配置管理、性能统计管理等。  \r\nsc-tmsp-rosng| 路由协议栈SC。  \r\nsc-tmsp-amu| 仲裁SC，对其他SC提供主备仲裁。  \r\nOperation and Maintenance| 操作维护，又称CommonS_OAM。| 公共服务，服务于：SMF/AMF/PCF/UPF……| sc-oam-gateway| OAM(Operation, Administration and Maintenance, 操作管理维护)接入网关，负责管理口HTTP(Hypertext Transfer Protocol, 超文本传输协议)/SSH(Secure Shell, 安全外壳协议)等协议接入。  \r\nsc-oam-main| OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。  \r\nsc-oam-umf| OAM统一消息上报单元，负责信令跟踪消息上报。  \r\nsc-oam-ccmf| OAM配置管理单元，负责配置数据校验、存储、同步。  \r\nsc-oam-upgrade| OAM升级管理单元，负责业务SC和OAM自身升级控制。  \r\nsc-oam-postgre| OAM数据库，负责存储OAM配置、安全、接入等数据。  \r\nsc-oam-web| 提供本地网管web服务。  \r\nRCP Policy Management| RCP(Resource Control Platform,", "answer": "RCP包含以下数据存储类服务：\n\n1. UDSF Management（非结构化数据管理）：提供非结构化数据存储功能，服务于SMF/AMF/PCF等。\n   - sc-cudr-cdn-mp：数据存储控制中心，负责CDN组件的弹性策略控制。\n   - sc-cudr-cdn-l：内存数据库（左域），提供数据存储、备份和同步。\n   - sc-cudr-cdn-r：内存数据库（右域），提供数据存储、备份和同步。\n\n2. RCP Policy Log Database（RCP策略日志数据库）：负责对策略日志文件进行分析和入库，生成策略报表。\n   - sc-lsu-mp：策略日志数据库控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。\n   - sc-lsu：策略日志数据库，对策略日志文件进行分析和入库。"}
{"id": 19, "query": "RCP对AF请求的授权响应方式有哪几种？", "recall": "[1]:特性描述\r: RCP找到该PDU会话关联的AF会话，并向AF发送Npcf_PolicyAuthorization_Notify请求消息，把事件相关信息通知AF。主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :method: POST:scheme: http或https:path: {$request.body#/ascReqData/evSubsc/notifUri}/notify，例如/af/v1/sessions/notify:authority: AF的主机:端口。  \r\nevSubsUri| AF策略授权URI，和Creae响应http头域Location字段分配的resourceUri一致  \r\nevNotifs| 事件通知信息：\r\n     * event：通知的事件\r\n     * flows：通知的事件所关联的流信息  \r\naccessType| 接入类型  \r\nratType| RAT类型  \r\nplmnId| PLMN标识  \r\nqncReports| QoS通知信息  \r\nusgRep| 赞助用量上报信息  \r\n  \r\n  4. AF向RCP回复Npcf_PolicyAuthorization_Notify响应。\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :status: 204 No Content  \r\n  \r\n\r\n\r\n\r\n订阅事件\r\n\r\n流程说明如下：\r\n\r\n  1. AF携带新的订阅事件向RCP发起更新请求，发送Npcf_PolicyAuthorization_Subscribe请求消息给RCP，请求订阅事件。主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :method: PUT:scheme: http或https:path: /npcf-policyauthorizationpolicyauthorization/v1/app-sessions/{appSessionId}/events-subscription，例如：/npcf-policyauthorizationpolicyauthorization/v1/app-sessions/groupno_2303.supi_123456789012345.sessionid_4041032035915144366./events-subscription:authority: PCF主机:端口  \r\nevents| 订阅的事件列表  \r\nnotifUri| 事件通知URI，即AF后续接收PCF下发的事件通知请求的URI地址  \r\nusgThres| 赞助用量的门限信息  \r\n  \r\n注：相比Update操作，Subscribe操作只用于更新事件订阅，Update操作除可以更新事件订阅外，还可以更新业务信息。\r\n\r\n  2. RCP根据Npcf_PolicyAuthorization_Subscribe请求消息提供的appSessionId中的sessionid信息找到AF会话，回复Npcf_PolicyAuthorization_Subscribe响应消息。主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :status: 201 Created200 OK204 No Content  \r\n  \r\n注：RCP根据“AF能力配置”的“授权响应方式”，确定采用立即响应（流程图中步骤2a）还是等承载确认后响应（流程图中步骤2b），详见“授权响应方式”。\r\n\r\n  3. RCP对AF业务（参见“AF业务映射”）进行决策，并根据运营规划决策PCC规则，通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF。\r\n\r\n  4. SMF校验PCC规则信息通过，返回Npcf_SMPolicyControl_UpdateNotify响应。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n该流程中步骤3和步骤4步的主要参数可以参见“AF会话上线，建立专有承载”的步骤3和步骤4。\r\n\r\n去订阅事件\r\n\r\n流程说明如下：\r\n\r\n  1.\n\n[2]:特性描述\r: 但备用P-CSCF可能无法获得该用户的IP地址，则需要在消息中携带用户的IMSI信息（从HSS获取）及APN信息。\r\n\r\nRCP收到AAR请求后，通过消息中的Rx-Request-Type = PCSCF_RESTORATION（2）识别出是指示P-CSCF发生容灾切换的AAR消息：\r\n\r\n  * 若AAR消息携带了IP地址信息，则通过IP+IP-Domain-ID/APN（可选）查找到用户的N7会话。\r\n\r\n  * 若AAR消息未携带IP地址信息，则通过IMSI+APN（可选）查找到用户的所有会话。\r\n\r\n\r\n\r\n\r\n查找N7会话成功后，RCP删除N7会话所有和关联AF会话相关的承载规则，通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF，并携带pcscfRestIndication指示P-CSCF发生了容灾切换。SMF收到指示后，发起N7会话释放流程，并使用户下线。之后用户重新接入网络并向IMS注册。\r\n\r\n特别的，对于指示容灾切换的AAR消息，无论是否携带了Auth-Session-State = NO_STATE_MAINTAINED(1)，RCP都不会为其建立AF会话，当成一次通知消息处理。\r\n\r\n授权响应方式\r\n\r\n授权响应方式指的是RCP收到AAR/STR请求后，是先回复AAA/STA再和SMF/PGW交互，还是等和SMF/PGW交互后才回复AAA/STA，可以通过“AF能力配置”的“授权响应方式”进行配置，该字段各取值含义如下：\r\n\r\n  * 0（立即响应）：RCP收到AAR/STR请求后，先回复AAA/STA，再和SMF/PGW交互。\r\n\r\n  * 1（等承载确认后响应）：RCP收到AAR/STR请求后，先和SMF/PGW交互，再回复AAA/STA。\r\n\r\n  * 2（仅IMS AF会话建立请求等承载确认后响应）：RCP仅对语音会话初始AAR，先和SMF/PGW交互，再回复AAA/STA。其它场景，先回复AAA/STA，再和SMF/PGW交互。\r\n\r\n\r\n\r\n\r\n该字段的取值2是RCP V7.22.20版本引入的，且此版本后该字段的默认值从取值0调整到取值2（存量配置的此字段若取值0，升级时通过网管脚本自动调整为取值2）。使用取值2的好处：\r\n\r\n  * P-CSCF通常要在初始AAR中订阅IP-CAN_CHANGE事件，并且需要获取初始AAA提供的IP-CAN-Type和RAT-Type。RCP对初始AAR和SMF/PGW交互完后再回复初始AAA，可以从SMF/PGW获得最新的IP-CAN-Type和RAT-Type并在初始AAA中上报给P-CSCF。\r\n\r\n  * 如果授权响应方式为“立即响应”，RCP为了在初始AAA中携带最新的IP-CAN-Type和RAT-Type，需要从用户上线就一直向SMF/PGW订阅IP-CAN_CHANGE和RAT_CHANGE相关事件，这会造成SMF/PGW和RCP间信令交互明显增多，因为非VoNR呼叫期间用户发生RAT改变时SMF/PGW也会通知RCP。\n\n[3]:特性描述\r: 而授权响应方式为“等承载确认后响应”或“仅IMS AF会话建立请求等承载确认后响应”时，RCP可以仅在VoNR呼叫期间因P-CSCF触发而自动向SMF/PGW订阅IP-CAN_CHANGE和RAT_CHANGE相关事件，在VoNR呼叫结束时自动取消这些事件订阅，这样可以避免非VoNR呼叫期间SMF/PGW因用户RAT改变而通知RCP。但“等承载确认后响应”或“仅IMS AF会话建立请求等承载确认后响应”会增加VoNR呼叫接通时延，两者相比之下，“仅IMS AF会话建立请求等承载确认后响应”对呼叫接通时延增加更少，所以推荐这种方式。\r\n\r\n  * 授权响应方式为“仅IMS AF会话建立请求等承载确认后响应”时，如果承载异常，RCP和SMF/PGW交互失败（请求发送失败，响应超时或响应异常）时，RCP可以对P-CSCF回复AAA携带失败码5065（IP-CAN_SESSION_NOT_AVAILABLE），这可以触发P-CSCF启动基于UDM/HSS的P-CSCF容灾流程，使用户下线重接入，用户重建会话后再发起VoNR呼叫大概率可以恢复正常。\r\n\r\n\r\n\r\n\r\n一些特定流程不看授权响应方式配置。例如：基于PCF的P-CSCF容灾增强流程，RCP对初始AAR固定先回复AAA再和SMF/PGW交互。又例如：AF在STR消息中查询用户位置，RCP需要先和SMF/PGW交互，获取最新用户位置后，再回复STA。\r\n\r\n呼叫保持：AF业务多实例\r\n\r\nRCP在业务授权时，根据每个媒体的AF应用标识、媒体类型、流用途、流方向等信息映射成一类业务标识，进行决策产生PCC规则。\r\n\r\n但在用户同时发起多个呼叫时，会建立多个AF会话，不同AF会话的媒体信息只有IP地址和端口不一致，AF应用标识、媒体类型、流用途、流方向等往往都一样，映射出的业务标识也是一样的，就只会决策出同一个PCC规则。在呼叫保持场景下，不同AF会话的媒体流状态是不一样的，下发到同一个PCC规则里则会使得PCC规则的流状态无法设置。\r\n\r\n所以，RCP针对AF多会话的场景，将相同业务标识决策出的规则复制成多份，实例号不为1的实例对应的规则名会加上实例号（实例号左补0扩展成3位）作为后缀区分。这样，每个AF会话的流下发到不同的PCC规则里，PCC规则的流状态可以正确表述媒体流的状态。\r\n\r\nVoWiFi位置查询\r\n\r\nP-CSCF向RCP查询接入网络信息时，如果用户从WLAN附着EPS网络，此时RCP会向SMF/PGW查询接入网络信息后传递给P-CSCF。包括TWAN-Identifier（存放：行政区号+国家码+本地网区号）、UE-Local-IP-Address、UDP-Source-Port参数传递位置信息。\n\n[4]:特性描述\r: 最终，RCP还会根据PCC规则的5QI是GBR型还是Non-GBR型确定PCC规则是否输出GBR。如果是Non-GBR型5QI，则不输出GBR。如果是GBR型5QI，即便之前的带宽计算或网管配置没有GBR，最终PCC规则也会输出GBR，取值和MBR相等。如果带宽计算或网管配置的GBR大于MBR，最终PCC规则输出的GBR会等于MBR。\r\n\r\n一个PCC规则包含的所有单向流都是同一个方向时，另一个方向的带宽值会按0值处理。RCP有一个全局开关（编号1135，IMS业务带宽为0是否下发开关）决定0值带宽是否下发，默认下发。\r\n\r\n授权响应方式\r\n\r\nRCP给AF回复响应的时机，有如下两种方式：\r\n\r\n  * 立即响应：RCP侧处理完成后立即给AF回复响应。\r\n\r\n  * 等承载确认后响应：RCP侧处理完成后，通知承载侧（SMF）。等承载侧回复响应后，RCP再给AF回复响应。\r\n\r\n\r\n\r\n\r\n以上两种方式，通过“AF能力配置”的“授权响应方式”进行配置。\r\n\r\n以下场景，不受上面的配置约束，固定为“等承载确认后响应”：\r\n\r\n  * AF主动离线时订阅了“接入网位置查询”事件。\r\n\r\n  * 订阅了赞助用量上报，且AF主动离线前，未上报过赞助用量。\r\n\r\n\r\n\r\n\r\n事件订阅\r\n\r\n  * Npcf_PolicyAuthrozation的Create/Update/Subscribe/Delete操作都可以订阅事件，每次操作提供全量的订阅事件列表，如果事件列表为null则删除所有事件订阅。\r\n\r\n  * Delete操作只能订阅特定事件（例如“接入网位置查询”事件）。\r\n\r\n  * Subscribe操作只能更新事件订阅，而Update操作除了可以更新事件订阅外，还可以更新业务信息。\r\n\r\n  * Unsubscribe操作只用于取消所有事件订阅。\r\n\r\n\r\n\r\n\r\n接入网位置查询\r\n\r\n在用户进行IMS呼叫的时候，AF有时候需要从网络侧查询用户的接入网信息。例如：用户在进行紧急呼叫的时候，需要根据用户的位置信息进行呼叫中心定位。AF从RCP获取的接入网信息包含：用户位置信息、用户接入地时间或用户接入地时区。RCP在收到AF的查询请求后，需要实时地向SMF查询用户相关的接入网信息，查询后上报给AF。\r\n\r\n可以在以下接口进行接入网位置查询：\r\n\r\n  * N5会话创建\r\n\r\n  * N5会话更新\r\n\r\n  * N5会话主动离线\r\n\r\n  * N5会话事件订阅\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n接入网位置查询都是一次性的，即：RCP上报接入网位置给AF后，后面不再上报。AF如需RCP再次上报，则AF需要向RCP再次订阅。\r\n\r\nN5多会话和重复会话\r\n\r\n如果同时满足以下条件，则认为是N5重复会话，否则认为是N5多会话。\r\n\r\n  * 流信息：每条流的媒体部件编号、子部件编号、流描述完全一致。\r\n\r\n  * 事件订阅：事件订阅events完全一致。\r\n\r\n  * AfAppid：优先使用媒体层比较、后会话层比较。\n\n[5]:特性描述\r: AF发送Npcf_PolicyAuthorization_Unsubscribe请求消息给RCP请求取消订阅事件。主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :method: DELETE:scheme: http 或https:path: /npcf-policyauthorizationpolicyauthorization/v1/app-sessions/{appSessionId}/events-subscription，例如：/npcf-policyauthorizationpolicyauthorization/v1/app-sessions/groupno_2303.supi_123456789012345.sessionid_4041032035915144366./events-subscription:authority: PCF主机:端口  \r\n  \r\n  2. RCP根据Npcf_PolicyAuthorization_Subscribe请求消息提供的appSessionId中的sessionid信息找到AF会话，回复Npcf_PolicyAuthorization_Unsubscribe响应消息。主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :status: 204 No Content  \r\n  \r\n注：RCP根据“AF能力配置”的“授权响应方式”，确定采用立即响应（流程图中步骤2a）还是等承载确认后响应（流程图中步骤2b），详见“授权响应方式”。\r\n\r\n  3. RCP对AF业务（参见“AF业务映射”）进行决策，并根据运营规划决策PCC规则，通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF。\r\n\r\n  4. SMF校验PCC规则信息通过，返回Npcf_SMPolicyControl_UpdateNotify响应。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n该流程中步骤3和步骤4步的主要参数可以参见“AF会话上线，建立专有承载”的步骤3和步骤4。\r\n\r\nAF主动触发的专有承载释放\r\n\r\n流程说明如下：\r\n\r\n  1. 当用户停止使用AF业务时，触发AF向RCP发送Npcf_PolicyAuthorization_Delete请求消息，请求释放AF会话。主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :method: POST:scheme: http 或https:path: /npcf-policyauthorizationpolicyauthorization/v1/app-sessions/{appSessionId}/delete，例如：/npcf-policyauthorizationpolicyauthorization/v1/app-sessions/groupno_2303.supi_123456789012345.sessionid_4041032035915144366./delete:authority: PCF主机:端口  \r\nevents| 订阅的事件列表  \r\nnotifUri| 事件通知URI，即AF后续接收PCF下发的事件通知请求的URI地址  \r\nusgThres| 赞助用量的门限信息  \r\n  \r\n  2. RCP根据Npcf_PolicyAuthorization_Delete请求消息提供的appSessionId中的sessionid信息找到AF会话，回复Npcf_PolicyAuthorization_Delete响应消息，主要包含如下关键参数：\r\n\r\n参数| 说明  \r\n---|---  \r\nHTTP Header关键参数| :status: 200 OK204 No Content  \r\n  \r\n注：RCP根据“AF能力配置”的“授权响应方式”，确定采用立即响应（流程图中步骤2a）还是等承载确认后响应（流程图中步骤2b），详见“授权响应方式”。\r\n\r\n  3. RCP检查出需要删除的AF业务，并将相应的PCC规则通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF指示删除。\r\n\r\n  4. SMF返回Npcf_SMPolicyControl_UpdateNotify响应，并触发专有QoS Flow删除。\r\n\r\n\r\n\r\n\r\nSMF触发的专有承载释放\r\n\r\n流程说明如下：\r\n\r\n  1.", "answer": "RCP对AF请求的授权响应方式有以下几种：\n\n   1. 立即响应：RCP收到AAR/STR请求后，先回复AAA/STA，再和SMF/PGW交互。\n   2. 等承载确认后响应：RCP收到AAR/STR请求后，先和SMF/PGW交互，再回复AAA/STA。\n   3. 仅IMS AF会话建立请求等承载确认后响应：RCP仅对语音会话初始AAR，先和SMF/PGW交互，再回复AAA/STA。其它场景，先回复AAA/STA，再和SMF/PGW交互。"}
{"id": 20, "query": "Director接收南向告警的snmp端口号是多少", "recall": "[1]:关于如何保持TECS 云管系统和NMS告警数据一致\r: NMS(Network Management System, 网络管理系统)可以通过以下方法判断Trap消息是否丢失\r\n\r\n     * TECS Director发往NMS的所有告警Trap信息中都包括两个序号标识sendNotificationId（本次发送序列号）和lastSendNotificationId（上次发送序列号）。在启用单个代理且配置一个Trap目标地址的情况下，利用这两个标识NMS可以知道是否按序无遗漏的收到来自SNMP北向的告警Trap信息。其用法为，NMS收到第一条Trap信息时，保存此Trap的sendNotificationId值，不妨记为lastId，然后收到下一条Trap时比较新Trap的lastSendNotificationId值和前面记录的lastid是否一致，若一致则说明这两条Trap是按序连续发出的，此时NMS用新Trap的sendNotificationId值更新lastId值，然后重复前述检查过程，即可保证按序无遗漏接收告警信息。若检查时发现新Trap的lastSendNotificationId值和前面记录的lastid不一致，则意味着要么这两条Trap之间存在某些Trap丢失，要么发送方发出的多条Trap在接收方发生乱序(因为SNMP协议底层采用udp协议，这两种情况都可能发生)，此时NMS可以启动容错程序，比如缓存一段时间内的Trap信息看能否重整理排序或者接收到中间丢失的Trap信息，若经容错处理后还是未能收到丢失的Trap或者不能把顺序整理成功，则NMS可以通过获取当前告警接口重新和TECS Director同步。但在启用多个代理或者单个代理配置多个Trap目标地址的情况下，这两个标识只保证是递增的。\r\n\r\n     * TECS Director重启后或在发送过程中出现异常，sendNotificationId和lastSendNotificationId会自动归零，NMS(Network Management System, 网络管理系统)可以在一段时间后通过告警接口重新和TECS Director同步。\r\n\r\n\r\n\r\n\r\n关于SNMP(Simple Network Management Protocol, 简单网络管理协议)告警编号说明参见表1。\r\n\r\n表1 告警编号 名称| 说明| OID  \r\n---|---|---  \r\nalarmIndex| 统一告警北向SNMP(Simple Network Management Protocol, 简单网络管理协议)表格中告警的标识。| .1.3.6.1.4.1.3902.4101.1.3.1.9  \r\nalarmId| 告警源产生告警时提供的告警唯一标识。| .1.3.6.1.4.1.3902.4101.1.3.1.1  \r\naid| 在特定专业网范围内的告警唯一标识，对于TECS Director此值只是一个字符串，无其他任何含义。| .1.3.6.1.4.1.3902.4101.1.3.1.23  \r\nid| 告警在TECS Director网管系统中的唯一标识。| .1.3.6.1.4.1.3902.4101.1.3.1.24\n\n[2]:基于网元位置的告警同步\r: 4101.1.4.1.12）在告警同步Trap全部发送给北向网管之后，先发送一条标识告警同步结束的Trap消息给北向网管。\r\n\r\n表4 告警同步结束Trap序号| 参数项名称| 说明| 参数值类型| 值定义（OID）| 备注  \r\n---|---|---|---|---|---  \r\n1| -| 时间戳| TimeTicks| .1.3.6.1.2.1.1.3.0| -  \r\n2| -| 消息类型| Object| .1.3.6.1.6.3.1.1.4.1.0| 取值：.1.3.6.1.4.1.3902.4101.1.4.1.12  \r\n3| systemDN| TECS Director| STRING：0~255个字符| .1.3.6.1.4.1.3902.4101.1.1.3| -  \r\n4| syncUniqueId| 同步编号| Integer| .1.3.6.1.4.1.3902.4101.1.1.6| -\n\n[3]:当前告警表格查询\r: | .1.3.6.1.4.1.3902.4101.1.3.1.19  \r\n20| timeZoneID| 告警上报时区ID（TimeZoneID）| -| .1.3.6.1.4.1.3902.4101.1.3.1.20  \r\n21| timeZoneOffset| 上报时区偏移量（TimeZoneOffset ）| 默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移。| .1.3.6.1.4.1.3902.4101.1.3.1.21  \r\n22| dSTSaving| 告警上报时间夏令时偏移量（DSTSaving）| 默认值为0，通过上报的时区偏移量和夏令时偏移量可以计算时间偏移。| .1.3.6.1.4.1.3902.4101.1.3.1.22  \r\n23| aid| 告警标识（Aid）| 特定范围内的告警唯一标识，只是一个字符串，无其他任何含义。| .1.3.6.1.4.1.3902.4101.1.3.1.23  \r\n24| id| 告警编号（ID）| 告警的唯一数字编号，告警编号唯一标识同一告警。| .1.3.6.1.4.1.3902.4101.1.3.1.24  \r\n25| alarmOtherInfo| 告警自定义属性| -| .1.3.6.1.4.1.3902.4101.1.3.1.25  \r\n26| alarmMocObjectInstance| 网元名称| -| .1.3.6.1.4.1.3902.4101.1.3.1.26\n\n[4]:发送告警上报Trap\r: 3902.4101.1.3.1.8| -  \r\n14| alarmNetype| 网元类型| STRING：0~50个字符| .1.3.6.1.4.1.3902.4101.1.3.1.12| -  \r\n15| alarmIndex| 索引| Integer32| .1.3.6.1.4.1.3902.4101.1.3.1.9| -  \r\n16| alarmId| 告警唯一标识| STRING：0~50个字符有越界风险，修改mib文件中长度限制为500，V1.20.10.06P01实现并在版本说明书中说明| .1.3.6.1.4.1.3902.4101.1.3.1.1| -  \r\n17| alarmCodeName| 告警码名称| STRING：0~50个字符有越界风险，目前mib文件中长度限制为255，南向上报未限制，应保持一致| .1.3.6.1.4.1.3902.4101.1.3.1.14| -  \r\n18| alarmManagedObjectInstanceName| 告警位置名称（网元或网元内定位的名称）| STRING：0~255个字符有越界风险，修改mib文件中单语言长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明| .1.3.6.1.4.1.3902.4101.1.3.1.15| 当位置属性只包括网元时，取值为网元名称；当位置属性包括网元和部件时，取值为\"网元名称,部件名称\"。  \r\n19| alarmSystemType| 资源类型| STRING：0~200个字符存在告警码系统类型systemtype->restype的兼容转换，修改mib文件中长度限制为255，V1.20.10.06P01实现并在版本说明书中说明| .1.3.6.1.4.1.3902.4101.1.3.1.16| -  \r\n20| alarmNeIP| 网元IP| STRING：0-60个字符| .1.3.6.1.4.1.3902.4101.1.3.1.17| -  \r\n21| alarmAck| 告警确认状态| Integer| .1.3.6.1.4.1.3902.4101.1.3.1.18| 1表示确认，2表示未确认。  \r\n22| cleiCode| 网元设备资产号（TECS Director上用自定义属性实现，默认不显示，应用方可根据需要经二次开发后显示）| 为了兼容而保留，值始终为空| .1.3.6.1.4.1.3902.4101.1.3.1.19| -  \r\n23| timeZoneID| 告警上报时间时区ID| STRING：0~50个字符| .1.3.6.1.4.1.3902.4101.1.3.1.20| -  \r\n24| timeZoneOffset| 上报时区偏移量（TimeZoneOffset ）| 默认值为0支持通过上报的时区偏移量和夏令时偏移量计算时间偏移| .1.3.6.1.4.1.3902.4101.1.3.1.21| -  \r\n25| dSTSaving| 告警上报时间夏令时偏移量（DSTSaving）| 默认值为0支持通过上报的时区偏移量和夏令时偏移量计算时间偏移| .1.3.6.1.4.1.3902.4101.1.3.1.\n\n[5]:发送告警上报Trap\r: 发送告警上报Trap\r\n\r\n系统可以使用SNMP接口MIB中定义的alarmNew标识（.1.3.6.1.4.1.3902.4101.1.4.1.1）将未被Trap过滤条件过滤掉的告警上报消息Trap往北向网管。Trap消息中的告警属性值请参阅当前告警表格查询。\r\n\r\n系统实际上报Trap信息中的字段顺序以文档表格中的顺序为准。默认情况下，可见性告警和不可见性告警均会上报。\r\n\r\n表1 告警上报Trap序号| 参数项名称| 说明| 参数值类型| 值定义（OID）| 备注  \r\n---|---|---|---|---|---  \r\n1| -| 时间戳| TimeTicks| .1.3.6.1.2.1.1.3.0| -  \r\n2| -| 消息类型| Object| .1.3.6.1.6.3.1.1.4.1.0| 取值：.1.3.6.1.4.1.3902.4101.1.4.1.1  \r\n3| alarmEventTime| 告警发生时间| DateAndTime类型| .1.3.6.1.4.1.3902.4101.1.3.1.3| -  \r\n4| sendNotificationId| 本次发送序列号| Integer| .1.3.6.1.4.1.3902.4101.1.1.2| -  \r\n5| lastSendNotificationId| 上次发送序列号| Integer| .1.3.6.1.4.1.3902.4101.1.1.4| -  \r\n6| systemDN| 系统DN| STRING：0~255个字符| .1.3.6.1.4.1.3902.4101.1.1.3| -  \r\n7| alarmCode| 告警码，即厂商告警码。| STRING：0~50个字符| .1.3.6.1.4.1.3902.4101.1.3.1.11| -  \r\n8| alarmManagedObjectInstance| 网元位置| STRING：0~255个字符| .1.3.6.1.4.1.3902.4101.1.3.1.2| -  \r\n9| alarmEventType| 告警类型| Integer| .1.3.6.1.4.1.3902.4101.1.3.1.4| -  \r\n10| alarmProbableCause| 告警码中的北向原因码，即标准告警码。| Integer| .1.3.6.1.4.1.3902.4101.1.3.1.5| -  \r\n11| alarmPerceivedSeverity| 告警级别| Integer| .1.3.6.1.4.1.3902.4101.1.3.1.6| -  \r\n12| alarmSpecificProblem| 告警特殊原因| STRING：0~255个字符有越界风险，修改mib文件中长度限制为1000，V1.20.10.06P01实现并在版本说明书中说明| .1.3.6.1.4.1.3902.4101.1.3.1.7| -  \r\n13| alarmAdditionalText| 告警附加文本| STRING：0~1000个字符有越界风险，修改mib文件中长度限制为2000，V1.20.10.06P01实现并在版本说明书中说明| .1.3.6.1.4.1.3902.4101.1.3.1.8| -  \r\n14| alarmNetype| 网元类型| STRING：0~50个字符| .1.3.6.1.4.1.", "answer": "不确定。上下文信息中没有提供关于Director接收南向告警的SNMP端口号的具体信息。"}
{"id": 21, "query": "RCP怎样实现语音会话隔离？", "recall": "[1]:特性描述\r: 当AF为某用户向RCP请求媒体信息时，RCP会根据每个媒体的AF应用标识、媒体类型、流用途、流方向等信息映射成一类业务标识；并针对此类业务流信息进行决策，同时结合AF提供的带宽等信息，构造PCC规则向SMF申请专有承载的建立或更新，从而对用户使用的VoNR业务进行差异化的QoS(Quality of Service, 服务质量)控制。\r\n\r\n说明：\r\n\r\n当用户从VoLTE APN(Access Point Name, 接入点名称)接入时，RCP不会去获取签约信息，也不会根据签约信息进行决策。\r\n\r\n语音会话隔离\r\n\r\n语音会话通常只需要按AF（P-CSCF）请求来做策略决策，而不需要看用户在SPR是否有签约，不像数据会话那样涉及签约、用量、时段、位置等复杂多变的策略。另一方面，语音会话的可靠性要求比数据会话高的多，语音会话如果没有PCF，呼叫流程可能失败，而数据会话如果没有PCF，SMF还可以采用本地策略维持会话。目前很多运营商对语音会话和数据会话部署不同的PCF，减少相互间的影响，提升语音业务可靠性。即便语音会话和数据会话在同一个PCF处理，运营商也希望能够尽量减少相互间的影响。\r\n\r\nRCP有“IMS域APN配置”，可以配置语音会话所使用的IMS APN和紧急APN。配置了这些APN后，这些APN上的会话视为语音会话。RCP对语音会话不访问SPR和OCS/CHF，不会根据SPR用户签约检查AF请求的业务是否能够授权，基于用户签约、累计用量、OCS/CHF策略计数器状态的策略都不会对语音会话生效。此外，语音会话不使用默认上报事件订阅配置，如果语音会话有其特定的上报事件配置，需要使用语音APN在“上报事件配置”中做相应配置。\r\n\r\n资源预留\r\n\r\nRCP可以在VoNR呼叫接通前为IMS呼叫的媒体流预先创建专有承载，以保障VoNR呼叫接通时的通话质量。\r\n\r\nVoNR呼叫在IMS域采用Offer/Answer模型协商媒体参数。通常主叫发送SDP(Session Description Protocol, 会话描述协议) Offer，其中包含主叫侧的媒体收发地址端口等信息；被叫回复SDP Answer，其中包含被叫侧的媒体收发地址端口等信息。P-CSCF综合SDP Offer和SDP Answer的信息，才能确定最终的VoNR业务信息。P-CSCF可以在收到SDP Offer或SDP Answer时向RCP请求资源预留，并使用Service-Info-Status指示提供的媒体信息是初始业务信息还是最终业务信息。\r\n\r\n当UE发起VoNR呼叫时，P-CSCF向RCP请求建立Rx会话。\n\n[2]:隔离故障PCF\r: 卸载用户。\r\n\r\n场景| 操作  \r\n---|---  \r\n纯语音PCF| 参考“全量卸载用户，隔离单个PCF”场景操作。  \r\n数据语音混合PCF| SMF发现语音PCF携带服务区| PCF侧删除服务区，并传表。DEL SERVEDAREAS:SERVEDAREA=\"hnCS\"SYNA  \r\nSMF发现语音PCF仅携带DNN，不携带服务区| PCF侧删除DNN，并传表。DEL DNN:ID=imsSYNA  \r\n  \r\n  2. 调整DRA的指向。\r\n\r\nDRA侧调整路由配置，将用户指向到容灾PCF上。\r\n\r\n  3. 配置拒绝规则。\r\n\r\n增加条件配置：\r\n\r\nADD DM COND:NAME=\"apn_list\",SVCKEY=\"SYS.GX_APN\",OPERATOR=1,VALTYPE=0,VALUE=\"ims\"&\"sos\"\r\n\r\n增加N7规则配置，规则优先级为2000，要求比现场其他会话规则优先级高，数值越大优先级越高：\r\n\r\nADD DM RULE:NAME=\"emergN7\",PLCTYPE=2,PRIOR=2000,CONDEXP=\"{apn_list}\",ACTTYPE=0,LOGFLAG=0,RULENO=0\r\n\r\n增加Gx规则配置，规则优先级为2000，要求比现场其他会话规则优先级高，数值越大优先级越高：\r\n\r\nADD DM RULE:NAME=\"emergGx\",PLCTYPE=512,PRIOR=2000,CONDEXP=\"{apn_list}\",ACTTYPE=0,LOGFLAG=0,RULENO=0\r\n\r\n增加场景配置，场景入口设置为紧急状态：\r\n\r\nADD DM ROLE:NAME=\"emerg\",ENTRANCE=\"SYS.SYS_STATE\"-\"EMERGENCY_STATUS\",RULENAME=\"emergN7\"&\"emergGx\",VALIDFLAG=1\r\n\r\n  4. 设置系统为紧急状态，卸载用户。\r\n\r\nSET SYSTEMSTATUS:CURVAL=\"1\"\r\n\r\n  5. 传表生效。\r\n\r\nSYNA\r\n\r\n\r\n\r\n\r\n无备用PCF的隔离\r\n\r\n  1. 在DRA上隔离PCF，隔离后业务受损，SMF仅能提供降质服务。\r\n\r\nDRA侧根据其应急维护脚本文件修改配置，实现故障PCF隔离。\r\n\r\n  2. 在NRF上去注册PCF，隔离后业务受损，SMF仅能提供降质服务。\r\n\r\nNRF/SMF侧根据其应急维护脚本文件修改配置，实现故障PCF隔离。\n\n[3]:特性描述\r: RCP删除该AF会话关联的PCC规则，通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF，请求中将相关PCC规则ID置为null，并携带policyCtrlReqTriggers和lastReqRuleData，填写方法和步骤3相同。\r\n\r\n  11. SMF返回成功Npcf_SMPolicyControl_UpdateNotify响应，并触发专有QoS Flow的释放，以及用户最新接入网信息的查询。\r\n\r\n  12. 专有承载释放后，上报用户的位置或时区信息，触发SMF通过Npcf_SMPolicyControl_Update请求上报给RCP，并携带接入网信息。\r\n\r\n  13. RCP释放AF会话，给AF回复成功Rx-STA响应。并携带SMF上报的接入网信息。\r\n\r\n  14. RCP给SMF回复成功的Npcf_SMPolicyControl_Update响应。\r\n\r\n\r\n\r\n\r\n(e)SRVCC切换\r\n\r\n图8 (e)SRVCC切换流程\r\n\r\n和VoLTE(Voice over LTE, LTE语音)类似，VoNR呼叫也支持(e)SRVCC(Single Radio Voice Call Continuity, 单射频语音呼叫连续性)切换流程，允许VoNR音频媒体流回落到3G电路域，但不支持VoNR视频媒体流回落，流程如下：\r\n\r\n1\\. N7会话建立后，用户使用VoNR业务时，触发AF向RCP发送AAR消息建立AF会话。AAR中携带媒体信息（Media-Component-Description）等。其中媒体可能为音频媒体（Media-Type = AUDIO）或视频媒体（Media-Type = VIDEO）。\r\n\r\n2\\. RCP校验AAR请求，根据IP等信息绑定IPCAN承载会话。若绑定成功，存储AF会话、媒体等信息。RCP对VoNR业务进行决策，构造PCC规则通过Npcf_SMPolicyControl_UpdateNotify请求下发给SMF。音频流PCC规则的5QI应当设置为1（承载侧判断5QI=1的QoS Flow支持SRVCC切换），VoNR视频流目前还不支持SRVCC功能。\r\n\r\n3\\. SMF校验规则信息通过，返回Npcf_SMPolicyControl_UpdateNotify响应，并触发专有QoS Flow建立。\r\n\r\n4\\. RCP向AF回复AAA消息。\r\n\r\nVoNR的SRVCC切换分两种场景：\r\n\r\n  * 场景a：4G切换到3G电路域，这时N7会话仍然保留\r\n\r\n\r\n\r\n\r\n5a. SMF向RCP发送Npcf_SMPolicyControl_Update请求，其中ruleReport的failureCode指示PS_TO_CS_HAN。\r\n\r\n6a. RCP回复Npcf_SMPolicyControl_Update响应。\r\n\r\n  * 场景b：5G直接切换到3G电路域，这时N7会话不再保留\r\n\r\n\r\n\r\n\r\n5b. SMF向RCP发送Npcf_SMPolicyControl_Delete请求，其中PduSessionRelCause指示PS_TO_CS_HO。\r\n\r\n6b. RCP回复Npcf_SMPolicyControl_Delete响应。\r\n\r\n7\\. RCP分析出失效规则影响到AF会话的所有媒体信息，通过Rx-ASR通知AF释放会话，并且携带Abort-Cause指示专有承载失效的原因是PS_TO_CS_HANDOVER。\r\n\r\n8\\. AF返回成功Rx-ASA响应。\r\n\r\n9\\. AF发送Rx-STR释放AF会话，但仍保持用户的呼叫。\r\n\r\n10\\.\n\n[4]:特性描述\r: 22.20.B2版本之前，用户会话上线时如果查找到重复的会话，则内部删除这些挂死会话，根据新的请求消息建立会话。不会触发外部消息通知PCEF进行会话下线。\r\n\r\nRCP V7.22.20.B2版本及之后，新增了Gx接口判重释放会话可配是否通知PGW功能：\r\n\r\n  * 通过软件参数“1361 Gx接口判重释放会话是否通知PGW”控制Gx重复会话释放是否通知PGW。\r\n\r\n  * 1361开关为0-不通知（默认）：Gx接口重复会话释放不通知PGW，和本特性修改前处理一致。\r\n\r\n  * 1361开关为1-通知：Gx接口重复会话释放会通知PGW。\r\n\r\n\r\n\r\n\r\n重复会话的释放为强制释放，不论和PCEF的消息交互是否正常，该重复会话最终都会被删除。\r\n\r\n会话保活\r\n\r\n为了防止RCP与PCEF之间由于消息丢失等异常情况造成会话资源挂死，RCP利用现有RAR消息实现会话保活功能。当“网元间保活检测配置”存在“资源类型”为“DPI IP-CAN会话”且“保活方式”为“网元间保活”的配置记录，且当RCP与PCEF之间的Gx接口链路在一定时间内没有消息交互时，RCP构造不携带任务业务信息的RAR消息发送至PCEF，根据PCEF返回的结果码来检测会话是否存在：\r\n\r\n  * 如果PCEF返回的RAA中结果码为DIAMETER_SUCCESS（2001）时，RCP认为该PDU会话有效，保活成功。\r\n\r\n  * 如果PCEF返回的RAA中结果码为DIAMETER_UNKNOWN_SESSION_ID（5002）时，RCP就释放该PDU会话资源。\r\n\r\n  * 其它情况，RCP按“网元间保活检测配置”的“保活周期”（默认4小时）重试会话保活。如果会话在PCEF/RCP无成功交互时长超过“资源扫描配置”中“资源类型”为“DPI IP-CAN会话”的配置记录的“强制释放时长”所规定的时长，则RCP强制释放该会话，不通知PCEF。\r\n\r\n\r\n\r\n\r\n会话重授权\r\n\r\nRCP可以下发Revalidation-Time（简称RT）给PCEF，RT是一个绝对时间点（精确到年月日时分秒）。PCEF需在此时间点发送Update请求携带REVALIDATION_TIMEOUT事件，触发RCP重新进行策略决策，并可能生成新的策略规则和新的RT，在响应中下发给PCEF，起到会话重授权的作用。如果RCP侧会话已异常释放（未通知到PCEF），RCP在响应中回复DIAMETER_UNKNOWN_SESSION_ID（5002），也可以促使PCEF删除对应会话，保证PCEF/RCP双方会话一致。\r\n\r\nRevalidation-Time相关配置参见“ZUF-59-52-001 基于时段的策略”实现原理的本网元实现章节的会话授权时长和revalidationTime相关描述。\r\n\r\n用户会话数量限制\r\n\r\nRCP允许一个用户并发的Gx+N7会话数上限为11个，达到上限后RCP会拒绝新会话建立。\n\n[5]:（000159008）Gx结束成功率（%）\r: （000159008）Gx结束成功率（%）\r\n\r\n指标说明\r\n\r\n在测量周期内，RCP(Resource Control Platform, 资源控制平台)与对端PCEF(Policy and Charging Enforcement Function, 计费和策略控制实施功能)设备之间通过Gx接口终止IP-CAN(IP Connectivity Access Network, IP连通接入网)会话的成功率。\r\n\r\n计算公式\r\n\r\n（C000150054 - C000150055）/ C000150053 × 100\r\n\r\n相关计数器\r\n\r\n序号| 计数器  \r\n---|---  \r\n1| C000150054 Gx发送CCA-T的总数  \r\n2| C000150055 Gx发送失败CCA-T的总数  \r\n3| C000150053 Gx接收CCR-T的总数", "answer": "RCP实现语音会话隔离的方式包括以下几点：\n\n1. 特性配置：RCP具有“IMS域APN配置”，可以配置语音会话所使用的IMS APN和紧急APN。配置这些APN后，这些APN上的会话被视为语音会话。\n\n2. 无需签约信息：当用户从VoLTE APN接入时，RCP不会获取签约信息，也不会根据签约信息进行决策。\n\n3. 独立决策：语音会话通常只需要按照AF（P-CSCF）请求来做策略决策，而不需要考虑用户在SPR的签约情况。\n\n4. 不同PCF部署：许多运营商对语音会话和数据会话部署不同的PCF，以减少相互间的影响，提升语音业务可靠性。\n\n5. 专有承载建立：RCP可以在VoNR呼叫接通前为IMS呼叫的媒体流预先创建专有承载，保障通话质量。\n\n6. 特定上报事件配置：语音会话不使用默认上报事件订阅配置，如果需要特定配置，需在“上报事件配置”中使用语音APN进行配置。\n\n通过这些方式，RCP能够将语音会话与其他类型的会话隔离，确保语音业务的可靠性和服务质量。"}
{"id": 22, "query": "N7/Gx会话授权时长在哪配置？", "recall": "[1]:# SET SESSAUTHPRDDEF \r: 该参数配置值变更需要等到下次会话策略决策后才生效。 数据来源：本端规划。 配置原则：建议取值120~210分钟，小于RCP主动保活Gx会话的时长（默认240分钟，执行查询网元间保活检测配置命令，查询结果中“资源类型”为“DPI IP-CAN会话”的“保活周期（分）”即为主动保活N7会话的时长），这样RCP和PGW间因Revalidation-Time到期而交互后，就可以避免RCP主动保活Gx会话。  \r\nGXDATAAUTHPRD | Gx Data会话授权时长（分） | 参数可选性:任选参数；参数类型:整数；参数范围为:0~65535。 | 参数作用：该参数用于设置Gx Data会话授权时长。 当该参数配置值大于0时，RCP可以根据“当前时间点+该参数配置值+随机偏移值”生成Gx Data会话重授权时间点，并将此时间点通过Revalidation-Time参数下发给PGW，PGW在此时间点应发送会话更新请求给RCP，起到保活Gx Data会话的作用，并触发RCP策略重决策和下发新的Revalidation-Time参数，或RCP按此时间点自己设置定时器触发策略重新决策。 该参数配置值变更需要等到下次会话策略决策后才生效。 数据来源：本端规划。 配置原则：建议取值120~210分钟，小于RCP主动保活Gx会话的时长（默认240分钟，执行查询网元间保活检测配置命令，查询结果中“资源类型”为“DPI IP-CAN会话”的“保活周期（分）”即为主动保活N7会话的时长），这样RCP和PGW间因Revalidation-Time到期而交互后，就可以避免RCP主动保活Gx会话。  \r\nAUTHPRDMAXOFFSET | 会话授权时长最大随机偏移（分） | 参数可选性:任选参数；参数类型:整数；参数范围为:0~255。 | 参数作用：该参数用于设置会话授权时长最大随机偏移，RCP在N7/Gx会话建立时在该参数配置范围内生成“随机偏移值”。会话授权时长默认值=会话授权时长配置值+随机偏移值。当会话授权时长配置值=0时，随机偏移值无效，这时会话授权时长默认值=0。 该参数配置值变更仅对后续新建的N7/Gx会话有效。 数据来源：本端规划。 配置原则：建议保持默认值10分钟。  \r\n  \r\n## 命令举例\r\n\r\n修改会话授权时长默认配置，N7 IMS会话授权时长设置为120分钟，N7 Data会话授权时长设置为120分钟，Gx IMS会话授权时长设置为120分钟，Gx Data会话授权时长设置为120分钟，会话授权时长最大偏移设置为10分钟。\r\n\r\nSET SESSAUTHPRDDEF:N7IMSAUTHPRD=120,N7DATAAUTHPRD=120,GXIMSAUTHPRD=120,GXDATAAUTHPRD=120,AUTHPRDMAXOFFSET=10;\r\n\r\n**父主题：** 会话授权时长默认配置\n\n[2]:# 会话授权时长默认配置\r: 对于语音DNN上的N7/Gx会话，RCP不使用时段规则，不关注“承载能力配置”中的“数据会话时段策略刷新方式”，只要配置了会话授权时长，就可以把会话重授权时间点(=当前时间点+会话授权时长)下发给SMF（通过N7接口的revalidationTime参数）或PGW（通过Gx接口的Revalidation-Time参数）。\r\n\r\n在RCP策略管理GUI配置中，可以在N7/Gx会话控制策略的规则动作参数集中设置“授权时长”参数值，作为N7/Gx会话授权时长。如果未设置（值为0视为未设置），则RCP依据本配置确定会话授权时长默认值。\r\n\r\n## 功能描述\r\n\r\n本配置用于设置会话授权时长默认值，可以区分会话所在的接口类型（N7/Gx）和会话所在的DNN类型（IMS/Data）分别设置。当会话建立时，RCP在本配置的“会话授权时长最大随机偏移”范围内生成“随机偏移值”。会话授权时长默认值=会话授权时长配置值+随机偏移值。当会话授权时长配置值=0时，随机偏移值无效，这时会话授权时长默认值=0。\r\n\r\n## 相关主题\r\n\r\n  * **SET SESSAUTHPRDDEF**  \r\n\r\n  * **SHOW SESSAUTHPRDDEF**  \r\n\r\n\r\n\r\n\r\n**父主题：** 承载业务配置\n\n[3]:# 会话授权时长特定配置\r: # 会话授权时长特定配置\r\n\r\n## 背景知识\r\n\r\n会话授权时长的概念和用途请参考“会话授权时长默认配置”。会话授权时长特定配置用于配置特定场景下的会话授权时长。特定场景包括：N7 IMS/Data会话向BSF注册会话绑定信息失败，N7/Gx Data会话向CHF/OCS订阅消费门限信息失败。不同特定场景可以配置不同的会话授权时长，通常这些会话授权时长配置值较小（10~30分钟）。RCP根据此会话授权时长生成的会话重授权时间点需要下发给SMF/PGW，以便SMF/PGW在该时间点发送N7/Gx会话更新消息给RCP。若之前RCP向BSF注册失败，则本次SMF更新请求触发RCP对SMF回复失败响应，使得SMF释放N7会话，引发UE重建会话（这样从整体上看，RCP向BSF注册失败后，延迟了N7会话释放，避免N7会话立即释放导致UE立即重建会话的信令冲击）。若之前RCP向CHF/OCS订阅失败，则本次SMF更新请求触发RCP重新向CHF/OCS订阅消费门限信息。\r\n\r\n当RCP生成的会话重授权时间点不能下发给SMF/PGW时（即对数据DNN的N7/Gx会话，当“承载能力配置”中的“数据会话时段策略刷新方式”设置为“否“时），RCP不会使用“会话授权时长特定配置”确定会话授权时长。\r\n\r\n一般来说，上述特定场景发生时，RCP会优先使用该特定场景下的会话授权时长，除非会话授权时长默认配置或策略规则中的会话授权时长配置了更小且非0的值。\r\n\r\n## 功能描述\r\n\r\n本配置用于设置特定场景的会话授权时长，可以区分不同特定场景分别设置。当N7/Gx会话建立时，RCP在本配置的“会话授权时长最大随机偏移”范围内生成“随机偏移值”。特定场景的会话授权时长=该特定场景的会话授权时长配置值+随机偏移值。当该场景的会话授权时长配置值=0时，随机偏移值无效，这时该特定场景的会话授权时长=0。\r\n\r\n## 相关主题\r\n\r\n  * **SET SESSAUTHPRDSPC**  \r\n\r\n  * **SHOW SESSAUTHPRDSPC**  \r\n\r\n\r\n\r\n\r\n**父主题：** 承载业务配置\n\n[4]:# SHOW SESSAUTHPRDDEF \r: | 参数作用：该参数用于设置Gx IMS会话授权时长。 当该参数配置值大于0时，RCP可以根据“当前时间点+该参数配置值+随机偏移值”生成Gx IMS会话重授权时间点，并将此时间点通过Revalidation-Time参数下发给PGW，PGW在此时间点应发送会话更新请求给RCP，起到保活Gx IMS会话的作用，并触发RCP策略重决策和下发新的Revalidation-Time参数。 该参数配置值变更需要等到下次会话策略决策后才生效。 数据来源：本端规划。 配置原则：建议取值120~210分钟，小于RCP主动保活Gx会话的时长（默认240分钟，执行查询网元间保活检测配置命令，查询结果中“资源类型”为“DPI IP-CAN会话”的“保活周期（分）”即为主动保活N7会话的时长），这样RCP和PGW间因Revalidation-Time到期而交互后，就可以避免RCP主动保活Gx会话。  \r\nGXDATAAUTHPRD | Gx Data会话授权时长（分） | 参数可选性:任选参数；参数类型:整数；参数范围为:0~65535。 | 参数作用：该参数用于设置Gx Data会话授权时长。 当该参数配置值大于0时，RCP可以根据“当前时间点+该参数配置值+随机偏移值”生成Gx Data会话重授权时间点，并将此时间点通过Revalidation-Time参数下发给PGW，PGW在此时间点应发送会话更新请求给RCP，起到保活Gx Data会话的作用，并触发RCP策略重决策和下发新的Revalidation-Time参数，或RCP按此时间点自己设置定时器触发策略重新决策。 该参数配置值变更需要等到下次会话策略决策后才生效。 数据来源：本端规划。 配置原则：建议取值120~210分钟，小于RCP主动保活Gx会话的时长（默认240分钟，执行查询网元间保活检测配置命令，查询结果中“资源类型”为“DPI IP-CAN会话”的“保活周期（分）”即为主动保活N7会话的时长），这样RCP和PGW间因Revalidation-Time到期而交互后，就可以避免RCP主动保活Gx会话。  \r\nAUTHPRDMAXOFFSET | 会话授权时长最大随机偏移（分） | 参数可选性:任选参数；参数类型:整数；参数范围为:0~255。 | 参数作用：该参数用于设置会话授权时长最大随机偏移，RCP在N7/Gx会话建立时在该参数配置范围内生成“随机偏移值”。会话授权时长默认值=会话授权时长配置值+随机偏移值。当会话授权时长配置值=0时，随机偏移值无效，这时会话授权时长默认值=0。 该参数配置值变更仅对后续新建的N7/Gx会话有效。 数据来源：本端规划。 配置原则：建议保持默认值10分钟。  \r\n  \r\n## 命令举例\r\n\r\n查看会话授权时长默认配置。\r\n\r\nSHOW SESSAUTHPRDDEF;\r\n\r\n**父主题：** 会话授权时长默认配置\n\n[5]:# SHOW SESSAUTHPRDSPC \r: 该参数配置值变更需要等到下次会话策略决策后才生效。 数据来源：本端规划。 配置原则：当RCP需要为N7/Gx Data会话向CHF/OCS订阅消费门限信息时，建议本参数配置为30分钟。  \r\nAUTHPRDMAXOFFSET | 会话授权时长最大随机偏移（分） | 参数可选性:任选参数；参数类型:整数；参数范围为:0~255。 | 参数作用：该参数用于设置会话授权时长最大随机偏移，RCP在N7/Gx会话建立时在该参数配置范围内生成“随机偏移值”。特定场景的会话授权时长=特定场景的会话授权时长配置值+随机偏移值。 该参数配置值变更仅对后续新建的N7/Gx会话有效。 数据来源：本端规划。 配置原则：建议保持默认值10分钟。  \r\n  \r\n## 命令举例\r\n\r\n查看会话授权时长特定配置。\r\n\r\nSHOW SESSAUTHPRDSPC;\r\n\r\n**父主题：** 会话授权时长特定配置", "answer": "N7/Gx会话授权时长在以下配置中进行设置：\n\n1. **会话授权时长默认配置**：在RCP策略管理GUI配置中，可以在N7/Gx会话控制策略的规则动作参数集中设置“授权时长”参数值，作为N7/Gx会话授权时长。如果未设置，则RCP依据默认配置确定会话授权时长。\n\n   - 相关命令举例：`SET SESSAUTHPRDDEF:N7IMSAUTHPRD=120,N7DATAAUTHPRD=120,GXIMSAUTHPRD=120,GXDATAAUTHPRD=120,AUTHPRDMAXOFFSET=10;`\n\n2. **会话授权时长特定配置**：用于配置特定场景下的会话授权时长，如N7 IMS/Data会话向BSF注册会话绑定信息失败，N7/Gx Data会话向CHF/OCS订阅消费门限信息失败。\n\n   - 相关命令举例：`SET SESSAUTHPRDSPC;`（具体参数设置未在上下文中提供）\n\n以上配置均通过相关命令进行设置，具体的参数值和配置原则在上下文信息中有所描述。"}
{"id": 23, "query": "RCP和SPR之间有哪些接口？分别实现什么功能？", "recall": "[1]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\n签约信息（User profile information）| SPR(Subscription Profile Repository, 用户签约数据库)中存储的用户签约信息，包括用户类型、签约的业务等。  \r\n签约检查（Profile Check）| 把用户请求信息和用户签约信息进行比较，判断用户请求是否被接纳。  \r\n  \r\n描述\r\n\r\n特性定义\r\n\r\nDiameter Sp/Sp'接口是中兴通讯RCP和SPR之间的私有化接口，RCP通过Sp和Sp'两个接口能够从SPR获取用户签约和用户动态数据。\r\n\r\nRCP与SPR之间的接口有两种交互模式：\r\n\r\n  * 仅有用量交互：RCP不向SPR获取签约信息，只交互用量信息。\r\n\r\n此模式下，只存在通过Sp'接口的交互信息。\r\n\r\n  * 签约和用量都有交互：RCP向SPR获取签约信息，并且交互用量、短信、状态等动态信息。\r\n\r\n此模式下，既存在通过Sp接口的交互信息，又存在通过Sp'接口的交互信息。\r\n\r\n\r\n\r\n\r\n用户上线时，RCP从SPR获取用户签约及动态数据，用于IP-CAN(IP Connectivity Access Network, IP连通接入网)会话的控制策略决策。\r\n\r\n背景知识\r\n\r\n用户在运营商实体或网络营业厅开户，并购买套餐时，BOSS(Business and Operation Support System, 运营和运维支撑系统)会产生用户个性化签约，并将用户个性化签约存储在SPR网元中。\r\n\r\nPCC架构中，RCP能够根据用户个性化签约为用户提供差异化的控制策略和服务，提升客户满意度。\r\n\r\n用户在线过程中，会产生套餐使用流量等动态数据。RCP不支持动态数据的持久化存储，因此需要将用户在线期间统计的用量等动态信息存储到SPR。\r\n\r\n应用场景\r\n\r\n该特性推荐的应用场景如下：\r\n\r\n  * 用户上线时，RCP通过Sp接口从SPR获取用户签约。\r\n\r\n  * 用户上线时，RCP通过Sp'接口从SPR获取用户动态数据。\r\n\r\n  * 用户在线过程中，RCP通过Sp'接口向SPR保存用户动态数据。\r\n\r\n  * 用户在线过程中，如果SPR签约改变，SPR通过Sp接口将最新用户签约推送给RCP。\r\n\r\n  * 用户在线过程中，当IT系统通过SPR查询或重置用量时，SPR通过Sp'接口向RCP查询或重置用量。\r\n\r\n  * 用户下线时，RCP通过Sp接口通知SPR用户下线。\r\n\r\n  * 用户下线时，RCP通过Sp'接口向SPR保存最后用量。\r\n\r\n\r\n\r\n\r\n客户收益\r\n\r\n受益方| 受益描述  \r\n---|---  \r\n运营商| RCP/SPR分设，SPR能够集中存储用户数据，多个RCP能够共享SPR用户数据。  \r\n用户| 该特性对用户不可见。\n\n[2]:特性描述\r: SPR回复Sp'接口UDA消息。\r\n\r\n  7. RCP向SPR发送Sp接口UDR用户离线消息。\r\n\r\n  8. SPR回复Sp接口UDA消息。\r\n\r\n\r\n\r\n\r\n本网元实现\r\n\r\nRCP向OCS发起策略计费会话建立\r\n\r\n  * 策略计费会话触发时机\r\n\r\nRCP只会为一个用户建立一个策略计费会话。当用户上线RCP获取到签约信息后，可以通过签约的套餐、扩展属性、计费类型等在“用户级策略计数器标识配置”和“套餐级策略计数器标识配置”中获取到当前用户需要订阅的PCID列表。PCID可分为用户级PCID和套餐级PCID，这两种类型的定义主要取决于OCS与RCP规划用量配额是用户级还是套餐级：\r\n\r\n    * OCS与RCP规划关注用户级用量配额，则定义用户级PCID。\r\n\r\n    * OCS与RCP规划关注套餐级用量配额，则定义套餐级PCID。\r\n\r\n    * 套餐级PCID可以指定生成，也可以根据套餐实例号生成 。\r\n\r\n当RCP决策出需要订阅的PCID列表时，则会去判断是否需要通过Sy接口建立OCS会话。\r\n\r\n  * RCP选择OCS或CHF获取策略计费信息\r\n\r\nRCP支持为4/5G用户通过OCS或CHF获取策略计费信息。RCP主要根据开关“1255 Sy/N28选择方式”、用户签约信息来判断，具体选择场景参见下表。\r\n\r\n1255开关值| 用户签约携带networkType| 未携带networkType  \r\n---|---|---  \r\n指示为5G用户| 指示为4G用户  \r\n0| N28| Sy| Sy  \r\n1| N28| Sy| N28  \r\n2| Sy  \r\n3| N28  \r\n4| 优选N28，次选Sy  \r\n5| 优选Sy，次选N28  \r\n  \r\n当符合上述表格里选择Sy接口的条件时，例如：1255设置为0，当用户签约携带networkType指示为4G用户时，RCP就会向OCS发起策略计费会话的建立。\r\n\r\n说明：\r\n\r\n开关值4或5时，优选次选的含义是未获取到优选对应网元的局向地址信息时，则去获取次选对应网元的局向地址信息。\r\n\r\n1255开关默认值为5，如果不希望启用Sy接口，必须删除OCS号码段分析配置。\r\n\r\n\r\n\r\n\r\nOCS地址信息的选择\r\n\r\n为了保证在某个特定号段的IMSI或MSISDN可以找到正确的OCS，涉及到邻接主机配置、号码分析配置、号段分析配置：\r\n\r\n  1. 根据用户的IMSI或MSISDN，进行号码段分析（OCS接入局IMSI/MSISDN分析），得出号码段分析结果。\r\n\r\n  2. 上一步的分析结果，即为“OCS接入局配置编号”，根据该编号，即可得到“邻接主机编号”。\r\n\r\n  3. 根据“邻接主机编号”，即得到了对应的OCS信息。\n\n[3]:特性配置\r: RCP与SPR间Diameter链路配置。每套SPR至少配置4条Diameter链路。\r\n\r\n增加到PUDR（SPR）1的4条Diameter链路。\r\n\r\nADD DIM RCPLINK:LINKNO=101,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr1.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=101,PROTOCOL=\"SCTP\",NAME=\"PUDR1-1\"\r\n\r\nADD DIM RCPLINK:LINKNO=102,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr1.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=102,PROTOCOL=\"SCTP\",NAME=\"PUDR1-2\"\r\n\r\nADD DIM RCPLINK:LINKNO=103,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr1.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=103,PROTOCOL=\"SCTP\",NAME=\"PUDR1-3\"\r\n\r\nADD DIM RCPLINK:LINKNO=104,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr1.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=104,PROTOCOL=\"SCTP\",NAME=\"PUDR1-4\"\r\n\r\n增加到SPR2的4条Diameter链路。\r\n\r\nADD DIM RCPLINK:LINKNO=151,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr2.hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=151,PROTOCOL=\"SCTP\",NAME=\"PUDR2-1\"\r\n\r\nADD DIM RCPLINK:LINKNO=152,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr2.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=152,PROTOCOL=\"SCTP\",NAME=\"PUDR2-2\"\r\n\r\nADD DIM RCPLINK:LINKNO=153,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr2.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=153,PROTOCOL=\"SCTP\",NAME=\"PUDR2-3\"\r\n\r\nADD DIM RCPLINK:LINKNO=154,LOCALHOSTNAME=\"rcp.hatt.zte.com.cn\",LOCALREALM=\"hatt.zte.com.cn\",DSTHOSTNAME=\"spr2.hatt.zte.com.cn\",DSTREALM=\"hatt.zte.com.cn\",ADJTYPE=\"SPR\",CONNID=154,PROTOCOL=\"SCTP\",NAME=\"PUDR2-4\"\r\n\r\n  6. RCP到SPR的路由组配置。\r\n\r\n增加Diameter路由组，到每套SPR配置2个路由组，分别对应Sp和Sp'共4个路由组。路由组属性：负荷分担。\r\n\r\nADD DIM ROUTEGRPPTY:GROUPNO=11,GROUPNAME=\"PUDR1-Sp\",GROUPPTY=\"LOADBALANCE\"\r\n\r\nADD DIM ROUTEGRPPTY:GROUPNO=12,GROUPNAME=\"PUDR1-Sp'\",GROUPPTY=\"LOADBALANCE\"\r\n\r\nADD DIM ROUTEGRPPTY:GROUPNO=13,GROUPNAME=\"PUDR2-Sp\",GROUPPTY=\"LOADBALANCE\"\r\n\r\nADD DIM ROUTEGRPPTY:GROUPNO=14,GROUPNAME=\"PUDR2-Sp'\",GROUPPTY=\"LOADBALANCE\"\r\n\r\n  7. RCP到SPR的路由配置。\r\n\r\n增加Diameter路由。\n\n[4]:特性描述\r: Master-PCF-HostName| 41087| 1| 0| 0| 3902| DiameterIdentity| 256| 0| 1  \r\n---|---|---|---|---|---|---|---|---|---  \r\n  \r\n  * SP接口PNA消息中增加Session-Aggregation-Flag AVP。\r\n\r\nSession-Aggregation-Flag| 41086| 1| 0| 0| 3902| Unsigned32| 4| 0| 1  \r\n---|---|---|---|---|---|---|---|---|---  \r\n  \r\n\r\n\r\n\r\n系统影响\r\n\r\n该特性不涉及对系统的影响。\r\n\r\n应用限制\r\n\r\n该特性不涉及应用限制。\r\n\r\n特性交互\r\n\r\n编号| 关联特性| 说明  \r\n---|---|---  \r\n1| 签约和用量相关| 与签约和用量相关的特性都有交互。  \r\n  \r\n遵循标准\r\n\r\n该特性采用中兴通讯内部的接口和协议，不涉及标准协议。\r\n\r\n特性能力\r\n\r\n名称| 指标  \r\n---|---  \r\nSp接口，每个用户可签约的套餐个数| 50  \r\nSp接口，每个用户可签约的业务个数| 16  \r\nSp'接口，每个用户一次最多可安装/更新、删除用量个数| 40  \r\nSp'接口，一个用户的动态数据最大个数| 256  \r\n  \r\n可获得性\r\n\r\n版本要求及变更记录\r\n\r\n特性版本| 发布版本| 发布说明  \r\n---|---|---  \r\n01| V7.20.10| 首次发布  \r\n  \r\nLicense要求\r\n\r\n该特性为RCP网元的基本特性，无需License支持。\r\n\r\n对其他网元的要求\r\n\r\n基本接口Sp、Sp'是RCP网元与SPR网元之间的接口，业务流程需要RCP与SPR配置和完成。\r\n\r\n其中，SPR对接口Sp、Sp'需遵循中兴通讯私有协议，SPR需要支持受理放号、存储用户静态动态数据。\r\n\r\nO&M相关\r\n\r\n命令\r\n\r\n配置项\r\n\r\n编号| 命令项| 命令名称| 描述  \r\n---|---|---|---  \r\n1| 模块处理能力| SET MODULECAP| 修改模块处理能力  \r\nSHOW MODULECAP| 查询模块处理能力  \r\n2| 邻接SPR主机配置| ADD ADJHOST| 新增邻接主机，可配置SPR邻接主机。  \r\nSET ADJHOST| 修改邻接主机，可修改SPR邻接主机。  \r\nDEL ADJHOST| 删除邻接主机，可删除SPR邻接主机。  \r\nSHOW ADJHOST| 查询邻接主机，可查询SPR邻接主机。  \r\n3| 用户资料接入局配置| ADD USERACC| 新增用户资料接入局，指定RCP与SPR之间的接口交互模式。  \r\nSET USERACC| 修改用户资料接入局，修改RCP与SPR之间的接口交互模式。  \r\nDEL USERACC| 删除用户资料接入局，删除RCP与SPR之间的接口交互模式。  \r\nSHOW USERACC| 查询用户资料接入局，查询RCP与SPR之间的接口交互模式。  \r\n4| 号码段分析配置| ADD NUMANA| 新增号码段分析配置，可用于配置用户资料接入局IMSI分析、MSISDN分析、CUI分析、Group ID分析。  \r\nSET NUMANA| 修改号码段分析配置。  \r\nDEL NUMANA| 删除号码段分析配置。  \r\nSHOW NUMANA| 查询号码段分析配置。  \r\n5| 用户标识类型优先级配置| SET USERKEYPRI| 修改用户标识类型优先级。\n\n[5]:特性描述\r: 资源控制平台)| 向SMF提供SM（Session Management）策略，并订阅相关事件。  \r\nSMF(Session Management Function, 会话管理功能)| 执行RCP提供的SM(Session Management, 会话管理)策略，向RCP上报相关事件。  \r\nCHF(Charging Function, 计费功能)| 维护RCP的订阅信息，向RCP提供策略计费信息的查询接口及状态变更的通知。  \r\nBSF(Binding Support Function, 绑定支持功能)| 维护RCP绑定信息，提供RCP绑定信息的注册、更新、去注册、查询接口。  \r\nUDR(Unified Data Repository, 统一数据存储)/SPR(Subscription Profile Repository, 用户签约数据库)| 向RCP提供策略签约信息，并允许RCP将动态生成的策略数据保存在UDR/SPR中。目前商用部署时采用SPR，测试时可以采用SPR或UDR。  \r\n  \r\n协议栈\r\n\r\nZXUN RCP与周边网元的服务化接口都以HTTP/2为承载，以ZXUN RCP和SMF间的N7接口为例（其它接口类似），其协议栈如图5所示。\r\n\r\n协议栈中的TLS为可选协议，当需要考虑传输层数据安全保护时，可以使用该协议。\r\n\r\n图5 协议栈\r\n\r\n业务流程\r\n\r\nRCP为服务提供方的业务流程\r\n\r\nRCP为服务提供方时，通过N5、N7、N15接口与AF/NEF、SMF、AMF交互。目前现场实际组网中，N5、N7、N15接口消息一般通过SCP转发至AF/NEF、SMF、AMF。\r\n\r\n下面以N7接口为例，描述RCP作为服务提供方的业务流程，其它接口类似。\r\n\r\n直连场景（B模式）\r\n\r\nRCP为服务提供方，直连场景（B模式）下的业务流程如图6所示。\r\n\r\n图6 B模式业务流程\r\n\r\n流程说明如下：\r\n\r\n  1. RCP上电后，向NRF注册本NF、服务的相关信息，包括FQDN、IP、优先级、版本号等信息。\r\n\r\n  2. NRF返回注册成功，服务使用者可根据RCP提供信息寻址到RCP。\r\n\r\n  3. SMF收到PDU会话创建请求，若本地没有RCP的服务发现缓存，向NRF获取SM策略服务的相关信息。\r\n\r\n  4. （可选）SMF通过服务实例号、号段等信息向NRF查询SM策略服务地址。\r\n\r\n  5. （可选）NRF将注册的RCP信息返回给SMF。\r\n\r\n  6. SMF构造PDU会话信息，从NRF返回信息中找到目的RCP服务。\r\n\r\n  7. SMF调用SM策略服务的PDU会话创建接口，包含接入网相关信息、用户信息等。\r\n\r\n  8. RCP的SM策略服务收到PDU会话创建请求后，进行PDU会话决策，构造PCC规则和订阅相关事件。\r\n\r\n  9. RCP返回响应消息给SMF。\r\n\r\n  10. 当内部事件（例如，内部决策时间到）或签约发生变更时，触发会话重决策。\r\n\r\n  11. RCP使用创建请求消息体中的NotifURI，同时根据本地缓存或NRF查询结果，选择客户端模板。\r\n\r\n  12.", "answer": "RCP和SPR之间存在以下接口：\n\n1. Sp接口：用于RCP从SPR获取用户签约信息。\n   \n2. Sp'接口：用于RCP从SPR获取用户动态数据，以及将用户动态数据保存到SPR。\n\n这两个接口的交互模式包括：\n\n- 仅有用量交互：只通过Sp'接口交互用量信息。\n- 签约和用量都有交互：既通过Sp接口交互签约信息，也通过Sp'接口交互用量信息。"}
{"id": 24, "query": "PCF哪些服务被AMF调用？", "recall": "[1]:服务操作解释\r: Delete| 用于去注册流程。AMF调用Npcf_UEPolicyControl_Delete向PCF请求删除UE策略关联，释放相关资源。  \r\nUpdate| 用于AMF发起的UE策略关联更新流程。当策略控制请求触发器满足预置条件，或者AMF变更，新AMF定位到原PCF，AMF调用Npcf_UEPolicyControl_Update，向PCF上报策略执行情况，或者更新AMF信息。PCF根据AMF新上报的信息更新UE策略关联，并将其下发给AMF。  \r\n  \r\n子主题：\r\n\r\n  * Npcf_SMPolicyControl_Create\r\n\r\n  * Npcf_SMPolicyControl_UpdateNotify\r\n\r\n  * Npcf_SMPolicyControl_Delete\r\n\r\n  * Npcf_SMPolicyControl_Update\r\n\r\n  * Npcf_AMPolicyControl_Create\r\n\r\n  * Npcf_AMPolicyControl_UpdateNotify\r\n\r\n  * Npcf_AMPolicyControl_Delete\r\n\r\n  * Npcf_AMPolicyControl_Update\r\n\r\n  * Npcf_UEPolicyControl_Create\r\n\r\n  * Npcf_UEPolicyControl_UpdateNotify\r\n\r\n  * Npcf_UEPolicyControl_Delete\r\n\r\n  * Npcf_UEPolicyControl_Update\n\n[2]:Npcf_UEPolicyControl_Create\r: Npcf_UEPolicyControl_Create\r\n\r\n服务操作| 操作语义| 服务操作的解释  \r\n---|---|---  \r\nNpcf_UEPolicyControl_Create| Request/Response| 该服务操作用于注册流程和AMF变更流程：\r\n\r\n  * 当AMF收到UE用户发起的注册请求时，AMF调用Npcf_UEPolicyControl_Create向PCF提供UE上下文信息，请求创建UE策略关联。\r\n  * 当AMF变更时，新AMF定位不到或者没有获取到PCF ID， 则AMF会选择一个新PCF。此时，AMF调用Npcf_UEPolicyControl_Create向PCF提供UE上下文信息，请求创建UE策略关联。\r\n\r\nAMF发送POST请求消息中包含PolicyAssociationRequest数据类型的对象。如果成功，PCF应响应状态码“201 Created”，并且PUT响应的消息体应包含PolicyAssociation数据类型的对象。如果失败，PCF应返回400/404/415/500/503的HTTP状态码，并且消息体应包含一个ProblemDetails数据结构。\n\n[3]:Npcf_AMPolicyControl_Create\r: Npcf_AMPolicyControl_Create\r\n\r\n服务操作| 操作语义| 服务操作的解释  \r\n---|---|---  \r\nNpcf_AMPolicyControl_Create| Request/Response| 该服务操作用于注册流程和AMF变更流程：\r\n\r\n  * 当AMF收到UE用户发起的注册请求时，AMF调用Npcf_AMPolicyControl_Create向PCF提供UE上下文信息，请求创建AM策略关联。\r\n  * 当AMF变更时，新AMF定位不到或者没有获取到PCF ID， 则AMF会选择一个新PCF。此时，AMF调用Npcf_AMPolicyControl_Create向PCF提供UE上下文信息，请求创建AM策略关联。\r\n\r\nAMF发送POST请求消息中包含PolicyAssociationRequest数据类型的对象。如果成功，PCF应响应状态码“201 Created”，并且PUT响应的消息体应包含PolicyAssociation数据类型的对象。如果失败，PCF应返回400/404/415/500/503的HTTP状态码，并且消息体应包含一个ProblemDetails数据结构。\n\n[4]:NSSF容灾\r: 备用NSSF返回用户允许的切片信息。\r\n\r\n  14. AMF1返回初始化注册接受类型消息。\r\n\r\n  15. UE2发起PDU会话建立请求类型消息。\r\n\r\n  16. AMF1调用SMF的PDU会话建立服务，为用户UE2建立PDU会话。\r\n\r\n  17. SMF从UDM获取用户会话签约信息，并注册会话连接信息。\r\n\r\n  18. SMF选择PCF，为用户建立PDU会话资源。\r\n\r\n  19. SMF发送用户UE2的PDU会话建立响应给AMF1，AMF1通知空口与UE，建立PDU会话资源。\n\n[5]:# 查询PCF信息配置(SHOW SBIPCFINFO) \r: PCF使用AMF提供的服务，为UE和NG-RAN提供V2X服务相关参数，并使AMF能够创建或更新V2X服务相关的UE上下文。  \r\n  \r\n## 命令举例\r\n    \r\n    \r\n    \r\n    \r\n    查询PCF信息配置：PCF信息编号为1。\r\n    \r\n    \r\n    \r\n    \r\n    SHOW SBIPCFINFO:ID=1\r\n    \r\n    \r\n    \r\n    (No.6) : SHOW SBIPCFINFO:ID=1\r\n    -----------------CommonS_HTTP_LB_0----------------\r\n    操作维护       PCF信息编号 NF组编号 DNN组编号 GPSI范围组编号 SUPI范围组编号 Rx口Diameter主机名 Rx口Diameter域名 是否支持V2X策略/参数 \r\n    -------------------------------------------------------------------------------------------------------------------------------------\r\n    复制 修改 删除 1           1        1         65535          65535          nanjing.rx         domain.nanjing   是                   \r\n    -------------------------------------------------------------------------------------------------------------------------------------\r\n    记录数：1\r\n    执行成功 开始时间:2020-12-15 15:35:12 耗时: 0.673 秒", "answer": "PCF以下服务被AMF调用：\n\n1. Npcf_UEPolicyControl_Create：用于注册流程和AMF变更流程，请求创建UE策略关联。\n2. Npcf_UEPolicyControl_Update：用于AMF发起的UE策略关联更新流程。\n3. Npcf_UEPolicyControl_Delete：用于去注册流程，请求删除UE策略关联。\n4. Npcf_AMPolicyControl_Create：用于注册流程和AMF变更流程，请求创建AM策略关联。\n5. Npcf_AMPolicyControl_Update：上下文信息中未明确提及，但根据UEPolicyControl的更新服务推测，可能用于更新AM策略关联。\n6. Npcf_AMPolicyControl_Delete：用于删除AM策略关联。\n\n此外，上下文信息中提到了其他服务操作，如Npcf_SMPolicyControl系列操作，但未明确说明这些服务是否被AMF调用。因此，对于这些服务，不能确定它们是否被AMF调用。"}
{"id": 25, "query": "Director性能数据最长可以保存多久？", "recall": "[1]:C100051028 Local存储可用量\r: C100051028 Local存储可用量\r\n\r\n描述\r\n\r\n每个统计周期内，主机上Local存储实际可使用量平均值，针对每个云环境统计。\r\n\r\n采集方式\r\n\r\n平均值\r\n\r\n单位\r\n\r\nGB\n\n[2]:C100051028 Local存储可用量\r: C100051028 Local存储可用量\r\n\r\n描述\r\n\r\n每个统计周期内，主机上Local存储实际可使用量平均值，针对每个云环境统计。\r\n\r\n采集方式\r\n\r\n平均值\r\n\r\n单位\r\n\r\nGB\n\n[3]:C100022026 主机自启动以来磁盘读时延\r: C100022026 主机自启动以来磁盘读时延\r\n\r\n描述\r\n\r\n自启动以来，主机累计磁盘读时延，针对每个物理机统计。\r\n\r\n采集方式\r\n\r\n当前值\r\n\r\n单位\r\n\r\nmsec\n\n[4]:C100022026 主机自启动以来磁盘读时延\r: C100022026 主机自启动以来磁盘读时延\r\n\r\n描述\r\n\r\n自启动以来，主机累计磁盘读时延，针对每个物理机统计。\r\n\r\n采集方式\r\n\r\n当前值\r\n\r\n单位\r\n\r\nmsec\n\n[5]:C100022026 主机自启动以来磁盘读时延\r: C100022026 主机自启动以来磁盘读时延\r\n\r\n描述\r\n\r\n自启动以来，主机累计磁盘读时延，针对每个物理机统计。\r\n\r\n采集方式\r\n\r\n当前值\r\n\r\n单位\r\n\r\nmsec", "answer": "不确定。上下文信息中并未提供关于Director性能数据保存时间的具体信息。"}
{"id": 26, "query": "PCF作为服务端时，AMF和SMF一般根据什么发现PCF", "recall": "[1]:# 服务基础配置\r: # 服务基础配置\r\n\r\n## 背景知识\r\n\r\nPCF服务包括SM（Session Management，会话管理）策略服务、AM（Access and Mobility Management，接入移动管理）策略服务、UE策略服务和策略授权服务。配置PCF服务的目的是其他NF发现PCF服务并请求PCF下发相关策略。\r\n\r\n## 功能描述\r\n\r\n本配置用于配置PCF服务，包括服务类型、服务版本、FQDN（Fully Qualified Domain Name，全称域名）和优先级等。PCF需对外提供服务，因此必须执行本配置。PCF服务配置后，其它NF从NRF发现PCF服务后，可请求相应的服务策略。若不配置，其他NF无法从NRF发现相应的PCF服务。\r\n\r\n## 相关主题\r\n\r\n  * **ADD PCFSERVICE**  \r\n\r\n  * **SET PCFSERVICE**  \r\n\r\n  * **DEL PCFSERVICE**  \r\n\r\n  * **SHOW PCFSERVICE**  \r\n\r\n\r\n\r\n\r\n**父主题：** 服务管理配置\n\n[2]:特性配置\r: SMF为用户UE2选择PCF2，请求PCC策略。\r\n  9. SMF成功完成用户UE2的语音PDU会话建立请求。\r\n  10. PCF1恢复正常，NRF通知SMF，后续的新用户语音PDU会话建立请求，SMF在PCF的可用列表中，按照负荷分担方式选择PCF，为用户获取PDU会话的PCC策略。\r\n\r\n  \r\n通过准则| \r\n\r\n  * PCF1故障。SMF可以通过NRF的网元状态通知，或者业务信令监测机制，识别到PCF1故障。\r\n  * PCF1故障后，PCF2可以接管PCF1上的业务。\r\n  * PCF1恢复正常，NRF会通知SMF对应的PCF恢复，后续的用户PDU会话建立请求，SMF根据该用户DNN和切片对应的PCF地址表中，按照负荷分担的方式选择PCF，为用户获取PDU会话的PCC策略。\r\n\r\n  \r\n测试条目| 数据业务NSA接入（XGW等传统网关接入）的PCF容灾  \r\n---|---  \r\n预置条件| \r\n\r\n  * 2套PCF组成Pool。\r\n  * NSA网络中各网元运行正常，XGW等传统网关和PCF间网络正常。\r\n  * UE1、UE2在UDM中已签约5G SA业务。\r\n\r\n  \r\n测试步骤| \r\n\r\n  1. 用户UE1发起PDU会话建立请求，AMF根据DNN和切片信息选择SMF，并转发该请求给SMF。\r\n  2. SMF从UDM获取用户会话签约信息，核实用户的PDU会话建立请求，并分配用户IP地址，选择UPF建立PDU会话。\r\n  3. SMF通过NRF查询用户的数据DNN对应的PCF，向PCF请求用户的PDU会话策略。\r\n  4. SMF成功建立PDU会话。\r\n  5. PCF1故障。SMF可以通过NRF的网元状态通知，或者业务信令监测机制，识别到PCF1故障。SMF使用PCF2。\r\n  6. 用户UE1的PDU会话发起修改请求，SMF标记PCF1故障，SMF为用户使用本地的PCC规则，完成PDU会话修改。\r\n  7. 用户UE2发起PDU会话建立请求，AMF为该用户会话选择SMF。\r\n  8. SMF为用户UE2选择PCF2，请求PCC策略。\r\n  9.\n\n[3]:SMF容灾\r: PCF| 通过向NRF订阅SMF状态获知SMF不可用| 新用户上线重新选择SMF，对PCF没有影响。  \r\nUDM| 通过向NRF订阅SMF状态获知SMF不可用| 新用户上线重新选择SMF，对UDM没有影响。  \r\nCHF| 通过向NRF订阅SMF状态获知SMF不可用| 无影响。  \r\nNRF| 通过心跳检测感知SMF不可用| SMF故障后，NRF要将SMF状态不可用的信息通知给订阅SMF状态的网元。  \r\n  \r\n部署要求\r\n\r\nSMF POOL容灾对于SMF设备部署的要求如下：\r\n\r\n  * 一个POOL中需要部署两套或以上SMF设备。\r\n\r\n  * POOL中的SMF设备需要部署在不同地域DC中。\r\n\r\n  * 部署时规划好容量与实际接入量的关系，确保容灾时接管设备可以承接故障设备的业务量。\r\n\r\n\r\n\r\n\r\n另外，根据现场规划，SMF POOL容灾有以下几种负荷分担方式。\r\n\r\n  * 非均匀负荷分担方式：SMF向NRF注册的优先级配置中，两个SMF优先级配置相同，但是权重配置不同。业务接入时权重大的SMF设备被选择承接业务的概率更大，如7：3业务承接方式。当高权重SMF不可用时，所有业务由低权重SMF承接。\r\n\r\n这种方式如果POOL中有两个以上SMF，则在容灾时需要预先考虑可能出现另一个高权重SMF过负荷的情况，如下图所示。\r\n\r\n  * 均匀负荷分担方式：SMF向NRF注册的优先级配置中，两个SMF优先级配置相同，且权重配置也相同，则POOL内的所有SMF均匀承担业务量。当某个SMF不可用时，它的业务会由POOL中其它SMF均衡分担。\r\n\r\n\r\n\r\n\r\n容灾业务流程\r\n\r\n数据业务SA接入的SMF Pool容灾流程\r\n\r\n用户发起数据PDU会话建立请求后，AMF通过用户的DNN、切片、SMF的优先级及权重等信息从满足要求的SMF列表中选择一个可用的SMF，为用户建立PDU会话。\r\n\r\n一旦AMF通过NRF的网元状态订阅通知消息，获知SMF故障，AMF应发起用户数据会话释放流程。\r\n\r\n图4 数据业务SA接入的SMF Pool容灾流程\r\n\r\n流程说明如下：\r\n\r\n  1. 用户UE1发起数据业务PDU会话建立请求。\r\n\r\n  2. AMF1根据DNN和切片信息，负荷分担选择SMF1，为用户建立PDU会话。\r\n\r\n  3. SMF1从UDM获取用户的会话签约信息，并完成接入鉴权、授权和连接注册流程。\r\n\r\n  4. SMF1从PCF获取用户的PCC策略。\r\n\r\n  5. SMF1根据用户PDU会话的DNN、切片和TA等参数，选择一个UPF，为用户建立PDU会话转发资源。\r\n\r\n  6. SMF1应答AMF1，并通知AMF1用户的PDU会话信息。\r\n\r\n  7.\n\n[4]:AMF容灾\r: AMF容灾\r\n\r\n容灾组网\r\n\r\nAMF容灾组网方式为AMF POOL。\r\n\r\n一个AMF POOL由多个为相同区域和网络切片提供服务的AMF组成。AMF POOL内的AMF为区域内的UE提供服务，共同分担处理区域内所有UE的业务。UE在AMF POOL所服务的区域间移动不需要改变服务AMF。区域内的(R)AN与AMF POOL内的所有AMF均进行互联。\r\n\r\n图1 AMF POOL逻辑组网图\r\n\r\n目前运营商多采用大区组网方式，在此组网方式下，为某个业务区域（或省份）提供网络服务的多个AMF组成AMF POOL。出于容灾考虑，将POOL内的AMF同时分布于主用大区和备用大区中。区域（或省份）内的业务将由(R)AN根据各AMF的容量、权重、负荷分担等因素选择POOL内的AMF进行处理。\r\n\r\nDC级组网方式，AMF容灾的工作原理与大区级组网方式类似。\r\n\r\n容灾原理\r\n\r\n正常情况下，AMF POOL内的各AMF共同分担区域内的话务。当AMF发生故障或外部链路故障后，由(R)AN或其他控制面NF（如SMF/PCF/UDM等）将话务发送至正常的AMF进行业务恢复。\r\n\r\n具体原理如下：\r\n\r\n  * 对AMF用户数据进行备份。\r\n\r\n在AMF正常运行过程中，需要将用户标识及其位置信息（如SUPI(Subscriber Permanent Identifier, 用户永久标识)/TAList/5G-GUTI(5G Globally Unique Temporary Identity, 5G全球唯一临时标识)）备份到POOL内的其他AMF（即备份AMF）上，当此AMF发生故障后，备份AMF可以通过用户备份数据对用户进行寻呼，从而实现终呼（即终端作为被叫）流程触发的业务恢复流程。\r\n\r\n因此，为完成用户数据备份，需要为每台AMF配置其备份AMF。在大区组网的情况下，若考虑大区级容灾，则备份AMF需要选择与本AMF部署在不同大区中的AMF。DC级组网等场景与该场景类似。\r\n\r\n  * AMF需要通过NRF注册功能将备份关系注册到NRF上，以便其他控制面NF（如SMF/PCF/UDM等）可以通过服务发现功能来获取备份AMF信息。\r\n\r\n    1. AMF及备份AMF分别向NRF注册，并携带与其相关的主备AMF信息。备份AMF将其与AMF的备份关系同时注册到NRF中，其他NF可以通过NRF获取AMF之间的备份关系。同时，AMF在与CPNF（SMF，PCF等）交互中，也会将其备份AMF的信息通过交互信令携带给CPNF。\r\n\r\n    2. AMF与NRF之间进行心跳检测。当NRF检测到当前和AMF之间的心跳消息异常，则判定该AMF异常并更新其状态。同时，AMF在计划性移除流程（即主动移除当前AMF的流程）中，主动发起到NRF的状态更新，异常AMF退出服务。\r\n\r\n    3.\n\n[5]:方案概述\r: 网元| 容灾部署方式| 故障检测机制| 容灾简要说明| 详细链接  \r\n---|---|---|---|---  \r\nNRF| 1+1互备| 服务化NF：PATCH心跳探测| 在NRF间需要实现数据同步，保证各NF注册数据一致性。维护其他NF状态，识别NF故障后，根据订阅数据向订阅者发送NF故障状态通知；并在对应的NF发现流程中，返回可用NF列表。| NRF容灾  \r\nAMF| POOL| 服务化NF：PATCH心跳探测RAN/MME：非服务化接口检测| AMF POOL由多个为相同区域和网络切片提供服务的AMF组成，区域内的RAN与AMF POOL内的所有AMF均进行互联。AMF在正常运行中将用户标识及其位置信息（如SUPI/TAList/5G-GUTI）备份到AMF POOL内的其他AMF（即备份AMF）上，为完成用户数据备份，需要为每台AMF指定备份AMF。某AMF发生故障后：对于(R)AN发起的上行流程，(R)AN选择AMF POOL内其他正常的AMF，由AMF触发用户重注册，从而恢复业务处理。对于CPNF发起的下行流程，CPNF选择故障AMF的备份AMF，由备份AMF根据用户备份数据先寻呼用户，在用户发起业务请求后再触发用户重注册，从而恢复业务处理。| AMF容灾  \r\nSMF| POOL| 服务化NF：PATCH心跳探测UPF：非服务化接口检测| SMF POOL容灾方式是指一组SMF组成一个POOL。当POOL中某SMF故障时，AMF会在POOL中重新选择一个可用的SMF继续业务。| SMF容灾  \r\nUPF| POOL| 服务化NF：PATCH心跳探测SMF/UPF/gNodeB：非服务化接口检测| UPF POOL容灾方式是指一组UPF组成一个POOL。当POOL中某UPF故障时，SMF会在POOL中重新选择一个可用的UPF继续业务。| UPF容灾  \r\nCHF| 1+1互备| 通过前端网元SMF检测| CHF 1+1互备容灾方式是指两套独立的CHF互为主备并且同时运行业务。如果主用CHF异常，SMF可能短时间内收不到CHF的计费响应消息（或者和CHF的HTTP PING探测失败），未响应计费消息会在SMF本地临时缓存，后续通过回放的方式发向备用CHF，后续所有新的计费消息也会发向备用CHF。如果主备CHF都不可用，对当前异常消息SMF会打上failure标记，进行持久化存储。待CHF恢复可用时，SMF通过回放的方式发送给可用的CHF，若该回放话单中MUU有效（即产生了流量），CHF会将该话单的ratingIndicator设置=1，Billing需要对ratingIndicator=1的话单做排重处理。| CG容灾  \r\nPCF| POOL| 服务化NF：PATCH心跳探测和HTTP PING探测非服务化接口：非服务化接口检测中的SCTP/Diameter链路检测| PCF POOL容灾方式是指一组SMF组成一个POOL。", "answer": "AMF和SMF一般通过以下方式发现PCF：\n\n1. 通过NRF（Network Repository Function，网络存储功能）进行服务发现。\n   - AMF和SMF会向NRF订阅PCF的服务信息。\n   - NRF维护一个可用PCF服务的列表，并通过心跳检测等方式更新PCF的状态。\n   - 当AMF或SMF需要与PCF交互时，它们可以通过NRF查询到可用的PCF服务，并根据策略选择一个PCF进行通信。\n\n2. 根据DNN（Data Network Name，数据网络名称）和切片信息选择PCF。\n   - 在进行服务发现时，AMF和SMF可能会根据用户的DNN和切片信息来选择对应的PCF。\n\n3. 根据负荷分担方式选择PCF。\n   - SMF可能会根据配置的优先级和权重，通过负荷分担机制选择PCF，以均衡网络中的负载。\n\n这些机制确保了AMF和SMF能够有效地发现并选择合适的PCF服务，以提供连续的策略控制功能。"}
{"id": 27, "query": "硬件资源包括哪些种类", "recall": "[1]:硬件资源\r: 硬件资源\r\n\r\n子主题：\r\n\r\n  * 磁阵\r\n\r\n  * 交换机\r\n\r\n  * 交换机端口\r\n\r\n  * 路由器\r\n\r\n  * 路由器板卡\r\n\r\n  * 路由器端口\r\n\r\n  * 防火墙\r\n\r\n  * 防火墙端口\r\n\r\n  * 负载均衡\r\n\r\n  * 服务器\r\n\r\n  * WAF\r\n\r\n  * DDos\r\n\r\n  * IS\r\n\r\n  * 云环境\r\n\r\n  * 数据中心\r\n\r\n  * 机框\r\n\r\n  * 机框刀片\n\n[2]:硬件资源\r: 硬件资源\r\n\r\n子主题：\r\n\r\n  * 磁阵\r\n\r\n  * 交换机端口\r\n\r\n  * 交换机\r\n\r\n  * 云环境\r\n\r\n  * 数据中心\r\n\r\n  * 路由器端口\n\n[3]:虚拟资源\r: 虚拟资源\r\n\r\n子主题：\r\n\r\n  * 虚机\r\n\r\n  * 主机\r\n\r\n  * 主机网络\r\n\r\n  * 虚拟网络\r\n\r\n  * 云环境\r\n\r\n  * 虚机磁盘\r\n\r\n  * 主机磁盘分区\r\n\r\n  * 主机链路\r\n\r\n  * 数据中心\r\n\r\n  * 主机集群\r\n\r\n  * 可用域\r\n\r\n  * 裸金属\n\n[4]:虚拟资源\r: 虚拟资源\r\n\r\n子主题：\r\n\r\n  * 虚机\r\n\r\n  * 主机\r\n\r\n  * 主机网络\r\n\r\n  * 虚机网络\r\n\r\n  * 云环境\r\n\r\n  * 虚机磁盘\r\n\r\n  * 主机磁盘分区\r\n\r\n  * 主机链路\r\n\r\n  * 主机集群\r\n\r\n  * 数据中心\r\n\r\n  * 可用域\r\n\r\n  * 裸机实例\n\n[5]:资源纳管\r: * 虚拟机管理\r\n\r\n虚拟机是在物理服务器上划分出来的一台或者多台虚拟化的计算机系统。\r\n\r\n虚拟机管理的功能包括查询虚拟机列表、查看虚拟机详情、虚拟机操作（启动、停止、暂停、备份、快照、资源规格调整）。\r\n\r\n  * 裸金属管理\r\n\r\nTECS Director提供了将物理机作为计算资源，类似虚拟机一样，直接分配给用户使用的管理功能。系统支持物理裸机的发现、分配与部署、管理（开机/关机、重启、锁定/解锁、更新、重建、安装操作系统、裸金属生成镜像等）、删除等功能。\r\n\r\n  * 亲和组、反亲和组管理\r\n\r\nTECS Director提供亲和组、反亲和组功能，通过亲和组将多台虚机部署在相同的宿主机上，通过反亲和组将多台虚机分散部署在不同的宿主机上。\r\n\r\n  * 块存储管理\r\n\r\n存储管理包括物理存储设备的监控、云盘的创建、删除、查看、编辑和转让等。\r\n\r\n  * 文件存储管理\r\n\r\nTECS Director提供文件存储（共享文件）管理功能，支持文件存储（共享文件）从创建到删除的整个生命周期管理。\r\n\r\n  * 对象存储管理\r\n\r\nTECS Director提供对象存储管理功能，支持对象存储从创建到删除的整个生命周期管理。\r\n\r\n  * 网络管理\r\n\r\n    * 物理网络设备状态监控，包括中兴通讯自研及各厂商主流交换机、路由器设备。\r\n\r\n    * 云网络管理：支持虚拟网络、子网、虚拟路由、端口、安全组、虚拟防火墙、虚拟负载均衡等网络资源的生命周期管理，包括创建、删除、查看等，同时支持网络QoS(Quality of Service, 服务质量)策略配置。\r\n\r\n    * 支持网络配置：支持IP(Internet Protocol, 因特网协议)/VLAN(Virtual Local Area Network, 虚拟局域网)池配置管理，用户的IP(Internet Protocol, 因特网协议)地址和VLAN(Virtual Local Area Network, 虚拟局域网)选取来自相关资源池；支持虚机配置SR-IOV网卡；支持NFV(Network Functions Virtualization, 网络功能虚拟化)包括vFW/vLB的配置开通。支持相关策略配置。\r\n\r\n    * 虚拟私有云（Virtual Private Cloud，VPC）管理：基于云环境为虚机构建一套逻辑隔离的虚拟网络环境，可自定义子网、自行创建防火墙、VPN网关等，提升用户虚拟资源的安全性，简化用户的网络部署。 \r\n\r\n支持虚拟私有云的创建、修改、删除等能力，同时VPC通过出口/多出口、专线方式支持虚机访问外部网络。\r\n\r\n  * 镜像管理\r\n\r\nTECS Director提供多个云环境的镜像统一管理，并支持将镜像分发到一个或多个环境，以便创建虚拟机时使用。\r\n\r\n镜像管理功能包括镜像仓库管理和云环境镜像管理。", "answer": "硬件资源包括以下种类：\n\n  * 磁阵\n  * 交换机\n  * 交换机端口\n  * 路由器\n  * 路由器板卡\n  * 路由器端口\n  * 防火墙\n  * 防火墙端口\n  * 负载均衡\n  * 服务器\n  * WAF\n  * DDos\n  * IS\n  * 云环境\n  * 数据中心\n  * 机框\n  * 机框刀片\n\n以上是根据上下文信息中提供的硬件资源种类进行整理的。"}
{"id": 28, "query": "PCF与SMF对接时，一般需要配置哪些数据？", "recall": "[1]:配置SMF对接数据\r: 执行ADD ADJHOSTIP命令，增加邻接主机IP配置。\r\n\r\n根据目前服务化的接口协议，N5、N7、N15（含UE策略）等接口，notificationUri在初始请求消息的消息体中都是必选项，示例如下：notificationUri: \"http://[2409:805b:5003:1640::b:202]:80/npcf-smpolicycontrol/notification/v1/sm-policies/08c1a018120d089210120802da0000b9a70006\"。\r\n\r\nPCF收到AM策略关联、UE策略关联、SM策略关联建立请求时，首先分析出归属邻接主机（归属邻接主机组）：\r\n\r\n     * notificationUri主机部分为IP，则匹配邻接主机IP配置，分析出归属邻接主机（归属邻接主机组）。\r\n\r\n     * notificationUri主机部分为FQDN，则匹配邻接主机配置（若无法精确匹配，继续匹配邻接主机通配配置），分析出归属邻接主机（归属邻接主机组）。\r\n\r\nADD ADJHOSTIP命令的参数填写说明参见表3。\r\n\r\n表3 ADD ADJHOSTIP命令的参数说明参数| 参数名称| 填写说明  \r\n---|---|---  \r\nADJHOSTID| 邻接主机编号| 标识一个邻接主机。不能和步骤3中已配置的**邻接主机编号** 重复。  \r\nHOSTIPADDRESS| 主机IP地址| 配置邻接主机的IP地址，区分IPv4和IPv6。邻接主机IP地址不能配置成全0。  \r\nMASKLEN| 掩码长度| 配置邻接主机IP地址的掩码长度。  \r\nOSTTYPE| 邻接主机类型| PCF和SMF对接时，选择SMF。  \r\nADJHOSTGRPID| 邻接主机组编号| 引用步骤1中已配置的**邻接主机组编号** 。  \r\n  \r\n  5. 执行ADD BEARABILITY命令，增加承载能力。\r\n\r\n当PCEF/SMF融合网元接入时，使用该命令。命令执行成功后，在IP-CAN会话建立时，RCP将根据用户接入的PCEF主机查询本配置，获取对端设备能力。\r\n\r\nADD BEARABILITY命令的参数填写说明参见表4。其他参数如无特殊要求，保持默认即可。\r\n\r\n表4 ADD BEARABILITY命令参数说明参数| 参数名称| 参数说明  \r\n---|---|---  \r\nADJHOSTGRPID| 邻接主机组编号| 引用ADD ADJHOSTGRP命令中配置的“邻接主机组编号”。  \r\nINTERFACE| 接口能力| PCF和SMF对接时，选择PGW。  \r\nSERVMODE| 业务标识方式| 选择应用标识。  \r\nPREDIST| 支持业务决策预下发| 配置ZXUN RCP是否支持业务预下发的能力。是：用户上线时就下发的预定义规则。  \r\nTIMERULENUM| 每业务时段规则数量| 时段规则数目。  \r\nREVALIDTIME| 支持Revalidation-Time AVP(Attribute Value Pair, 属性值对)| 是否支持Revalidation-Time AVP下发。  \r\nSVCREDIRECT| 支持私有重定向| 是否支持业务重定向。不支持重定向功能时，即使决策输出了重定向也不下发重定向规则。  \r\nBEARCTRMODE| 承载控制模式| 模式选择由网络部署决定。\n\n[2]:PCF对接数据配置\r: PCF对接数据配置\r\n\r\n子主题：\r\n\r\n  * 服务配置\r\n\r\n  * 配置NRF对接数据\r\n\r\n  * 配置SMF对接数据\r\n\r\n  * 配置BSF对接数据\r\n\r\n  * 配置CHF对接数据\n\n[3]:配置SMF对接数据\r: 增加承载能力。\r\n\r\nADD BEARABILITY:ADJHOSTGRPID=10,INTERFACE=\"PGW\",SERVMODE=\"APPID\",EXTENDBW=\"YES\"\r\n\r\nADD BEARABILITY:ADJHOSTGRPID=11,INTERFACE=\"PGW\",SERVMODE=\"APPID\",EXTENDBW=\"YES\"\r\n\r\nADD BEARABILITY:ADJHOSTGRPID=12,INTERFACE=\"PGW\",SERVMODE=\"APPID\",EXTENDBW=\"YES\"\n\n[4]:配置BSF对接数据\r: 配置BSF对接数据\r\n\r\nNbsf是BSF提供的服务化接口，PCF调用该接口，注册、更新、去注册绑定信息。绑定信息包含UE标识、DNN、UE IP地址及PDU会话所选PCF信息。\r\n\r\nPCF支持动态发现BSF或者静态配置BSF。2种配置方式2选1即可，优先选择动态发现BSF配置方式。\r\n\r\n运营商| 配置策略| 配置说明  \r\n---|---|---  \r\n中国移动| 无需配置| BSF融合部署，SMF内置BSF功能。PCF不需要和BSF交互，由融合部署网元SMF注册、更新、去注册绑定信息。  \r\n中国联通| 需要配置| BSF独立部署。PCF调用Nbsf接口（BSF提供的服务化接口）注册、更新、去注册绑定信息。\r\n\r\n  * 动态发现BSF网络中有NRF，PCF通过NRF动态发现BSF。\r\n  * 静态配置BSF网络中无NRF，通过静态配置对接BSF。\r\n\r\n  \r\n中国电信  \r\n  \r\n子主题：\r\n\r\n  * 配置动态发现BSF\r\n\r\n  * 配置静态BSF对接数据\n\n[5]:配置SMF对接数据\r: 增加邻接主机IP配置。\r\n\r\n     * 精确配置\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1001,HOSTIPADDRESS=\"10.119.173.208\",MASKLEN=32,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1002,HOSTIPADDRESS=\"10.119.189.208\",MASKLEN=32,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1003,HOSTIPADDRESS=\"10.119.173.210\",MASKLEN=32,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1004,HOSTIPADDRESS=\"10.119.189.210\",MASKLEN=32,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1005,HOSTIPADDRESS=\"10.119.173.212\",MASKLEN=32,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1006,HOSTIPADDRESS=\"10.119.189.212\",MASKLEN=32,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1051,HOSTIPADDRESS=\"2409:800b:5003:1705:1::101\",MASKLEN=128,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1052,HOSTIPADDRESS=\"2409:801d:5003:1704:5::5201\",MASKLEN=128,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1053,HOSTIPADDRESS=\"2409:800b:5003:1705:1::301\",MASKLEN=128,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1054,HOSTIPADDRESS=\"2409:801d:5003:1704:5::5401\",MASKLEN=128,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1055,HOSTIPADDRESS=\"2409:800b:5003:1705:1::501\",MASKLEN=128,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1056,HOSTIPADDRESS=\"2409:801d:5003:1704:5::5601\",MASKLEN=128,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\n     * 省内通配\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1101,HOSTIPADDRESS=\"10.124.74.192\",MASKLEN=28,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1102,HOSTIPADDRESS=\"10.124.56.176\",MASKLEN=28,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1103,HOSTIPADDRESS=\"2409:8069:5003:1805:0000:0000:0122:0000\",MASKLEN=112,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1104,HOSTIPADDRESS=\"2409:8073:5003:1803:0000:0000:0122:0000\",MASKLEN=112,HOSTTYPE=\"SMF\",ADJHOSTGRPID=11\r\n\r\n     * 省外通配\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1201,HOSTIPADDRESS=\"10.0.0.0\",MASKLEN=8,HOSTTYPE=\"SMF\",ADJHOSTGRPID=12\r\n\r\nADD ADJHOSTIP:ADJHOSTID=1202,HOSTIPADDRESS=\"2409::0\",MASKLEN=16,HOSTTYPE=\"SMF\",ADJHOSTGRPID=12\r\n\r\n  5.", "answer": "PCF与SMF对接时，一般需要配置以下数据：\n\n1. 邻接主机IP配置：\n   - 使用ADD ADJHOSTIP命令配置具体的邻接主机IP地址、掩码长度、邻接主机类型（选择SMF）以及邻接主机组编号。\n   - 可以进行精确配置，针对具体的IP地址进行配置；也可以进行省内或省外通配配置，针对一定范围内的IP地址进行配置。\n\n2. 承载能力配置：\n   - 使用ADD BEARABILITY命令增加承载能力，配置包括邻接主机组编号、接口能力（选择PGW）、业务标识方式（选择应用标识）等参数。\n   - 其他参数如支持业务决策预下发、时段规则数量、支持Revalidation-Time AVP、支持业务重定向、承载控制模式等，根据实际需求进行配置。\n\n这些配置确保了PCF与SMF之间的有效对接和通信。"}
{"id": 29, "query": "Director支持在华为云虚机上部署吗？", "recall": "[1]:准备虚机启动源：镜像启动或云盘启动\r: 准备虚机启动源：镜像启动或云盘启动\r\n\r\n虚机支持通过镜像、云硬盘、云硬盘快照三种方式创建。\r\n\r\n  * 镜像：镜像分为公有镜像与私有镜像，公有镜像由云管理员上传，私有镜像由组织用户上传，具体操作参见上传VDC镜像（可选）。\r\n\r\n  * 云硬盘：通过已有的云硬盘创建虚机。\r\n\r\n  * 云硬件快照：对云硬盘进行快照，然后使用云硬盘快照启动虚机。\r\n\r\n\r\n\r\n\r\n子主题：\r\n\r\n  * 上传VDC镜像（可选）\r\n\r\n  * 创建云硬盘\n\n[2]:概述\r: 概述\r\n\r\n产品概述\r\n\r\nTECS Director定位ICT融合的电信级云管理平台，提供对私有云、公有云和混合云整合管理的产品，既能支持运营商NFV的CT场景（NFVIM），也能为IT场景及行业应用提供ICT融合的解决方案，并为运营商提供面向企业的类公有云的服务整体解决方案。\r\n\r\n借助TECS Director，客户可以将多个数据中心的异构资源整合，物理分布、逻辑统一，实现多数据中心资源池的统一纳管、统一编排和运维；开放IaaS服务能力；基于VDC和组织的运营能力，通过资源服务化，服务差异化、自动化，从而构建多租户异构云混合云，为用户提供统一的运营管理门户和自服务门户。TECS Director在整个TECS系统中的位置如图1所示。\r\n\r\n图1 TECS Director的定位\r\n\r\n部署架构\r\n\r\nTECS Director总体部署架构如图2所示。\r\n\r\n图2 TECS Director部署架构\r\n\r\n部署组成：\r\n\r\n  * DaisySeed： 部署工具。用户同DaisySeed工具交互完成整个Director系统的部署； DaisySeed自身安装灵活，既可以安装在PC机也可以虚机，既有windows版本也有linux版本；\r\n\r\n  * 基础设施： 部署目标。Director支持部署在裸机或者虚机上，裸机和虚机对应不同的节点，网络，存储配置，以及不同的部署模板； \r\n\r\n  * 软件系统： 部署对象。Director的软件系统，包含内嵌的TCF平台，数据库与中间件和Director应用；\r\n\r\n  * Daisy：软件系统的一部分，负责同DaisySeed交互协同，完成整个Director系统的部署； 同时，Daisy 也是后续Director升级入口工具。\r\n\r\n\r\n\r\n\r\nTECS Director的物理机部署时序如图3所示。\r\n\r\n图3 部署时序（物理机）\n\n[3]:虚机发布管理\r: 虚机发布管理\r\n\r\nTECS Director支持组织管理员/子组织管理员发布本组织/子组织所使用的虚机。两者操作步骤类似，本节以组织管理员的操作步骤为例进行描述。\r\n\r\n发布虚机的操作流程，如图1所示。\r\n\r\n图1 发布虚机流程\r\n\r\n说明：\r\n\r\n虚机等资源已在MANO上创建，TECS Director与MANO对接后，在TECS Director上可进行资源的查询操作。\r\n\r\n子主题：\r\n\r\n  * 上传VDC镜像（可选）\r\n\r\n  * 添加虚机云网络\r\n\r\n  * 添加安全组\r\n\r\n  * 创建密钥对\r\n\r\n  * 创建云硬盘\r\n\r\n  * 发布虚机\r\n\r\n  * 扩容虚机磁盘\n\n[4]:虚机linux系统daisyseed搭建\r: 虚机linux系统daisyseed搭建\r\n\r\n摘要\r\n\r\n介绍虚机linux系统daisyseed搭建的方法。\r\n\r\n步骤\r\n\r\n  1. 使用admin账号登陆TECS，选择云管理→计算→规格，打开规格页面。\r\n\r\n  2. 单击添加虚机规格按钮，打开添加虚机规格页面。\r\n\r\n  3. 创建daisyseed虚机规格（4核8G、50G硬盘），根据TECS资源池实际配置信息注意是否需要打开绑核巨页。\r\n\r\n  4. （可选）端口ip可以创建（增加虚机的时候指定分配某个端口IP），也可以不创建（增加虚机的时候随机分配端口ip），选择项目管理→网络，打开网络页面。找到tecslient网络和net_iapi运维网络，添加端口。\r\n\r\n  5. 选择项目管理→存储→云硬盘，打开云硬盘页面。\r\n\r\n  6. 单击添加云硬盘按钮，打开添加云硬盘页面。\r\n\r\n  7. 创建云硬盘，镜像使用和director节点相同镜像。\r\n\r\n  8. 选择项目管理→计算→虚机，打开虚机页面。\r\n\r\n  9. 单击添加虚机按钮，打开添加虚机页面。\r\n\r\n  10. 创建虚机，选择从云硬盘启动创建虚机，选择上面步骤创建的云硬盘和端口。\r\n\r\n  11. 固化网络，将tecslient和net_iapi的IP地址固化到ifcfg-X网卡文件中，如图1所示。\r\n\r\n图1 固化网络\r\n\r\n  12. （可选）扩充分区。查看daisyseed的根分区/，如果剩余空间小于30G，则需要进行扩容操作将剩余空间扩到大于30 G即可。\n\n[5]:概述\r: 概述\r\n\r\nTECS_Director_Tenant_Operation_Guide\r\n\r\nTECS Director作为云管理平台，可以部署在MEC(Mobile Edge Computing, 移动边缘计算)的编排器中。TECS Director支持以IaaS(Infrastructure as a Service, 基础设施即服务)资源分发方式在MEC(Mobile Edge Computing, 移动边缘计算)中部署APP(Application, 应用)，如图1所示。该方式需要用户手工创建APP(Application, 应用)拓扑中的资源。\r\n\r\n图1 以IaaS资源分发方式部署APP\r\n\r\nAPP(Application, 应用)拓扑包含计算、存储、网络等资源，用户通过资源映射关系在TECS Director上创建对应资源，映射关系参见表1。\r\n\r\n表1 映射关系APP拓扑| TECS Director映射| TECS Director操作  \r\n---|---|---  \r\n资源池| 云环境| 前置操作：\r\n\r\n  * 添加数据中心\r\n  * 添加云环境\r\n\r\n  \r\n租户| VDC| 前置操作：\r\n\r\n  * 添加主机集群\r\n  * 创建VDC\r\n\r\n后置操作：\r\n\r\n  * 添加组织\r\n  * 添加组织管理员\r\n  * 绑定组织和VDC\r\n\r\n  \r\nAPP外部网络| 云网络（网络属性勾选外部网络）+子网等| \r\n\r\n  * 添加云环境网络\r\n  * 添加云环境子网池\r\n  * 添加VLAN池\r\n\r\n  \r\nAPP内部网络| 云网络+子网等| 添加虚机云网络  \r\nAPP中虚机镜像| 镜像| \r\n\r\n  * 上传公共镜像（可选）\r\n  * 上传VDC镜像（可选）\r\n\r\n  \r\nAPP中虚机| 虚机（创建虚机过程中挂载网络、创建数据盘）| \r\n\r\n  * 虚机规格管理（可选）\r\n  * 添加云硬盘类型\r\n  * 发布虚机", "answer": "根据提供的上下文信息，无法直接确定TECS Director是否支持在华为云虚机上部署。上下文信息中未明确提及TECS Director是否能在华为云的虚机上进行部署。因此，对于此问题，我的回答是不确定。"}
{"id": 30, "query": "Daisyseed安装软件从哪里获取", "recall": "[1]:Linux虚机场景daisyseed准备\r: Linux虚机场景daisyseed准备\r\n\r\n摘要\r\n\r\n介绍虚机场景daisyseed准备。\r\n\r\n步骤\r\n\r\n  1. 搭建daisyseed部署机。\r\n\r\n  2. 上传daisyseed工具包。注意需要Daisyseed主机和paas的net_iapi网络打通（步骤1搭建daisyseed虚机时已经打通）。\r\n\r\n    1. 本地解压TCFV7.22.10.06P01_tools.tar,解压后进入daisyseed目录，找到daisyseed_linux_TECSV7.22.10_rel_1081.tar\r\n\r\n    2. 将daisyseed_linux_TECSV7.22.10_rel_1081.tar上传至daisyseed虚机/root下\r\n\r\n    3. 创建/root/daisyseed_v3/目录（注意:虚机创建后，可能已经存在daisyseed_v3目录，需要先手动删除rm -rf daisyseed_v3）\r\n\r\n    4. 解压版本：cd /root/daisyseed_v3/ && tar -xf /root/daisyseed_linux_*.tar\r\n\r\n    5. 对齐版本目录：mv /root/daisyseed_v3/daisyseed_linux_* /root/daisyseed_v3/daisyseed\r\n\r\n  3. 更新daisyseed虚机依赖库。\r\n    \r\n        cd /root/daisyseed_v3/daisyseed/daisyseed_env_pkg\r\n    sh prepare_mimosa8.2.sh\r\n\r\n  4. 上传配置模板。\r\n\r\n    1. 上传paas、tecs、daisyseed、director四个模板到daisyseed虚机/root/daisyseed_v3/daisyseed/config_files目录下。\r\n\r\n    2. 上传配置文件seed_cmd_config.ini到 /root/daisyseed_v3/daisyseed/daisyseed/template目录下。\r\n\r\n    3. 上传版本包到/root/daisyseed_v3/daisyseed/versions目录下。\n\n[2]:图形界面部署\r: 图形界面部署\r\n\r\n摘要\r\n\r\n介绍Windows系统下如何使用图形界面进行部署。\r\n\r\n步骤\r\n\r\n  1. 进入daisyseed目录，双击Daisyseed.bat，打开DaisySeed图形界面，如图1所示。\r\n\r\n图1 DaisySeed图形界面\r\n\r\n  2. 单击普通模式下的使用，单击切换至安装部署页面，如图2所示。\r\n\r\n图2 安装部署页面\r\n\r\n  3. 场景选择网产品，应用勾选director，安装方式：物理机选择默认安装，虚机选择预制节点并部署，模板类型选择分离模板，Daisyseed模板选择刚才上传到config_files目录下的daisyseed-BM.xlsx，TECS模板选择tecs-BM.xlsx，OpenPalette模板选择paas-BM.xlsx，director模板选择director-BM.xlsx。\r\n\r\n  4. 单击确定按钮，在弹出的确认框中再次单击确定。可能会弹出警告检查项不过，如图3所示，预留端口和全零监听报错可以忽略，其他报错查看模板配置是否配置错误。\r\n\r\n图3 警告\r\n\r\n  5. 如果确认没问题，可以忽略报错 ，单击继续部署，页面上显示部署进度，如图4所示。\r\n\r\n图4 部署进度\r\n\r\n  6. 等待一定时间（一般3.5小时，根据硬件规模和性能的差异时间可能有差异），所有步骤部署完成。\r\n\r\n  7. 登录账户：\r\n    \r\n        director  portal ：https://<tecsclient IP>/uportal    admin /Zenap_123!@#\r\n    tcf portal : https://<运维网络浮动IP>:1043/ngportal   admin /Keystone123   \r\n    director/Keystone123\r\n    daisy portal：https://<运维网络浮动IP>:18080  admin /Keystone123\n\n[3]:物理机Linux系统daisyseed准备\r: 物理机Linux系统daisyseed准备\r\n\r\n摘要\r\n\r\n介绍物理机Linux系统daisyseed准备。\r\n\r\n步骤\r\n\r\n搭建daisyseed部署机\r\n\r\n  1. 以5300服务器搭建daisyseed为例，登录服务器BMC界面，选择设置→启动方式，启动设备选择光驱，如图1所示。\r\n\r\n图1 设置启动方式\r\n\r\n  2. 进入服务器KVM界面，加载镜像文件到虚拟光驱，如图2所示。\r\n\r\n图2 加载镜像文件\r\n\r\n  3. 选择Power→Reset Server，重启服务器，进入配置页面，如图3所示。\r\n\r\n图3 配置页面\r\n\r\n  4. 移动光标到Partitions，回车，移动光标到Change Partition Size，回车，设置Customize partition为No，如图4所示。\r\n\r\n图4 设置\r\n\r\n  5. 移动光标到Network，配置network ，根据网络规划，配置的大网ip，选择网卡，单双栈，ip地址，掩码、网关等信息。\r\n\r\n  6. 移动光标选择Install，安装daisyseed操作系统，如图5所示。安装完成后，默认登录用户密码为：ubuntu/UbuntU1!2@3#4$ 用sudo -i切换到root用户。\r\n\r\n图5 安装操作系统\r\n\r\n\r\n\r\n\r\n安装后配置\r\n\r\n  1. （可选）扩容根分区。\r\n\r\nssh登录daisyseed，切换到root用户，df -h查看磁盘分区。根分区剩余空间不能小于30G，否则需要扩容。\n\n[4]:命令行部署\r: 命令行部署\r\n\r\n摘要\r\n\r\n介绍在linux系统下如何使用命令行执行部署。\r\n\r\n步骤\r\n\r\n  1. 执行部署，分为两种情况：\r\n\r\n     * 重新部署\r\n\r\n       1. 停止Daisyseed\r\n            \r\n                        sudo ps -ef|grep -E \"app.py\" |grep -v grep|awk '{print $2}'|xargs -i kill -9 {}\r\n\r\n       2. 清理前一次部署状态Install State\r\n            \r\n                        cd /root/daisyseed_v3/daisyseed/daisyseed/output/state/\r\n            rm -rf *\r\n\r\n       3. 启动 Daisyseed\r\n            \r\n                        nohup python3 /root/daisyseed_v3/daisyseed/daisyseed/app.py > seed.log 2>&1 &\r\n\r\n       4. 启动部署（前面步骤执行完，建议等待30秒，再执行）\r\n            \r\n                        python3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py \r\n            /root/daisyseed_v3/daisyseed/daisyseed/template/seed_cmd_config.ini\r\n\r\n     * 断点续装\r\n        \r\n                python3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py /root/daisyseed_v3\r\n        /daisyseed/daisyseed/template/seed_cmd_config.ini --redeploy=no\r\n\r\n\r\n\r\n  1. 查询部署日志\r\n\r\nSSH到daisyseed，切换到root用户，执行如下命令查询部署进展（部署时长大概需要180-240分钟左右）\r\n    \r\n        tail -f /root/daisyseed_v3/daisyseed/daisyseed/output/daisyseed.log\r\n\r\n出现如下的日志代表部署完成。\r\n\r\n登录账户：\r\n    \r\n        director  portal ：https://<tecsclient IP>/uportal    admin /Zenap_123!@#\r\n    tcf portal : https://<运维网络浮动IP>:1043/ngportal   admin /Keystone123    \r\n    director/Keystone123\r\n    daisy portal：https://<运维网络浮动IP>:18080  dmin /Keystone123\r\n\r\n查看PaaS控制节点部署日志（此日志不一定在首节点，需要查看每个节点）：\r\n    \r\n        tail -f /var/log/cosmos_deploy.log\r\n\r\n  2. 如果PaaS部署失败初步定位\r\n    \r\n        pdm-cli task list\r\n    pdm-cli task show uuid|grep fail\r\n\r\n  3. 查询PaaS是否部署成功\r\n    \r\n        pdm-cli paas_status get\n\n[5]:Windows系统daisyseed准备\r: Windows系统daisyseed准备\r\n\r\n摘要\r\n\r\n介绍Windows系统daisyseed准备。\r\n\r\n前提\r\n\r\n  * 准备一台Windows系统设备（可以是笔记本、台式机、服务器、虚机等）\r\n\r\n  * 至少一个目录剩余空间大于30G \r\n\r\n  * 该设备网络需要和节点的PXE网络、BMC网络和SSH运维网络互通\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n  1. 解压TCFV7.22.10.09_tools.tar。\r\n\r\n  2. 在解压后的目录中找到daisyseed目录，将daisyseed_win_TECSV7.22.10_rel_1363.7z上传到Windows系统设备上，放在剩余空间大于30G的目录，并执行解压。\r\n\r\n  3. 在daisyseed解压后的目录中找到config_files目录，将准备模板中生成的.xlsx模板文件上传到此目录下。\r\n\r\n  4. 将准备模板中生成的seed_cmd_config.ini上传到\\daisyseed\\template目录。\r\n\r\n  5. 上传版本到version目录。", "answer": "Daisyseed安装软件从以下地方获取：\n\n1. 从本地解压的TCFV7.22.10.06P01_tools.tar工具包中找到daisyseed相关的安装包。\n   \n   - 具体路径为：解压TCFV7.22.10.06P01_tools.tar后，进入daisyseed目录，找到daisyseed_linux_TECSV7.22.10_rel_1081.tar。\n\n2. 对于Windows系统，则是从解压后的TCFV7.22.10.09_tools.tar工具包中找到daisyseed目录，然后使用daisyseed_win_TECSV7.22.10_rel_1363.7z这个压缩文件。\n\n这些软件包需要被上传到相应的daisyseed虚机或Windows系统设备上以进行安装。"}
{"id": 31, "query": "Director中的组织是什么概念？", "recall": "[1]:添加组织\r: 添加组织\r\n\r\n组织是指VDC(Virtual Data Center, 虚拟数据中心)使用人，即云资源和服务的使用方，可以是一个单位或一个单位的一个组织，一个组织可以关联多个VDC(Virtual Data Center, 虚拟数据中心)，组织由组织管理员来管理。\r\n\r\n用户可以在TECS Director门户在线添加组织，或者使用模板批量导入组织。\r\n\r\n子主题：\r\n\r\n  * 在线添加组织\r\n\r\n  * 批量导入组织\n\n[2]:添加组织\r: 添加组织\r\n\r\n组织是指VDC(Virtual Data Center, 虚拟数据中心)使用人，即云资源和服务的使用方，可以是一个单位或一个单位的一个组织，一个组织可以关联多个VDC(Virtual Data Center, 虚拟数据中心)，组织由组织管理员来管理。\r\n\r\n用户可以在TECS Director门户在线添加组织，或者使用模板批量导入组织。\r\n\r\n子主题：\r\n\r\n  * 在线添加组织\r\n\r\n  * 批量导入组织\n\n[3]:组织管理\r: 组织管理\r\n\r\nTECS Director提供了符合客户组织模型的运营管理体系，组织可以是一个企业、一个分支机构、一个部门，在实际的使用场景中可以灵活应用。通过组织管理功能，组织管理员可以根据实际情况线上配置组织内部架构、管理组织配额。\r\n\r\n组织管理的主要功能包括：\r\n\r\n  * 组织生命周期管理\r\n\r\n具备业务经理角色权限的管理员可以创建、编辑、删除、禁用、激活组织，设置组织资源配额，为组织分配/删除组织管理员、创建/移除VDC、授权/移除服务。\r\n\r\n  * 多级组织架构\r\n\r\n系统支持创建嵌套的组织架构，在嵌套的组织架构中，根节点称之为“组织”，其下各级叶子节点称之为“子组织”，组织下支持最多6级子组织。\r\n\r\n  * 端用户管理\r\n\r\n组织/子组织管理员可以创建/删除端用户，创建第三方认证的端用户组织管理员，为子组织分配/移出端用户。\n\n[4]:组织和VDC管理\r: 组织和VDC管理\r\n\r\nTECS Director支持领域管理员和业务经理分别进行组织和VDC(Virtual Data Center, 虚拟数据中心)的配置管理，两者创建的组织互相独立，但可指定同一个组织管理员进行管理。组织和VDC(Virtual Data Center, 虚拟数据中心)的配置流程如图1所示。\r\n\r\n图1 配置流程\r\n\r\n说明：\r\n\r\n只有领域管理员可进行设置云环境资源等级操作。\r\n\r\n子主题：\r\n\r\n  * 设置云环境资源服务等级（可选）\r\n\r\n  * 添加组织\r\n\r\n  * 创建VDC\r\n\r\n  * 绑定VDC和云环境用户（可选）\r\n\r\n  * 绑定VDC和云环境租户\r\n\r\n  * 添加组织管理员\r\n\r\n  * 添加组织用户\r\n\r\n  * 绑定组织和VDC\r\n\r\n  * 申请VDC\r\n\r\n  * 修改组织配额\n\n[5]:组织与VDC规划\r: 组织与VDC规划\r\n\r\n超级管理员组织与VDC(Virtual Data Center, 虚拟数据中心)规划的流程如图1所示。\r\n\r\n图1 超级管理员组织规划流程\r\n\r\n子主题：\r\n\r\n  * 登录云管平台\r\n\r\n  * 新建组织管理员角色（可选）\r\n\r\n  * 添加组织\r\n\r\n  * 添加组织管理员\r\n\r\n  * 创建VDC\r\n\r\n  * 绑定组织和VDC", "answer": "Director中的组织是指VDC（Virtual Data Center，虚拟数据中心）的使用者，即云资源和服务的使用方。它可以是一个单位或单位中的一个组织。一个组织可以关联多个VDC，而组织的管理工作由组织管理员负责。组织可以灵活地对应到企业、分支机构或部门等不同的实体。在TECS Director中，组织架构支持多级嵌套，形成符合客户组织模型的运营管理体系。"}
{"id": 32, "query": "PCC规则的Precedence用途是什么？", "recall": "[1]:PccRule\r: PccRule\r\n\r\nPccRule的数据结构参见下表：\r\n\r\n属性名称| Presence requirement| 描述  \r\n---|---|---  \r\nflowInfos| Conditional| 表示一组IP数据流的过滤信息。  \r\nappId| Conditional| 表示对UPF配置的应用程序检测过滤器的引用。  \r\npccRuleId| Mandatory| 表示PDU会话中PCC规则的唯一标识。  \r\nprecedence| Optional| 规则优先级，确定该PCC规则在同一个PDU会话内与其他PCC规则的使用顺序。  \r\nafSigProtocol| Optional| AF的信令标识，UE与AF之间的信令协议。取值如下：\r\n\r\n  * NO_INFORMATION\r\n  * SIP\r\n\r\n  \r\nappReloc| Optional| AF业务路由能力，指示应用迁移的可能性。取值如下：\r\n\r\n  * true：开启AF业务路由。\r\n  * false：关闭AF业务路由。\r\n\r\n  \r\nrefQosData| Optional| 引用QoSData类型中的“qosId”。  \r\nrefTcData| Optional| 引用TrafficControlData中的“tcId”。  \r\nrefChgData| Optional| 引用ChargingData中的“chgId”。  \r\nrefUmData| Optional| 引用UsageMonitoringData中的“umId”。  \r\nrefCondData| Optional| 引用ConditionData中的“condId”。\n\n[2]:（000209023）每用户PCC规则数峰值\r: （000209023）每用户PCC规则数峰值\r\n\r\n指标说明\r\n\r\n该指标用于统计RCP系统每个用户激活的PCC(Policy and Charging Control, 计费和策略控制)规则数峰值。\r\n\r\n计算公式\r\n\r\nC000200021 / C000200003\r\n\r\n相关计数器\r\n\r\n序号| 计数器  \r\n---|---  \r\n1| C000200021 在线PCC规则数峰值  \r\n2| C000200003 在线用户数峰值\n\n[3]:（000209009）PCC规则实例容量占用率峰值（%）\r: （000209009）PCC规则实例容量占用率峰值（%）\r\n\r\n指标说明\r\n\r\n该指标关注RCP(Resource Control Platform, 资源控制平台)系统激活的PCC(Policy and Charging Control, 计费和策略控制)规则容量占用率峰值。用于反映RCP系统在正常工作状态下，处于激活状态的PCC规则容量最高占用率。\r\n\r\n计算公式\r\n\r\nC000200021 / C000200040 × 100\r\n\r\n相关计数器\r\n\r\n序号| 计数器  \r\n---|---  \r\n1| C000200021 在线PCC规则数峰值  \r\n2| C000200040 PCC规则实例容量\n\n[4]:（000209022）每用户PCC规则数均值\r: （000209022）每用户PCC规则数均值\r\n\r\n指标说明\r\n\r\n该指标用于统计RCP系统每个用户激活的PCC(Policy and Charging Control, 计费和策略控制)规则数均值。\r\n\r\n计算公式\r\n\r\nC000200020 / C000200002\r\n\r\n相关计数器\r\n\r\n序号| 计数器  \r\n---|---  \r\n1| C000200020 在线PCC规则数均值  \r\n2| C000200002 在线用户数均值\n\n[5]:规则\r: 规则\r\n\r\n概述\r\n\r\n一个策略规则包含一个条件表达式和一个动作参数集，并且策略规则具有优先级属性。当用户满足某种触发条件时，RCP网元执行其动作参数集中指定的动作参数。\r\n\r\n本节介绍如何配置策略规则。\r\n\r\n操作步骤\r\n\r\n  1. 登录**RCP策略管理** 页面，如图1所示。\r\n\r\n图1 策略管理页面\r\n\r\n  2. 单击规则，弹出规则页面，如图2所示。\r\n\r\n图2 规则页面\r\n\r\n  3. 单击按钮，设置规则参数，如图3所示。\r\n\r\n图3 规则参数配置页面\r\n\r\n规则参数说明参见表1。\r\n\r\n表1 规则参数说明参数名称| 参数说明  \r\n---|---  \r\n规则名称| 唯一标识一个策略规则，名称可修改。  \r\n优先级| 确定一个策略规则的优先级。在同一场景中存在多个同类型的策略规则时，使用优先级确定策略规则的执行顺序。数值高则优先级高。  \r\n策略类型| RCP网元将策略规则划分为不同的策略类型。不同策略类型的策略规则可以输出不同作用或不同应用范围的动作参数。该参数用于确定场景下需要关联的策略规则的类型。可多选。\r\n     * 套餐动态优先级决策：可以动态调整套餐的优先级或使套餐失效。该类型的策略规则的条件表达式中应该包含套餐ID条件，表示这个规则是用于调整这个套餐的优先级。在RCP网元为用户进行套餐选择时使用。例如，用户签约多个套餐，每个套餐可以提供不同的QoS。运营者希望随时能为用户提供最高Qos的套餐。这时，RCP需要实时的根据每个套餐的用量消耗情况动态调整套餐的动态优先级，RCP需要配置这种策略类型的规则。\r\n     * 套餐预定义策略：该类型的策略规则用于向指定套餐下发PCC规则。\r\n     * 业务预下发控制策略：该类型的策略规则的输出动作决定了RCP网元需要对哪些受控业务下发PCC规则。目前RCP网元提供两种方式：一是根据用户的签约业务进行下发，二是根据指定的受控业务标识下发。\r\n     * AMF接入移动策略：该类型的策略规则用于RCP网元向AMF下发N15会话的策略参数。\r\n     * UE路由选择策略：该类型的策略规则用于RCP网元向AMF下发UE路由选择的策略参数。\r\n     * N7会话决策：该类型的策略规则可以向SMF下发N7会话的QoS参数和计费地址等参数。\r\n     * N7业务决策：改类型的策略规则可以向SMF下发对指定的受控业务下发N7 PCC规则参数。\r\n     * 业务控制策略：该类型的策略规则可以对指定的受控业务下发PCC规则参数。", "answer": "PCC规则的Precedence用途是确定该PCC规则在同一个PDU会话内与其他PCC规则的使用顺序，即规则优先级。在同一PDU会话中，具有较高优先级的PCC规则将会先于较低优先级的规则被应用。"}
{"id": 33, "query": "物理机加非容灾部署场景下，什么时候需要用到Sto-Mgt网络？", "recall": "[1]:物理机非容灾场景\r: 物理机非容灾场景\r\n\r\n物理机非容灾场景的网络配置组网图如图1所示。\r\n\r\n图1 组网图\r\n\r\n网络平面配置参见表1。\r\n\r\n表1 网络平面配置逻辑网络平面| 承载物理网口| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---|---  \r\n北向网络| 外部物理网口（bond0）| 6| 手动设3个固定ip到控制节点，临时配置不能固化，其他2个浮动ip系统安装时自动配置| 客户端访问Director网络，Dirctor访问NTP-Server网络| \r\n\r\n  * 平台运维和北向业务网络合一\r\n  * 地址：3+1+1+1；平台运维：3个固定地址，1个VIP\r\n  * 业务SLB 1个地址\r\n  * DaisySeed 1个地址\r\n\r\n  \r\nTecsClient网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务一个地址  \r\nPubApi网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务一个地址  \r\nSto-Data网络（存储网络数据面）| 存储物理网口（bond2）| N(N为节点个数)| 人工规划，系统安装时自动配置| 外置存储数据平面| 可选： 如果使用本地盘，则不需要规划该平面  \r\nSto-Mgt网络（存储网络管理面）| 存储物理网口（bond2）| 3| 人工规划，系统安装时自动配置| 外置存储管理平面| 可选： 如果是预置卷（提前建好了卷），则不需要规划该平面  \r\nPXE网络| 内部物理网口（bond1）| >N(N为节点个数)| 人工规划，在DaisySeed侧配置地址池；| 按照裸机操作系统所用网络平面| vlan需要配置成同交换机端口native vlan一致  \r\n内部网络池（Net-API）| 内部物理网口（bond1）| PaaS自动分配| 人工规划20个连续的VLANID ，1000个IP并配置| TCF 内部网络管理分配| 物理机场景使用underlay网络，每个租户网络是独立vlan  \r\n带外网络| DaisySeed使用| 1| 人工配置| 安装操作系统，使用带外启动裸机| -\n\n[2]:物理机容灾场景\r: 物理机容灾场景\r\n\r\n物理机容灾场景的网络配置组网图如图1所示。\r\n\r\n图1 组网图\r\n\r\n网络平面配置参见表1。\r\n\r\n表1 网络平面配置逻辑网络平面| 承载物理网口| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---|---  \r\n北向/运维网络平面| 外部物理网口（bond0）| 5| 手动设3个固定ip到控制节点，临时配置不能固化，其他2个浮动ip系统安装时自动配置| 客户端访问Director网络，Dirctor访问NTP-Server网络| \r\n\r\n  * 平台运维和北向业务网络合一\r\n  * 地址：3+1+1\r\n  * 平台运维：3个固定地址，1个VIP\r\n  * 业务SLB 1个地址\r\n\r\n  \r\nTecs Client网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务1个地址  \r\nPublic Api网络（南向网络）| 外部物理网口（bond0）| 1| 人工规划，系统安装时自动配置| Director访问TECS，以及Provider上报网络平面| SLB业务1个地址  \r\nSto-Data网络（存储网络数据面）| 存储物理网口（bond2）| N(N为节点个数)| 人工规划，系统安装时自动配置| 外置存储数据平面| 可选： 如果使用本地盘，则不需要规划该平面  \r\nSto-Mgt网络（存储网络管理面）| 存储物理网口（bond2）| 3| 人工规划，系统安装时自动配置| 外置存储管理平面| 可选： 如果是预置卷（提前建好了卷），则不需要规划该平面  \r\nPXE网络（部署网络）| 内部物理网口（bond1）| >N+1(N为节点个数)| 人工规划，在DaisySeed侧配置地址池| 按照裸机操作系统所用网络平面| vlan需要配置成同交换机端口native vlan一致  \r\n内部网络池（Net-API网络）| 内部物理网口（bond1）| PaaS自动分配| 人工规划20个连续的VLANID ，1000个IP并配置| TCF 内部网络管理分配| 物理机场景使用underlay网络，每个租户网络是独立vlan  \r\nGR-Net| 外部物理网络（eth0）| 1| 人工规划，系统安装时自动配置| 中间容灾网络（FTP/PG/ES）| -  \r\nGR-Cassandra| 外部物理网络（eth0）| N(N为节点个数)| 自动分配| cassandra异地容网络| 这个是应用网络，需要站点间互通  \r\n带外网络平面（BMC网络）| DaisySeed需要接入| 1| 人工规划| 部署裸机，重启服务器使用| 部署裸机，重启服务器使用  \r\n  \r\n容灾需要配置防火墙开启，参见表2。\r\n\r\n表2 防火墙配置网络平面| 源| 目的| 开放端口| 作用  \r\n---|---|---|---|---  \r\nGR-NET| 站点1 SLB IP| 站点2 SLB IP| 3011,3012| NDR Https  \r\nGR-NET| 站点2 SLB IP| 站点1 SLB IP| 3011,\n\n[3]:准备模板\r: 填写网络配置，物理机网络配置如图3所示，租户网络配置（可选）如图4所示，虚机网络配置如图5所示。\r\n\r\n图3 网络配置（物理机）\r\n\r\n说明：\r\n\r\n物理机场景注意事项：\r\n\r\n       * 物理机场景模板不支持单网卡组网，一定要bond组网\r\n\r\n       * 外部网络 包括运维网络、北向网络、TECS Client网络、Public API网络、容灾网络、Sto-Mgt网络（存储网络管理面）\r\n\r\n       * 内部网络 包括 NET-API网络\r\n\r\n       * 存储网络 包括Sto-Data网络（存储网络数据面）\r\n\r\n       * VIP和地址池中的地址不能重复\r\n\r\n       * VIP、地址池、网关、 路由下一跳地址都要在cidr范围内\r\n\r\n       * “运维网络”VIP填写运维网络浮动IP，地址池填写分配给三个节点的运维IP地址\r\n\r\n       * “内部网络”VIP分配50个地址，地址池要写两段，第一段地址分配20个，第二段地址分配1024-20-50=954个左右\r\n\r\n       * “Director北向”“Director Public Api”“Director Tecs Client”“容灾网络”VIP设置为空，地址填写在地址池中，并写成地址段格式，例如 1.1.1.1-1.1.1.1\r\n\r\n容灾场景注意事项：\r\n\r\n       * \"容灾功能\" 选择 开启\r\n\r\n       * “容灾网络”，只能选择单栈（ipv4或者ipv6）\r\n\r\n       * casssandra容灾网络对端地址要依次写出来用逗号隔开，建议写9个，便于后续扩容节点\r\n\r\n图4 配置租户网络\r\n\r\n说明：\r\n\r\n配置租户网络注意事项：\r\n\r\n       * “是否配置租户网络”选择开启，用户即可配置租户网络：在关闭容灾功能的情况下，可配置的租户网络为3个：opcs、zenap、director；在开启容器功能的情况下可配置的租户网络为4个：opcs、zenap、director和openpalette-extention。\r\n\r\n       * 租户网络的vlan必须在内部网络的vlan范围内，并且cidr不可与内部网络的cidr相同，租户网络之间的cidr也不可配置相同。\r\n\r\n       * 在生成模板后，其中director-VM.xlsx模板的裸机租户网络sheet页中会显示配置的租户网络信息。\r\n\r\n网络平面为共网络平面时：\r\n\r\n       * 内外部使用的网卡为同一对，此时所有的物理网络平面的名称都为physnet0。\r\n\r\n       * 在生成模板后，其中的paas-VM.xlsx模板的应用网络配置sheet页中，基础网络名称也是physnet0（与内部网络的物理网络平面名称一致）。\n\n[4]:虚机非容灾场景\r: 虚机非容灾场景\r\n\r\n通用场景\r\n\r\n通用场景的网络配置组网图如图1所示。\r\n\r\n图1 通用场景组网图\r\n\r\n通用场景的网络平面配置参见表1。\r\n\r\n表1 通用场景网络平面配置网络平面| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---  \r\n北向网络| 1| 人工规划，系统安装时自动配置| 客户端访问Director portal网络，以及北向上报网络| SLB 托管网络  \r\nTecsClient网络（南向网络）| 1| 人工规划，系统安装时自动配置| Director访问TECS的TECSCLIENT平面| SLB 托管网络  \r\nPubApi网络（南向网络）| 1| 人工规划，系统安装时自动配置| Director访问TECS的PUBLICAPI平面| SLB 托管网络  \r\n运维网络（net-iapi）| 5| 手动配置3个固定IP到环境并固化到文件，1个VIP系统安装时自动配置| 节点SSH和NTP服务网络平面、Director访问对象存储的S3平面（DNS）| \r\n\r\n  * 主机网络，3个固定IP，1个VIP\r\n  * DaisySeed 需要1个\r\n\r\n  \r\n内部网络（net-api）| 地址池：N+2+20（N = 节点个数）| \r\n\r\n  * 每个节点的net_api网络ip（规划的前N+2）， 当前版本约束需要多出2个地址，否则会部署失败\r\n  * 其余20个规划PaaS内部组件VIP使用\r\n\r\n| PaaS内部网络，东西向流量| -\n\n[5]:准备模板\r: xlsx模板的应用网络配置sheet页中，基础网络名称也是physnet0（与内部网络的物理网络平面名称一致）。\r\n\r\n图5 网络配置（虚机）\r\n\r\n说明：\r\n\r\n虚机场景注意事项：\r\n\r\n       * 运维网络”VIP填写运维网络浮动IP，地址池填写预置虚机所有节点的真实运维IP地址（固化到虚机网卡文件的net_iapi运维网络地址）\r\n\r\n       * 内部网络”VIP分配20个地址，地址池至少填写12+2个地址，地址池中前N个（节点个数）地址为固化到虚机网卡文件的net_api内部网络地址\r\n\r\n       * “Director北向”VIP默认不填，地址池填写北向网络IP地址（若TecsClient、PublicApi 和北向三网独立，那么填写规则和北向一致）\r\n\r\n       * VIP和地址池中的地址不能重复\r\n\r\n       * VIP、地址池、网关、 路由下一跳地址都要在对应cidr范围内\r\n\r\n       * 业务网络（北向网络、publiapi网络、tecsclient网络、容灾网络、对象存储管理网络等）中地址池信息中填写规划的地址信息\r\n\r\n容灾场景注意事项：\r\n\r\n       * \"容灾功能\" 选择 开启\r\n\r\n       * “容灾网络”，只能选择单栈（ipv4或者ipv6）\r\n\r\n    3.", "answer": "在物理机非容灾部署场景下，需要用到Sto-Mgt网络的情况是：当使用外置存储管理平面时，即需要进行存储管理操作时。具体来说，如果不在使用本地盘的情况下，且不是预置卷（提前建好了卷），那么就需要规划并使用Sto-Mgt网络来管理外置存储。这个网络平面主要用于存储设备的管理和控制通信。"}
{"id": 34, "query": "如何登录Director的容灾管理界面？", "recall": "[1]:SSH方式登录Director\r: SSH方式登录Director\r\n\r\n摘要\r\n\r\n本节介绍如何登录使用SSH方式登录Director。\r\n\r\n步骤\r\n\r\nSSH连接登录方式，具体操作步骤如下：\r\n\r\n  1. 打开SSH软件，新建连接。\r\n\r\n  2. 设置如下参数，其他参数采用默认值。\r\n\r\n参数名| 参数说明  \r\n---|---  \r\nProtocol| 采用的协议。此处采用默认值SSH2进行连接。  \r\nHostname| 需要建立连接的Director节点名称。\r\n     * 可设置为该节点的IP地址，如运维平面的浮动IP或者节点实际IP。\r\n     * 如果启用DNS(Domain Name System, 域名系统)域名管理服务时，也可以设置为该节点的主机名。  \r\nPort| 建立连接的端口号，采用默认值22。  \r\nUsername| 登录的用户名，例如pict。  \r\n  \r\n  3. 单击Connect按钮。\r\n\r\n  4. 输入登录的密码。单击OK按钮，连接上对应的节点。\n\n[2]:查看Director节点列表\r: 查看Director节点列表\r\n\r\n摘要\r\n\r\n本节介绍如何登录查看Director节点列表。\r\n\r\n步骤\r\n\r\n  1. 使用SSH方式登录到Director节点。\r\n\r\n  2. 使用sudo -s命令切换到root用户。\r\n\r\n  3. 使用pdm-cli node list命令，查看Director节点列表，如图1所示。其中，hostname一列中带有controller字样的是控制节点，带有computer字样的是计算节点。netinfo一列表示各个节点的IP地址，其中net_api地址用来登录节点。\r\n\r\n图1 查询Director节点列表\n\n[3]:容灾对接指南\r: 容灾对接指南\r\n\r\n摘要\r\n\r\n本节介绍如何进行两个站点之间的容灾对接。\r\n\r\n步骤\r\n\r\n配置容灾站点\r\n\r\n  1. 在部署TECS Director的主站点A上，在地址栏中输入https://[tecs_client ip]:3011/myportal打开容灾页面，使用TCF的admin账户或容灾账户进行登录，登录的用户名和密码为：\r\n\r\n     * TCF：admin / xxxxx\r\n\r\n     * 容灾账号：ssm / PaaS1!2@3#4$\r\n\r\n说明：\r\n\r\n输入容灾页面地址https://[tecs_client ip]:3011/myportal后，页面会跳转显示https://[tecs_client ip]:1043/ngportal/login？provider_as_idp=true&scope=user.name&response_type=code&client_id=910122879ad84d16a2a942132439e8ec&redirect_uri=https:%2F%2F[tecs_client ip]:3011%2Fmyportal，登录容灾账户后页面地址显示为https://[tecs_client ip]:3011/myportal/index/#/。\r\n\r\n  2. 在容灾管理页面，单击新增按钮，打开新增站点对话框，如图1所示。\r\n\r\n图1 新增站点的配置弹窗\r\n\r\n  3. 根据需要填写配置，配置说明参见表1，单击确定按钮，等待站点配置完成，站点配置成功后如图2所示。\r\n\r\n表1 配置说明名称| 说明  \r\n---|---  \r\n角色| 对于当前环境，根据实际需要配置角色为“主用”、“备用”或“同城备用”。  \r\n站点名称| 站点名称是容灾环境的唯一标识符，一经填写不可更改，因此注意名称一定要具有唯一性与辨识性（与另一个站点的名称不同）。  \r\n租户| 基本信息中的租户选择director。  \r\n描述| 按照实际需要进行填写，主要起到对站点信息进行补充说明的作用。  \r\n用户名| 一般是gr  \r\n密码| 为容灾页面的登录密码PaaS1!2@3#4$，其中，gr登录密码用户也可按照要求自行配置：长度8~245位，必须包含大写字母、小写字母、数字和特殊符号四种，不能包含汉字。  \r\n门户地址| 登录页面所使用的tecs_client ip  \r\n图2 站点配置完成\r\n\r\n  4. 对备用站点B也进行上述配置。\r\n\r\n\r\n\r\n\r\n配置站点间的接入\r\n\r\n  1. 在主站点上单击容灾按钮，进入容灾页面，如图3所示。\r\n\r\n图3 容灾界面\r\n\r\n说明：\r\n\r\n此时可以观察到容灾页面上只显示了本端配置，没有对端站点的信息，因此需要将其接入主站点。\r\n\r\n  2. 单击接入对端，打开配置对端站点页面，如图4所示。\r\n\r\n图4 配置对端站点\r\n\r\n  3. 在配置对端站点页面上进行配置，其中ip填写对端的容灾对接ip，密码与容灾对接登录方式一致，单击获取对端信息获按钮进入图5所示页面，此时端口信息以及门户地址已经由系统自动填充，（若环境使用的是双栈地址，则无法自动填充，主备站点需要手动选择同时使用ipv4或者ipv6地址）。\r\n\r\n图5 获取对端信息\r\n\r\n  4. 选择完成后，单击确定按钮，完成主站点A与备站点B的单向接入配置，如图6所示。\r\n\r\n图6 完成接入对端\r\n\r\n  5.\n\n[4]:常用维护操作\r: 常用维护操作\r\n\r\n子主题：\r\n\r\n  * 登录TCF管理系统\r\n\r\n  * SSH方式登录Director\r\n\r\n  * 查看Director节点列表\r\n\r\n  * 查看应用服务\r\n\r\n  * 操作容器\r\n\r\n  * 下电和重启节点\r\n\r\n  * 下载服务日志\n\n[5]:操作容器\r: 操作容器\r\n\r\n摘要\r\n\r\n本节介绍如何进入和复位容器。\r\n\r\n步骤\r\n\r\n进入容器\r\n\r\n  1. 登录TCF管理系统，具体操作参见登录TCF管理系统，进入director项目。\r\n\r\n  2. 在左侧目录树中单击应用管理按钮，页面显示所有应用。在页面中可以查看应用的运行状态。\r\n\r\n  3. 单击应用的名称，进入该应用的详细信息页面，可以查看该应用包含的微服务。\r\n\r\n  4. 单击微服务的名称，进入微服务的详细信息页面。\r\n\r\n  5. 在微服务实例页签中，单击POD名称，可以进入POD详情页面。在基本信息页签可以查看POD运行的节点IP地址。\r\n\r\n  6. 切换到容器页签，可以查看POD包含的容器。\r\n\r\n  7. 单击容器名称，可以查看容器的详细信息，包括容器的UUID。\r\n\r\n  8. 使用SSH方式登录Director，具体操作参见SSH方式登录Director。\r\n\r\n  9. 登录POD运行的节点。\r\n\r\n  10. 使用命令docker ps -a | grep <容器ID前几位>（一般选择前6位即可），有结果显示，则确认容器在该节点上。\r\n\r\n  11. 使用命令docker exec -it <容器ID前几位> sh，进入该容器。\r\n\r\n  12. 使用命令exit退出容器。\r\n\r\n\r\n\r\n\r\n复位容器\r\n\r\n  1. 使用命令docker restart <容器ID前几位>，对容器进行复位。", "answer": "登录Director的容灾管理界面，可以按照以下步骤进行：\n\n   1. 在部署TECS Director的主站点A上，通过地址栏输入容灾页面地址：`https://[tecs_client ip]:3011/myportal`。\n   2. 使用TCF的admin账户或容灾账户登录，登录的用户名和密码为：\n      - TCF账户：用户名为`admin`，密码为对应的密码。\n      - 容灾账户：用户名为`ssm`，密码为`PaaS1!2@3#4$`。\n   3. 登录后，页面会跳转显示相应的登录信息，确认登录成功后，页面地址会显示为`https://[tecs_client ip]:3011/myportal/index/#/`。\n\n通过以上步骤，即可登录到Director的容灾管理界面。"}
{"id": 35, "query": "如何选择合适的信令跟踪", "recall": "[1]:跟踪短消息信令\r: 跟踪短消息信令\r\n\r\n摘要\r\n\r\n本节介绍根据接口、短消息跟踪方式和链路号创建信令跟踪任务。\r\n\r\n步骤\r\n\r\n  1. 在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF节点，进入任务管理页面。\r\n\r\n  2. 单击新建按钮，打开新建任务页面，如图1所示。\r\n\r\n图1 短消息信令跟踪-通用参数页面\r\n\r\n  3. 设置通用参数，通用参数说明参见表1。\r\n\r\n表1 用户跟踪-通用参数说明项目| 参数| 说明  \r\n---|---|---  \r\n基本信息| 任务名称| 跟踪任务名称。  \r\n任务分类| 选择PCF信令跟踪。  \r\n任务类型| 选择短消息信令跟踪。  \r\n选择网元| \r\n    1. 在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。\r\n    2. 选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。  \r\n时间设置| 即时| 任务从现在开始启动，经过设置的时长后停止任务。  \r\n持续| 任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。  \r\n定时| 任务从设置的开始时间启动，到设置的终止时间停止。  \r\n信令存储设置| 设置是否保存信令跟踪数据。\r\n     * 选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。\r\n     * 选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。  \r\n  \r\n  4. 单击下一步，进入业务参数页面，如图2所示。\r\n\r\n图2 短消息信令跟踪-业务参数页面\r\n\r\n  5. 设置业务参数，参数说明参见表2。\r\n\r\n表2 用户跟踪-业务参数说明参数| 说明  \r\n---|---  \r\n接口| 选择跟踪的接口类型。  \r\n短消息跟踪模式| 选择短消息跟踪模式，选项如下：\r\n     * 按链路跟踪\r\n     * 按用户跟踪\r\n     * 按短信中心跟踪  \r\n链路号| 选择跟踪的短消息链路号。  \r\n  \r\n  6. 单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如图3所示。\r\n\r\n图3 用户跟踪任务\n\n[2]:跟踪基于偶联ID的SCTP信令\r: 跟踪基于偶联ID的SCTP信令\r\n\r\n摘要\r\n\r\nSCTP(Stream Control Transmission Protocol, 流控制传输协议)实现在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。\r\n\r\n本节介绍基于偶联ID的SCTP信令的跟踪方法。\r\n\r\n步骤\r\n\r\n  1. 在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF节点，进入任务管理页面。\r\n\r\n  2. 单击新建按钮，打开新建任务页面，如图1所示。\r\n\r\n图1 通用参数页面\r\n\r\n  3. 设置跟踪任务的通用参数。\r\n\r\n项目| 参数| 说明  \r\n---|---|---  \r\n基本信息| 任务名称| 跟踪任务的名称。  \r\n任务分类| 选择SIG信令跟踪。  \r\n任务类型| 选择SCTP跟踪 基于偶联ID。  \r\n选择网元| \r\n    1. 在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。\r\n    2. 选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。  \r\n时间设置| 即时| 任务从现在开始启动，经过设置的时长后停止任务。  \r\n持续| 任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。  \r\n定时| 任务从设置的开始时间启动，到设置的终止时间停止。  \r\n信令存储设置| 设置是否保存信令跟踪数据。\r\n     * 选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。\r\n     * 选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。  \r\n  \r\n  4. 单击下一步，进入业务参数页面，如图2所示。\r\n\r\n图2 业务参数页面\r\n\r\n  5. 设置跟踪任务的业务参数。\r\n\r\n参数| 说明  \r\n---|---  \r\nAssociationID| SCTP链路ID。  \r\nDirection| \r\n     * 出向：跟踪SCTP向对端发送的消息。\r\n     * 入向：跟踪SCTP接收的来自对端的消息。\r\n     * 出向/入向：跟踪SCTP和对端间的消息。  \r\n  \r\n  6. 单击新建并监控按钮，跟踪结果示例如图3所示。任务创建成功，新建的任务显示在任务列表中，如图4所示。\r\n\r\n图3 基于偶联ID的SCTP跟踪结果示例图4 基于偶联ID的SCTP跟踪任务\n\n[3]:跟踪基于端口号的SCTP信令\r: 跟踪基于端口号的SCTP信令\r\n\r\n摘要\r\n\r\nSCTP(Stream Control Transmission Protocol, 流控制传输协议)实现在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。\r\n\r\n本节介绍基于端口号的SCTP信令的跟踪方法。\r\n\r\n步骤\r\n\r\n  1. 在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF节点，进入任务管理页面。\r\n\r\n  2. 单击新建按钮，打开新建任务页面，如图1所示。\r\n\r\n图1 通用参数页面\r\n\r\n  3. 设置跟踪任务的通用参数。\r\n\r\n项目| 参数| 说明  \r\n---|---|---  \r\n基本信息| 任务名称| 跟踪任务的名称。  \r\n任务分类| 选择SIG信令跟踪。  \r\n任务类型| 选择SCTP跟踪 基于端口号。  \r\n选择网元| \r\n    1. 在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。\r\n    2. 选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。  \r\n时间设置| 即时| 任务从现在开始启动，经过设置的时长后停止任务。  \r\n持续| 任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。  \r\n定时| 任务从设置的开始时间启动，到设置的终止时间停止。  \r\n信令存储设置| 设置是否保存信令跟踪数据。\r\n     * 选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。\r\n     * 选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。  \r\n  \r\n  4. 单击下一步，进入业务参数页面，如图2所示。\r\n\r\n图2 业务参数页面\r\n\r\n  5. 设置跟踪任务的业务参数。\r\n\r\n参数| 参数说明  \r\n---|---  \r\nLocalPort| 本端端口号。  \r\nPeerPort| 对端端口号。  \r\nDirection| \r\n     * 出向：跟踪SCTP向对端发送的消息。\r\n     * 入向：跟踪SCTP接收的来自对端的消息。\r\n     * 出向/入向：跟踪SCTP和对端间的消息。  \r\n  \r\n  6. 单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如图3所示。\r\n\r\n图3 基于端口号的SCTP跟踪任务\n\n[4]:跟踪基于IP+PORT的SCTP信令\r: 跟踪基于IP+PORT的SCTP信令\r\n\r\n摘要\r\n\r\nSCTP(Stream Control Transmission Protocol, 流控制传输协议)实现在IP网中承载信令，使信令消息完成交换、端到端执行流量控制和差错控制的功能。\r\n\r\n本节介绍基于IP+PORT的SCTP信令的跟踪方法。\r\n\r\n步骤\r\n\r\n  1. 在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF节点，进入任务管理页面。\r\n\r\n  2. 单击新建按钮，打开新建任务页面，如图1所示。\r\n\r\n图1 通用参数页面\r\n\r\n  3. 设置跟踪任务的通用参数。\r\n\r\n项目| 参数| 说明  \r\n---|---|---  \r\n基本信息| 任务名称| 跟踪任务的名称。  \r\n任务分类| 选择SIG信令跟踪。  \r\n任务类型| 选择SCTP跟踪 基于IP+PORT。  \r\n选择网元| \r\n    1. 在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。\r\n    2. 选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。  \r\n时间设置| 即时| 任务从现在开始启动，经过设置的时长后停止任务。  \r\n持续| 任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。  \r\n定时| 任务从设置的开始时间启动，到设置的终止时间停止。  \r\n信令存储设置| 设置是否保存信令跟踪数据。\r\n     * 选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。\r\n     * 选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。  \r\n  \r\n  4. 单击下一步，进入业务参数页面，如图2所示。\r\n\r\n图2 业务参数页面\r\n\r\n  5. 设置跟踪任务的业务参数。\r\n\r\n参数| 参数说明  \r\n---|---  \r\nVPNID| VPN(Virtual Private Network, 虚拟专用网)的ID。  \r\nLocalIP| 本端IP地址。  \r\nPeerIP| 对端IP地址。  \r\nLocalPort| 本端端口号。  \r\nPeerPort| 对端端口号。  \r\nDirection| \r\n     * 出向：跟踪SCTP向对端发送的消息。\r\n     * 入向：跟踪SCTP接收的来自对端的消息。\r\n     * 出向/入向：跟踪SCTP和对端间的消息。  \r\n  \r\n  6. 单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如图3所示。\r\n\r\n图3 基于IP+PORT的SCTP跟踪任务\n\n[5]:跟踪HTTP链路信令\r: 跟踪HTTP链路信令\r\n\r\n摘要\r\n\r\nSBIGW信令跟踪支持按链路跟踪HTTP信令。\r\n\r\n步骤\r\n\r\n  1. 在跟踪页面中，选择CN跟踪（OAM）→PCF/PCRF节点，进入任务管理页面。\r\n\r\n  2. 单击**新建** 按钮，打开新建任务页面，如图1所示。\r\n\r\n图1 通用参数设置\r\n\r\n  3. 设置信令跟踪的通用参数，参数说明参见表1。\r\n\r\n表1 设置通用参数项目| 参数| 说明  \r\n---|---|---  \r\n基本信息| 任务名称| 设置跟踪任务的名称。  \r\n任务分类| 选择SBIGW信令跟踪。  \r\n任务类型| 选择HTTP链路信令跟踪。  \r\n选择网元| \r\n    1. 在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在输入框中输入网元名称，过滤显示列表中的网元。\r\n    2. 选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。  \r\n时间设置| 即时| 任务从现在开始启动，经过设置的时长后停止任务。  \r\n持续| 任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。  \r\n定时| 任务从设置的开始时间启动，到设置的终止时间停止。  \r\n信令存储设置| 设置是否保存信令跟踪数据。\r\n     * 选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。\r\n     * 选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。  \r\n  \r\n  4. 单击**下一步** ，进入**业务参数** 页面，如图2所示。\r\n\r\n图2 业务参数设置\r\n\r\n  5. 设置业务参数，当本端和对端的地址、端口均匹配时，则该HTTP信令可被跟踪上报。参数说明参见表2。\r\n\r\n表2 业务参数说明参数名称| 参数含义  \r\n---|---  \r\n对端IP地址| 对端地址，不支持掩码。未设置则默认匹配。  \r\n对端端口| 对端端口号。缺省为0，默认匹配。  \r\n本端IP地址| 本端地址，不支持掩码。未设置则默认匹配。  \r\n本端端口| 本端端口号。缺省为0，默认匹配。  \r\n  \r\n  6. 单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如图3所示。\r\n\r\n图3 HTTP链路信令跟踪", "answer": "为了选择合适的信令跟踪，可以遵循以下步骤：\n\n1. 确定跟踪目的：首先明确你希望通过信令跟踪达到的目的，比如是诊断问题、性能监控还是其他原因。\n\n2. 选择跟踪类型：\n   - 如果是跟踪短消息信令，选择短消息信令跟踪。\n   - 如果是基于偶联ID的SCTP信令，选择基于偶联ID的SCTP跟踪。\n   - 如果是基于端口号的SCTP信令，选择基于端口号的SCTP跟踪。\n   - 如果是基于IP+PORT的SCTP信令，选择基于IP+PORT的SCTP跟踪。\n   - 如果是HTTP链路信令，选择HTTP链路信令跟踪。\n\n3. 设置通用参数：\n   - 确定任务名称、任务分类和任务类型。\n   - 在网元列表中选择需要跟踪的网元及NFS。\n\n4. 设置时间参数：\n   - 根据需要选择即时、持续或定时任务。\n\n5. 设置信令存储参数：\n   - 根据是否需要保存历史数据来选择是否保存信令跟踪数据。\n\n6. 设置业务参数：\n   - 根据不同的跟踪类型，设置相应的业务参数，如接口、短消息跟踪模式、链路号、本地/对端IP地址和端口、方向等。\n\n7. 创建并监控任务：\n   - 完成参数设置后，单击新建并监控按钮创建任务，并监控跟踪结果。\n\n通过以上步骤，可以选择合适的信令跟踪，并根据跟踪结果进行相应的分析和处理。"}
{"id": 36, "query": "外部系统想要采集Director的性能数据，可以怎么解决？", "recall": "[1]:C100490003 服务器已用内存\r: C100490003 服务器已用内存\r\n\r\n描述\r\n\r\n每个统计周期内，服务器已用内存。\r\n\r\n采集方式\r\n\r\n平均值\r\n\r\n单位\r\n\r\nGB\n\n[2]:C100012046 虚机自启动以来磁盘读请求数\r: C100012046 虚机自启动以来磁盘读请求数\r\n\r\n描述\r\n\r\n自启动以来，虚拟机累计磁盘读请求数，针对每个虚拟机统计。\r\n\r\n采集方式\r\n\r\n当前值\r\n\r\n单位\r\n\r\nrequest\n\n[3]:C100012047 虚机自启动以来磁盘写请求数\r: C100012047 虚机自启动以来磁盘写请求数\r\n\r\n描述\r\n\r\n自启动以来，虚拟机累计磁盘写请求数，针对每个虚拟机统计。\r\n\r\n采集方式\r\n\r\n当前值\r\n\r\n单位\r\n\r\nrequest\n\n[4]:C100051025 Local存储总量\r: C100051025 Local存储总量\r\n\r\n描述\r\n\r\n每个统计周期内，主机上Local存储总量平均值，针对每个云环境统计。\r\n\r\n采集方式\r\n\r\n平均值\r\n\r\n单位\r\n\r\nGB\n\n[5]:C100200025 系统磁盘写IOPS平均值\r: C100200025 系统磁盘写IOPS平均值\r\n\r\n描述\r\n\r\n每个统计周期内，系统磁盘写IOPS平均值，针对每个云服务器统计。\r\n\r\n采集方式\r\n\r\n平均值\r\n\r\n单位\r\n\r\nIO/s", "answer": "外部系统想要采集Director的性能数据，可以采取以下方法：\n\n1. 针对内存使用情况，可以采集指标C100490003“服务器已用内存”，通过获取每个统计周期内的平均值，单位为GB。\n\n2. 对于磁盘I/O性能，可以采集以下指标：\n   - C100012046“虚机自启动以来磁盘读请求数”，获取当前值，单位为request。\n   - C100012047“虚机自启动以来磁盘写请求数”，获取当前值，单位为request。\n\n3. 对于存储总量，可以采集指标C100051025“Local存储总量”，获取每个统计周期内的平均值，单位为GB。\n\n4. 对于磁盘写IOPS性能，可以采集指标C100200025“系统磁盘写IOPS平均值”，获取每个统计周期内的平均值，单位为IO/s。\n\n通过以上步骤，外部系统可以定期从Director系统中获取这些性能指标数据，以便进行监控和分析。具体采集方法可能涉及API调用、监控工具集成或直接从系统日志中提取相关信息。"}
{"id": 37, "query": "N7会话的ResourceURI由哪个网元在哪个消息中生成", "recall": "[1]:特性描述\r: RCP找到N5会话已绑定的N7会话，通过Npcf_SMPolicyControl_UpdateNotify请求取消QoS监控事件订阅。\r\n\r\n  4. SMF向RCP返回Npcf_SMPolicyControl_UpdateNotify响应。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n以上各步骤的参数说明参见“AF主动触发的专有承载释放”流程的各步骤。\r\n\r\nN7会话上报QoS监控事件\r\n\r\n流程说明如下：\r\n\r\n  1. RCP下发QoS监控事件订阅后，当相关条件满足时，SMF通过Npcf_SMPolicyControl_Update请求上报QoS监控事件。\r\n\r\n该请求中涉及QoS监控的关键参数如下：\r\n\r\n参数| 说明  \r\n---|---  \r\npolicyCtrlReqTriggers| 策略控制事件触发器列表，对QoS监控事件上报，需要包含QOS_MONITORING事件。  \r\nqosMonReports| QoS监控报告列表，每个QoS监控报告主要包含：\r\n     * ulDelays：业务流上行时延。\r\n     * dlDelays：业务流下行时延。\r\n     * rpDelays：业务流往返时延。\r\n每类时延最多可带2个取值，分别是该类最大时延和最小时延。  \r\n  \r\n  2. RCP向SMF返回Npcf_SMPolicyControl_Update响应。\r\n\r\n  3. RCP通过Npcf_PolicyAuthorization_Notify请求上报QoS监控事件给AF。\r\n\r\n该请求中涉及QoS监控的关键参数如下：\r\n\r\n参数| 说明  \r\n---|---  \r\nevSubsUri| AF策略授权URI，和Npcf_PolicyAuthorization_Create响应消息中http头域Location字段分配的resourceUri一致。  \r\nevNotifs| 事件通知信息，包含\r\n     * event：通知的事件，此处为QOS_MONITORING事件。\r\n     * flows：通知的事件所关联的流信息，对于QOS_MONITORING事件，不携带此参数。  \r\nqosMonReports| QoS监控报告列表，每个QoS监控报告主要包含：\r\n     * flows：业务流信息，不携带时表示该N5会话全部业务流。\r\n     * ulDelays：业务流上行时延。\r\n     * dlDelays：业务流下行时延。\r\n     * rpDelays：业务流往返时延。\r\n每类时延最多可带2个取值，分别是该类最大时延和最小时延。  \r\n  \r\n  4. AF回复Npcf_PolicyAuthorization_Notify响应。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n以上各步骤的其他参数说明参见“事件发生后通知AF”流程的各步骤。\r\n\r\nPDU会话释放时上报QoS监控信息\r\n\r\n如果AF之前订阅的QOS_MONITORING事件要求在PDU_SESSION_RELEASE时上报QoS监控信息，则SMF释放N7会话时会上报QoS监控信息，RCP进一步上报给AF。\r\n\r\n流程说明如下：\r\n\r\n  1.\n\n[2]:PDU会话建立\r: UPF向SMF发送PFCP Session Establishment Response响应，携带的关键信元参见表7。\r\n\r\n表7 PFCP Session Establishment Response消息中的关键信元关键信元| 信元解释| 示例  \r\n---|---|---  \r\nCause| Cause信元指示接受或拒绝相应的请求消息。|   \r\nT_FSEID| T_FSEID用于指示由用户面网元分配的唯一标识符，用于标识会话，由UPF分配。如果原因设置为请求接受（成功），则该信元应出现。  \r\n  \r\n  11. SMF向AMF发送Namf_Communication_N1N2MessageTransfer Request消息请求传递N2资源的请求。\r\n\r\n携带N1 Container和N2 Container，其中N1 Container为SMF回复给UE的PDU会话建立响应，N2 Container为SMF向RAN发起的资源建立请求。\r\n\r\nNamf_Communication_N1N2MessageTransferRequest消息中的关键信元参见表8。\r\n\r\n表8 Namf_Communication_N1N2MessageTransfer Request消息中的关键信元关键信元| 信元解释| 示例  \r\n---|---|---  \r\nn1MessageContainer| n1MessageContainer信元用于传递N1 message。|   \r\nn2InfoContainer| n2InfoContainer信元用于传递N2 information。  \r\n  \r\n完成后AMF向SMF发送Namf_Communication_N1N2MessageTransfer Response消息，消息中的关键信元参见表9。\r\n\r\n表9 Namf_Communication_N1N2MessageTransfer Response消息中的关键信元关键信元| 信元解释| 示例  \r\n---|---|---  \r\nCause| 用于提供AMF上N1/N2消息传输处理的结果。|   \r\n  \r\n  12.\n\n[3]:特性配置\r: PNR更新签约，用户类型变更为2。\r\n  3. SMF触发N7会话释放。\r\n  4. 建立N7会话，请求消息携带gpsi号533333333333332，从SPR返回签约信息包含用户类型为1。\r\n  5. PNR更新签约，用户类型变更为2。\r\n  6. SMF触发N7会话释放。\r\n  7. 建立N7会话，请求消息携带gpsi号933333333333332，从SPR返回签约信息包含用户类型为1。\r\n  8. PNR更新签约，用户类型变更为2。\r\n  9. SMF触发N7会话释放。\r\n\r\n  \r\n通过准则| \r\n\r\n  * gpsi号233333333333332的用户建立会话，下发N7会话规则1，PNR更新签约后，下发N7会话规则2。\r\n  * gpsi号533333333333332的用户建立会话，下发N7会话规则3，PNR更新签约后，下发N7会话规则4。\r\n  * gpsi号933333333333332的用户建立会话，由于0域没有规则，不下发规则，PNR更新签约后，由于0域没有规则，不下发规则。\r\n\r\n  \r\n测试条目| 用户归属域中用户类型同时有MSISDN、IMSI，首选用户标识为MSISDN  \r\n---|---  \r\n预置条件| \r\n\r\n  * 已加载打开LIC_RCP_FUNC_MULTIDOMAIN项开关的License。\r\n  * 用户标识类型优先级配置首选用户标识类型为MSISDN，次选用户标识类型为IMSI。\r\n  * 用户归属域配置IMSI号段 000000000000000 ~ 333333333333333，归属2域。\r\n  * 切换到0域配置N7会话策略场景入口为空，usertype=1，下发N7会话规则1，usertype=2，下发N7会话规则2。\r\n  * 切换到2域配置N7会话策略\r\n  * 场景入口为空，usertype=2，下发N7会话规则3，usertype=2，下发N7会话规则4。\r\n\r\n  \r\n测试步骤| \r\n\r\n  1. 建立N7会话，请求消息携带gpsi号833333333333332、supi号243333333333332，从SPR返回签约信息包含用户类型为1。\r\n  2. PNR更新签约，用户类型变更为2。\r\n  3. SMF触发N7会话释放。\r\n\r\n  \r\n通过准则| \r\n\r\n  * gpsi号833333333333332的用户建立会话，下发N7会话规则1。（首选用户标识在用户归属域中无配置，匹配0域规则。）\r\n  * PNR更新签约后，下发N7会话规则2。\n\n[4]:Namf_Communication_CreateUEContext\r: Namf_Communication_CreateUEContext\r\n\r\n服务操作| 操作语义| 服务操作的解释  \r\n---|---|---  \r\nNamf_Communication_CreateUEContext| Request/Response| NF服务消费者（例如，源AMF）使用带有“Individual UeContext”资源的URI的HTTP PUT方法创建UE上下文，其中ueContextId唯一标识一个UeContext资源，由UE的SUPI或PEI组成。NF服务消费者发送PUT请求消息中包含UeContextCreateData结构，包括N2信息通知回调URI。如果成功，目标AMF应响应状态码“201 Created”，并且PUT响应的消息体应包含UeContextCreatedData结构。如果失败或重定向时，目标AMF应返回403的HTTP状态码，并且消息体应包含一个UeContextCreateError结构。\n\n[5]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\nPDU(Packet Data Unit, 分组数据单元)会话| UE通过SMF(Session Management Function, 会话管理功能)/UPF(User Plane Function, 用户平面功能)和数据网建立的一个连接，用于传输数据报文（Packet Data Unit）。  \r\nN7会话| 一个UE可以建立多个PDU会话，每个PDU会话建立时，SMF可以通过N7接口向PCF(Policy Control Function, 策略控制功能)建立一个策略关联，用于获取PDU会话的控制策略，这个策略关联也称为N7会话。因为N7会话和PDU会话是一对一的，所以从PCF角度来看也可以把N7会话视为PDU会话。每个PDU会话建立成功后，SMF为该PDU会话分配IPv4(Internet Protocol Version 4, 互联网通信协议第四版)地址或IPv6(Internet Protocol Version 6, 互联网通信协议第六版)地址前缀（通常是64bit的前缀），传递给UE，另一方面SMF将其为PDU会话分配的IPv4地址或IPv6地址前缀等相关信息通过N7会话上报给PCF。如果是IPv6地址前缀，UE会在后面拼接上自己的接口地址，构成一个完整的IPv6地址。UE再使用IPv4或IPv6地址传输数据报文，例如访问AF(Application Function, 应用功能)上的特定业务。  \r\nN5会话| 如果UE访问的AF业务流有特别的传输要求（QoS(Quality of Service, 服务质量)、路由等），AF可以为此类业务流向PCF请求策略授权，AF通过N5接口向RCP建立一个应用会话，也称为N5会话或AF会话。AF在N5会话中向RCP提供需要做策略授权的业务信息和策略要求（QoS、路由等），并提供UE IP地址，需要RCP根据UE IP地址找到对应的N7会话，这个过程称为“N5会话绑定”。之后PCF根据AF在N5会话中提供的业务信息和策略要求，生成PCC(Policy and Charging Control, 计费和策略控制)规则，在绑定的N7会话中将这些PCC规则下发给SMF。  \r\nAF| 应用功能（Application Function），例如各种应用的服务端程序。  \r\n策略授权| PCF基于用户签约、运营商策略、网络状况等判断AF对特定业务流的策略要求（QoS、路由等）是否能够被接纳，如果接纳，则生成相应的PCC规则和事件订阅，下发给SMF。  \r\nDNAI(DN Access Identifier, 数据网络接入标识符)| 数据网接入标识（Data Network Access Identifier），用于SMF选择UPF，UE通过UPF访问数据网中的AF。  \r\nQoS| QoS是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。", "answer": "N7会话的ResourceURI是由SMF在Namf_Communication_N1N2MessageTransfer Request消息中生成，并通过n2InfoContainer信元传递给AMF。随后，AMF在Namf_Communication_N1N2MessageTransfer Response消息中将其返回给SMF，以提供N1/N2消息传输处理的结果。这个ResourceURI用于标识N7会话，并在后续的消息交互中使用。"}
{"id": 38, "query": "RCP如何识别紧急呼叫？", "recall": "[1]:特性描述\r: 当UE发起VoNR呼叫时，P-CSCF向RCP请求建立Rx会话。RCP将Rx会话绑定到Gx会话，根据P-CSCF提供的IMS业务媒体信息，决策生成相关的PCC规则下发给SMF。RCP下发的音频承载规则的QCI(QoS Class Identifier, QoS类别标识)一般设置为1，视频承载规则的QCI一般设置为2，这样可以触发SMF为IMS业务的音频和视频媒体分别创建专有承载。\r\n\r\n由于专载建立过程涉及从SMF到UE间多个设备的信令交互，RCP下发PCC规则触发SMF创建专有承载时，SMF无法立即在RAA(Re-Auth-Answer, 重新鉴权响应)消息中报告资源预留结果。同理，RCP也无法在AAA(Answer-Auth-Answer, 应答鉴权响应)消息中上报给AF资源预留结果。若P-CSCF关心资源预留是否成功，需要在AAR消息中订阅资源预留成功/失败事件，RCP也会向SMF订阅相关事件。后续当资源预留成功或失败时，SMF可以通知RCP，从而进一步通知P-CSCF。\r\n\r\n紧急呼叫\r\n\r\nRCP支持用户在紧急呼叫APN或普通IMS APN上发起紧急呼叫流程，并通过将紧急呼叫默认承载和专载规则的ARP(Allocation and Retention Priority, 分配保持优先级)优先级设置为1来提供优先接入。\r\n\r\nRCP根据紧急呼叫APN配置判断用户是否是从紧急APN接入。\r\n\r\n  * 若是紧急APN接入的PDU(Packet Data Unit, 分组数据单元)会话，RCP在会话建立时就可以将默认承载ARP设置为1。用户发起紧急呼叫时，RCP将相关媒体对应的专载规则ARP也设置为1。\r\n\r\n  * 若是普通IMS APN接入的PDU会话，RCP可能在会话建立时将默认承载ARP设置为较低优先级。直到用户发起紧急呼叫，RCP再将默认承载APR调整为1，并在紧急呼叫结束后再恢复回去；对于紧急呼叫相关媒体对应的专载规则APR仍设置为1。RCP对用户发起的普通VoLTE呼叫则不调整默认承载ARP。\r\n\r\n\r\n\r\n\r\nP-CSCF会在Rx会话中使用特定的Service-URN(Uniform Resource Name, 统一资源名)（例如sos.fire）通知RCP，RCP则根据紧急呼叫Service-URN配置来识别用户是否使用紧急呼叫业务。若未携带特定的Service-URN，RCP则认为是普通呼叫。\r\n\r\n  * RCP支持用户不插入SIM(Subscriber Identity Module, 用户识别卡)卡直接接入紧急APN，允许紧急呼叫APN上的PDU会话不携带SUPI(Subscriber Permanent Identifier, 用户永久标识)和GPSI(Generic Public Subscription Identifier, 一般公共用户标识)，但必须携带PEI(Permanent Equipment Identifier, 永久设备标识)信息。\n\n[2]:# IMS紧急呼叫Service-URN配置\r: # IMS紧急呼叫Service-URN配置\r\n\r\n## 背景知识\r\n\r\nRCP网元需要对IMS紧急呼叫的AF（Application Function, 应用功能）会话进行策略控制。通过配置IMS紧急呼叫专属的Service-URN前缀，可以让RCP网元识别出哪些AF会话是IMS紧急呼叫。\r\n\r\n关于Service-URN AVP的介绍可详见3GPP 29214协议的5.3.23 Service-URN AVP章节。\r\n\r\n## 功能描述\r\n\r\n在基于IMS紧急呼叫进行策略控制功能中使用该组功能。此功能需要配置IMS紧急呼叫专属的Service-URN 前缀。\r\n\r\n配置完成后，通过比较AF会话中的Service-URN前缀与此处的配置，RCP网元可以识别出该AF会话是否属于IMS紧急呼叫。若不配置，则RCP网元无法识别。\r\n\r\n## 相关主题\r\n\r\n  * **ADD EMERGSVCURN**  \r\n\r\n  * **DEL EMERGSVCURN**  \r\n\r\n  * **SHOW EMERGSVCURN**  \r\n\r\n\r\n\r\n\r\n**父主题：** 授权数据配置\n\n[3]:特性描述\r: 一般公共用户标识)，但必须携带PEI(Permanent Equipment Identifier, 永久设备标识)信息。RCP会拒绝用户在紧急APN上发起普通呼叫业务。\r\n\r\n  * RCP支持用户从普通呼叫APN接入后使用紧急呼叫业务。\r\n\r\n\r\n\r\n\r\n事件订阅和信息查询\r\n\r\nP-CSCF可以通过Specific-Action向RCP订阅一些事件、状态的变更和查询位置信息等。主要可实现如下几个功能：\r\n\r\n  * 承载状态的通知\r\n\r\n当AF在AAR消息中向RCP订阅承载安装成功、失败、释放等事件时，RCP会发送Npcf_SMPolicyControl_UpdateNotify请求到SMF订阅这些事件。当SMF检测到承载相关事件发生时，将事件及受影响的PCC规则通知RCP。RCP分析受影响的媒体流编号后，将这些信息和承载状态通知给P-CSCF。\r\n\r\n特别的，对于承载释放事件，受影响的PCC规则将被RCP删除。若Rx会话的所有媒体流都受影响，RCP会给P-CSCF发送ASR并携带Release-Cause通知释放原因。\r\n\r\n  * 网络切换\r\n\r\nP-CSCF可以向RCP订阅IP-CAN_CHANGE事件感知用户的网络切换行为。RCP收到此事件后，会在响应消息中立即上报IP-CAN-Type和RAT-Type。后续用户发生网络切换SMF上报新的接入信息时，RCP构造Rx-RAR消息将IP-CAN_CHANGE事件和最新的IP-CAN-Type、RAT-Type上报给P-CSCF。\r\n\r\n  * 位置查询\r\n\r\n用户发起VoNR呼叫时，P-CSCF可能关心主叫方或被叫方的具体位置，则会向RCP请求资源预留的同时也请求查询用户位置。RCP收到位置查询请求后，通过在lastReqRuleData中携带关联规则ID（refPccRuleId）对应的查询类型，指示该PCC规则是查询用户所在时区（当reqData取值为MS_TIME_ZONE时）还是用户所在位置（当reqData取值为USER_LOC_INFO时），以及携带会话订阅事件（AN_INFO）向SMF请求查询用户位置。当SMF在资源预留过程中获得用户当前位置信息时，则通过RCP上报给P-CSCF。\r\n\r\nP-CSCF可以请求查询用户的具体位置和/或所在时区。\r\n\r\n    * 如果P-CSCF查询用户具体位置，对于VoNR的会话，RCP会提供3GPP-User-Location-Info、User-Location-Info-Time、3GPP-SGSN-MCC-MNC；对于VoWiFi的会话，RCP会提供UE-Local-IP-Address。\r\n\r\n    * 如果P-CSCF查询用户所在时区，RCP会提供3GPP-MS-TimeZone。\r\n\r\nP-CSCF发起的用户位置查询流程与其他事件有所区别，位置查询是一次性的。在P-CSCF获得用户位置后，如果用户位置发生了变化，SMF不会主动通过RCP再次上报。如果P-CSCF想获取用户最新位置信息，可以再次发起位置查询流程。\r\n\r\n  * 计费关联\r\n\r\nIMS会为每次呼叫动态生成一个ICID(IM CN subsystem charging identifier,\n\n[4]:特性描述\r: 而授权响应方式为“等承载确认后响应”或“仅IMS AF会话建立请求等承载确认后响应”时，RCP可以仅在VoNR呼叫期间因P-CSCF触发而自动向SMF/PGW订阅IP-CAN_CHANGE和RAT_CHANGE相关事件，在VoNR呼叫结束时自动取消这些事件订阅，这样可以避免非VoNR呼叫期间SMF/PGW因用户RAT改变而通知RCP。但“等承载确认后响应”或“仅IMS AF会话建立请求等承载确认后响应”会增加VoNR呼叫接通时延，两者相比之下，“仅IMS AF会话建立请求等承载确认后响应”对呼叫接通时延增加更少，所以推荐这种方式。\r\n\r\n  * 授权响应方式为“仅IMS AF会话建立请求等承载确认后响应”时，如果承载异常，RCP和SMF/PGW交互失败（请求发送失败，响应超时或响应异常）时，RCP可以对P-CSCF回复AAA携带失败码5065（IP-CAN_SESSION_NOT_AVAILABLE），这可以触发P-CSCF启动基于UDM/HSS的P-CSCF容灾流程，使用户下线重接入，用户重建会话后再发起VoNR呼叫大概率可以恢复正常。\r\n\r\n\r\n\r\n\r\n一些特定流程不看授权响应方式配置。例如：基于PCF的P-CSCF容灾增强流程，RCP对初始AAR固定先回复AAA再和SMF/PGW交互。又例如：AF在STR消息中查询用户位置，RCP需要先和SMF/PGW交互，获取最新用户位置后，再回复STA。\r\n\r\n呼叫保持：AF业务多实例\r\n\r\nRCP在业务授权时，根据每个媒体的AF应用标识、媒体类型、流用途、流方向等信息映射成一类业务标识，进行决策产生PCC规则。\r\n\r\n但在用户同时发起多个呼叫时，会建立多个AF会话，不同AF会话的媒体信息只有IP地址和端口不一致，AF应用标识、媒体类型、流用途、流方向等往往都一样，映射出的业务标识也是一样的，就只会决策出同一个PCC规则。在呼叫保持场景下，不同AF会话的媒体流状态是不一样的，下发到同一个PCC规则里则会使得PCC规则的流状态无法设置。\r\n\r\n所以，RCP针对AF多会话的场景，将相同业务标识决策出的规则复制成多份，实例号不为1的实例对应的规则名会加上实例号（实例号左补0扩展成3位）作为后缀区分。这样，每个AF会话的流下发到不同的PCC规则里，PCC规则的流状态可以正确表述媒体流的状态。\r\n\r\nVoWiFi位置查询\r\n\r\nP-CSCF向RCP查询接入网络信息时，如果用户从WLAN附着EPS网络，此时RCP会向SMF/PGW查询接入网络信息后传递给P-CSCF。包括TWAN-Identifier（存放：行政区号+国家码+本地网区号）、UE-Local-IP-Address、UDP-Source-Port参数传递位置信息。\n\n[5]:特性描述\r: RCP回复Npcf_SMPolicyControl_Update响应。\r\n\r\n  11. 如果AF之前订阅了IP-CAN_CHANGE事件，RCP通过RAR消息上报IP-CAN_CHANGE事件，并携带IP-CAN-Type=3GPP-5GS，RAT-Type=EUTRAN，指示用户已切换到LTE接入。\r\n\r\n  12. AF回复RAA消息。\r\n\r\n  13. SMF在LTE上再次触发专载建立和用户位置查询，专载建立及yoghurt位置查询成功后，SMF通过Npcf_SMPolicyControl_Update请求向RCP上报用户最新位置（LTE接入下的位置），请求中携带policyCtrlReqTriggers，其中包含AN_INFO事件，并携带ruleReports指示相关PCC规则ID，以及userLocationInfo指示用户最新位置。\r\n\r\n  14. RCP回复Npcf_SMPolicyControl_Update响应。\r\n\r\n  15. RCP向P-CSCF发送RAR消息，携带Specific-Action指示ACCESS_NETWORK_INFO_REPORT，并携带第13步SMF上报的用户最新位置。\r\n\r\n  16. P-CSCF返回RAA响应。\r\n\r\n\r\n\r\n\r\nVoWiFi位置查询\r\n\r\n图11 VoWiFi位置查询\r\n\r\nVoWiFi位置查询的流程如下：\r\n\r\n  1. ePDG向SMF发起创建默认承载请求。\r\n\r\n  2. SMF使用Npcf_SMPolicyControl_Create请求消息向RCP请求建立PDU会话，请求消息主要携带如下内容：\r\n\r\n     * accessType：NON_3GPP_ACCESS\r\n\r\n     * ratType：WLAN\r\n\r\n     * ueTimeZone：用户接入地的时间\r\n\r\n     * userLocationInfo->N3gaLocation->ueIpv4Addr/ueIpv6Addr：用户的本地地址\r\n\r\n     * userLocationInfo->N3gaLocation->portNumber：端口号\r\n\r\n     * userLocationInfo->N3gaLocation->twapId等信息：twapId等字段\r\n\r\n  3. RCP收到请求后，存储RAT、UE本地地址、端口号、用户位置等VoWiFi信息。\r\n\r\n  4. RCP基于签约信息和UE本地地址来判断是否允PDU会话建立，并进行默认承载决策授权，回复Npcf_SMPolicyControl_Create应答消息。\r\n\r\n  5. SMF向ePDG回复创建默认承载应答。\r\n\r\n  6. 用户发起VoWiFi呼叫，AF向RCP发起查询用户接入网信息的流程，使用AAR-I消息发起Rx会话建立，AAR-I消息里携带：\r\n\r\n     * Specific-Action AVP：ACCESS_NETWORK_INFO_REPORT\r\n\r\n     * Required-Access-Info AVP：USER_LOCATION (0) 或MS_TIME_ZONE (1)\r\n\r\n     * Media-Component-Description APV：主被叫双方协商后的媒体信息\r\n\r\n  7. RCP基于AAR携带的媒体信息进行策略决策授权，请求分配承载资源，并且要求SMF上报用户的接入网信息。策略更新通知Npcf_SMPolicyControl_UpdateNotify请求消息主要包括：\r\n\r\n     * policyCtrlReqTriggers：AN_INFO\r\n\r\n     * pccRules：pccRule1，携带授权的PCC规则\r\n\r\n     * lastReqRuleData：指示查询用户的接入网信息等参数\r\n\r\n  8. SMF通过Npcf_SMPolicyControl_UpdateNotify应答消息回复RCP。\r\n\r\n  9. RCP回复AAA消息允许IMS业务请求承载资源。\r\n\r\n  10.", "answer": "RCP识别紧急呼叫的方式如下：\n\n1. 通过紧急呼叫APN配置判断：RCP会根据紧急呼叫APN配置判断用户是否是从紧急APN接入的PDU会话。如果是紧急APN接入，RCP会在会话建立时将默认承载ARP设置为1，并在用户发起紧急呼叫时，将相关媒体对应的专载规则ARP也设置为1。\n\n2. 通过Service-URN前缀配置识别：RCP网元可以配置IMS紧急呼叫专属的Service-URN前缀。当AF会话中的Service-URN前缀与配置的紧急呼叫Service-URN前缀相匹配时，RCP可以识别出该AF会话属于IMS紧急呼叫。\n\n3. 对于未携带特定Service-URN的呼叫，RCP默认认为是普通呼叫。\n\n4. 在紧急APN上，RCP支持用户不插入SIM卡直接接入，此时PDU会话不携带SUPI和GPSI，但必须携带PEI信息。RCP会拒绝用户在紧急APN上发起普通呼叫业务。\n\n通过上述方式，RCP能够识别出紧急呼叫并对其进行相应的策略控制。"}
{"id": 39, "query": "SSH登录Director节点之前需要准备些什么", "recall": "[1]:SSH方式登录Director\r: SSH方式登录Director\r\n\r\n摘要\r\n\r\n本节介绍如何登录使用SSH方式登录Director。\r\n\r\n步骤\r\n\r\nSSH连接登录方式，具体操作步骤如下：\r\n\r\n  1. 打开SSH软件，新建连接。\r\n\r\n  2. 设置如下参数，其他参数采用默认值。\r\n\r\n参数名| 参数说明  \r\n---|---  \r\nProtocol| 采用的协议。此处采用默认值SSH2进行连接。  \r\nHostname| 需要建立连接的Director节点名称。\r\n     * 可设置为该节点的IP地址，如运维平面的浮动IP或者节点实际IP。\r\n     * 如果启用DNS(Domain Name System, 域名系统)域名管理服务时，也可以设置为该节点的主机名。  \r\nPort| 建立连接的端口号，采用默认值22。  \r\nUsername| 登录的用户名，例如pict。  \r\n  \r\n  3. 单击Connect按钮。\r\n\r\n  4. 输入登录的密码。单击OK按钮，连接上对应的节点。\n\n[2]:查看Director节点列表\r: 查看Director节点列表\r\n\r\n摘要\r\n\r\n本节介绍如何登录查看Director节点列表。\r\n\r\n步骤\r\n\r\n  1. 使用SSH方式登录到Director节点。\r\n\r\n  2. 使用sudo -s命令切换到root用户。\r\n\r\n  3. 使用pdm-cli node list命令，查看Director节点列表，如图1所示。其中，hostname一列中带有controller字样的是控制节点，带有computer字样的是计算节点。netinfo一列表示各个节点的IP地址，其中net_api地址用来登录节点。\r\n\r\n图1 查询Director节点列表\n\n[3]:下电和重启节点\r: 下电和重启节点\r\n\r\n摘要\r\n\r\n本节介绍如何对节点进行下电和重启操作。\r\n\r\n步骤\r\n\r\n获取节点地址\r\n\r\n  1. 使用SSH方式登录Director，具体操作参见SSH方式登录Director。\r\n\r\n  2. 查看节点列表并找到待下电或待重启的节点的net_api地址，具体操作参见查看Director节点列表。\r\n\r\n\r\n\r\n\r\n对节点进行下电操作\r\n\r\n  1. 使用命令pdm-cli shutdown <net_api地址>，对节点进行下电。\r\n\r\n说明：\r\n\r\n在节点有故障的情况下，此命令可能无法执行成功（会长时间挂住），若等待10分钟后还未完成，直接执行下一步骤。\r\n\r\n如果要对所有节点关机，则不加任何参数执行命令pdm-cli shutdown。\r\n\r\n  2. 切断节点电源。\r\n\r\n\r\n\r\n\r\n重启节点\r\n\r\n  1. 使用命令pdm-cli reboot <net_api地址>，对节点进行重启。\r\n\r\n说明：\r\n\r\n在节点有故障的情况下，此命令可能无法执行成功（会长时间挂住），若等待10分钟后还未完成，可直接对节点硬重启（切断电源或者在服务器中进行带外重启）。\n\n[4]:物理机Linux系统daisyseed准备\r: 物理机Linux系统daisyseed准备\r\n\r\n摘要\r\n\r\n介绍物理机Linux系统daisyseed准备。\r\n\r\n步骤\r\n\r\n搭建daisyseed部署机\r\n\r\n  1. 以5300服务器搭建daisyseed为例，登录服务器BMC界面，选择设置→启动方式，启动设备选择光驱，如图1所示。\r\n\r\n图1 设置启动方式\r\n\r\n  2. 进入服务器KVM界面，加载镜像文件到虚拟光驱，如图2所示。\r\n\r\n图2 加载镜像文件\r\n\r\n  3. 选择Power→Reset Server，重启服务器，进入配置页面，如图3所示。\r\n\r\n图3 配置页面\r\n\r\n  4. 移动光标到Partitions，回车，移动光标到Change Partition Size，回车，设置Customize partition为No，如图4所示。\r\n\r\n图4 设置\r\n\r\n  5. 移动光标到Network，配置network ，根据网络规划，配置的大网ip，选择网卡，单双栈，ip地址，掩码、网关等信息。\r\n\r\n  6. 移动光标选择Install，安装daisyseed操作系统，如图5所示。安装完成后，默认登录用户密码为：ubuntu/UbuntU1!2@3#4$ 用sudo -i切换到root用户。\r\n\r\n图5 安装操作系统\r\n\r\n\r\n\r\n\r\n安装后配置\r\n\r\n  1. （可选）扩容根分区。\r\n\r\nssh登录daisyseed，切换到root用户，df -h查看磁盘分区。根分区剩余空间不能小于30G，否则需要扩容。\n\n[5]:TECS资源池节点准备\r: TECS资源池节点准备\r\n\r\n摘要\r\n\r\n介绍虚机场景TECS资源池节点准备。\r\n\r\n步骤\r\n\r\n创建项目\r\n\r\n  1. 使用admin账号登陆TECS，选择系统管理→项目，打开项目页面，如图1所示。\r\n\r\n图1 项目页面\r\n\r\n  2. 单击添加项目按钮，打开添加项目页面，如图2所示。\r\n\r\n图2 添加项目页面\r\n\r\n  3. 根据预置节点环境资源规划，填写参数。单击创建按钮，完成创建。\r\n\r\n说明：\r\n\r\n项目配额根据规划的节点规模自行配置（考虑到需要创建paas-st虚机和daisyseed虚机，项目配额应适当放大），实例数、端口数、网络数等根据实际规划配置，可适当放大。如果不限制使用大小，可填写“-1”。\r\n\r\n\r\n\r\n\r\n创建用户\r\n\r\n  1. 选择系统管理→用户，打开用户页面。\r\n\r\n  2. 单击创建用户按钮，打开创建用户页面。\r\n\r\n  3. 根据预置节点环境资源规划，填写参数，其中项目填写上面创建的项目名称，角色选择“prj_manager”，单击创建按钮，完成创建。\r\n\r\n\r\n\r\n\r\n添加虚机规格\r\n\r\n  1. 选择云管理→计算→规格，打开规格页面，如图3所示。\r\n\r\n图3 规格页面\r\n\r\n  2. 单击添加虚机规格按钮，打开添加虚机规格页面。\r\n\r\n  3. 根据环境规划添加需要的虚机规格，包括daisyseed虚机类型和TECS Director节点虚机类型，根据TECS资源池实际配置信息注意是否需要打开绑核巨页（注意daisyseed虚机规格为4核8G、50G硬盘）。\r\n\r\n\r\n\r\n\r\n创建网络\r\n\r\n  1. 退出admin租户，使用上一步创建成功的用户登录。选择项目管理→网络，打开网络页面，如图4所示。\r\n\r\n图4 网络页面\r\n\r\n  2. 单击添加网络按钮，打开添加网络页面。\r\n\r\n  3. 根据规划的组网创建net_api(内部网络)，net_iapi（SSH运维网络），net_public（南向public网络），net_north(北向和tecsclient网络)，ip需用户自己规划，注意添加子网时关闭DHCP。\r\n\r\n说明：\r\n\r\n     * 端口IP可以创建（增加虚机的时候指定分配某个端口IP），也可以不创建（增加虚机的时候随机分配端口ip）。\r\n\r\n     * 若创建网络时需要指定VLANID，需要以admin用户登录进行创建网络，创建时可以指定VLANID。\r\n\r\n\r\n\r\n\r\n上传镜像\r\n\r\n  1. 选择项目管理→镜像，打开镜像页面。\r\n\r\n  2. 单击上传镜像按钮，打开上传镜像页面，如图5所示。\r\n\r\n图5 上传镜像页面\r\n\r\n  3. 在此页面上传daisyseed虚机镜像和节点虚机OS镜像（daisyseed虚机和节点虚机使用相同镜像文件）。\r\n\r\n说明：\r\n\r\n虚机需要的OS镜像必须为qcow2格式，所以要将制品库中的iso镜像下载至本地win机器，使用7z工具解压，解压后找到qcow2格式镜像文件。\r\n\r\n\r\n\r\n\r\n创建云盘\r\n\r\n说明：\r\n\r\n本地盘部署时可跳过该步骤。\r\n\r\n  1. 选择项目管理→存储→云硬盘，打开云硬盘页面。\r\n\r\n  2.", "answer": "在SSH登录Director节点之前，需要以下准备工作：\n\n1. 确认Director节点的IP地址或主机名，以及端口号（默认为22）。\n2. 准备登录的用户名，例如上下文提到的用户名为pict。\n3. 知道登录的密码。\n4. 安装并打开SSH软件，如PuTTY或其他SSH客户端。\n5. 在SSH软件中新建一个连接，并设置相应的参数，包括：\n   - Protocol：选择SSH2作为连接协议。\n   - Hostname：输入Director节点的IP地址或主机名。\n   - Port：输入端口号，默认为22。\n   - Username：输入登录用户名。\n   - 其他参数可以保留默认设置。\n\n完成以上步骤后，即可通过SSH软件尝试连接到Director节点。"}
{"id": 40, "query": "模板中内部网络的VIP和地址池填写是要注意什么", "recall": "[1]:准备模板\r: 填写网络配置，物理机网络配置如图3所示，租户网络配置（可选）如图4所示，虚机网络配置如图5所示。\r\n\r\n图3 网络配置（物理机）\r\n\r\n说明：\r\n\r\n物理机场景注意事项：\r\n\r\n       * 物理机场景模板不支持单网卡组网，一定要bond组网\r\n\r\n       * 外部网络 包括运维网络、北向网络、TECS Client网络、Public API网络、容灾网络、Sto-Mgt网络（存储网络管理面）\r\n\r\n       * 内部网络 包括 NET-API网络\r\n\r\n       * 存储网络 包括Sto-Data网络（存储网络数据面）\r\n\r\n       * VIP和地址池中的地址不能重复\r\n\r\n       * VIP、地址池、网关、 路由下一跳地址都要在cidr范围内\r\n\r\n       * “运维网络”VIP填写运维网络浮动IP，地址池填写分配给三个节点的运维IP地址\r\n\r\n       * “内部网络”VIP分配50个地址，地址池要写两段，第一段地址分配20个，第二段地址分配1024-20-50=954个左右\r\n\r\n       * “Director北向”“Director Public Api”“Director Tecs Client”“容灾网络”VIP设置为空，地址填写在地址池中，并写成地址段格式，例如 1.1.1.1-1.1.1.1\r\n\r\n容灾场景注意事项：\r\n\r\n       * \"容灾功能\" 选择 开启\r\n\r\n       * “容灾网络”，只能选择单栈（ipv4或者ipv6）\r\n\r\n       * casssandra容灾网络对端地址要依次写出来用逗号隔开，建议写9个，便于后续扩容节点\r\n\r\n图4 配置租户网络\r\n\r\n说明：\r\n\r\n配置租户网络注意事项：\r\n\r\n       * “是否配置租户网络”选择开启，用户即可配置租户网络：在关闭容灾功能的情况下，可配置的租户网络为3个：opcs、zenap、director；在开启容器功能的情况下可配置的租户网络为4个：opcs、zenap、director和openpalette-extention。\r\n\r\n       * 租户网络的vlan必须在内部网络的vlan范围内，并且cidr不可与内部网络的cidr相同，租户网络之间的cidr也不可配置相同。\r\n\r\n       * 在生成模板后，其中director-VM.xlsx模板的裸机租户网络sheet页中会显示配置的租户网络信息。\r\n\r\n网络平面为共网络平面时：\r\n\r\n       * 内外部使用的网卡为同一对，此时所有的物理网络平面的名称都为physnet0。\r\n\r\n       * 在生成模板后，其中的paas-VM.xlsx模板的应用网络配置sheet页中，基础网络名称也是physnet0（与内部网络的物理网络平面名称一致）。\n\n[2]:准备模板\r: xlsx模板的应用网络配置sheet页中，基础网络名称也是physnet0（与内部网络的物理网络平面名称一致）。\r\n\r\n图5 网络配置（虚机）\r\n\r\n说明：\r\n\r\n虚机场景注意事项：\r\n\r\n       * 运维网络”VIP填写运维网络浮动IP，地址池填写预置虚机所有节点的真实运维IP地址（固化到虚机网卡文件的net_iapi运维网络地址）\r\n\r\n       * 内部网络”VIP分配20个地址，地址池至少填写12+2个地址，地址池中前N个（节点个数）地址为固化到虚机网卡文件的net_api内部网络地址\r\n\r\n       * “Director北向”VIP默认不填，地址池填写北向网络IP地址（若TecsClient、PublicApi 和北向三网独立，那么填写规则和北向一致）\r\n\r\n       * VIP和地址池中的地址不能重复\r\n\r\n       * VIP、地址池、网关、 路由下一跳地址都要在对应cidr范围内\r\n\r\n       * 业务网络（北向网络、publiapi网络、tecsclient网络、容灾网络、对象存储管理网络等）中地址池信息中填写规划的地址信息\r\n\r\n容灾场景注意事项：\r\n\r\n       * \"容灾功能\" 选择 开启\r\n\r\n       * “容灾网络”，只能选择单栈（ipv4或者ipv6）\r\n\r\n    3.\n\n[3]:准备模板\r: 填写节点配置，物理机节点配置如图6所示，虚机节点配置如图7所示。\r\n\r\n图6 节点配置（物理机）图7 节点配置（虚机）\r\n\r\n说明：\r\n\r\n物理机场景注意事项：\r\n\r\n       * “Host Name”不能有下划线\r\n\r\n       * 网络平面MANAGEMENT是指内部网络（NET-API）\r\n\r\n       * 网络平面TECSClient是指运维网络\r\n\r\n       * Port Name写端口名称，但E9000刀片则需要写mac地址，其他类型服务器写端口名称即可（如果该网络是bond模式，则可填写bond中任意端口）\r\n\r\n       * 部署的服务器为E9000刀片时，Server Type需要选择ZTE-E9000-G4-BLADE。（选择ZTE-E9000-G4会导致部署出现报错）\r\n\r\n       * 外接存储场景注意事项（仅涉及预置卷场景，非预置卷不涉及）\r\n\r\niscsi target：值为 “<iscsi地址>:3260” ipv6地址要加中括号，例如\"[2025:806::32:101]:3260\" 。支持多路径，用英文逗号分隔，例如“192.168.64.2:3260,192.168.64.3:3260”\r\n\r\n设备名称： 磁阵卷时，从磁阵上查到卷的wwn，如下图。需要注意，主机侧multipath -l看到的卷wwn前面会多一个数字'3'，配置时，'3'不能带\r\n\r\nceph卷时，值的格式为\"rbd/<存储池pool名称>/<卷名称>\"\r\n\r\niqn名称：可以自己定义，但是要确保节点唯一\r\n\r\niqn名称定义后，在磁阵或ceph上创建主机或映射组时，需要用到主机iqn时，就使用这里自定义的值\r\n\r\n在部署过程中OS安装完成以后、iscsi登录磁阵或ceph之前，会固化到主机的/etc/iscsi/initiatorname.iscsi文件中\r\n\r\n虚机场景注意事项：\r\n\r\n       * “Host Name”不能有下划线（可置空）\r\n\r\n       * net_api_ip填写预置虚机内部网络地址的真实地址（即节点固化到网卡文件的内部网络net_api地址）。\r\n\r\n       * net_iapi_ip填写预置虚机运维网络地址的真实地址（即节点固化到网卡文件的内部网络net_api地址）。\r\n\r\n       * 网络平面北向、PublicApi、容灾网络、对象存储管理网络 ，对应Director挂载网络使用的网卡mac地址\r\n\r\n       * 虚机uuid需要填写预置虚机对应的真实的id\r\n\r\n  4. 切换到UserLLD页面，单击检查按钮，对模板数据进行校验，弹出对话框提示检查通过。\r\n\r\n  5. 单击开始按钮，选择生成的目录位置，会同时生成1个配置文件（seed_cmd_config.ini）和4个模板文件（daisyseed-BM.xlsx、director-BM.xlsx、paas-BM.xlsx、tecs-BM.xlsx），模板文件需要手动保存关闭。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\nvmware资源池部署Director，需要手动修改paas-VM.xlsx文件才能使用，否则会部署失败。\r\n\r\n修改方法：\r\n\r\n  1. 开由summary生成的paas-VM.xlsx，找到“节点配置”sheet页，查看“存储配置模板”中使用模板信息。\r\n\r\n  2. 在“节点存储模板”sheet页，找到对应的模板内容，修改dev/vdX为dev/sdX（X为a或b）。\n\n[4]:虚机非容灾场景\r: 虚机非容灾场景\r\n\r\n通用场景\r\n\r\n通用场景的网络配置组网图如图1所示。\r\n\r\n图1 通用场景组网图\r\n\r\n通用场景的网络平面配置参见表1。\r\n\r\n表1 通用场景网络平面配置网络平面| IP地址个数| IP配置方法| 描述| 备注  \r\n---|---|---|---|---  \r\n北向网络| 1| 人工规划，系统安装时自动配置| 客户端访问Director portal网络，以及北向上报网络| SLB 托管网络  \r\nTecsClient网络（南向网络）| 1| 人工规划，系统安装时自动配置| Director访问TECS的TECSCLIENT平面| SLB 托管网络  \r\nPubApi网络（南向网络）| 1| 人工规划，系统安装时自动配置| Director访问TECS的PUBLICAPI平面| SLB 托管网络  \r\n运维网络（net-iapi）| 5| 手动配置3个固定IP到环境并固化到文件，1个VIP系统安装时自动配置| 节点SSH和NTP服务网络平面、Director访问对象存储的S3平面（DNS）| \r\n\r\n  * 主机网络，3个固定IP，1个VIP\r\n  * DaisySeed 需要1个\r\n\r\n  \r\n内部网络（net-api）| 地址池：N+2+20（N = 节点个数）| \r\n\r\n  * 每个节点的net_api网络ip（规划的前N+2）， 当前版本约束需要多出2个地址，否则会部署失败\r\n  * 其余20个规划PaaS内部组件VIP使用\r\n\r\n| PaaS内部网络，东西向流量| -\n\n[5]:vmware资源池节点准备\r: 选择需要挂载的网络，单击确定完成网络挂载。\r\n\r\n说明：\r\n\r\n挂载网络时必须严格按照网络的先后顺序进行挂载。\r\n\r\n控制节点1和控制节点2虚机依次（顺序不能变）挂载 net_iapi（运维网络）,net_north（北向网络），TecsClient网络，Public API（南向public），容灾网络（可选），存储数据面网络（可选）。\r\n\r\n控制节点3虚机挂载net_iapi（运维网络）。\r\n\r\n所有计算节点虚机不需要再挂载网络（计算节点仅需要内部网络，在虚机创建步骤已经完成）。\r\n\r\n  4. 虚机网络挂载完成后，在虚机摘要页签的虚拟机硬件区域可看到网络全部挂载完毕，如图24所示。\r\n\r\n图24 虚拟机硬件网络适配器\r\n\r\n\r\n\r\n\r\n固化网络\r\n\r\n说明：\r\n\r\n需要固化的网络为net_api(内部网络)、net_iapi(运维网络)，其他网络不需要固化 （固化的IP地址在网络规划时已经确定）。\r\n\r\n  1. 确认虚机网卡挂载网络。\r\n\r\n    1. 在虚机摘要页签的虚拟机硬件区域，单击网络适配器可查看mac地址和网络信息对应关系，如图25所示。\r\n\r\n图25 查看mac地址和网络信息对应关系\r\n\r\n    2. 登录到虚机节点，执行ifconfig -a，可查看虚机网卡的mac地址，如图26所示。\r\n\r\n图26 查看虚机网卡的mac地址\r\n\r\n通过mac地址就可以确定虚机网卡挂载的网络信息。\r\n\r\n  2. 固化net_api(内部网络)地址。\r\n\r\n    1. 进入虚机/etc/sysconfig/network-scripts目录下，net_api网卡文件已经存在。\r\n\r\n    2. 查看文件是否需要补充IP信息，如果缺少就要补齐。如是双栈，则ipv4和ip6地址都要存在，下图为双栈net_api网卡文件固化信息。\r\n\r\n  3. （可选）固化net_iapi(运维网络)地址。\r\n\r\n拷贝ifcfg-lo文件并重命名为ifcfg- **ensX修改文件增加IP信息** ，net_iapi对应哪个ensX可以参考前面步骤。\r\n\r\n说明：\r\n\r\n仅在控制节点执行，计算节点没有运维网络不需要执行该步骤。\r\n\r\n设置虚机所有网卡文件中BOOTPROTO的值为static，不启用dhcp。\r\n\r\n  4. 复位网络。执行service network restart，执行ifconfig查看网卡上ip地址已经生效，如图27所示。\r\n\r\n图27 查看网卡上ip地址\r\n\r\n\r\n\r\n\r\n创建虚机快照\r\n\r\n说明：\r\n\r\n虚机快照可在Director部署失败后快速恢复虚机到初始未安装状态。\r\n\r\n  1. 切换至虚机快照页签，单击生成快照，如图28所示。\r\n\r\n图28 生成快照\r\n\r\n  2. 在生成快照页面，修改快照名称，描述等信息，如图29所示。\r\n\r\n图29 修改快照信息\r\n\r\n  3. 单击创建按钮，生成快照如图30所示。\r\n\r\n图30 已生成的快照", "answer": "在模板中内部网络的VIP和地址池填写时需要注意以下几点：\n\n1. 内部网络VIP分配20个地址。\n2. 地址池至少填写12+2个地址，其中前N个（节点个数）地址为固化到虚机网卡文件的net_api内部网络地址。\n3. VIP和地址池中的地址不能重复。\n4. VIP、地址池、网关、路由下一跳地址都要在对应cidr范围内。\n5. 在“内部网络”中，VIP填写时，地址池要分为两段，第一段地址分配20个，第二段地址分配1024-20-50=954个左右。"}
{"id": 41, "query": "命令行部署方式，daisyseed日志在哪个路径下？", "recall": "[1]:命令行部署\r: 命令行部署\r\n\r\n摘要\r\n\r\n介绍在linux系统下如何使用命令行执行部署。\r\n\r\n步骤\r\n\r\n  1. 执行部署，分为两种情况：\r\n\r\n     * 重新部署\r\n\r\n       1. 停止Daisyseed\r\n            \r\n                        sudo ps -ef|grep -E \"app.py\" |grep -v grep|awk '{print $2}'|xargs -i kill -9 {}\r\n\r\n       2. 清理前一次部署状态Install State\r\n            \r\n                        cd /root/daisyseed_v3/daisyseed/daisyseed/output/state/\r\n            rm -rf *\r\n\r\n       3. 启动 Daisyseed\r\n            \r\n                        nohup python3 /root/daisyseed_v3/daisyseed/daisyseed/app.py > seed.log 2>&1 &\r\n\r\n       4. 启动部署（前面步骤执行完，建议等待30秒，再执行）\r\n            \r\n                        python3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py \r\n            /root/daisyseed_v3/daisyseed/daisyseed/template/seed_cmd_config.ini\r\n\r\n     * 断点续装\r\n        \r\n                python3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py /root/daisyseed_v3\r\n        /daisyseed/daisyseed/template/seed_cmd_config.ini --redeploy=no\r\n\r\n\r\n\r\n  1. 查询部署日志\r\n\r\nSSH到daisyseed，切换到root用户，执行如下命令查询部署进展（部署时长大概需要180-240分钟左右）\r\n    \r\n        tail -f /root/daisyseed_v3/daisyseed/daisyseed/output/daisyseed.log\r\n\r\n出现如下的日志代表部署完成。\r\n\r\n登录账户：\r\n    \r\n        director  portal ：https://<tecsclient IP>/uportal    admin /Zenap_123!@#\r\n    tcf portal : https://<运维网络浮动IP>:1043/ngportal   admin /Keystone123    \r\n    director/Keystone123\r\n    daisy portal：https://<运维网络浮动IP>:18080  dmin /Keystone123\r\n\r\n查看PaaS控制节点部署日志（此日志不一定在首节点，需要查看每个节点）：\r\n    \r\n        tail -f /var/log/cosmos_deploy.log\r\n\r\n  2. 如果PaaS部署失败初步定位\r\n    \r\n        pdm-cli task list\r\n    pdm-cli task show uuid|grep fail\r\n\r\n  3. 查询PaaS是否部署成功\r\n    \r\n        pdm-cli paas_status get\n\n[2]:Linux虚机场景daisyseed准备\r: Linux虚机场景daisyseed准备\r\n\r\n摘要\r\n\r\n介绍虚机场景daisyseed准备。\r\n\r\n步骤\r\n\r\n  1. 搭建daisyseed部署机。\r\n\r\n  2. 上传daisyseed工具包。注意需要Daisyseed主机和paas的net_iapi网络打通（步骤1搭建daisyseed虚机时已经打通）。\r\n\r\n    1. 本地解压TCFV7.22.10.06P01_tools.tar,解压后进入daisyseed目录，找到daisyseed_linux_TECSV7.22.10_rel_1081.tar\r\n\r\n    2. 将daisyseed_linux_TECSV7.22.10_rel_1081.tar上传至daisyseed虚机/root下\r\n\r\n    3. 创建/root/daisyseed_v3/目录（注意:虚机创建后，可能已经存在daisyseed_v3目录，需要先手动删除rm -rf daisyseed_v3）\r\n\r\n    4. 解压版本：cd /root/daisyseed_v3/ && tar -xf /root/daisyseed_linux_*.tar\r\n\r\n    5. 对齐版本目录：mv /root/daisyseed_v3/daisyseed_linux_* /root/daisyseed_v3/daisyseed\r\n\r\n  3. 更新daisyseed虚机依赖库。\r\n    \r\n        cd /root/daisyseed_v3/daisyseed/daisyseed_env_pkg\r\n    sh prepare_mimosa8.2.sh\r\n\r\n  4. 上传配置模板。\r\n\r\n    1. 上传paas、tecs、daisyseed、director四个模板到daisyseed虚机/root/daisyseed_v3/daisyseed/config_files目录下。\r\n\r\n    2. 上传配置文件seed_cmd_config.ini到 /root/daisyseed_v3/daisyseed/daisyseed/template目录下。\r\n\r\n    3. 上传版本包到/root/daisyseed_v3/daisyseed/versions目录下。\n\n[3]:Windows系统daisyseed准备\r: Windows系统daisyseed准备\r\n\r\n摘要\r\n\r\n介绍Windows系统daisyseed准备。\r\n\r\n前提\r\n\r\n  * 准备一台Windows系统设备（可以是笔记本、台式机、服务器、虚机等）\r\n\r\n  * 至少一个目录剩余空间大于30G \r\n\r\n  * 该设备网络需要和节点的PXE网络、BMC网络和SSH运维网络互通\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n  1. 解压TCFV7.22.10.09_tools.tar。\r\n\r\n  2. 在解压后的目录中找到daisyseed目录，将daisyseed_win_TECSV7.22.10_rel_1363.7z上传到Windows系统设备上，放在剩余空间大于30G的目录，并执行解压。\r\n\r\n  3. 在daisyseed解压后的目录中找到config_files目录，将准备模板中生成的.xlsx模板文件上传到此目录下。\r\n\r\n  4. 将准备模板中生成的seed_cmd_config.ini上传到\\daisyseed\\template目录。\r\n\r\n  5. 上传版本到version目录。\n\n[4]:Daisyseed搭建\r: Daisyseed搭建\r\n\r\n子主题：\r\n\r\n  * 物理机Linux系统daisyseed准备\r\n\r\n  * 虚机linux系统daisyseed搭建\r\n\r\n  * daisyseed分区扩容\n\n[5]:物理机Linux系统daisyseed准备\r: 物理机Linux系统daisyseed准备\r\n\r\n摘要\r\n\r\n介绍物理机Linux系统daisyseed准备。\r\n\r\n步骤\r\n\r\n搭建daisyseed部署机\r\n\r\n  1. 以5300服务器搭建daisyseed为例，登录服务器BMC界面，选择设置→启动方式，启动设备选择光驱，如图1所示。\r\n\r\n图1 设置启动方式\r\n\r\n  2. 进入服务器KVM界面，加载镜像文件到虚拟光驱，如图2所示。\r\n\r\n图2 加载镜像文件\r\n\r\n  3. 选择Power→Reset Server，重启服务器，进入配置页面，如图3所示。\r\n\r\n图3 配置页面\r\n\r\n  4. 移动光标到Partitions，回车，移动光标到Change Partition Size，回车，设置Customize partition为No，如图4所示。\r\n\r\n图4 设置\r\n\r\n  5. 移动光标到Network，配置network ，根据网络规划，配置的大网ip，选择网卡，单双栈，ip地址，掩码、网关等信息。\r\n\r\n  6. 移动光标选择Install，安装daisyseed操作系统，如图5所示。安装完成后，默认登录用户密码为：ubuntu/UbuntU1!2@3#4$ 用sudo -i切换到root用户。\r\n\r\n图5 安装操作系统\r\n\r\n\r\n\r\n\r\n安装后配置\r\n\r\n  1. （可选）扩容根分区。\r\n\r\nssh登录daisyseed，切换到root用户，df -h查看磁盘分区。根分区剩余空间不能小于30G，否则需要扩容。", "answer": "命令行部署方式中，daisyseed日志的路径为：\n\n- `/root/daisyseed_v3/daisyseed/daisyseed/output/daisyseed.log`\n\n此外，还有PaaS控制节点的部署日志，其路径为：\n\n- `/var/log/cosmos_deploy.log`\n\n但需要注意的是，PaaS控制节点的部署日志可能不在首节点，可能需要查看每个节点的相应路径。"}
{"id": 42, "query": "PCF使用同一个版本，在同一个环境下部署的多套PCF网元，是否可以使用同一个license申请文件申请？", "recall": "[1]:申请License\r: 填写完成后保存文件。\r\n\r\n\r\n\r\n\r\n申请License文件\r\n\r\n  1. 登录CSC系统（http://csc.zte.com.cn）。\r\n\r\n  2. 选择菜单软件许可证→流程处理→核心网license申请，弹出**新建申请单** 页面，如图1所示。\r\n\r\n说明：\r\n\r\n每个PCF网元都要填写一个申请单。一个申请单中不能包含多个网元。\r\n\r\n图1 新建申请单页面\r\n\r\n  3. 填写申请信息，填写说明参见表2。\r\n\r\n表2 申请信息填写说明申请信息| 填写说明  \r\n---|---  \r\n申请类型| 根据实际选择。  \r\n合同号| 填写实际的合同号。  \r\n产品线（PDM)| 选择**核心网（CN）**  \r\n产品大类（PDM)| 选择**融合分组核心网/核心网（CN）**  \r\n客户单位| 选择实际的客户单位名称。  \r\n版本| 选择实际的版本号。PCF网元的版本号可通过如下方法查询：登录EM客户端，在**配置** 页面选择需要查询的PCF网元，执行SHOW VERSION DETAIL命令查询PCF运行实例对应的版本号。例如查询到**Npcf_SMPolicyControl_0** 对应的版本号为**V7.21.30.B2** ，则此处选择**ZXUN-RCPV7.21.30.B2** 。  \r\n申请原因| 根据实际填写。  \r\n  \r\n  4. 单击**附加说明** 栏的**上传** 按钮，上传已填写完成的License申请模板License_application_template_5GC.xls\r\n\r\n  5. 选择相关的审核和审批人员，单击**提交** 。\r\n\r\n审批通过后，CSC系统将在15分钟内自动制作License，并将License文件（命名为LCS单号_licensefile.zip）上传到CSC系统中。只有申请人才能查看和下载License文件。如果CSC系统制作License失败，则会显示失败信息。\n\n[2]:申请License\r: 填写完成后保存文件。\r\n\r\n\r\n\r\n\r\n申请License文件\r\n\r\n  1. 登录CSC系统（http://csc.zte.com.cn）。\r\n\r\n  2. 选择菜单软件许可证→流程处理→核心网license申请，弹出**新建申请单** 页面，如图1所示。\r\n\r\n说明：\r\n\r\n每个PCF网元都要填写一个申请单。一个申请单中不能包含多个网元。\r\n\r\n图1 新建申请单页面\r\n\r\n  3. 填写申请信息，填写说明参见表2。\r\n\r\n表2 申请信息填写说明申请信息| 填写说明  \r\n---|---  \r\n申请类型| 根据实际选择。  \r\n合同号| 填写实际的合同号。  \r\n产品线（PDM)| 选择**核心网（CN）**  \r\n产品大类（PDM)| 选择**融合分组核心网/核心网（CN）**  \r\n客户单位| 选择实际的客户单位名称。  \r\n版本| 选择实际的版本号。PCF网元的版本号可通过如下方法查询：登录EM客户端，在**配置** 页面选择需要查询的PCF网元，执行SHOW VERSION DETAIL命令查询PCF运行实例对应的版本号。例如查询到**Npcf_SMPolicyControl_0** 对应的版本号为**V7.21.30.B2** ，则此处选择**ZXUN-RCPV7.21.30.B2** 。  \r\n申请原因| 根据实际填写。  \r\n  \r\n  4. 单击**附加说明** 栏的**上传** 按钮，上传已填写完成的License申请模板License_application_template_5GC.xls\r\n\r\n  5. 选择相关的审核和审批人员，单击**提交** 。\r\n\r\n审批通过后，CSC系统将在15分钟内自动制作License，并将License文件（命名为LCS单号_licensefile.zip）上传到CSC系统中。只有申请人才能查看和下载License文件。如果CSC系统制作License失败，则会显示失败信息。\n\n[3]:申请License\r: 申请License\r\n\r\n摘要\r\n\r\n业务License与实例化ZXUN RCP时生成的序列号一一对应，需要根据序列号申请License文件。\r\n\r\n由于不同版本License的选项不一样，License申请模板必须和使用的软件版本配套。\r\n\r\n说明：\r\n\r\n为了杜绝版本和模板错配问题，申请前要核实现网版本或者指定开局版本。\r\n\r\n相关信息\r\n\r\n由于制作License使用自动化审核和制作工具，因此License申请文件必须按照如下要求填写。\r\n\r\n  * 每个License申请文件只能包含“填写说明”，“OAM-License模板”、“application-information”三个页签。\r\n\r\n  * 禁止修改“填写说明”和“OAM-License模板”页签的内容和名称。\r\n\r\n  * 实际申请的License信息请填写在页签“application-information”中。\r\n\r\n  * 每个局点对应一个License 申请单，每个申请单只能有一个申请文件。文件名以网元的NF名称保存，必须保存为.xls的文件。\r\n\r\n说明：\r\n\r\n文件名不能超过75字符，否则工具会读取失败。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n填写License申请模板\r\n\r\n  1. 从版本文件的license目录下获取license申请模板/versions/tools/license/License_application_template_5GC.xls。\r\n\r\n  2. 在application-information页签中按照实际情况填写网元信息和容量信息。\r\n\r\n     * 网元信息\r\n\r\n网元信息填写规范参见表1。\r\n\r\n表1 网元信息填写规范项目| 填写说明  \r\n---|---  \r\n网元标识| NF实例名称，例如：APP-HDBNJahAMF001BZX-03AZX011。  \r\n设备序列号| 填写ZXUN RCP网元的序列号。注意：填写时前后不能有空格。获取序列号方法：\r\n       1. 使用admin用户登录EM(Element Management, 网元管理)客户端。\r\n       2. 在配置页面，展开PCF→PCF_x节点。\r\n       3. 在PCF_x下执行SHOW NFSN命令查询ZXUN RCP网元的序列号。  \r\n网元产品名称| NF名称，例如：APP-HDBNJahAMF001BZX-03AZX011。  \r\n网元版本号| 网元版本号，例如：`V7.20.21.B5`。  \r\n有效期| 填写格式必须为：`yyyy/mm/dd`。如果没有特殊要求，固定填写`2099/12/31`。  \r\n网元位置| 填写实际的省份和城市。  \r\n网元类型| 保持模板中的内容不变。  \r\n  \r\n     * 容量信息\r\n\r\nLicense申请模板中网元的功能和容量必须按合同规定值填写。\r\n\r\n说明：\r\n\r\n如果填写人员不清楚合同规定，需与售前技术人员确认或联系中兴通讯技术支持进行确认。\r\n\r\n容量填写规范如下：\r\n\r\n       * 模板中容量控制项是纯数字格式，填写时必须是准确的数字，没有单位。\r\n\r\n       * 容量值必须在模板注明的容量范围内，不允许超过容量值的最小和最大范围。\r\n\r\n  3. 填写完成后保存文件。\r\n\r\n\r\n\r\n\r\n申请License文件\r\n\r\n  1. 登录CSC系统（http://csc.zte.com.cn）。\r\n\r\n  2.\n\n[4]:# ADD NFINFO \r: | 参数作用：该参数标识本局归属的SCP域。 数据来源：全网规划。 配置原则：需要根据运营商规范要求填写。  \r\nPCFSET | 归属PCF集 | 参数可选性:任选参数；参数类型:字符型；参数范围为:0~127个字符。 | 参数作用：该参数标识本局归属的PCF集，PCF集内的PCF支持热备容灾。 数据来源：全网规划。 配置原则：需要根据运营商规范要求填写。  \r\nPCFNAME | 实例名称 | 参数可选性:任选参数；参数类型:字符型；参数范围为:0~127个字符。 | 参数作用：该参数标识本PCF网元的实例名称。 数据来源：全网规划。 配置原则：需要根据运营商规范要求填写。  \r\n  \r\n## 输出参数说明\r\n\r\n标识 | 名称 | 类型 | 说明  \r\n---|---|---|---  \r\nNFID | 本局局向号 | 参数可选性:任选参数；参数类型:整数；参数范围为:1~65534。 | 参数作用：该参数用于指定PCF的编号。 数据来源：全网规划。 配置原则：标识唯一的PCF。  \r\nHOSTNAME | Diameter主机名 | 参数可选性:任选参数；参数类型:字符型；参数范围为:1~127个字符。 | 参数作用：该参数用于标识本局的Diameter主机名。 数据来源：全网规划。 配置原则：需要根据运营商规范要求填写。  \r\nREALM | Diameter域名 | 参数可选性:任选参数；参数类型:字符型；参数范围为:1~127个字符。 | 参数作用：该参数用于标识本局的Diameter域名。 数据来源：全网规划。 配置原则：需要根据运营商规范要求填写。  \r\nTENANTNAME | 租户名称 | 参数可选性:任选参数；参数类型:字符型；参数范围为:1~32个字符。 | 参数作用：该参数用于标识PCF网元所在资源池名称。 数据来源：全网规划，建议和CDB租户名称一致，可通过SHOW CDBTENANT查询CDB租户名称。 配置原则：如无特殊要求，可配置为tenant_1。  \r\nPUBTENANTNAME | 公共租户名称 | 参数可选性:任选参数；参数类型:字符型；参数范围为:1~32个字符。 | 参数作用：该参数用于标识PCF申请的网元公用数据的租户名称，只能有一个。 数据来源：公用租户名称需要根据运营商规范要求填写。 配置原则：互为容灾的PCF，公共租户名称必须相同。  \r\nGROUPID | 网元组编号 | 参数可选性:任选参数；参数类型:字符型；参数范围为:0~37个字符。 | 参数作用：该参数用于标识本局所支持的网元组信息：每个GROUPID可唯一映射为1个或多个不连续的SUPI或GPSI号码段，用来向NRF注册时使用。 数据来源：全网规划。 配置原则：互为容灾的PCF，GROUPID必须配置相同。  \r\nLOCALITY | 网元位置 | 参数可选性:任选参数；参数类型:字符型；参数范围为:0~63个字符。 | 参数作用：该参数用于标识本局的网元位置。\n\n[5]:申请License\r: 申请License\r\n\r\n摘要\r\n\r\n业务License与实例化ZXUN RCP时生成的序列号一一对应，需要根据序列号申请License文件。\r\n\r\n由于不同版本License的选项不一样，License申请模板必须和使用的软件版本配套。\r\n\r\n说明：\r\n\r\n为了杜绝版本和模板错配问题，申请前要核实现网版本或者指定开局版本。\r\n\r\n相关信息\r\n\r\n由于制作License使用自动化审核和制作工具，因此License申请文件必须按照如下要求填写。\r\n\r\n  * 每个License申请文件只能包含“填写说明”，“OAM-License模板”、“application-information”三个页签。\r\n\r\n  * 禁止修改“填写说明”和“OAM-License模板”页签的内容和名称。\r\n\r\n  * 实际申请的License信息请填写在页签“application-information”中。\r\n\r\n  * 每个局点对应一个License 申请单，每个申请单只能有一个申请文件。文件名以网元的NF名称保存，必须保存为.xls的文件。\r\n\r\n说明：\r\n\r\n文件名不能超过75字符，否则工具会读取失败。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n填写License申请模板\r\n\r\n  1. 从版本文件的license目录下获取license申请模板/versions/tools/license/License_application_template_5GC.xls。\r\n\r\n  2. 在application-information页签中按照实际情况填写网元信息和容量信息。\r\n\r\n     * 网元信息\r\n\r\n网元信息填写规范参见表1。\r\n\r\n表1 网元信息填写规范项目| 填写说明  \r\n---|---  \r\n网元标识| NF实例名称，例如：APP-HDBNJahAMF001BZX-03AZX011。  \r\n设备序列号| 填写ZXUN RCP网元的序列号。注意：填写时前后不能有空格。获取序列号方法：\r\n       1. 使用admin用户登录EM(Element Management, 网元管理)客户端。\r\n       2. 在配置页面，展开PCF→PCF_x节点。\r\n       3. 在PCF_x下执行SHOW NFSN命令查询ZXUN RCP网元的序列号。  \r\n网元产品名称| NF名称，例如：APP-HDBNJahAMF001BZX-03AZX011。  \r\n网元版本号| 网元版本号，例如：`V7.20.21.B5`。  \r\n有效期| 填写格式必须为：`yyyy/mm/dd`。如果没有特殊要求，固定填写`2099/12/31`。  \r\n网元位置| 填写实际的省份和城市。  \r\n网元类型| 保持模板中的内容不变。  \r\n  \r\n     * 容量信息\r\n\r\nLicense申请模板中网元的功能和容量必须按合同规定值填写。\r\n\r\n说明：\r\n\r\n如果填写人员不清楚合同规定，需与售前技术人员确认或联系中兴通讯技术支持进行确认。\r\n\r\n容量填写规范如下：\r\n\r\n       * 模板中容量控制项是纯数字格式，填写时必须是准确的数字，没有单位。\r\n\r\n       * 容量值必须在模板注明的容量范围内，不允许超过容量值的最小和最大范围。\r\n\r\n  3. 填写完成后保存文件。\r\n\r\n\r\n\r\n\r\n申请License文件\r\n\r\n  1. 登录CSC系统（http://csc.zte.com.cn）。\r\n\r\n  2.", "answer": "不可以使用同一个License申请文件申请。根据上下文信息：\n\n1. 每个PCF网元都要填写一个申请单。一个申请单中不能包含多个网元。\n2. 每个局点对应一个License申请单，每个申请单只能有一个申请文件。\n3. 文件名以网元的NF名称保存，必须保存为.xls的文件。\n\n这表明每个PCF网元需要有一个独立的License申请文件，且文件名需要以对应的网元NF名称命名，因此即使是同一个版本、在同一个环境下部署的多套PCF网元，也需要分别为每个网元准备单独的License申请文件。"}
{"id": 43, "query": "Director的部署工具是什么", "recall": "[1]:概述\r: 概述\r\n\r\n产品概述\r\n\r\nTECS Director定位ICT融合的电信级云管理平台，提供对私有云、公有云和混合云整合管理的产品，既能支持运营商NFV的CT场景（NFVIM），也能为IT场景及行业应用提供ICT融合的解决方案，并为运营商提供面向企业的类公有云的服务整体解决方案。\r\n\r\n借助TECS Director，客户可以将多个数据中心的异构资源整合，物理分布、逻辑统一，实现多数据中心资源池的统一纳管、统一编排和运维；开放IaaS服务能力；基于VDC和组织的运营能力，通过资源服务化，服务差异化、自动化，从而构建多租户异构云混合云，为用户提供统一的运营管理门户和自服务门户。TECS Director在整个TECS系统中的位置如图1所示。\r\n\r\n图1 TECS Director的定位\r\n\r\n部署架构\r\n\r\nTECS Director总体部署架构如图2所示。\r\n\r\n图2 TECS Director部署架构\r\n\r\n部署组成：\r\n\r\n  * DaisySeed： 部署工具。用户同DaisySeed工具交互完成整个Director系统的部署； DaisySeed自身安装灵活，既可以安装在PC机也可以虚机，既有windows版本也有linux版本；\r\n\r\n  * 基础设施： 部署目标。Director支持部署在裸机或者虚机上，裸机和虚机对应不同的节点，网络，存储配置，以及不同的部署模板； \r\n\r\n  * 软件系统： 部署对象。Director的软件系统，包含内嵌的TCF平台，数据库与中间件和Director应用；\r\n\r\n  * Daisy：软件系统的一部分，负责同DaisySeed交互协同，完成整个Director系统的部署； 同时，Daisy 也是后续Director升级入口工具。\r\n\r\n\r\n\r\n\r\nTECS Director的物理机部署时序如图3所示。\r\n\r\n图3 部署时序（物理机）\n\n[2]:准备模板\r: 准备模板\r\n\r\n摘要\r\n\r\nTECS Director使用daisyseed工具来部署，所以需要定义模板。首先手动编辑模板文件（excel格式），根据环境HLD规划，填写模板中的参数，最后一键生成daiyseed工具可识别的tcf模板文件。\r\n\r\n步骤\r\n\r\n  1. 参考软件版本，获取并解压模板包，解压后的文件如图1所示。\r\n\r\n图1 模板文件\r\n\r\n  2. 双击打开Deploy_Summary_Template_年月日.xlsm文件，模板打开时需要启用宏。\r\n\r\n  3. 依次填写UserLLD、网络配置和节点配置这三个sheet页。\r\n\r\n    1. 填写UserLLD，如图2所示。\r\n\r\n图2 UserLLD\r\n\r\n说明：\r\n\r\nUserLLD模板填写注意事项：\r\n\r\n       * 版本配置默认无法修改，模板随版本制作时，已经自动填上配套的版本文件（如果需要修改版本配置，则可以通过编辑summary_version_list.json，编辑完成后关闭Deploy_Summary_Template_年月日.xlsm后重新打开，即可完成自动填充）\r\n\r\n       * \"对接第三方IaaS\" 选择否\r\n\r\n       * “控制节点规格”中硬盘大小需要设置为服务器或虚机所有硬盘大小之和。\r\n\r\n       * “PXE”和“PXE#子网掩码”daisyseed服务器上PXEserver的地址和掩码 ，PXE地址池用户自己规划分配给被部署节点使用，地址池需要和“PXE”地址在同一个网段内。\r\n\r\n       * 存储配置根据环境规划进行设置大小。\r\n\r\n“部署方式”为裸机时，支持在多硬盘分区操作，在控制节点存储配置中的配额后添加具体的硬盘名，例如80|/dev/sdb；注意分区大小之和不能超过该分区总大小，比如sdb上有PG 100 G kafka有100G 则sdb要大于210 G=100+100+10（多预留10 G）\r\n\r\n“部署方式”为预置节点时，默认是2块盘（vda/vdb）,存储配置都在vdb上，6个分区的总和要小于节点上vdb盘大小-10（预留10G空间），若只有1块盘时，在生成的paas模板中的节点存储模板sheet页中将对应的/dev/vdb修改成/dev/vda；6个分区的总和要小于节点上sda（或vda)实际大小减去430 G ，例如：节点sda有1.2 T大小，则填写的6个分区总和要小770 G（1200-430）\r\n\r\n       * 共享存储卷\r\n\r\nElasticSearch备份：如果非容灾环境则默认值20 G，如果容灾环境配置为50 G。\r\n\r\nFTP：如果需要上传使用镜像文件，则可以最大给到共享存储卷的80%，如果没有镜像文件，则使用默认值100 G。\r\n\r\n       * “版本信息” 检查版本信息是否和实际获取到的版本相同，如果版本不一致，需要手动修改模板中版本信息。 \r\n\r\n    2. 填写网络配置，物理机网络配置如图3所示，租户网络配置（可选）如图4所示，虚机网络配置如图5所示。\n\n[3]:单独部署TECS Director\r: 单独部署TECS Director\r\n\r\n摘要\r\n\r\n本节介绍如何在不重新部署TCF平台版本的情况下部署TECS Director版本。通常适用于新版本TECS Director的重新安装。\r\n\r\n步骤\r\n\r\n  1. 登录首节点，将JDK包和TCF-Director版本包上传到首节点，比如上传到/home/ubuntu。\r\n\r\n  2. 将TCF-Director版本包解压到/paasdata目录下。\r\n    \r\n        tar -xvf /home/ubuntu/Director-V8.22.10.06.x64-TCF-20220325063000.tar -C \r\n    /paasdata/\r\n\r\n  3. 将JDK包解压到/paasdata/版本包/sources/director/director_commonimage_V1.0.0/base-images目录下。\r\n    \r\n        tar -xvf /home/ubuntu/20220309120000-x64-TCF-openjdk.tar -C /paasdata/\r\n    Director-V8.22.10.06.x64-MEO/sources/director/director_commonimage_V1.0.0/\r\n    base-images/\r\n\r\n  4. 复制配置文件到新版本解压目录下。\r\n\r\n老版本该路径：/paasdata/版本包/install-script/config/下的deployConfig.ini和cassandra_gr_network.json文件，复制到新版本相同路径下。\r\n\r\n  5. 执行部署前检查：（在install-script目录下执行）\r\n    \r\n        sh check_before_install.sh\r\n    [root@paas-controller1:/paasdata/Director-V8.21.40.06.x64-TCF/install-script]$ sh \r\n    check_before_install.sh\r\n    Please enter the number of nodes used by Director(1-3):   //输入环境的节点数\r\n    Please input tecs tcfportal page admin user password:         \r\n    //输入登录tecs tcf界面admin用户的密码\r\n    Please input tecs tcfportal page director user default password:     \r\n    //设置director用户登录tecs tcf\r\n    界面的密码（director用户此时还不存在，通过这个输入设置后续该用户登录密码）\r\n\r\n  6. 执行部署：（在install-script目录下执行）\r\n\r\n     * IT子场景部署命令 （仅适用于TCF通用版本）\r\n        \r\n                nohup sh deploy.sh install scene=IT &\r\n\r\n     * CT子场景部署命令（仅适用于TCF通用版本）\r\n        \r\n                nohup sh deploy.sh install scene=CT &\r\n\r\n     * IT+CCM 场景部署命令：（适用于TCF通用版本、CCM版本、MEO版本）\r\n        \r\n                nohup sh deploy.sh install &\n\n[4]:系统管理\r: 系统管理\r\n\r\n子主题：\r\n\r\n  * 配置北向参数\r\n\r\n  * 配置南向参数\r\n\r\n  * 配置第三方备份服务器\r\n\r\n  * 配置Internet代理\r\n\r\n  * 设置DNS\r\n\r\n  * 设置分域\r\n\r\n  * 管理证书\r\n\r\n  * 修改公共服务密码\r\n\r\n  * 配置日志\r\n\r\n  * 设置Qos告警\r\n\r\n  * 管理日志提醒\r\n\r\n  * 备份恢复\r\n\r\n  * 导入许可证\r\n\r\n  * 诊断工具\r\n\r\n  * 配置杀毒\r\n\r\n  * 设置消息通知\r\n\r\n  * 管理公告和建议\r\n\r\n  * 设置审批系统\r\n\r\n  * 配置资源\r\n\r\n  * 管理配额参数\r\n\r\n  * 配置资源映射\r\n\r\n  * 网络协议栈改配\n\n[5]:资源纳管\r: 基础设施即服务)基础架构，一个数据中心内可以包含一个或多个同构/异构的云环境。TECS Director与云环境之间支持采用双向认证，并支持单点登录云环境。\r\n\r\n云环境生命周期管理包括在数据中心中添加云环境、删除云环境、编辑云环境以及对云环境资源的管理和监控。\r\n\r\nTECS Director在管理云环境时还支持对该云环境的存量资源纳管，如支持将用户在阿里云门户上已经创建的ECS（指虚机）加入TECS Director，并进行统一管理。TECS Director在纳管存量虚机的同时，会把该虚机挂载的云硬盘及VPC(Virtual Private Cloud, 虚拟私有云)信息同步到系统中。\r\n\r\n在边缘云等场景中，受限于资源和网络等条件，TECS Director无法通过无限制的资源扩容纳管数以万计的边缘站点，基于此情形TECS Director提供云管级联功能，将一个区域划分为多个子区域，每个子区域部署独立的云管。在区域部署集中云管统一管理子区域的所有云管，并提供树形、拓扑等方式的层次化展示。\r\n\r\n  * 可用域管理\r\n\r\n可用域（AvailableZone）是一组节点的集合，这组节点具有独立的电力供应设备，比如一个个独立供电的机房，一个个独立供电的机架都可以被划分成AZ(Availability Zone, 可用性区域)，所以可提供AZ的冗余来解决可用性问题。\r\n\r\n  * 主机集群管理\r\n\r\n主机集群（Host Aggregates）是管理员用来根据硬件资源的某一属性（如使用固态硬盘的机器，内存超过32 G的机器）来对硬件进行划分的功能，只对管理员可见。TECS OpenStack在部署虚拟机时，调度器会根据虚拟机的属性选择合适的Host Aggregates。\r\n\r\n主机集群的管理包括创建集群、删除主机集群，查询主机集群等。\r\n\r\n同时TECS Director还支持多数据中心的主机集群策略统一管理，支持的集群策略包括DPM统一管理和DRS统一管理。DPM策略包括DPM启用配置，DPM策略配置。\r\n\r\nDRS(Dynamic Resource Scheduling, 动态资源调度)策略包括DRS启用配置，DRS策略配置。\r\n\r\n  * 主机管理\r\n\r\n主机是运行了虚拟化软件的物理服务器，用以运行虚拟机。主机为虚拟机提供CPU(Central Processing Unit, 中央处理器)和内存资源，以及图形处理器、USB(Universal Serial Bus, 通用串行总线)设备、网络连接和存储访问等能力。同一台主机可以同时运行多台虚拟机。\r\n\r\n主机管理包括将主机加入主机集群、从主机集群中移除主机、主机信息查询等。\r\n\r\n  * 虚拟机管理\r\n\r\n虚拟机是在物理服务器上划分出来的一台或者多台虚拟化的计算机系统。", "answer": "Director的部署工具是DaisySeed。"}
{"id": 44, "query": "如果虚机规格已发布到云上，修改本地规格会同步修改云上的规格吗？", "recall": "[1]:发布虚机规格\r: 发布虚机规格\r\n\r\n摘要\r\n\r\nTECS Director支持向指定云环境发布虚机规格。\r\n\r\n本节描述发布虚机规格的操作步骤。\r\n\r\n前提\r\n\r\n使用超级管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择基础设置→虚拟资源→计算→规格，打开规格页面。\r\n\r\n  2. （可选）单击列表中某个虚机规格名称，可查看该虚机规格的详细信息，包括基本信息和已发布云环境列表，如图1所示。\r\n\r\n图1 查看某个虚机规格信息\r\n\r\n  3. 在本地规格列表中，对于需要发布的虚机规格，单击操作列下的**发布** ，打开**发布** 页面，如图2所示。\r\n\r\n图2 发布虚机规格页面\r\n\r\n  4. 选择发布虚机规格的云环境，已选择的云环境会呈现在右侧已选云环境区域框中，单击**确认** 完成发布，如图3所示。\r\n\r\n图3 选择云环境\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n  * 在左侧功能导航树中，选择虚机规格→云规格，打开**云规格** 页面，可查询发布的虚机规格情况，如图4所示。\r\n\r\n图4 云规格页面\r\n\r\n  * 在**本地规格** 页面，对于某个虚机规格，单击操作列下的**删除** ，可删除该虚机规格，同时可以选择是否删除云上的虚机规格，如图5所示。\r\n\r\n图5 删除虚机规格\r\n\r\n  * 在**本地规格** 页面，对于某个虚机规格，单击操作列下的配置扩展属性按钮，可对虚机规格的属性进行编辑，如图6所示。本地规格的修改会同步到已发布云环境的云规格。\r\n\r\n图6 配置扩展属性\r\n\r\n  * 在本地规格页面，单击右上角的查看历史任务按钮，可查看发布虚机规格、删除本地规格、配置扩展属性的操作记录及完成情况，如图7所示。\r\n\r\n图7 查看历史任务\n\n[2]:发布虚机规格\r: 发布虚机规格\r\n\r\n摘要\r\n\r\nTECS Director支持向指定云环境发布虚机规格。\r\n\r\n本节描述发布虚机规格的操作步骤。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择基础设施→虚拟资源→计算→规格，打开规格页面。\r\n\r\n  2. （可选）单击列表中某个虚机规格名称，可查看该虚机规格的详细信息，包括基本信息和已发布云环境列表，如图1所示。\r\n\r\n图1 查看某个虚机规格信息\r\n\r\n  3. 在本地规格列表中，对于需要发布的虚机规格，单击操作列下的**发布** ，打开**发布** 页面，如图2所示。\r\n\r\n图2 发布虚机规格页面\r\n\r\n  4. 选择发布虚机规格的云环境，已选择的云环境会呈现在右侧已选云环境区域框中，单击**确认** 完成发布，如图3所示。\r\n\r\n图3 选择云环境\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n  * 在左侧功能导航树中，选择虚机规格→云规格，打开**云规格** 页面，可查询发布的虚机规格情况，如图4所示。\r\n\r\n图4 云规格页面\r\n\r\n  * 在**本地规格** 页面，对于某个虚机规格，单击操作列下的**删除** ，可删除该虚机规格，同时可以选择是否删除云上的虚机规格，如图5所示。\r\n\r\n图5 删除虚机规格\r\n\r\n  * 在**本地规格** 页面，对于某个虚机规格，单击操作列下的配置扩展属性按钮，可对虚机规格的属性进行编辑，如图6所示。本地规格的修改会同步到已发布云环境的云规格。\r\n\r\n图6 配置扩展属性\r\n\r\n  * 在本地规格页面，单击右上角的查看历史任务按钮，可查看发布虚机规格、删除本地规格、配置扩展属性的操作记录及完成情况，如图7所示。\r\n\r\n图7 查看历史任务\n\n[3]:虚机规格管理\r: 虚机规格管理\r\n\r\n虚机规格用来描述创建一个虚机时申请的计算资源大小，包括虚拟内核、虚拟内存和虚拟磁盘。\r\n\r\n目前虚机规格分为本地规格和云规格。本地规格是领域管理员通过云管创建的本地虚机规格，云规格是云上实际具有的规格。本地规格可以选择发布到具体的云环境，成为云规格。\r\n\r\n子主题：\r\n\r\n  * 创建虚机规格\r\n\r\n  * 创建加速硬件规格\r\n\r\n  * 发布虚机规格\n\n[4]:虚机规格管理（可选）\r: 虚机规格管理（可选）\r\n\r\n虚机规格用于创建虚机，虚机规格包括虚拟内核个数、内存大小、磁盘空间大小、元数据等。\r\n\r\n云环境一般存在默认的虚机规格，如果默认的虚机规格无法满足要求，需要云管理员创建虚机规格，并发布到云环境中。\r\n\r\n子主题：\r\n\r\n  * 创建虚机规格\r\n\r\n  * 发布虚机规格\n\n[5]:创建虚机规格\r: 创建虚机规格\r\n\r\n摘要\r\n\r\n本节描述创建虚机规格的操作步骤。\r\n\r\n前提\r\n\r\n使用领域管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择基础设施→虚拟资源→计算→规格，打开规格页面，默认显示本地规格页签，如图1所示。\r\n\r\n图1 规格页面\r\n\r\n  2. 单击创建本地规格按钮，打开创建本地规格页面，如图2所示。\r\n\r\n图2 创建本地规格\r\n\r\n  3. 根据规划设置参数，单击创建按钮。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n如果…| 那么…  \r\n---|---  \r\n删除虚机规格| 在虚机规格列表的操作列中单击删除按钮，可删除已创建的虚机规格。  \r\n发布虚机规格| 在虚机规格列表的操作列中，单击下拉菜单项发布，可发布已创建的虚机规格。", "answer": "是的，本地规格的修改会同步到已发布云环境的云规格。这是在上下文信息中提到的，在**本地规格**页面，对于某个虚机规格，如果进行了修改，那么这个修改会同步到已经发布该虚机规格的云环境中的云规格。"}
{"id": 45, "query": "PCF通过Nnrf接口完成什么功能？", "recall": "[1]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性间交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\nNRF(NF Repository Function, 网络仓储功能)| 网络功能存储功能。用于接收服务提供者的注册信息，供服务使用者发现服务提供者。  \r\n  \r\n描述\r\n\r\n定义\r\n\r\nNnrf接口是NRF提供的服务化接口，用于NRF和5GC各网络功能（NF）之间的消息交互。\r\n\r\nPCF通过Nnrf接口完成如下功能：\r\n\r\n  * 通过Nnrf对外提供服务\r\n\r\nPCF向NRF注册本网元和服务的注册信息，以及允许哪些网元和服务访问本网元和服务的授权信息。\r\n\r\nPCF向NRF更新本网元和服务的注册信息，以及允许哪些网元和服务访问本网元和服务的授权信息。\r\n\r\nPCF向NRF注销本网元和服务的注册信息。\r\n\r\nPCF与NRF保持心跳，使得NRF可以监控到本网元状态变更。\r\n\r\n  * 从Nnrf获取其它服务信息\r\n\r\nPCF向NRF发现其它网元和服务的注册信息。\r\n\r\nPCF向NRF订阅或取消订阅其它关联网元的状态变更通知。\r\n\r\nPCF处理NRF通知的订阅关联网元的状态变更。\r\n\r\nPCF从NRF获取目标网元或服务的访问令牌。\r\n\r\n\r\n\r\n\r\n背景知识\r\n\r\n随着核心网络的演进以及产品能力的不断增强，5G核心网提供了更多更丰富的网络功能服务（NFS）。如果通过传统的工程手段来维护这些NFS，会极大推高管理运维成本，如果能够动态感知新接入的NFS，自动化管理、维护这些NFS，则会大大降低运维成本。\r\n\r\n5G核心网基于NFS自治、自动化管理的目的，引入了NRF这个自动化管理的关键网元。NRF提供一系列注册/更新注册/注销、订阅/取消订阅状态通知等服务化接口，维护整个网络内所有NFS的实时信息，类似一个容纳这些NFS的实时仓库。NRF也提供了服务发现接口，供服务使用者发现已在NRF注册的NFS信息。\r\n\r\n应用场景\r\n\r\n在服务化网络架构下，Nnrf接口是服务提供者、服务使用者与NRF之间的标准接口。PCF的Nnrf接口的应用场景如下：\r\n\r\n  * PCF向NRF注册服务，便于AMF、SMF、AF等NF发现PCF服务。\r\n\r\n  * PCF发现并订阅CHF、UDR、BSF、AMF、SMF等服务，获得计费、用户签约信息以及业务相关信息。\r\n\r\n\r\n\r\n\r\n应用场景参见表1。\r\n\r\n表1 应用场景场景| 场景描述  \r\n---|---  \r\nPCF向其它NF提供策略服务| PCF作为服务提供者，向NRF注册各种服务，供服务使用者访问：\r\n\r\n  * 向NRF注册AM策略控制服务，供AMF实施接入控制策略。\n\n[2]:特性描述\r: * 向NRF注册SM策略控制服务，供SMF实施QoS保障策略、计费策略等服务。\r\n  * 向NRF注册策略授权控制服务，供AF/NEF实施应用控制和边缘计算等策略服务。\r\n\r\n  \r\nPCF访问其它NF提供的服务| PCF作为服务使用者，向NRF查询需要访问的各种服务：\r\n\r\n  * 向NRF查询消费限额服务，PCF根据消费限额决策，向SMF下发各种QoS保障策略、计费策略等服务。\r\n  * 向NRF查询绑定支持服务，PCF向BSF写入终端的绑定信息，供后续AF/NEF访问到相同PCF。\r\n  * 向NRF查询用户数据服务，PCF根据用户签约等信息决策，向SMF下发各种Qos保障策略、计费策略等服务。\r\n\r\n  \r\n  \r\n客户收益\r\n\r\n运营商和终端用户的收益说明参见表2。\r\n\r\n表2 收益说明收益方| 收益说明  \r\n---|---  \r\n运营商| \r\n\r\n  * 本接口提供服务发现能力。可自动构建服务化网络结构，简化网络维护。\r\n  * 自动维护服务可用性，提升网络服务质量。\r\n\r\n  \r\n终端用户| 不感知网络结构变化，享受更高质量的网络服务。  \r\n  \r\n实现原理\r\n\r\n系统架构\r\n\r\nPCF与NRF的拓扑关系如图1所示。\r\n\r\n图1 系统架构\r\n\r\n各网元作用\r\n\r\n涉及的网元及其功能参见表3。\r\n\r\n表3 涉及的网元网元| 描述  \r\n---|---  \r\nPCF| \r\n\r\n  * 向NRF注册、更新或注销本网元和服务的注册信息，以及允许哪些网元和服务访问本网元和服务的授权信息。\r\n  * 向NRF查询其它网元和服务的注册信息。\r\n  * 和NRF保持心跳，使得NRF可以监控到本网元状态变更。\r\n  * 向NRF订阅或取消订阅其它关联网元的状态变更通知。\r\n  * 从NRF获取目标网元或服务的访问令牌。\r\n\r\n  \r\nNRF| \r\n\r\n  * 接收和保存网元和服务的注册信息和授权信息。\r\n  * 接收网元和服务查询请求，返回查询结果。\r\n  * 和网元保持心跳，监控网元状态。\r\n  * 处理网元状态订阅请求，当被订阅方网元状态变化时，向订阅方网元返回最新的被订阅方网元状态。\r\n  * 处理PCF获取目标网元和服务的访问令牌的请求，返回访问令牌。\r\n\r\n  \r\n  \r\n协议栈\r\n\r\nPCF与NRF间的Nnrf接口协议栈如图2所示。\r\n\r\n协议栈中的TLS为可选协议，当需要考虑传输层数据安全保护时，可以使用该协议。\r\n\r\n图2 Nnrf接口协议栈\r\n\r\n本网元实现\r\n\r\n消息描述\r\n\r\nNnrf接口支持的消息参见表4。\n\n[3]:接口\r: Nbsf| PCF(Policy Control Function, 策略控制功能)| BSF(Binding Support Function, 绑定支持功能)| HTTP/2+JSON| Nbsf是BSF提供的服务化接口。PCF可以通过Nbsf接口调用Nbsf_Management服务的注册、更新注册或注销PCF绑定信息。  \r\nNnrf | PCF(Policy Control Function, 策略控制功能)| NRF(NF Repository Function, 网络仓储功能)| HTTP/2+JSON| Nnrf接口用于调用Nnrf_NFManagement服务的API(Access Point Identifier, 接入点标识)注册、更新或去注册PCF(Policy Control Function, 策略控制功能)相关的服务。  \r\nSMS| PCF(Policy Control Function, 策略控制功能)| SMSC(Short Message Service Center, 短消息中心)| SMPP(Short Message Peer to Peer Protocol, 短消息点对点协议)/CMPP(China Mobile Peer to Peer, 中国移动点对点协议)/SGIP(Short Message Gateway Interface Protocol, 中国联合通信公司短消息网关系统接口协议)/SMGP(Short Message Gateway Protocol, 中国电信短消息网关协议)/CNGP(China Netcom Short Message Gateway Protocol, 中国网通短消息网关协议)| SMS接口用于PCF/PCRF发送策略控制相关的SMS通知。  \r\nEmail| PCF(Policy Control Function, 策略控制功能)| Email服务器| SMTP | Email接口用于PCF/PCRF发送策略控制相关的Email通知。\n\n[4]:特性描述\r: 图2 Nnrf接口协议栈\r\n\r\n本网元实现\r\n\r\n消息描述\r\n\r\nNnrf接口支持的消息参见表4。\r\n\r\n表4 Nnrf接口支持的消息NF| 服务| 操作| 操作语义| 说明  \r\n---|---|---|---|---  \r\nNRF| Nnrf_NFManagement| NFRegister| Request/Response| PCF向NRF注册本网元和服务信息。  \r\nNFUpdate| Request/Response| PCF向NRF更新本网元和服务信息。  \r\nNFDeregister| Request/Response| PCF向NRF注销本网元和服务信息。  \r\nNFStatusSubscribe| Subscribe/Notify| PCF向NRF订阅关联网元和服务的状态变更通知。  \r\nNFStatusNotify| Subscribe/Notify| NRF向PCF通知PCF所订阅的关联网元和服务的状态变更。  \r\nNFStatusUnSubscribe| Subscribe/Notify| PCF向NRF取消订阅关联网元和服务的状态变更通知。  \r\nNnrf_NFDiscovery| Request| Request/Response| PCF向NRF查询关联的网元和服务。  \r\nNnrf_AccessToken| Get| Request/Response| PCF从NRF获取目标网元和服务的访问令牌。  \r\n  \r\nPCF向NRF注册NF/NFS信息\r\n\r\nPCF通过NFRegister操作向Nnrf_NFManagement服务请求注册本网元和服务信息。\r\n\r\n注册的触发时机：\r\n\r\n  * 自动注册\r\n\r\n自动注册是PCF部署完成且业务进程正常上电，当检测到NF和各个NFS的注册能力都具备后，会向NRF发起注册请求，NRF返回注册成功响应后完成注册流程。在NF和NFS的服务能力未完整具备前，业务会重复这个检测流程直至PCF向NRF注册完成。\r\n\r\n自动注册需要满足以下所有条件：\r\n\r\n    * Npcf_PolicyManagement中存在本局配置（Diameter主机名和Diameter域名），CommonS_TMSP中有PCF的NFID。\r\n\r\n    * 服务号段配置不为空或者NRF策略配置允许无号段注册。\r\n\r\n    * 服务配置中必须配置基础服务NPcf，且至少配置一个PCF服务，例如，Npcf_SMPolicyControl。\r\n\r\n  * 重新注册\r\n\r\n重新注册是指在PCF锚定的注册容器发生切换，或者NRF服务器回复心跳失败应答，或者NRF回复注册更新失败应答时，PCF向NRF服务器发起重新注册。\r\n\r\n  * 手动注册\r\n\r\n手动注册是通过执行人机命令注册，用于异常场景（例如，有故障或网络问题等导致PCF与NRF服务器的注册信息不一致）下强制注册。如果执行过人机命令手动注销，此时PCF不会自动再向NRF注册，必须使用人机命令手动注册。\r\n\r\n\r\n\r\n\r\nPCF向NRF更新NF/NFS信息\r\n\r\nPCF通过NFUpdate操作向Nnrf_NFManagement服务请求更新本网元和服务信息。\r\n\r\n更新分为全量更新和增量更新。\r\n\r\n在已注册成功的情况下，执行人机命令手动注册是全量更新。其他更新操作是全量更新还是增量更新，取决于CommonS_HTTP_LB服务的全局参数60开关配置，默认值为1（0-更新数组内变更，1-PUT更新整个NFProfile，2-更新整个数组）。\r\n\r\n更新的触发时机：\r\n\r\n  * PCF本身的参数发生变化时，例如：本局配置中的FQDN、优先级等信息。\r\n\r\n  * PCF各个服务属性发生变化时，例如：服务管理配置中的服务配置参数发生变化时。\r\n\r\n  * PCF与NRF间的心跳检测发生时。\n\n[5]:特性描述\r: * PCF与NRF间的心跳检测发生时。\r\n\r\n\r\n\r\n\r\nPCF向NRF去注册NF/NFS信息\r\n\r\nPCF通过NFDeregister操作向Nnrf_NFManagement服务请求注销本网元和服务信息。\r\n\r\n去注册的触发时机：\r\n\r\n  * PCF网元的关键信息发生变化时，会触发去注册后再注册，例如：PCF的NFID发生变化。\r\n\r\n  * PCF网元人机交互命令，人为去注册本局的注册信息。\r\n\r\n  * NRF策略配置中无号段时允许注册参数设置为否，且没有配置服务号段。\r\n\r\n  * 删除服务配置中的基础服务Npcf。\r\n\r\n  * 服务配置中没有配置任何类型的NF服务。\r\n\r\n\r\n\r\n\r\nPCF向NRF订阅其他NF信息\r\n\r\nPCF通过NFStatusSubscribe操作向Nnrf_NFManagement服务订阅关联网元和服务的状态变更。\r\n\r\n订阅类型有如下两种：\r\n\r\n  * 服务发现后自动订阅：在服务发现NF后，PCF会按NF实例ID订阅某个NF。\r\n\r\n  * 手动增加订阅配置：手动增加订阅配置触发PCF订阅其它NF，订阅配置条件主要是NF类型。\r\n\r\n\r\n\r\n\r\n订阅的触发时机：\r\n\r\n当PCF的服务需要感知对端某个NF或者NFS的变化时，需要触发向NRF订阅该NF或者NFS的变更。\r\n\r\nPCF向NRF取消NF的订阅信息\r\n\r\nPCF通过NFStatusUnSubscribe操作向Nnrf_NFManagement服务取消订阅某个网元的变更通知。\r\n\r\n取消订阅的触发时机：\r\n\r\n  * 本地缓存的NF数据老化时。\r\n\r\n  * 删除订阅配置时。\r\n\r\n\r\n\r\n\r\nPCF向NRF发现其他关联NF的服务信息\r\n\r\nPCF通过Nnrf_NFDiscovery Request向NRF发起服务发现请求，携带查询过滤条件，Nnrf_NFDiscovery服务通过响应消息返回满足条件的服务列表。\r\n\r\n目前常见需要PCF主动发现的服务是UDR网元的\"nudr-dr\"和BSF网元的\"nbsf-management\"服务，分别为PCF提供签约数据能力和会话绑定能力。\r\n\r\n服务发现请求除了携带主要常见参数，还可以携带优选区域参数（preferred-locality）。\r\n\r\n目前针对服务发现返回的数据，PCF在本地做了缓存，以提高发现的性能和效率。\r\n\r\n缓存的有效性保障：\r\n\r\n  * 依赖于缓存设置的老化时间。\r\n\r\n当老化时间到期，老化缓存记录，PCF向NRF发送发现请求，收到NRF返回的响应后，重新缓存发现的数据。\r\n\r\n  * 依赖于PCF对关联网元的订阅事件。\r\n\r\n当PCF订阅了关联网元的变化后，在对端网元信息发生变化时，NRF会触发变更通知给PCF，PCF针对变更信息的具体内容更新本地缓存。\r\n\r\n\r\n\r\n\r\n业务流程\r\n\r\n注册流程\r\n\r\n为了让服务使用者能够发现PCF服务，当PCF状态可用时，需要向NRF注册其属性信息，流程如图3所示。\r\n\r\n图3 注册流程\r\n\r\n  1. PCF以PUT方式向NRF发送Nnrf_NF Management_NF Register消息，同时在消息中携带NF实例的属性信息NFProfile。", "answer": "PCF通过Nnrf接口完成以下功能：\n\n  * 对外提供服务：\n    - 向NRF注册本网元和服务的注册信息。\n    - 更新本网元和服务的注册信息。\n    - 注销本网元和服务的注册信息。\n    - 与NRF保持心跳，使得NRF可以监控到本网元状态变更。\n\n  * 获取其他服务信息：\n    - 向NRF发现其他网元和服务的注册信息。\n    - 向NRF订阅或取消订阅其他关联网元的状态变更通知。\n    - 处理NRF通知的订阅关联网元的状态变更。\n    - 从NRF获取目标网元或服务的访问令牌。"}
{"id": 46, "query": "命令行部署失败后，如果要断点续装，执行什么命令？", "recall": "[1]:命令行部署\r: 命令行部署\r\n\r\n摘要\r\n\r\n介绍在linux系统下如何使用命令行执行部署。\r\n\r\n步骤\r\n\r\n  1. 执行部署，分为两种情况：\r\n\r\n     * 重新部署\r\n\r\n       1. 停止Daisyseed\r\n            \r\n                        sudo ps -ef|grep -E \"app.py\" |grep -v grep|awk '{print $2}'|xargs -i kill -9 {}\r\n\r\n       2. 清理前一次部署状态Install State\r\n            \r\n                        cd /root/daisyseed_v3/daisyseed/daisyseed/output/state/\r\n            rm -rf *\r\n\r\n       3. 启动 Daisyseed\r\n            \r\n                        nohup python3 /root/daisyseed_v3/daisyseed/daisyseed/app.py > seed.log 2>&1 &\r\n\r\n       4. 启动部署（前面步骤执行完，建议等待30秒，再执行）\r\n            \r\n                        python3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py \r\n            /root/daisyseed_v3/daisyseed/daisyseed/template/seed_cmd_config.ini\r\n\r\n     * 断点续装\r\n        \r\n                python3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py /root/daisyseed_v3\r\n        /daisyseed/daisyseed/template/seed_cmd_config.ini --redeploy=no\r\n\r\n\r\n\r\n  1. 查询部署日志\r\n\r\nSSH到daisyseed，切换到root用户，执行如下命令查询部署进展（部署时长大概需要180-240分钟左右）\r\n    \r\n        tail -f /root/daisyseed_v3/daisyseed/daisyseed/output/daisyseed.log\r\n\r\n出现如下的日志代表部署完成。\r\n\r\n登录账户：\r\n    \r\n        director  portal ：https://<tecsclient IP>/uportal    admin /Zenap_123!@#\r\n    tcf portal : https://<运维网络浮动IP>:1043/ngportal   admin /Keystone123    \r\n    director/Keystone123\r\n    daisy portal：https://<运维网络浮动IP>:18080  dmin /Keystone123\r\n\r\n查看PaaS控制节点部署日志（此日志不一定在首节点，需要查看每个节点）：\r\n    \r\n        tail -f /var/log/cosmos_deploy.log\r\n\r\n  2. 如果PaaS部署失败初步定位\r\n    \r\n        pdm-cli task list\r\n    pdm-cli task show uuid|grep fail\r\n\r\n  3. 查询PaaS是否部署成功\r\n    \r\n        pdm-cli paas_status get\n\n[2]:daisyseed分区扩容\r: 命令执行失败\r\n\r\n执行失败后，执行 xfs_growfs -p -F /dev/mapper/ncl-lv_P 命令\r\n    \r\n        [root@opencos_103 mapper]# df -h\r\n    Filesystem Size Used Avail Use% Mounted on\r\n    /dev/mapper/vg_sys-lv_root 113G 6.2G 101G 6% /\r\n    devtmpfs 7.8G 0 7.8G 0% /dev\r\n    tmpfs 7.8G 0 7.8G 0% /dev/shm\r\n    tmpfs 7.8G 42M 7.8G 1% /run\r\n    tmpfs 7.8G 0 7.8G 0% /sys/fs/cgroup\r\n    /dev/sda1 380M 117M 240M 33% /boot\r\n    \r\n        # lvcreate创建卷组全部大小的逻辑卷LV\r\n    \r\n    [root@host-10-47-205-42 ~]# vgdisplay vg_irosdb\r\n    --- Volume group ---\r\n    VG Name vg_irosdb\r\n    System ID \r\n    Format lvm2\r\n    Metadata Areas 1\r\n    Metadata Sequence No 1\r\n    VG Access read/write\r\n    VG Status resizable\r\n    MAX LV 0\r\n    Cur LV 0\r\n    Open LV 0\r\n    Max PV 0\r\n    Cur PV 1\r\n    Act PV 1\r\n    VG Size 100.00 GiB\r\n    PE Size 4.00 MiB\r\n    Total PE 25599\r\n    Alloc PE / Size 0 / 0 \r\n    Free PE / Size 25599 / 100.00 GiB\r\n    VG UUID rLVvv3-sJmc-8l8h-pkld-VrOA-UuEN-7yZcG3\r\n    \r\n    [root@host-10-47-205-42 ~]# lvcreate -l 25599 -n lv_irosdb vg_irosdb\r\n    Logical volume \"lv_irosdb\" created.\n\n[3]:下电和重启节点\r: 下电和重启节点\r\n\r\n摘要\r\n\r\n本节介绍如何对节点进行下电和重启操作。\r\n\r\n步骤\r\n\r\n获取节点地址\r\n\r\n  1. 使用SSH方式登录Director，具体操作参见SSH方式登录Director。\r\n\r\n  2. 查看节点列表并找到待下电或待重启的节点的net_api地址，具体操作参见查看Director节点列表。\r\n\r\n\r\n\r\n\r\n对节点进行下电操作\r\n\r\n  1. 使用命令pdm-cli shutdown <net_api地址>，对节点进行下电。\r\n\r\n说明：\r\n\r\n在节点有故障的情况下，此命令可能无法执行成功（会长时间挂住），若等待10分钟后还未完成，直接执行下一步骤。\r\n\r\n如果要对所有节点关机，则不加任何参数执行命令pdm-cli shutdown。\r\n\r\n  2. 切断节点电源。\r\n\r\n\r\n\r\n\r\n重启节点\r\n\r\n  1. 使用命令pdm-cli reboot <net_api地址>，对节点进行重启。\r\n\r\n说明：\r\n\r\n在节点有故障的情况下，此命令可能无法执行成功（会长时间挂住），若等待10分钟后还未完成，可直接对节点硬重启（切断电源或者在服务器中进行带外重启）。\n\n[4]:网卡固化（可选）\r: 网卡固化（可选）\r\n\r\n网卡固化操作仅在虚机场景下执行。SSH到有版本包的节点上，进入/paasdata/<director版本包>/install-script/mytools/nic_curing目录下，执行如下命令：\r\n    \r\n    \r\n    mkdir -p /etc/udev/rules.d\r\n    cp nic_name.sh /root/\r\n    cp 10-nic-name.rules /etc/udev/rules.d\r\n    \r\n    cd /root && sh nic_name.sh\r\n\r\n每个节点重复执行上述操作。\n\n[5]:daisyseed分区扩容\r: The new table will be used atthe next reboot \r\n    or after you run partprobe(8) or kpartx(8)Syncing disks.[root@opencos_103 mapper]#\r\n    # 重新发现一下硬盘分区\r\n    [root@opencos_103 ~]# partprobe\r\n    # 上面步骤新增了一个/dev/sda4 的分区，在上面创建 pv\r\n    [root@opencos_103 mapper]# pvcreate /dev/sda4Physical volume \"/dev/sda4\" \r\n    successfully created\r\n    # /盘是在 vg_sys 这个vg，所以将新增盘扩充到 vg_sys 这个vg 中\r\n    [root@opencos_103 mapper]# vgextend vg_sys /dev/sda4Volume group \"vg_sys\" \r\n    successfully extended\r\n    # 扩充后，vg_sys大小改变了\r\n    [root@opencos_103 mapper]# vgsVG #PV #LV #SN Attr VSize VFree cinder-volumes \r\n    1 0 0 wz--n- 20.11g 20.11gvg_sys 2 2 0 wz--n- 116.18g 64.23g\r\n    [root@opencos_103 mapper]# df -kFilesystem 1K-blocks Used Available Use% \r\n    Mounted on/dev/mapper/vg_sys-lv_root 51474912 6397064 42440024 14% \r\n    /devtmpfs 8117320 0 8117320 0% /devtmpfs 8161104 0 8161104 0% \r\n    /dev/shmtmpfs 8161104 42232 8118872 1% /runtmpfs 8161104 0 8161104 0% \r\n    /sys/fs/cgroup/dev/sda1 388480 119076 244828 33% /boot\r\n\r\n  2. 扩充LV（不建议对TECS 操作系统进行根目录进行扩充，可能导致系统启动失败）\r\n    \r\n        # 给 / 盘扩充 60G 空间\r\n    [root@opencos_103 mapper]# lvextend -L +64G /dev/mapper/vg_sys-lv_rootExtending \r\n    logical volume lv_root to 114.00 GiBLogical volume lv_root successfully resized\r\n    [root@opencos_103 mapper]# vgchange -a y vg_sys2 logical volume(s) in volume \r\n    group \"vg_sys\" now active\r\n    # 此时还没有成功，还需要执行下一步\r\n    [root@opencos_103 mapper]# resize2fs /dev/mapper/vg_sys-lv_root\r\n\r\n命令执行成功\r\n    \r\n        resize2fs 1.42.9 (28-Dec-2013)\r\n    Filesystem at /dev/mapper/vg_sys-lv_root is mounted on /; on-line resizing required\r\n    old_desc_blocks = 7, new_desc_blocks = 15\r\n    The filesystem on /dev/mapper/vg_sys-lv_root is now 29884416 blocks long.", "answer": "命令行部署失败后，如果要进行断点续装，需要执行的命令是：\n\n```\npython3 /root/daisyseed_v3/daisyseed/daisyseed/seed_cmd.py /root/daisyseed_v3/daisyseed/daisyseed/template/seed_cmd_config.ini --redeploy=no\n```"}
{"id": 47, "query": "中移报表功能中，哪些日志是需要SPR提供的？", "recall": "[1]:特性描述\r: SOAP(Simple Object Access Protocol, 简单对象访问协议)响应最大返回的记录条数| 目前只支持64条。  \r\n  \r\n可获得性\r\n\r\n版本要求及变更记录\r\n\r\n特性版本| 发布版本| 发布说明  \r\n---|---|---  \r\n01| V7.20.10| 首次发布。  \r\n  \r\nLicense要求\r\n\r\n该特性需要申请了License许可后，运营商才能获得该特性的服务。\r\n\r\n该特性对应License文件中的项目为LIC_RCP_FUNC_SYSLOG（策略日志），此项目显示为ON，表示ZXUN RCP支持策略日志特性。\r\n\r\n对其他网元的要求\r\n\r\n该特性需要SPR向RCP提供签约趋势日志、业务历史日志。\r\n\r\nO&M相关\r\n\r\n命令\r\n\r\n  * 配置项\r\n\r\n表5 新增配置命令配置项| 配置命令| 描述  \r\n---|---|---  \r\n数据分析基础配置| SHOW DABASE| 查询数据分析基础。  \r\nSET DABASE| 修改数据分析基础。  \r\n数据库地址配置| SHOW DATABASEIP| 新增数据库地址。  \r\nSET DATABASEIP| 修改数据库地址。  \r\nDEL DATABASEIP| 删除数据库地址。  \r\nSHOW DATABASEIP| 查询数据库地址。  \r\n对端SFTP(Secure File Transfer Protocol, 安全文件传输协议)服务器配置| ADD DAPEERSFTPSRV| 增加对端SFTP服务器。  \r\nSET DAPEERSFTPSRV| 修改对端SFTP服务器。  \r\nDEL DAPEERSFTPSRV| 删除对端SFTP服务器。  \r\nSHOW DAPEERSFTPSRV| 查询对端SFTP服务器。  \r\nSFTP客户端配置| ADD DASFTPCLIENT| 新增SFTP客户端。  \r\nSET DASFTPCLIENT| 修改SFTP客户端。  \r\nDEL DASFTPCLIENT| 删除SFTP客户端。  \r\nSHOW DASFTPCLIENT| 查询SFTP客户端。  \r\n本端SFTP服务器配置| ADD DALOCSFTPSERVER| 新增本端SFTP服务器。  \r\nSET DALOCSFTPSERVER| 修改本端SFTP服务器。  \r\nDEL DALOCSFTPSERVER| 删除本端SFTP服务器。  \r\nSHOW DALOCSFTPSERVER| 查询本端SFTP服务器。  \r\nSOAP(Simple Object Access Protocol, 简单对象访问协议)服务类型配置| ADD SOAPSRVTYPE| 新增SOAP服务类型。  \r\nSET SOAPSRVTYPE| 修改SOAP服务类型。  \r\nDEL SOAPSRVTYPE| 删除SOAP服务类型。  \r\nSHOW SOAPSRVTYPE| 查询SOAP服务类型。  \r\nSOAP接入局配置| ADD SOAPACC| 新增SOAP接入局。  \r\nSET SOAPACC| 修改SOAP接入局。  \r\nDEL SOAPACC| 删除SOAP接入局。  \r\nSHOW SOAPACC| 查询SOAP接入局。  \r\n  \r\n  * 动态管理\r\n\r\n表6 动态管理命令名称| 参数| 描述  \r\n---|---|---  \r\nCLOSE LOGFILE| 无| 关闭所有PCF正在写的策略日志文件，进行入库。  \r\nDELETE LOGFILE| TIME| 删除指定时间之前的日志文件。  \r\nRELOAD_ULFILE| 无| 重新加载上传文件。  \r\nSHOW_UPLOAD_INFO| 无| 查询上传相关信息。  \r\nCLOSE_SFTP_TRANS_LOG| 无| 关闭SFTP上传结果文件。  \r\nGBASE_INSTALL| 无| 安装GBASE数据库。  \r\nGBASE_UNINSTALL| 无| 卸载GBASE数据库。  \r\nSHOW_GBASE_STATUS| 无| 查询GBASE工作状态。  \r\n  \r\n\r\n\r\n\r\n性能统计\r\n\r\n本特性不涉及性能统计的变化。\n\n[2]:特性描述\r: * 用户投诉处理\r\n\r\n通过详尽的EDR(Event Detail Record, 事件详细记录)日志，记录用户行为数据的轨迹记录，便于用户投诉时作为依据向用户做详尽的解答，提升用户体验和信任度。\r\n\r\n  * 故障定位\r\n\r\n日志记录也可以作为网络内部问题定位的数据使用。\r\n\r\n\r\n\r\n\r\n客户收益\r\n\r\n对运营商和用户的收益说明参见表1。\r\n\r\n表1 特性收益说明收益方| 收益描述  \r\n---|---  \r\n运营商| \r\n\r\n  * 通过对日志进行网络业务分析，优化网络和部署业务。\r\n  * 通过日志获取用户行为轨迹、用户偏好，提升用户体验。\r\n\r\n  \r\n用户| 用户投诉有据可查。  \r\n  \r\n实现原理\r\n\r\n系统架构\r\n\r\n中移策略报表架构如图1所示。\r\n\r\n图1 系统架构\r\n\r\n各网元作用\r\n\r\n涉及的网元及其功能参见表2。\r\n\r\n表2 涉及的网元网元| 描述  \r\n---|---  \r\nPOP(Policy Operation Platform, 流量经营策略平台)-D| \r\n\r\n  * 作为SOAP(Simple Object Access Protocol, 简单对象访问协议)客户端向RCP(Resource Control Platform, 资源控制平台)查询相关分析/统计信息，包括用户通知历史信息、策略生效统计信息、业务变更历史信息、策略签约趋势、策略历史。\r\n  * 作为SOAP服务端RCP通过SFTP方式上传统计文件到POP-D。当统计文件上传失败时，RCP通过SOAP消息向POP-D发送上传失败通知。\r\n  * 作为SFTP(Secure File Transfer Protocol, 安全文件传输协议)服务端RCP通过SFTP方式上传统计文件到POP-D。统计文件包括策略/规则映射信息、策略统计信息、规则统计信息。\r\n\r\n  \r\nSPR(Subscription Profile Repository, 用户签约数据库)| 作为SFTP客户端，向RCP上传策略签约趋势和业务变更历史信息，供SOAP查询和分析使用。  \r\nRCP(Resource Control Platform, 资源控制平台)| 产生各种策略日志文件、通知日志文件、业务历史日志文件、策略/规则映射信息，结合SPR上传的数据，生成POP-D所需的各种信息。\r\n\r\n  * 作为SOAP服务端允许POP-D作为客户端，查询各种分析/统计信息。\r\n  * 作为SOAP客户端向作为服务端的POP-D发送统计文件上传失败通知。\r\n  * 作为SFTP服务端接收作为客户端的SPR提供的签约趋势和业务变更历史信息。\r\n  * 作为SFTP客户端向作为服务端的POP-D上传各种统计文件。\r\n\r\n  \r\n  \r\n本网元实现\r\n\r\n服务部署\r\n\r\n中移报表功能由Npcf_LOG服务和Npcf_LSU服务共同实现。当RCP支持中移报表功能时，需要部署Npcf_LOG、Npcf_LSU服务。\r\n\r\n部署信息参见表3。\r\n\r\n表3 部署服务服务名称| 部署虚机| 部署方式  \r\n---|---|---  \r\nNpcf_LOG| LOG虚机| 负荷分担方式，不支持弹缩，支持扩容。  \r\nNpcf_LSU| LSU虚机| 负荷分担方式，不支持弹缩，不支持扩容。\n\n[3]:特性描述\r: Npcf_LSU| LSU虚机| 负荷分担方式，不支持弹缩，不支持扩容。  \r\n  \r\n日志文件入库\r\n\r\n日志文件由RCP或SPR生成，存放在RCP指定路径中。日志文件种类参见表4。\r\n\r\n表4 日志类型日志类型| 来源| 是否入库  \r\n---|---|---  \r\n通知日志| RCP生成| GBase数据库中建表存储数据。  \r\n策略日志| RCP生成| GBase数据库中建表存储数据。  \r\n业务事件日志| RCP、SPR生成| GBase数据库中建表存储数据。  \r\n签约趋势日志| SPR生成| GBase数据库中建表存储数据。  \r\n策略映射日志| RCP生成| 只用于生成策略规则映射统计文件，不涉及查询功能，因此不需要入库。  \r\n  \r\n日志文件入库要求：\r\n\r\n  * RCP系统设置时长为2分钟的循环定时器，定时入库通知日志、策略日志、业务事件日志和签约趋势日志路径下的日志文件。\r\n\r\n  * 因SFTP服务或GBase数据库异常，导致入库失败的日志文件，下一个周期会再次尝试入库操作。\r\n\r\n  * 已经入库的文件名会保存在数据库中，在老化周期内，相同文件名的日志文件，将不再入库。\r\n\r\n  * 日志文件入库时，严格检查文件名的格式是否正确，格式错误的文件将会被删除。\r\n\r\n  * 日志文件入库采取最大容忍策略：一个文件中的错误行将被放弃，这些行的数据将直接丢。但是原始的日志文件将会保留一定的周期。\r\n\r\n  * SPR生成的业务事件日志和签约趋势日志，通过SFTP方式上传到/temp目录，待RCP处理后存放到指定路径再入库。temp目录下相关日志的处理时间间隔固定为1小时，该时间不支持配置。\r\n\r\n\r\n\r\n\r\n支持SOAP查询统计信息\r\n\r\nPOP-D作为SOAP客户端，向RCP查询相关分析/统计信息。RCP通过对数据库的查询，将查询结果封装成SOAP消息，返回给POP-D。\r\n\r\n目前支持：\r\n\r\n  * 用户通知历史信息查询\r\n\r\n  * 策略生效统计信息查询\r\n\r\n  * 业务变更历史信息查询\r\n\r\n  * 策略签约趋势查询\r\n\r\n  * 策略历史查询\r\n\r\n\r\n\r\n\r\nRCP响应消息说明：\r\n\r\n具体的SOAP请求和响应消息格式，参见“业务流程”。\r\n\r\n  * 策略生效统计信息中，仅显示有记录的项，缺失项以0代替。\r\n\r\n  * 对于查询请求消息参数非法的情况，统一输出无记录响应消息。\r\n\r\n  * 批量用户查询中，如果只有部分用户有记录，则只返回有记录的用户。如果所有用户都没有记录，则输出无记录响应消息。\r\n\r\n  * 一次查询的响应最多返回64条记录，多余的记录将会被丢弃。\r\n\r\n\r\n\r\n\r\n支持SFTP上传统计文件\r\n\r\nRCP作为SFTP客户端，定期采集“策略与规则映射信息”、“策略统计信息”、“规则统计信息”这些统计数据，生成统计文件，上传到POP-D。\r\n\r\nRCP成功上传文件后，会把本地的统计文件删除。如果上传失败，则在下一个周期尝试再次上传，直到成功 。\r\n\r\n如果上传失败，RCP通过SOAP消息通知POP-D。\n\n[4]:特性配置\r: 执行ADD AGTFTPINFO命令，新增受理FTP服务器配置。\r\n\r\n    6. 配置性能统计上报配置。\r\n\r\n\r\n\r\n\r\n配置实例\r\n\r\n场景说明\r\n\r\nRCP业务产生的策略日志、通知日志、业务历史日志等直接扫描入库，同时作为SFTP服务器接收SPR侧上传的签约趋势日志和业务历史日志并把相应的记录入库。\r\n\r\nRCP作为SFTP客户端向POP-D推送相关统计文件。\r\n\r\n数据规划\r\n\r\nRCP侧数据规划\r\n\r\n  * 全局变量\r\n\r\n开关编号| 取值  \r\n---|---  \r\n1044| 用量穿越日志开关，配置为1。  \r\n1045| 策略日志开关，配置为1。  \r\n1046| 事件日志开关，配置为0。  \r\n1047| 用量日志开关，配置为0。  \r\n1048| 通知日志开关，配置为1。  \r\n1049| 业务历史日志开关，配置为1。  \r\n1050| 规则配置导出开关，此开关配置为1。  \r\n1122| 中移报表开关，配置为1。  \r\n1125| 策略日志记录无策略上线和下线事件开关，配置为1。  \r\n  \r\n  * 日志基本参数\r\n\r\n日志题头开关配置项应配置为不包含。\r\n\r\n  * 报表相关参数\r\n\r\n类别| IP地址| 服务端口| 账户信息| 根目录| 说明  \r\n---|---|---|---|---|---  \r\n数据库| 10.43.113.11310.43.113.11410.43.113.115| 5258| 用户名：rcp 密码：Pwd123| -| -  \r\n对端SFTP服务器| 10.47.171.130| 22| 用户名：impserv密码：impserv| 未配置则默认根目录| 统计数据上报POP-D平台。  \r\n对端SFTP客户端| 10.43.113.112| 31| -| -| -  \r\n本端SFTP服务器| 10.43.113.112| 27| 用户名：pcflsu 密码：ZTE_ossdbg1| /IDE0| SPR向本地上传文件。  \r\nSOAP服务类型| -| -| -| -| SOAP服务器类型：日志报告。SOAP命名空间：PCF。  \r\nSOAP接入局| 10.43.113.116| 8090| -| -| POP-D向本地发送http查询消息。  \r\n  \r\n\r\n\r\n\r\nSPR侧数据规划\r\n\r\n  * 打开中移SOAP开关。\r\n\r\n  * 打开支持按套餐统计用户数开关。\r\n\r\n\r\n\r\n\r\n配置步骤\r\n\r\nRCP侧配置\r\n\r\n  1. 配置全局变量。\r\n\r\nSET SYS GLOBPARA:IDX=1045,CURVAL=\"1\",EXTFLAG=1;\r\n\r\nSET SYS GLOBPARA:IDX=1046,CURVAL=\"0\",EXTFLAG=1;\r\n\r\nSET SYS GLOBPARA:IDX=1047,CURVAL=\"0\",EXTFLAG=1;\r\n\r\nSET SYS GLOBPARA:IDX=1048,CURVAL=\"1\",EXTFLAG=1;\r\n\r\nSET SYS GLOBPARA:IDX=1049,CURVAL=\"1\",EXTFLAG=1;\r\n\r\nSET SYS GLOBPARA:IDX=1050,CURVAL=\"1\",EXTFLAG=1;\r\n\r\nSET SYS GLOBPARA:IDX=1122,CURVAL=\"1\",EXTFLAG=0;\r\n\r\nSET SYS GLOBPARA:IDX=1125,CURVAL=\"1\",EXTFLAG=0;\r\n\r\n  2. 设置日志基本参数。\r\n\r\nSET POLICYLOG:HEADERFLAG=\"OFF\";\r\n\r\n  3.\n\n[5]:特性描述\r: csv\r\n\r\n字段名| 描述  \r\n---|---  \r\nRuleName| 规则标识。  \r\nTRule| 规则下发次数。在一个统计周期内，因各种触发条件满足而导致各规则下发的次数统计。  \r\nNRule| 规则命中用户数。在一个统计周期内，各规则因各种触发条件满足而命中（包含命中后生效以及命中但未生效）的用户数量统计。  \r\n  \r\n\r\n\r\n\r\n数据老化\r\n\r\n为了防止GBase库中的数据和指定路径下存放的文件数据无限堆积，需要定期对这两种数据进行老化处理。RCP会在每天凌晨5:00主动发起老化流程，数据的默认保留周期为93天。\r\n\r\n  * GBase库中数据老化\r\n\r\n通过计算表记录中的时间字段值与系统当前时间值之间的差值，比较该差值与数据保留周期，删除超出保留周期的表记录，实现GBase库中数据的老化。\r\n\r\n  * 文件数据老化\r\n\r\n通过计算文件名中的时间值与系统当前时间之间的差值，比较该差值与数据保留周期，删除超出保留周期的文件，实现文件数据的老化。\r\n\r\n\r\n\r\n\r\n业务流程\r\n\r\nSPR向RCP上传日志文件\r\n\r\nSPR向RCP上传业务历史日志文件和签约趋势日志文件的流程如图2所示。\r\n\r\n图2 SPR上传日志文件\r\n\r\n  1. RCP(Resource Control Platform, 资源控制平台)开启SFTP(Secure File Transfer Protocol, 安全文件传输协议)服务端。\r\n\r\n  2. SPR开启SFTP客户端。\r\n\r\n  3. SPR通过SFTP文件传输协议向RCP上传业务历史日志、签约趋势日志文件。\r\n\r\nSPR使用SFTP PUT方式传送日志文件。业务历史日志文件推送到路径Provlog_temp下，RCP进行格式处理后，放入路径Provlog下，再入GBase数据库。签约趋势日志文件推送到路径Subscribelog_temp下，经过格式处理后，放入路径Subscribelog下面，再入GBase数据库。\r\n\r\n\r\n\r\n\r\nPOP-D向RCP查询信息\r\n\r\nPOP-D通过SOAP消息向RCP查询相关信息的流程如图3所示。\r\n\r\n图3 SOAP查询\r\n\r\n  1. RCP(Resource Control Platform, 资源控制平台)开启SOAP(Simple Object Access Protocol, 简单对象访问协议)服务端。\r\n\r\n  2. POP(Policy Operation Platform, 流量经营策略平台)-D开启SOAP客户端。\r\n\r\n  3. POP-D发送SOAP消息到RCP，查询相关信息。\r\n\r\n  4. RCP向POP-D返回查询结果。\r\n\r\n\r\n\r\n\r\n可查询信息如下：\r\n\r\n  * 用户通知历史信息\r\n\r\n用于查询某段时间内RCP给单个用户或一批用户发送通知的形式（例如：短信SMS、电子邮件Email）和结果。\r\n\r\n查询请求消息：包含查询的用户的号码以及查询记录的开始时间和截止时间。若一次性查询一批用户数，需携带该批次多个用户的号码信息。\r\n\r\n查询结果反馈：RCP给该用户在查询时间窗口内的发送通知的时间、形式和结果。如果存在多次发送记录，则将各条记录逐次反馈。如果查询的是一批用户，则按照查询先后顺序，依次反馈各用户的通知历史信息。如果在查询时间段内无记录信息，则反馈结果0。", "answer": "中移报表功能中，需要SPR提供的日志包括：\n\n- 策略签约趋势日志\n- 业务变更历史日志\n\n这些日志由SPR生成并通过SFTP方式上传到RCP，供其进一步处理和存储。"}
{"id": 48, "query": "什么角色可以创建子组织？", "recall": "[1]:创建子组织\r: 创建子组织\r\n\r\n摘要\r\n\r\n本节描述在线创建子组织的步骤。\r\n\r\n前提\r\n\r\n使用组织管理员账户登录TECS Director。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择运营→租户资源管理→组织管理，打开组织管理页面，单击组织名称，打开组织详情页面，如图1所示。\r\n\r\n图1 组织详情页面\r\n\r\n  2. 单击+创建组织按钮，打开创建组织对话框，如图2所示。\r\n\r\n图2 创建组织\r\n\r\n  3. 根据规划在名称输入框中输入子组织名称，在描述输入框中输入子组织的简要描述，单击确定按钮完成子组织的创建。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n创建完成的子组织下可继续创建下级的子组织。\n\n[2]:子组织管理\r: 子组织管理\r\n\r\n组织管理员管理子组织的流程如图1所示。\r\n\r\n图1 配置流程\r\n\r\n子主题：\r\n\r\n  * 创建子组织\r\n\r\n  * 创建子组织管理员\r\n\r\n  * 给子组织分配VDC\r\n\r\n  * 创建端用户\r\n\r\n  * 删除子组织\n\n[3]:创建子组织管理员\r: 创建子组织管理员\r\n\r\n摘要\r\n\r\n本节描述了创建子组织管理员的步骤。\r\n\r\n前提\r\n\r\n  * 使用组织管理员账户登录TECS Director。\r\n\r\n  * 已创建子组织。\r\n\r\n\r\n\r\n\r\n相关信息\r\n\r\nTECS Director支持批量导入子组织管理员，具体步骤参见批量导入组织用户。\r\n\r\n步骤\r\n\r\n  1. 单击TECS Director顶部菜单栏中的按钮，选择更多→安全管理→用户管理，打开用户管理页面，如图1所示。\r\n\r\n图1 用户管理页面\r\n\r\n  2. 单击+新建用户按钮，打开新建用户页面，默认显示基本信息页签，如图2所示。\r\n\r\n图2 新建用户-基本信息\r\n\r\n  3. 根据规划填写基本信息参数，具体说明参见新建用户。\r\n\r\n  4. 单击下一步按钮，切换到权限分配页签，如图3所示。\r\n\r\n图3 新建用户-权限分配\r\n\r\n  5. 根据规划选择权限分配信息。\r\n\r\n说明：\r\n\r\n创建子组织管理员，在角色中需要勾选子组织管理员和安全管理员。\r\n\r\n  6. 单击新建按钮，完成子组织管理员创建。\n\n[4]:新建组织管理员角色（可选）\r: 新建组织管理员角色（可选）\r\n\r\n系统中已经预置组织管理员角色。如果已有的组织管理员角色权限等不满足要求，可以新创建一个组织管理员角色，并赋予期望的权限。一般操作流程包括新建操作集，新建角色。 \r\n\r\n子主题：\r\n\r\n  * 新建操作集\r\n\r\n  * 新建角色\n\n[5]:组织管理\r: 组织管理\r\n\r\nTECS Director提供了符合客户组织模型的运营管理体系，组织可以是一个企业、一个分支机构、一个部门，在实际的使用场景中可以灵活应用。通过组织管理功能，组织管理员可以根据实际情况线上配置组织内部架构、管理组织配额。\r\n\r\n组织管理的主要功能包括：\r\n\r\n  * 组织生命周期管理\r\n\r\n具备业务经理角色权限的管理员可以创建、编辑、删除、禁用、激活组织，设置组织资源配额，为组织分配/删除组织管理员、创建/移除VDC、授权/移除服务。\r\n\r\n  * 多级组织架构\r\n\r\n系统支持创建嵌套的组织架构，在嵌套的组织架构中，根节点称之为“组织”，其下各级叶子节点称之为“子组织”，组织下支持最多6级子组织。\r\n\r\n  * 端用户管理\r\n\r\n组织/子组织管理员可以创建/删除端用户，创建第三方认证的端用户组织管理员，为子组织分配/移出端用户。", "answer": "组织管理员角色可以创建子组织。在上下文信息中提到，使用组织管理员账户登录TECS Director后，可以在组织管理页面创建子组织。此外，还提到具备业务经理角色权限的管理员也可以进行组织的创建等操作。"}
{"id": 49, "query": "N7接口的IMSI、MSISDN、IMEISV分别在哪个参数中传递", "recall": "[1]:# 查询N7/Gx会话(SHOW_DPI_IPCAN_SESS) \r: # 查询N7/Gx会话(SHOW_DPI_IPCAN_SESS) \r\n\r\n## 功能说明\r\n\r\n该命令用于查询用户的N7/Gx会话信息。当用户接入到网络后，执行该命令可以查询到用户的IP地址、接入类型、DNN、位置信息，以及RCP授权的控制策略信息等等。\r\n\r\n## 注意事项\r\n\r\n无。\r\n\r\n## 输入参数说明\r\n\r\n标识 | 名称 | 类型 | 说明  \r\n---|---|---|---  \r\nUSERTYPE | 用户类型 | 参数可选性: 必选  \r\n参数类型: 枚举，参见枚举定义 | 参数作用：该参数用于表示使用哪种用户标识类型来查询用户的N7/Gx会话信息。 数据来源：全网规划。 配置原则：\r\n\r\n  * RCP_QUERY_TYPE_IMSI（IMSI）：根据用户的IMSI号码查询N7/Gx会话。根据SHOW USERKEYPRI里配置的用户标识类型优先级，分析出用户的主用户标识为IMSI时，使用该配置查询N7/Gx会话。\r\n  * RCP_QUERY_TYPE_MSISDN（MSISDN）：根据用户的MSISDN号码查询N7/Gx会话。根据SHOW USERKEYPRI里配置的用户标识类型优先级，分析出用户的主用户标识为MSISDN时，使用该配置查询N7/Gx会话。\r\n  * RCP_QUERY_TYPE_IP（IP）：根据用户的IP地址查询N7/Gx会话。用户上线时，SMF/PGW会为用户分配IPv4或IPv6地址，此时RCP可以根据用户的IP地址来查询N7/Gx会话。\r\n  * RCP_QUERY_TYPE_IMEI（IMEI）：根据用户的IMEI号码查询N7/Gx会话。当用户使用无卡紧急呼叫业务时，用户会话里可能不携带IMSI和MSISDN号码，此时会携带IMEI信息。RCP可以根据用户的IMEI号码来查询N7/Gx会话。\r\n  * RCP_QUERY_TYPE_MAC（MACADDR）：根据用户的MAC地址查询N7会话。当用户从TSN（Time Sensitive Networking，时间敏感网络）接入时，SMF会为用户分配MAC地址，此时RCP可以根据用户的MAC地址来查询N7会话。\r\n\r\n  \r\nUSERID | 用户标识 | 参数可选性: 任选  \r\n参数类型: 字符串  \r\n参数范围: 1-20 | 参数作用：该参数用于表示查询指定号码的用户的N7/Gx会话。 数据来源：用户会话携带的信息。 配置原则：当“用户类型”为IMSI、MSISDN、IMEI时，需要配置该参数，用于表示通过用户的IMSI号码、MSISDN号码或IMEI号码来查询会话信息。  \r\nIP | IP | 参数可选性: 任选  \r\n参数类型: 字符串  \r\n参数范围: 1-64 | 参数作用：该参数用于表示查询指定IP地址的用户的N7/Gx会话。 数据来源：用户会话携带的信息。 配置原则：当“用户类型”为IP时，需要配置该参数，用于表示通过SMF/PGW为用户分配的IPv4或IPv6地址来查询会话信息。  \r\nREALM | APN | 参数可选性: 任选  \r\n参数类型: 字符串  \r\n参数范围: 1-99 | 参数作用：该参数用于表示查询用户的N7/Gx会话使用的APN值。 数据来源：用户会话携带的信息。 配置原则：当“用户类型”为IP时，可以配置该参数，用于表示通过SMF/PGW为用户分配的IPv4或IPv6地址和APN信息来查询会话。\n\n[2]:IMSI\r: IMSI\r\n\r\nIE| 说明  \r\n---|---  \r\nIMSI| IMSI通过GTP隧道传输，发送方复制IMSI的值部分到IMSI信元的值域中。IMSI由三部分组成：\r\n\r\n  * Mobile Country Code (MCC)包含3个数字。MCC唯一标识移动用户的居住国家。\r\n  * Mobile Network Code (MNC)包含2个或3个数字用于GSM/UMTS应用。MNC标识移动用户的归属PLMN。MNC的长度取决于MCC的值。不推荐单个MCC区内两个和三个数字混合编码的MNC。\r\n  * Mobile Subscriber Identification Number (MSIN)标识PLMN内的移动用户。\n\n[3]:特性配置\r: 配置条件2\r\n\r\n条件名称| 参数| 取值  \r\n---|---|---  \r\nPCS=1| 选择策略变量| 其他  \r\n策略变量类别| 自定义策略变量  \r\n策略变量| pcid1  \r\n操作符| =  \r\n值类型| 值  \r\n值| 1  \r\n  \r\n  4. 配置条件3\r\n\r\n条件名称| 参数| 取值  \r\n---|---|---  \r\nPCS=2| 选择策略变量| 其他  \r\n策略变量类别| 自定义策略变量  \r\n策略变量| pcid1  \r\n操作符| =  \r\n值类型| 值  \r\n值| 2  \r\n  \r\n  5. 配置条件4\r\n\r\n条件名称| 参数| 取值  \r\n---|---|---  \r\nPCS=3| 选择策略变量| 其他  \r\n策略变量类别| 自定义策略变量  \r\n策略变量| pcid1  \r\n操作符| =  \r\n值类型| 值  \r\n值| 3  \r\n  \r\n  6. 配置动作参数1\r\n\r\n动作参数名称| 参数名称| 取值  \r\n---|---|---  \r\naction_N7sess1| 动作参数类型| N7会话参数集  \r\n会话规则名称| N7sess1  \r\n会话汇聚带宽决策方式| 签约的APN带宽  \r\n  \r\n  7. 配置动作参数2\r\n\r\n动作参数名称| 参数名称| 取值  \r\n---|---|---  \r\naction_N7sess2| 动作参数类型| N7会话参数集  \r\n会话规则名称| N7sess2  \r\n会话AMBR上行速率(kbps)| 2048  \r\n会话AMBR下行速率(kbps)| 2048  \r\n  \r\n  8. 配置动作参数3\r\n\r\n动作参数名称| 参数名称| 取值  \r\n---|---|---  \r\naction_N7sess3| 动作参数类型| N7会话参数集  \r\n会话规则名称| N7sess3  \r\n会话AMBR上行速率(kbps)| 1024  \r\n会话AMBR下行速率(kbps)| 1024  \r\n  \r\n  9. 配置动作参数4\r\n\r\n动作参数名称| 参数名称| 取值  \r\n---|---|---  \r\naction_N7sess4| 动作参数类型| N7会话参数集  \r\n会话规则名称| N7sess4  \r\n会话AMBR上行速率(kbps)| 128  \r\n会话AMBR下行速率(kbps)| 128  \r\n  \r\n  10. 配置N7会话规则1\r\n\r\n规则名称| 规则参数| 参数取值  \r\n---|---|---  \r\nrule_sess1| 优先级| 10  \r\n动作类型| 参数填充  \r\n日志开关| 关闭  \r\n条件表达式| PCS=0  \r\n选中动作参数名称| action_N7sess1  \r\n  \r\n  11. 配置N7会话规则2\r\n\r\n规则名称| 规则参数| 参数取值  \r\n---|---|---  \r\nrule_sess2| 优先级| 10  \r\n动作类型| 参数填充  \r\n日志开关| 关闭  \r\n条件表达式| PCS=1  \r\n选中动作参数名称| action_N7sess2  \r\n  \r\n  12. 配置N7会话规则3\r\n\r\n规则名称| 规则参数| 参数取值  \r\n---|---|---  \r\nrule_sess3| 优先级| 10  \r\n动作类型| 参数填充  \r\n日志开关| 关闭  \r\n条件表达式| PCS=2  \r\n选中动作参数名称| action_N7sess3  \r\n  \r\n  13. 配置N7会话规则4\r\n\r\n规则名称| 规则参数| 参数取值  \r\n---|---|---  \r\nrule_sess4| 优先级| 10  \r\n动作类型| 参数填充  \r\n日志开关| 关闭  \r\n条件表达式| PCS=3  \r\n选中动作参数名称| action_N7sess4  \r\n  \r\n  14.\n\n[4]:# 查询N7/Gx会话(SHOW_DPI_IPCAN_SESS) \r: 配置原则：当“用户类型”为IP时，可以配置该参数，用于表示通过SMF/PGW为用户分配的IPv4或IPv6地址和APN信息来查询会话。若未配置该参数，则只使用IP地址查询。  \r\nMAC | MAC | 参数可选性: 任选  \r\n参数类型: 字符串  \r\n参数范围: 1-17 | 参数作用：该参数用于表示查询指定MAC地址的用户的N7会话。 数据来源：用户会话携带的信息。 配置原则：当“用户类型”为MACADDR时，需要配置该参数，用于表示用户从TSN（Time Sensitive Networking，时间敏感网络）接入时，通过SMF分配的MAC地址来查询会话信息。  \r\n  \r\n## 输出参数说明\r\n\r\n标识 | 名称 | 类型 | 说明  \r\n---|---|---|---  \r\nMESSAGE | 会话信息 | 参数可选性: 必选  \r\n参数类型: 字符串  \r\n参数范围: 0-1200000 | 参数作用：该参数用于表示RCP查询到的用户的N7/Gx会话信息，包括IP地址、接入类型、DNN、位置信息，以及RCP授权的控制策略信息等。  \r\n  \r\n## 命令举例\r\n    \r\n    \r\n    \r\n    \r\n    查询IMSI为123456789012345的N7或Gx会话。\r\n    \r\n    \r\n    \r\n    \r\n    SHOW_DPI_IPCAN_SESS:USERTYPE=\"RCP_QUERY_TYPE_IMSI\",USERID=\"123456789012345\"\r\n    \r\n    \r\n    \r\n    SHOW_DPI_IPCAN_SESS:USERTYPE=\"RCP_QUERY_TYPE_IMSI\",USERID=\"123456789012345\"\r\n    -----------------PCF_30/Npcf_SMPolicyControl_0----------------\r\n    会话信息          \r\n    --------------------------------------------------------\r\n    \r\n    *********************  SC Logic No:1  ********************\r\n    \r\n    ***********  IP-CAN Session Information Begin!  **********\r\n    \r\n     Radio Access Type:NR(1006) \r\n    \r\n     User Location Info Mobile Country Code(MCC):123 \r\n    \r\n     User Location Info Mobile Network Code(MNC):45 \r\n    \r\n     User Location Info Tracking Area Code(TAC):1 \r\n    \r\n     AF Infomation: \r\n    \r\n     wBindAFNum = 0 \r\n    \r\n     bSpCreateByAFInfoFLag = 1 \r\n    \r\n     bTDFSpMultiInstFlag = 0 \r\n    \r\n     bSavePDNConnIdFlag = 1 \r\n    \r\n     bGxRuleNameRepeated = 0 \r\n    \r\n     IPCAN Disaster Tolerance Capability Flag: No Need Disaster Recovery \r\n    \r\n     Priority-Sharing-Indicator Service Number = 0 \r\n    \r\n    *******************  N7 Session Begin!  ******************\r\n    \r\n     Session Id:fb82eccf16dc5a0f, SessionHashAB = 18123308224678222351 \r\n    \r\n     Session Charging Capability:UNSUPPORT(0) \r\n    \r\n     Emergency Session: FALSE \r\n    \r\n     Smf FQDN Name:smf_default \r\n    \r\n     Smf Notify URL:http://9.9.14.15:8080/nsmf-pdusession/v1/sessions \r\n    \r\n     CC Requested Number:0 \r\n    \r\n     Pending Transaction Capability of Session: 0 \r\n    \r\n     IP CAN Type:3GPP_ACCESS(8) \r\n    \r\n     Called Station Id(APN):dnn54322 \r\n    \r\n     CCR Initial Time:2021-09-28 13:48:31.(3841796911) \r\n    \r\n     IPS Last Update Time:2021-09-28 13:48:34.\n\n[5]:配置\r: * CP：控制面。\r\n  * L2TP：L2TP隧道传输协议。\r\n\r\n同一Interfacetype+Networkinstance下最多配置32个地址。  \r\n网络实例| SGW-S5u| SGW-S8u| PGW-S5u| PGW-S8u| S1u| 该参数用于指示该逻辑接口所在的IP域。同一Interfacetype+Networkinstance下最多配置32个地址。  \r\nIP地址类型| IPv6| IPv6| IPv6| IPv6| IPv6| 该参数用于表示逻辑接口地址的IP类型。有IPv4和IPv6两种类型  \r\nIPV6地址| 195:166:127:5::100| 195:166:127:5::100| 195:166:127:6::100| 195:166:127:6::100| 195:166:127:7::100| 该参数在“IPVERSION”配置为“IPv6”时为必选参数。该参数用于指示逻辑接口的IPv6地址。  \r\n参考点类型| S5S8U| S5S8U| S5S8U| S5S8U| S1U| 该参数用于标识该逻辑接口是哪种3gpp referface point，可用于向NRF注册时携带的UPInterfaceTyp。判断具体注册的逻辑接口类型是N3，N6，N9。  \r\n其他参数| 默认值| -  \r\n  \r\n配置过程\r\n\r\nSMF配置步骤\r\n\r\n步骤| 说明| 操作  \r\n---|---|---  \r\n1| 新增APNDNN接口模式配置模板，设置2/3/4/5G用户支持N40计费接口模式，2/3G和纯4G用户支持N7的PCC接口模式。| ADD INTERFACEMODEPROFILE:PROFILENAME=\"interfacemode\",PURE4G23GACCINTERFACEMODE=\"N40\",PURE4G23GPCCINTERFACEMODE=\"N7\",5GACCINTERFACEMODE=\"N40\"  \r\n2| 修改关联APNDNN基础配置，配置APNDNN关联新增的接口模板。| SET MAPAPNDNNPROFILE:APNDNN=\"cmnet\",INTERFACEMODEPROFILE=\"interfacemode\"  \r\n3| 修改对应的UPF支持SGW-U和PGW-U的功能及接口。| SET UPATTRIBUTE:UPNAME=\"UPF127\",SGWUFUNC=\"true\",PGWUFUNC=\"true\",SGW_S8=\"true\",PGW_S8=\"true\"  \r\n4| 增加用户面TAC组配置。| ADD TACGROUP:TACGROUPNAME=\"upf127_tacgrp\",TYPE=\"TAC\"  \r\n5| 增加4G网元使用的TAC分段配置。| ADD TACSECTION:SECNAME=TAC1,STARTTAC=0x6001,ENDTAC=0x6001,TACGROUPNAME=upf127_tacgrp  \r\n6| 增加用户面关联TAC组配置。| ADD UPTACGROUP:UPNAME=\"UPF127\",TACGROUPNAME=\"upf127_tacgrp\",GWUTYPE=\"SGWU\"ADD UPTACGROUP:UPNAME=\"UPF127\",TACGROUPNAME=\"upf127_tacgrp\",GWUTYPE=\"PGWU\"  \r\n  \r\nUPF配置步骤\r\n\r\n步骤| 说明| 操作  \r\n---|---|---  \r\n1| 设置CP关联地址，其中CP网元类型需要支持SGW_C、PGW_C和SMF。| ADD CPASSOCADDR:CPID=28,CPNAME=\"smf128\",IPVERSION=\"IPV6\",IPV6ADDR=\"195:168:128:4::11\",NETWORKINSTANCE=\"N4\",CPFUNC=\"SGW_C\"&\"PGW_C\"&\"SMF\"  \r\n2| 增加4G网络接口的网络实例配置。| ADD VPNINSTANCE:NETWORKINSTANCE=\"SGW-S5u\",VPNID=0,VRFNAMEV6=\"N9\",VPNIDV6=9,", "answer": "根据提供的上下文信息，以下是关于N7接口的IMSI、MSISDN、IMEISV参数传递的回答：\n\n- IMSI：在N7接口中，IMSI是通过“USERID”参数传递的。例如，在查询IMSI为123456789012345的N7或Gx会话的命令中，IMSI被指定为“USERID”的值。\n\n- MSISDN：上下文信息中并未明确指出MSISDN在N7接口中是如何传递的。因此，关于MSISDN在N7接口中的传递参数，无法确定。\n\n- IMEISV：上下文信息同样没有明确说明IMEISV在N7接口中的传递参数。因此，关于IMEISV在N7接口中的传递参数，也无法确定。\n\n总结：IMSI在N7接口中通过“USERID”参数传递，而MSISDN和IMEISV的传递参数在上下文信息中没有提及，因此无法确定。"}
{"id": 50, "query": "RCP的HTTP信令路由包括哪些功能？", "recall": "[1]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性间交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\nURI(Uniform Resource Identifier, 统一资源标识符)| 统一资源标识符，用于标识服务化系统资源。  \r\nSCP(Service Communication Proxy, 服务通讯代理)| 服务通讯代理，转发HTTP服务化消息至目标网元。  \r\n服务提供者| 在5G服务化架构中向外暴露服务化调用接口，供其他网元使用服务的网元。特别的，在订阅-通知类型的服务中，接收订阅、发送通知的一方为服务提供者。  \r\n服务使用者| 调用服务提供者所提供的服务的网元。特别的，在订阅-通知类型的服务中，发起订阅、接收通知的一方为服务使用者。  \r\n客户端| 发送HTTP请求消息的一方称为客户端。客户端不一定为服务使用者，如在订阅-通知服务中。  \r\n服务器| 发送HTTP响应消息的一方称为服务器。服务器不一定为服务提供者，如在订阅-通知服务中。  \r\n  \r\n描述\r\n\r\n特性定义\r\n\r\nZXUN RCP的HTTP信令路由功能，提供了HTTP连接管理、HTTP信令路由寻址等功能。\r\n\r\n5G服务化组网时，ZXUN RCP和各网元间主要通过HTTP信令进行信息交互，在信令交互过程中会涉及到HTTP信令链路及路由特性。\r\n\r\n本特性包括如下功能：\r\n\r\n  * 支持HTTP/HTTPS静态链路管理。\r\n\r\n  * 支持HTTP/HTTPS动态链路管理。\r\n\r\n  * 支持同一会话的链路保持。\r\n\r\n  * 支持直连静态路由寻址。\r\n\r\n  * 支持直连动态路由寻址。\r\n\r\n  * 支持相同优先级负荷分担路由。\r\n\r\n  * 支持主备路由。\r\n\r\n  * 支持消息重路由发送，包括超时重路由和根据对端错误码重路由。\r\n\r\n  * 支持SCP C模式路由。\r\n\r\n  * 支持SCP D模式路由。\r\n\r\n  * 支持SCP Proxy模式路由。\r\n\r\n  * 支持在N7/N15接口对双网络平面AMF/SMF接入。\r\n\r\n\r\n\r\n\r\n背景知识\r\n\r\n5G核心网网元之间通过服务化接口进行交互，服务化接口协议栈如图1所示。\r\n\r\n图1 协议栈\r\n\r\n5G服务化接口基础协议采用HTTP/2（即HTTP 2.0版本，参见RFC 7540）。服务化接口传输层协议仅采用TCP协议。当要求启用传输层安全时，通过TLS进行传输层保护。\r\n\r\nHTTP信令路由主要包括两部分：\r\n\r\n  * HTTP连接管理\r\n\r\nHTTP链路提供信息交互的可靠通道，HTTP链路承载于TCP或TLS承载链路之上，因而属于可靠传输。ZXUN RCP和其它网元交互时，将应用消息以HTTP信令方式通过HTTP链路进行收发。\n\n[2]:特性描述\r: SCP使用请求地址和请求中的发现选择参数，路由该请求到合适的服务提供者实例处理。SCP通过NRF做服务发现，并获取到发现结果。\r\n\r\n\r\n\r\n\r\n在5GC系统中，对于模式C、D、Proxy，ZXUN RCP有两类请求消息通过SCP路由寻址：\r\n\r\n  * ZXUN RCP主动发送请求消息时，通过SCP来路由寻址CHF、UDR和BSF。\r\n\r\n  * ZXUN RCP反向发送通知请求消息时，通过SCP来路由寻址AMF、SMF和NEF/AF。\r\n\r\n\r\n\r\n\r\n应用场景\r\n\r\nZXUN RCP可根据主机IP或FQDN寻址目标NF，HTTP信令路由功能主要包括如下应用场景：\r\n\r\n  * ZXUN RCP与目标NF组网是直连组网（A模式），与目标NF间建立多条链路支持信令负荷分担。\r\n\r\n  * ZXUN RCP与目标NF组网是直连组网（A模式），目标NF存在备用NF时支持信令主备。\r\n\r\n  * ZXUN RCP与目标NF组网是直连组网（B模式），通过NRF发现多个目标NF，在多个目标NF间支持信令负荷分担。\r\n\r\n  * ZXUN RCP与目标NF组网是直连组网（B模式），通过NRF发现多个目标NF，在多个目标NF间支持信令主备。\r\n\r\n  * ZXUN RCP与目标NF组网是非直连组网（C模式），可通过SCP_C模式进行代理转发。\r\n\r\n  * ZXUN RCP与目标NF组网是非直连组网（D模式），可通过SCP_D模式进行代理转发。\r\n\r\n  * ZXUN RCP与目标NF组网是非直连组网（Proxy模式），可通过SCP_Proxy模式进行代理转发。\r\n\r\n\r\n\r\n\r\n客户收益\r\n\r\n对运营商和用户的收益说明参见表2。\r\n\r\n表2 特性收益说明收益方| 收益说明  \r\n---|---  \r\n运营商| 可根据运营组网规划，通过信令路由功能部署相关网元，节省网络资源。  \r\n终端用户| 用户业务通过信令路由快速寻址目标网元，业务体验流畅。  \r\n  \r\n实现原理\r\n\r\n系统架构\r\n\r\nZXUN RCP在5G核心网中位置如图3所示。\r\n\r\n  * 作为服务使用者，以客户端角色使用HTTP信令路由，主要与BSF、UDR、CHF等核心网网元交互，根据运营规划，通过静态配置或动态NRF发现来实现路由寻址。\r\n\r\n  * 作为服务提供者，反向发送请求时，以服务使用者的通知URI来直接寻址。\r\n\r\n\r\n图3 5G核心网组网\r\n\r\n基于SA架构的服务通信代理（SCP）的非直连网络架构如图4所示。\r\n\r\n图4 非直连网络架构\r\n\r\n其中：\r\n\r\n  * SCP按大区部署。\r\n\r\n  * 大区内各网元间采用直接的方式直接通讯（如图4中黑色连接线所示）。\r\n\r\n  * 大区间各网元间通信通过SCP进行间接通讯（如图4中蓝色连接线所示）。\r\n\r\n\r\n\r\n\r\n各网元作用\r\n\r\n涉及的网元及其功能参见表3。\r\n\r\n表3 涉及的网元网元| 描述  \r\n---|---  \r\nRCP(Resource Control Platform, 资源控制平台)| 向SMF提供SM（Session Management）策略，并订阅相关事件。  \r\nSMF(Session Management Function,\n\n[3]:特性描述\r: 修改SCP按NF实例选择配置  \r\nDEL SBISCPSELBYNFINSTID| 删除SCP按NF实例选择配置  \r\nSHOW SBISCPSELBYNFINSTID| 查询SCP按NF实例选择配置  \r\nSCP缺省选择配置| SET SBISCPDEFAULTSELECTION| 修改SCP缺省选择配置  \r\nSHOW SBISCPDEFAULTSELECTION| 查询SCP缺省选择配置  \r\n本地NRF相关配置-CHF  \r\nGPSI范围组编号配置| ADD SBIGPSIRANGEARRID| 新增GPSI范围组编号配置  \r\nDEL SBIGPSIRANGEARRID| 删除GPSI范围组编号配置  \r\nSHOW SBIGPSIRANGEARRID| 查询GPSI范围组编号配置  \r\nGPSI范围组参数配置| ADD SBIGPSIRANGEARRPARAM| 新增GPSI范围组参数配置  \r\nSET SBIGPSIRANGEARRPARAM| 修改GPSI范围组参数配置  \r\nDEL SBIGPSIRANGEARRPARAM| 删除GPSI范围组参数配置  \r\nSHOW SBIGPSIRANGEARRPARAM| 查询GPSI范围组参数配置  \r\nCHF信息配置| ADD SBICHFINFO| 新增CHF信息配置  \r\nSET SBICHFINFO| 修改CHF信息配置  \r\nDEL SBICHFINFO| 删除CHF信息配置  \r\nSHOW SBICHFINFO| 查询CHF信息配置  \r\nIPv4地址配置| ADD SBIIPV4ADDR| 新增IPv4地址配置  \r\nSET SBIIPV4ADDR| 修改IPv4地址配置  \r\nDEL SBIIPV4ADDR| 删除IPv4地址配置  \r\nSHOW SBIIPV4ADDR| 查询IPv4地址配置  \r\nIPv6地址配置| ADD SBIIPV6ADDR| 新增IPv6地址配置  \r\nSET SBIIPV6ADDR| 修改IPv6地址配置  \r\nDEL SBIIPV6ADDR| 删除IPv6地址配置  \r\nSHOW SBIIPV6ADDR| 查询IPv6地址配置  \r\nIP端点配置| ADD SBIIPENDPOINT| 新增IP端点配置  \r\nSET SBIIPENDPOINT| 修改IP端点配置  \r\nDEL SBIIPENDPOINT| 删除IP端点配置  \r\nSHOW SBIIPENDPOINT| 查询IP端点配置  \r\nIP端点组编号配置| ADD SBIIPENDPOINTARRID| 新增IP端点组编号配置  \r\nDEL SBIIPENDPOINTARRID| 删除IP端点组编号配置  \r\nSHOW SBIIPENDPOINTARRID| 查询IP端点组编号配置  \r\nIP端点组参数配置| ADD SBIIPENDPOINTARRPARAM| 新增IP端点组参数配置  \r\nSET SBIIPENDPOINTARRPARAM| 修改IP端点组参数配置  \r\nDEL SBIIPENDPOINTARRPARAM| 删除IP端点组参数配置  \r\nSHOW SBIIPENDPOINTARRPARAM| 查询IP端点组参数配置  \r\nNF服务版本组编号配置| ADD SBINFSVERSIONARRID| 新增NF服务版本组编号配置  \r\nDEL SBINFSVERSIONARRID| 删除NF服务版本组编号配置  \r\nSHOW SBINFSVERSIONARRID| 查询NF服务版本组编号配置  \r\nNF服务版本组参数配置| ADD SBINFSVERSIONARRPARAM| 新增NF服务版本组参数配置  \r\nSET SBINFSVERSIONARRPARAM| 修改NF服务版本组参数配置  \r\nDEL SBINFSVERSIONARRPARAM| 删除NF服务版本组参数配置  \r\nSHOW SBINFSVERSIONARRPARAM| 查询NF服务版本组参数配置  \r\n对端NF基本信息配置| ADD SBIPEERNFBASEINFO| 新增对端NF基本信息配置  \r\nSET SBIPEERNFBASEINFO| 修改对端NF基本信息配置  \r\nDEL SBIPEERNFBASEINFO| 删除对端NF基本信息配置  \r\nSHOW SBIPEERNFBASEINFO| 查询对端NF基本信息配置  \r\n对端NF扩展信息配置| ADD SBIPEERNFEXTINFO| 新增对端NF扩展信息配置  \r\nSET SBIPEERNFEXTINFO| 修改对端NF扩展信息配置  \r\nDEL SBIPEERNFEXTINFO| 删除对端NF扩展信息配置  \r\nSHOW SBIPEERNFEXTINFO| 查询对端NF扩展信息配置\n\n[4]:特性描述\r: 配置为不加密时，不会对HTTP消息进行加密，发送HTTP请求。\r\n\r\n  * RCP作为服务端时，可按服务化接口配置使用的HTTP服务端模板进行TLS验证。\r\n\r\n配置为使用TLS加密时，将支持对HTTPS消息进行TLS验证。\r\n\r\n配置为不加密时，不支持对HTTPS消息进行验证。\r\n\r\n\r\n\r\n\r\n支持直连路由寻址\r\n\r\n静态路由寻址\r\n\r\n当RCP作为客户端发送请求时，RCP支持通过本地NRF配置的方式进行路由寻址。\r\n\r\n以“从本地NRF配置中查询CHF”为例进行介绍。\r\n\r\n  * SCP基本属性配置\r\n\r\nSCP功能开关参数配置为不启用SCP功能。\r\n\r\nSCP功能开关参数配置为启用SCP功能，但是SCP按NF类型选择配置、SCP按FQDN选择配置中SCP模式参数配置为不启用SCP。\r\n\r\nSCP功能开关参数配置为启用SCP功能，但是SCP按NF类型选择配置、SCP按FQDN选择配置未配置，SCP缺省选择配置的SCP模式参数配置为不启用SCP。\r\n\r\n  * 本地NRF配置\r\n\r\n配置CHF网元信息。（等价于把动态发现响应中携带的CHF网元信息通过静态配置的方式配置到系统中去。）\r\n\r\n  * 服务发现方式配置\r\n\r\n发现方式参数配置为静态，RCP从本地NRF配置获取CHF信息。\r\n\r\n  * 服务发现配置\r\n\r\n若启用了缓存发现结果的功能，本地NRF配置也会有静态缓存。\r\n\r\n路由寻址时根据携带的参数，优先到缓存中进行匹配，缓存中匹配失败才会进行本地NRF匹配。\r\n\r\n\r\n\r\n\r\n动态路由寻址\r\n\r\n当RCP作为客户端发送请求时，RCP支持通过动态发现的方式进行路由寻址。动态路由寻址通过服务化特性查询NRF来获取目标NF信息，根据优先级、容量、权重等信息来选择信令路由。\r\n\r\n以“动态查询BSF”为例进行介绍。\r\n\r\n  * SCP基本属性配置\r\n\r\nSCP功能开关参数配置为不启用SCP功能。\r\n\r\nSCP功能开关参数配置为启用SCP功能，但是SCP按NF类型选择配置、SCP按FQDN选择配置中SCP模式参数配置为不启用SCP。\r\n\r\nSCP功能开关参数配置为启用SCP功能，但是SCP按NF类型选择配置、SCP按FQDN选择配置未配置，SCP缺省选择配置的SCP模式参数配置为不启用SCP。\r\n\r\n  * 服务发现方式配置\r\n\r\n发现方式参数配置为动态或动态优先，RCP通过动态查询NRF发现目的NF。\r\n\r\n  * 服务发现配置\r\n\r\n若启用了缓存发现结果的功能，路由寻址时根据携带的参数，优先到缓存中进行匹配，缓存中匹配失败再动态查询。\r\n\r\n  * 初次进行服务发现携带的参数见表4。\n\n[5]:特性描述\r: 资源控制平台)| 向SMF提供SM（Session Management）策略，并订阅相关事件。  \r\nSMF(Session Management Function, 会话管理功能)| 执行RCP提供的SM(Session Management, 会话管理)策略，向RCP上报相关事件。  \r\nCHF(Charging Function, 计费功能)| 维护RCP的订阅信息，向RCP提供策略计费信息的查询接口及状态变更的通知。  \r\nBSF(Binding Support Function, 绑定支持功能)| 维护RCP绑定信息，提供RCP绑定信息的注册、更新、去注册、查询接口。  \r\nUDR(Unified Data Repository, 统一数据存储)/SPR(Subscription Profile Repository, 用户签约数据库)| 向RCP提供策略签约信息，并允许RCP将动态生成的策略数据保存在UDR/SPR中。目前商用部署时采用SPR，测试时可以采用SPR或UDR。  \r\n  \r\n协议栈\r\n\r\nZXUN RCP与周边网元的服务化接口都以HTTP/2为承载，以ZXUN RCP和SMF间的N7接口为例（其它接口类似），其协议栈如图5所示。\r\n\r\n协议栈中的TLS为可选协议，当需要考虑传输层数据安全保护时，可以使用该协议。\r\n\r\n图5 协议栈\r\n\r\n业务流程\r\n\r\nRCP为服务提供方的业务流程\r\n\r\nRCP为服务提供方时，通过N5、N7、N15接口与AF/NEF、SMF、AMF交互。目前现场实际组网中，N5、N7、N15接口消息一般通过SCP转发至AF/NEF、SMF、AMF。\r\n\r\n下面以N7接口为例，描述RCP作为服务提供方的业务流程，其它接口类似。\r\n\r\n直连场景（B模式）\r\n\r\nRCP为服务提供方，直连场景（B模式）下的业务流程如图6所示。\r\n\r\n图6 B模式业务流程\r\n\r\n流程说明如下：\r\n\r\n  1. RCP上电后，向NRF注册本NF、服务的相关信息，包括FQDN、IP、优先级、版本号等信息。\r\n\r\n  2. NRF返回注册成功，服务使用者可根据RCP提供信息寻址到RCP。\r\n\r\n  3. SMF收到PDU会话创建请求，若本地没有RCP的服务发现缓存，向NRF获取SM策略服务的相关信息。\r\n\r\n  4. （可选）SMF通过服务实例号、号段等信息向NRF查询SM策略服务地址。\r\n\r\n  5. （可选）NRF将注册的RCP信息返回给SMF。\r\n\r\n  6. SMF构造PDU会话信息，从NRF返回信息中找到目的RCP服务。\r\n\r\n  7. SMF调用SM策略服务的PDU会话创建接口，包含接入网相关信息、用户信息等。\r\n\r\n  8. RCP的SM策略服务收到PDU会话创建请求后，进行PDU会话决策，构造PCC规则和订阅相关事件。\r\n\r\n  9. RCP返回响应消息给SMF。\r\n\r\n  10. 当内部事件（例如，内部决策时间到）或签约发生变更时，触发会话重决策。\r\n\r\n  11. RCP使用创建请求消息体中的NotifURI，同时根据本地缓存或NRF查询结果，选择客户端模板。\r\n\r\n  12.", "answer": "RCP的HTTP信令路由包括以下功能：\n\n  1. 支持HTTP/HTTPS静态链路管理。\n  2. 支持HTTP/HTTPS动态链路管理。\n  3. 支持同一会话的链路保持。\n  4. 支持直连静态路由寻址。\n  5. 支持直连动态路由寻址。\n  6. 支持相同优先级负荷分担路由。\n  7. 支持主备路由。\n  8. 支持消息重路由发送，包括超时重路由和根据对端错误码重路由。\n  9. 支持SCP C模式路由。\n  10. 支持SCP D模式路由。\n  11. 支持SCP Proxy模式路由。\n  12. 支持在N7/N15接口对双网络平面AMF/SMF接入。"}
{"id": 51, "query": "EMSPlus的Reporting局流量报表的功能有哪些", "recall": "[1]:产品定位\r: 产品定位\r\n\r\n分类\r\n\r\nZXUN EMSPlus是面向用户的数据业务运营分析产品，立足于从客户的角度去感知和分析网络和业务信息，通过对海量数据灵活的挖掘和分析，实现对业务流量、用户流量、日志查询、终端应用和用户回溯等全方位的可视化，构建可视、可管、可控的业务管道，为移动数据业务精细化运营提供了全面支撑。\r\n\r\nZXUN EMSPlus按功能定位分为ZXUN EMSPlus（Reporting）和ZXUN EMSPlus（Logging）两个子产品：\r\n\r\n  * ZXUN EMSPlus（Reporting）提供流量统计报表查询。\r\n\r\n  * ZXUN EMSPlus（Logging）提供网元日志关联存储查询。\r\n\r\n\r\n\r\n\r\nZXUN EMSPlus的详细功能如图1所示。\r\n\r\n图1 系统功能定位\r\n\r\n定位\r\n\r\nReport功能是EMSPlus（Reporting）根据应用提供的具体报表模型，向用户呈现各种丰富的数据统计图表。\r\n\r\nEMSPlus（Reporting）可为运营商带来以下价值：\r\n\r\n  * 通过采集用户在各网元上的控制面话单和媒体面数据记录，进行各网元数据的关联分析，快速找出用户失败原因，提高用户投诉处理效率和用户满意度。\r\n\r\n  * 建立多重指标体系，通过网络质量、业务流量和用户流量的采集和挖掘分析，实现数据业务问题的定位和优化，提升网络质量和业务性能，提高运维效率，打造精品网络。\r\n\r\n  * 支撑市场精准营销，通过热门业务，用户偏好，终端使用等分析功能，为运营商挖掘潜在应用和套餐，定制用户所需终端，发展目标用户和关怀用户提供有力支撑，增加运营收益。\r\n\r\n\r\n\r\n\r\nEMSPlus（Reporting）支持内部接口，从中兴核心网网元获取控制面数据和媒体面数据。将控制面CHR(Call History Record, 呼叫历史记录)和媒体面DPI(Deep Packet Inspection, 深度包检测)数据整合后，再通过多层的多维度报表对数据进行分析呈现，实现数据业务分析优化。\r\n\r\nEMSPlus（Reporting）系统的网络架构如图2所示。\r\n\r\n图2 系统网络架构\n\n[2]:产品特点\r: 产品特点\r\n\r\nEMSPlus（Reporting）具有以下主要的技术特点：\r\n\r\n  * 数据业务网优\r\n\r\n对主流业务，建立了端到端的业务质量指标体系，支持从终端用户角度进行端到端的分析评估，可直观了解各种业务的可用性、时延、流量、带宽、丢包等指标状况，并且支持从上到下，从整体到区域，层层钻取分析，快速定位问题的根源，为数据业务的网络优化提供支撑。\r\n\r\n  * 灵活的自定义报表\r\n\r\n支持灵活的自定义报表，只要是原始数据里有的参数字段，都可以进行统计，无需更改代码和系统升级。维护人员可以灵活设置报表的查询条件、统计内容和呈现方式，同时EMSPlus（Reporting）还提供了方便直观的钻取分析功能，支持多个报表之间关联分析，可以有效提高操作人员的分析效率。\r\n\r\n  * 领先的系统平台\r\n\r\n    * 支持从中兴网元内部接口采集。\r\n\r\n    * 高效的基于硬解码的数据采集平台。\r\n\r\n    * 基于独立硬件NFV(Network Functions Virtualization, 网络功能虚拟化)架构，硬件平滑扩容，无性能瓶颈。\r\n\r\n    * 采用高智能的列式数据库GBase，存储量压缩比约1/4，入库及查询效率是传统行式数据库的8~10倍。\r\n\r\n    * 模块化的软件架构，实现各功能应用灵活部署，支持集中和分布式组网。\n\n[3]:产品定位\r: 产品定位\r\n\r\n分类\r\n\r\n中兴ZXUN EMSPlus是面向用户的数据业务运营分析产品，立足于从客户的角度去感知和分析网络和业务信息，通过对海量数据灵活的挖掘和分析，实现对业务流量、用户流量、日志查询、终端应用和用户回溯等全方位的可视化，构建可视、可管、可控的业务管道，为移动数据业务精细化运营提供了全面支撑。\r\n\r\nZXUN EMSPlus按功能定位分为ZXUN EMSPlus（Reporting）和ZXUN EMSPlus（Logging）两个子产品：\r\n\r\n  * ZXUN EMSPlus（Reporting）提供流量统计报表查询。\r\n\r\n  * ZXUN EMSPlus（Logging）提供网元日志关联存储查询。\r\n\r\n\r\n\r\n\r\nZXUN EMSPlus的详细功能如图1所示。\r\n\r\n图1 系统功能定位\r\n\r\n定位\r\n\r\nEMSPlus（Logging）是网元日志关联存储查询服务器。\r\n\r\nEMSPlus（Logging）目前可以提供上网记录溯源功能，通常称之为互联网协议详细记录（后续简称IPDR(Internet Protocol Detail Record, 互联网协议详细记录)功能），还可以提供设备日志留存功能（后续简称Logging功能）。\r\n\r\n  * IPDR功能目前支持ZTE(Zhongxing Telecommunications Equipment, 中兴通讯) CGNAT的日志与xGW(Extendable Gateway, 综合接入网关)的用户流量日志互相关联，也支持与5G虚拟化的SMF/UPF日志进行关联，满足上网日志溯源。\r\n\r\n  * Logging功能可以存储查询FireWall会话日志、安全日志及系统日志，CGNAT(Carrier Grade Network Address Translation, 运营商级网络地址转换)的会话日志等。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\nFireWall、xGW、CGNAT均指虚拟化情况下的ZTE(Zhongxing Telecommunications Equipment, 中兴通讯)设备。\r\n\r\nEMSPlus（Logging）可为运营商带来以下价值：\r\n\r\n  * 通过采集用户在xGW或SMF/UPF与Firewall的数据记录，并进行关联，快速找出用户的上网记录、攻击溯源等。可以通过多种查询条件溯源。\r\n\r\n  * 留存FireWall的会话日志、安全日志、系统日志，留存CGNAT的会话日志。\r\n\r\n  * 对FireWall和路由器的日志提供一些基本的指标统计，例如消息数、上下行流量、上下行包数。\r\n\r\n\r\n\r\n\r\nEMSPlus（Logging）可以从xGW网元、Firewall及CGNAT获取数据，系统网络架构如图2和图3所示。\r\n\r\n图2 系统网络架构（xGW组网）图3 系统网络架构（SMF/UPF组网）\n\n[4]:流量报表\r: 流量报表\r\n\r\n支持分不同时间粒度（15min/小时/天/周/月），按网元、APN(Access Point Name, 接入点名称)、RAT(Radio Access Technology, 无线接入技术)、PLMN(Public Land Mobile Network, 公共陆地移动网)、位置（包括区域、小区等）等多个维度进行分析，分析指标包括总流量、上行流量、下行流量、上行流速、下行流速、连接数、连接时长等。并可以通过趋势分析、TOP分析等手段，结合图形直观呈现。\r\n\r\n表1 查询条件条件区| 字段| 必选/可选  \r\n---|---|---  \r\n时间| 时间粒度| 必选  \r\n时间| 必选  \r\n记录数（Records）| 必选，最大值4000  \r\n条件1区| 网元、APN、RAT、PLMN、位置（包括区域、小区等）| 可选  \r\n表2 呈现图表图形名称| 显示方式| 横坐标| 纵坐标| 系列  \r\n---|---|---|---|---  \r\n总流量(MB)| 趋势图| 时间| 总流量(MB)| 网元、APN、RAT、PLMN、位置（包括区域、小区等）  \r\n总带宽(Mb/S)| 趋势图| 时间| 总带宽(Mb/S)| 网元、APN、RAT、PLMN、位置（包括区域、小区等）  \r\n总流量占比(%)| 饼图| -| -| 网元、APN、RAT  \r\n表3 呈现字段字段| 含义  \r\n---|---  \r\n时间| 查询条件选择日期范围，按照选择的粒度来显示  \r\n维度名称| 查询条件选择的维度对象，可作为钻取字段  \r\n总流量占比| 各维度值占总流量的比例（在不显示时间粒度的统计报表中提供）  \r\n总流量(MB)| 上下行流量求和除以2个1024，将单位转成MB  \r\n上行流量(MB)| 上行流量求和除以2个1024，将单位转成MB  \r\n下行流量(MB)| 下行流量求和除以2个1024，将单位转成MB  \r\n总流速(Mb/S)| 总流量/总业务持续时长  \r\n上行流速(Mb/S)| 上行流量/上行业务持续时长  \r\n下行流速(Mb/S)| 下行流量/下行业务持续时长  \r\n业务持续时长(S)| 业务持续时长求和  \r\n连接数| 连接数求和  \r\n用户数| 指定维度的用户数量\n\n[5]:实现原理\r: 实现原理\r\n\r\n本节包含以下内容：\r\n\r\n  * 系统架构\r\n\r\n  * 涉及的网元\r\n\r\n  * 本网元实现\r\n\r\n  * 业务流程\r\n\r\n\r\n\r\n\r\n系统架构\r\n\r\nEMSPlus系统的报表功能，主要是根据报表模型将事实表和聚集表中的数据以图表的方式展示给用户，如图1所示。\r\n\r\n图1 系统报表图\r\n\r\n涉及的网元\r\n\r\n该特性由本网元单独实现，无需其他网元的配合。\r\n\r\n本网元实现\r\n\r\n维度导入导出涉及到的功能点：\r\n\r\n  * 导出功能：支持对维度表所有数据的导出，支持对维度表模板的导出。\r\n\r\n  * 导入功能：根据维度表模板文件制作好的数据导入到EMSPlus系统，后台对应将数据格式化后，通过数据库命令方式导入到数据库。\r\n\r\n  * 配置功能：通过人机命令方式对维度表的记录进行增加、删除、修改和查询操作。\r\n\r\n\r\n\r\n\r\n业务流程\r\n\r\n此功能由COMM平台实现，EMSPlus无业务流程。", "answer": "EMSPlus的Reporting子产品提供的流量报表功能主要包括：\n\n1. 支持分不同时间粒度（如15分钟、小时、天、周、月）进行分析。\n2. 可以按网元、APN、RAT、PLMN、位置（包括区域、小区等）等多个维度进行分析。\n3. 分析指标包括总流量、上行流量、下行流量、上行流速、下行流速、连接数、连接时长等。\n4. 可以通过趋势分析、TOP分析等手段，结合图形直观呈现数据。\n5. 提供总流量(MB)趋势图、总带宽(Mb/S)趋势图、总流量占比(%)饼图等不同的图表显示方式。\n6. 支持对流量数据的详细字段查询，如时间、维度名称、总流量占比、上下行流量、总流速、业务持续时长、连接数、用户数等。"}
{"id": 52, "query": "告警无法处理或无法恢复一般该怎么办？", "recall": "[1]:告警处理介绍\r: * 确认状态\r\n\r\n显示告警信息的当前处理状态。\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\n罗列出可能产生该告警的各种原因。给出告警产生原因的目的是希望通过了解告警的触发条件，及时获得排除故障的方法和预防措施，以使系统尽快恢复正常。\r\n\r\n处理意见\r\n\r\n有针对性地给出能够排除告警的措施和建议。\r\n\r\n处理告警时需要注意的事项如下：\r\n\r\n  * 操作维护人员记录下问题和故障现象后，按照本文的相关处理建议和方法，按顺序进行处理。若无特殊说明，在每一个处理步骤完成后，如果故障排除（即告警恢复），则结束告警处理；如果故障没有排除，则进入下一步骤。\r\n\r\n  * 如果告警无法处理或无法恢复，请及时联系中兴通讯。\n\n[2]:1003 NTP服务器不可达告警\r: 1003 NTP服务器不可达告警\r\n\r\n告警描述\r\n\r\n当配置的主NTP服务器（或次NTP服务器）的IP地址不通，或者对应设备上没有开启NTP服务时，上报该告警。\r\n\r\n当主NTP服务器（或次NTP服务器）与本网元IP地址通且能正常提供NTP服务的时候，恢复该告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：次要\r\n\r\n  * 告警类型：通信告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n远端地址| 时间同步不可达的上级NTP服务器的IP地址。  \r\n  \r\n可能原因\r\n\r\n  * 主NTP服务器IP地址（或次NTP服务IP地址）不存在，或者对应设备上没有开启NTP服务。\r\n\r\n  * 主NTP服务（或次NTP服务）工作不正常，或者没有与其上级服务器时间同步。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n系统时间可能不准确，所有与时间有关的功能都会受到影响（如性能统计结果不准确，告警上报时间不准确等）。\r\n\r\n处理建议\r\n\r\n  1. 查看该告警附加信息中的远端地址是否与实际情况一致。\r\n\r\n     * 是→3\r\n\r\n     * 否→2\r\n\r\n  2. 使用SET NTP命令修改主服务器IP和次服务器IP为实际使用的NTP服务器地址，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 使用SET NTP命令，配置告警附加信息中的远端地址对应的NTP版本为较低的NTP版本3，查看本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→4\r\n\r\n  4. 使用SET NTP命令修改Transmit时间戳为本地UTC时间，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→5\r\n\r\n  5. 联系中兴通讯技术支持。\n\n[3]:200102\r: 200102\r\n\r\n告警描述\r\n\r\n接口Down。\r\n\r\n默认级别\r\n\r\n5\r\n\r\n告警恢复\r\n\r\n是\r\n\r\n告警类型\r\n\r\n处理错误告警\r\n\r\n告警类别\r\n\r\n普通告警\r\n\r\n告警描述原型\r\n    \r\n    \r\n    Comment:PIM interface changed. \r\n    DisplayResult:PIM$1 interface $2 changed state to $3. Reason: $4.\r\n\r\n参数说明\r\n\r\n$1:PIM vrf名称\r\n\r\n$2:接口名\r\n\r\n$3:接口状态\r\n\r\n$4:接口变化原因\r\n\r\n告警样例\r\n\r\n告警产生：\r\n    \r\n    \r\n    An alarm 200102 ID 2 level 5 occurred at 08:09:52 02-26-2010 sent by MPU-0/20/0\r\n    %PIM% PIM interface changed!  PIM interface loopback1 changed state to down!\r\n\r\n告警恢复：\r\n    \r\n    \r\n    An alarm 200102 ID 2 level 5 cleared at 08:10:53 02-26-2010 sent by MPU-0/20/0\r\n    %PIM% PIM interface changed!  PIM interface loopback1 changed state to up!\r\n\r\n引起原因\r\n\r\n可能是接口的管理状态或物理状态为Down。\r\n\r\n产生的影响\r\n\r\n相应组播接口消失。\r\n\r\n处理建议\r\n\r\n  1. 执行命令show running-config multicast检查接口是否配置了no pimsm或no pimdm：\r\n\r\n     * Y→步骤2\r\n\r\n     * N→步骤3\r\n\r\n  2. 在接口上配置**pimsm** 或**pimdm** ，完成后，检查告警是否恢复。\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤3\r\n\r\n  3. 执行命令show ip interface brief检查接口的物理状态是否是down。\r\n\r\n     * Y→步骤4\r\n\r\n     * N→步骤5\r\n\r\n  4. 检查线路和接口，排除接口和链路物理故障，完成后，检查告警是否恢复。\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤5\r\n\r\n  5. 请联系中兴通讯技术支持工程师。\n\n[4]:3509583893 重要系统资源容量不足三级告警\r: 3509583893 重要系统资源容量不足三级告警\r\n\r\n告警描述\r\n\r\n重要系统资源为对业务流程有重要影响的系统资源。当重要系统资源使用率达到三级告警阈值但没有达到二级告警阈值时，上报此告警。当重要系统资源使用率降到三级告警阈值以下时，此告警恢复。\r\n\r\n告警属性\r\n\r\n  * 告警级别：次要\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n资源名| 该告警对应的系统资源的名称。  \r\n当前使用数| 该告警对应的系统资源的当前使用数量。  \r\n资源容量| 该告警对应的系统资源的容量。  \r\n当前使用率| 该告警对应的系统资源的当前使用率。  \r\n  \r\n可能原因\r\n\r\n  * 系统资源容量不足。\r\n\r\n  * 告警阈值设置的过低。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n无其他系统影响，业务使用正常。\r\n\r\n处理建议\r\n\r\n  1. 根据告警附加信息中的资源名，执行SHOW RESOURCE THRESHOLD命令查看对应的资源阈值配置，确认当前配置的三级告警阈值是否合理。\r\n\r\n     * 是→3\r\n\r\n     * 否→2\r\n\r\n  2. 执行ADD SBIRESOURCETHRESHOLD命令修改对应系统资源的三级告警阈值配置。等待约1分钟，查看告警级别是否下降或恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 查看告警附加信息中的系统资源容量是否不足。\r\n\r\n     * 是→建议联系中兴通讯进行扩容\r\n\r\n     * 否→4\r\n\r\n  4. 联系中兴通讯技术支持。\n\n[5]:2114322746 CBC局向不可达\r: 2114322746 CBC局向不可达\r\n\r\n告警描述\r\n\r\n由于网络故障或配置问题，MME检测出到CBC局向的所有路由不通时，上报该告警。\r\n\r\n当MME检测出到CBC局向的其中一条路由可用时，恢复该告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：通讯告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\nCBC局向| 所有路由都不可达的CBC局向。通过SHOW CBC OFFICE命令可以查询CBC局向信息。  \r\n  \r\n可能原因\r\n\r\n  * MME和CBC之间网络异常。\r\n\r\n  * CBC局向关联的SBc连接路由配置异常。\r\n\r\n  * CBC网元故障。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\nMME和CBC之间偶联断链，MME和CBC之间的业务受影响，PWS(Public Warning System, 公共预警系统)将无法通过CBC向MME发送预警通知。\r\n\r\n处理建议\r\n\r\n  1. 执行SHOW CBC OFFICE命令，查询不可达CBC局向使用的所有“SCTP连接标识”。\r\n\r\n  2. 根据步骤1获取的SCTP连接标识，执行SHOW SCTP命令查询对应偶联的配置信息，确定偶联的“对端IP地址”、“本端IP地址”、“对端端口号”和“本端端口号”配置和实际要求是否一致。\r\n\r\n     * 是→4\r\n\r\n     * 否→3\r\n\r\n  3. 执行SET SCTP命令，修改偶联配置，查看本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→4\r\n\r\n  4. 联系对端设备维护人员，检查对端相关配置和实际要求是否一致。\r\n\r\n     * 是→6\r\n\r\n     * 否→5\r\n\r\n  5. 等待对端设备维护人员根据实际要求修改配置后，查看本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→6\r\n\r\n  6. 按照8402690 偶联断链的告警处理建议进行处理，处理完毕后，查看本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→7\r\n\r\n  7. 联系中兴通讯技术支持。", "answer": "一般遇到告警无法处理或无法恢复的情况，应当按照以下步骤进行：\n\n1. 遵循已有的处理步骤和建议，确保所有可能的解决措施都已经尝试过。\n   \n2. 如果按照既定步骤无法解决问题，应及时联系设备供应商或技术支持。\n\n3. 在联系技术支持时，应提供详细的告警信息、已采取的处理措施以及处理过程中的观察到的现象。\n\n4. 根据技术支持的建议进行进一步的故障排除或等待他们提供解决方案。\n\n在上下文信息中，对于无法处理或无法恢复的告警，特别指出“请及时联系中兴通讯技术支持”。这表明在遇到此类问题时，与中兴通讯的技术支持团队沟通是解决问题的推荐途径。"}
{"id": 53, "query": "故障来源有哪些？", "recall": "[1]:故障处理记录表\r: 故障处理记录表\r\n\r\n设备名称 |   \r\n| 设备编号 |   \r\n  \r\n---|---|---|---  \r\n发生时间| 年 月 日 时| 解决时间| 年 月 日 时  \r\n故障类别：硬件设备故障、电源故障、传输网故障、数据修改、其它故障。  \r\n  \r\n  \r\n  \r\n故障来源：用户投诉、日志系统、例行维护中发现、其它来源。  \r\n  \r\n  \r\n  \r\n  \r\n故障现象：  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n故障解决方案：  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n经验总结：  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n值班人签名：| 处理人签名：\n\n[2]:故障说明\r: 故障说明\r\n\r\n故障分类\r\n\r\n故障是设备或系统软件在工作过程中，因某种原因“丧失规定功能”或危害安全的现象。按照故障影响的业务和故障影响的范围，故障分为紧急故障和一般故障。\r\n\r\n  * 紧急故障\r\n\r\n指严重影响业务运营的故障，包括系统关键指标严重下降、业务大面积甚至全部中断和计费异常。\r\n\r\n  * 一般故障\r\n\r\n除紧急故障以外的，对业务运营影响不大的故障。\r\n\r\n\r\n\r\n\r\n故障来源\r\n\r\n故障来源主要有下面三种：\r\n\r\n  * 终端用户投诉\r\n\r\n业务无法使用或使用异常，导致用户投诉。\r\n\r\n  * 网管界面告警\r\n\r\n系统设备或软件异常产生告警，上报到网管，在网管界面进行声光告警，具体处理步骤可参见告警处理中相应告警码内容。\r\n\r\n  * 例行维护检查\r\n\r\n维护工程师在日常例行维护中发现的设备或系统异常情况。\n\n[3]:* 硬件类故障\r: * 硬件类故障\r\n    * 局域网内交换机掉电\r\n    * 磁盘阵列硬件故障\r\n  * 通讯类故障\r\n    * MDS上报“MDS与DCUMU/DCURP/ASC链路异常(2365983488)”\r\n    * OMM上报“NTP服务器链路中断(2365981953)”\r\n  * 业务类故障\r\n    * 网元上报硬盘使用率超标告警\r\n    * OMM上报“内存使用率超标(2365981186)” \r\n    * OMM上报“CPU使用率超标(2365981185)” \r\n    * OMM上报“NewstartHA双机资源告警(2365981706)” 或“NewstartHA双机服务告警(2365981707)” \r\n    * OMM上报“NewstartHA双机备机离线告警(2365981710)” \r\n    * 网元上报“数据溢出(2365983024)” \r\n    * 网元上报“数据源异常(2365983041)” \r\n    * 网元上报“组件异常(2365983264)” \r\n    * 网元上报“文件推送失败(2365983008)”\r\n    * 网元上报“文件入库失败(2365983280)”\r\n  * 云盘类故障\r\n    * 云盘文件系统损坏\r\n  * 应急操作\r\n    * 重启应用程序\r\n    * 停止应用程序\r\n    * 启动应用程序\r\n    * 重启系统\r\n  * 缩略语\r\n    * CPU\r\n    * DPU\r\n    * DRS\r\n    * FTP\r\n    * IP\r\n    * MDS\r\n    * NTP\r\n    * OMM\r\n    * SFTP\r\n    * TCP\r\n    * TECS\r\n    * UDP\n\n[4]:业务类故障\r: 业务类故障\r\n\r\n子主题：\r\n\r\n  * 网元上报硬盘使用率超标告警\r\n\r\n  * OMM上报“内存使用率超标(2365981186)”\r\n\r\n  * OMM上报“CPU使用率超标(2365981185)”\r\n\r\n  * OMM上报“NewstartHA双机资源告警(2365981706)” 或“NewstartHA双机服务告警(2365981707)”\r\n\r\n  * OMM上报“NewstartHA双机备机离线告警(2365981710)”\r\n\r\n  * 网元上报“数据溢出(2365983024)”\r\n\r\n  * 网元上报“数据源异常(2365983041)”\r\n\r\n  * 网元上报“组件异常(2365983264)”\r\n\r\n  * 网元上报“文件推送失败(2365983008)”\r\n\r\n  * 网元上报“文件入库失败(2365983280)”\n\n[5]:通讯类故障\r: 通讯类故障\r\n\r\n子主题：\r\n\r\n  * MDS上报“MDS与DCUMU/DCURP/ASC链路异常(2365983488)”\r\n\r\n  * OMM上报“NTP服务器链路中断(2365981953)”", "answer": "故障来源主要有以下几种：\n1. 用户投诉\n2. 日志系统\n3. 例行维护中发现\n4. 其他来源\n5. 网管界面告警（系统设备或软件异常产生告警）"}
{"id": 54, "query": "对于ZXR10设备来说，告警级别分为哪八个级别？", "recall": "[1]:告警条目说明\r: 告警条目说明\r\n\r\n概述\r\n\r\n文档从多个方面对告警条目进行了描述，下面分别介绍每个告警条目的含义。\r\n\r\n告警码\r\n\r\n告警码就是系统对告警条目的统一编号，是个十进制的正整数，全局唯一，方便用户检索。\r\n\r\n本文将告警码作为小节标题，方便检索。\r\n\r\n告警ID\r\n\r\n也称为告警流水号，有告警产生或者通知上报都会递增，对于告警恢复不会递增，告警恢复的流水号是对应的告警产生的流水号。\r\n\r\n流水号从1开始，范围是：1 ~ 232-1，到达最大值时会翻转为1。\r\n\r\n告警原型\r\n\r\n告警原型给出了此告警的模板。告警原型包括了Comment和DisplayResult两部分：\r\n\r\n  * **Comment** ： 该告警的标题，是告警的概貌。\r\n\r\n  * **DisplayResult** ：该告警细化的原型描述。其中变化的内容，通过告警参数体现。每个告警根据其特性，告警参数的个数：0~N。\r\n\r\n\r\n\r\n\r\n告警样例\r\n\r\n告警样例部分给出此告警的实例，就是设备上告警发生时的显示信息，以命令show logging alarm查看到的样式为准。\r\n\r\n对于可恢复的告警：告警样例分为“告警产生”和“告警恢复”两小部分。\r\n\r\n告警描述\r\n\r\n告警描述是对设备告警语言的通俗解释，告诉读者告警原型中的信息具体表达了什么含义。\r\n\r\n告警级别\r\n\r\n默认级别指明了本条告警的默认告警级别是多少。\r\n\r\n对于ZXR10设备来说，告警级别分为八个级别，其中第一级告警最严重，第八级告警最轻微，参见表1。\r\n\r\n表1 告警级别与说明告警级别| 重要程度| 说明  \r\n---|---|---  \r\n1| EMERGENCIES（严重告警）| 可能会导致系统与业务崩溃的告警，需要立即采取相应措施  \r\n2| ALERTS（重大告警）| 系统出现重大故障，可能影响业务正常运行，需要立即采取相应措施  \r\n3| CRITICAL（紧急告警）| 出现紧急情况，需要尽快处理  \r\n4| ERRORS（错误告警）| 出现错误，在适当的时间进行处理  \r\n5| WARNINGS（警告告警）| 系统提示一些需要警告的情况，以引起用户注意，需要进一步观察  \r\n6| NOTIFICATIONS（通告信息）| 系统认为应该通告到各部分并记录的普通但很重要的事件信息  \r\n7| INFORMATIONAL（报告信息）| 一般性通知信息  \r\n8| DEBUGGING（调试信息）| 对管理员为调试系统或网络而输入命令的响应信息类别  \r\n  \r\n一般而言，1-5级属于告警，6-8级归为通知。\n\n[2]:240403\r: 240403\r\n\r\n告警描述\r\n\r\n设备TUNNEL-GROUP数量超出告警阈值。\r\n\r\n默认级别\r\n\r\n5\r\n\r\n告警恢复\r\n\r\n是\r\n\r\n告警类型\r\n\r\n质量服务告警\r\n\r\n告警类别\r\n\r\n普通告警\r\n\r\n告警描述原型\r\n    \r\n    \r\n    Comment:The number of tunnel group reached the percentage of global alarm threshold.\r\n    DisplayResult:(Alarm threshold = $1 percent).\r\n\r\n参数说明\r\n\r\n$1：告警阈值\r\n\r\n告警样例\r\n\r\n告警产生：\r\n    \r\n    \r\n    An alarm 240403 ID 357 level 5 occurred at 10:32:30 04-10-2017 sent by ZXR10 MPU-0/20/0\r\n    %TUNNEL-GROUP%The number of tunnel group reached the percentage of global alarm threshold.\r\n    (Alarm threshold = 80 percent).\r\n\r\n告警恢复：\r\n    \r\n    \r\n    An alarm 240403 ID 357 level 5 cleared at 10:32:30 04-10-2017 sent by ZXR10 MPU-0/20/0\r\n    %TUNNEL-GROUP%The number of tunnel group reached the percentage of global alarm threshold.\r\n    (Alarm threshold = 75 percent).\r\n\r\n引起原因\r\n\r\n设备上存在的隧道保护组已经超出容量告警阈值。\r\n\r\n产生的影响\r\n\r\n设备上隧道保护组数量过多，可能会降低性能。\r\n\r\n处理建议\r\n\r\n提示用户，不需要用户处理。\n\n[3]:300915\r: 300915\r\n\r\n告警描述\r\n\r\n前向时延越限。\r\n\r\n默认级别\r\n\r\n2\r\n\r\n告警恢复\r\n\r\n是\r\n\r\n告警类型\r\n\r\n通信告警\r\n\r\n告警类别\r\n\r\n性能告警\r\n\r\n告警描述原型\r\n    \r\n    \r\n    Comment:Forward delay threshold crossed of TWAMP (unit:ns).\r\n    DisplayResult:(ConnectionId=$8,SessionId=$9,SourceIP =$10,DestinationIP=$11,\r\n    VrfName=$13,Dscp=$12).\r\n\r\n参数说明\r\n\r\n$8：TWAMP控制链接ID\r\n\r\n$9：控制连接上测试会话ID\r\n\r\n$10：源IP地址\r\n\r\n$11：目的IP地址\r\n\r\n$13：VRF名称\r\n\r\n$12：DSCP优先级\r\n\r\n告警样例\r\n\r\n告警产生：\r\n    \r\n    \r\n    An alarm 300915 1 ID 164 level 2 occurred at 01:14:45 01-01-2010 sent by ZXR10 MPU-0/20/0\r\n    %TWAMP% Forward delay threshold crossed of TWAMP (unit:ns).(ConnectionId=1,\r\n    SessionId=2,SourceIP =1.1.1.1,DestinationIP=1.1.1.2,VrfName=abc,Dscp=0).<587-desricp> \r\n    15m high alarm occur. High thres is 10000000. Current value is: 20000000. \r\n\r\n告警恢复：\r\n    \r\n    \r\n    An alarm 300915 1 ID 164 level 2 cleared at 01:14:45 01-01-2010 sent by ZXR10 MPU-0/20/0\r\n    %TWAMP% Forward delay threshold crossed of TWAMP (unit:ns).(ConnectionId=1,\r\n    SessionId=2,SourceIP =1.1.1.1,DestinationIP=1.1.1.2,VrfName=abc,Dscp=0).<587-desricp> \r\n    15m high alarm disappear. High thres is 10000000. Current value is: 100000. \r\n\r\n引起原因\r\n\r\n时钟不同步\r\n\r\n链路阻塞。\r\n\r\n产生的影响\r\n\r\n链路前向时延过大。\r\n\r\n处理建议\r\n\r\n  1. 检查时钟是否同步。\r\n\r\n     * Y→步骤2\r\n\r\n     * N→步骤3\r\n\r\n  2. 检查该链路是否出现阻塞。\r\n\r\n     * Y→步骤4\r\n\r\n     * N→步骤5\r\n\r\n  3. 排除时钟同步，检查告警是否消失。\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤2\r\n\r\n  4. 排除出链路阻塞，检查告警是否消失。\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤5\r\n\r\n  5. 请联系中兴通讯技术支持工程师。\n\n[4]:350301\r: 350301\r\n\r\n告警描述\r\n\r\n设备上当前告警数量超过阈值。\r\n\r\n默认级别\r\n\r\n3\r\n\r\n告警恢复\r\n\r\n是\r\n\r\n告警类型\r\n\r\n质量服务告警\r\n\r\n告警类别\r\n\r\n普通告警\r\n\r\n告警描述原型\r\n    \r\n    \r\n    Comment: Number of current alarms in the equipment reaches the threshold.\r\n    DispalyResult: $1% of the capacity of current alarm database is occupied, the records \r\n    in current alarm database is $2, and the capacity is $3.\r\n\r\n参数说明\r\n\r\n$1：当前告警占用告警的百分比\r\n\r\n$2：当前告警的数量\r\n\r\n$3：当前告警库的容量\r\n\r\n告警样例\r\n\r\n告警产生：\r\n    \r\n    \r\n    An alarm 350301 ID 1 level 3 occurred at 15:47:39 04-28-2013 sent by ZXR10 MPU-0/20/0\r\n    %SYSTEM% Number of current alarms in the equipment reaches the threshold.90% of the \r\n    capacity of current alarm database is occupied, the records in current alarm database \r\n    is 4506, and the capacity is 5000.\r\n\r\n告警恢复：\r\n    \r\n    \r\n    An alarm 350301 ID 1 level 3 cleared at 15:47:39 04-28-2013 sent by ZXR10 MPU-0/20/0\r\n    %SYSTEM% Number of current alarms in the equipment reaches the threshold.84% of the \r\n    capacity of current alarm database is occupied, the records in current alarm database \r\n    is 4249, and the capacity is 5000.\r\n\r\n引起原因\r\n\r\n设备上当前告警数量超过阈值。\r\n\r\n产生的影响\r\n\r\n在没有告警恢复的情况下，继续有告警上报有可能会被丢弃。同时，告警指示灯可能会发生故障。\r\n\r\n处理建议\r\n\r\n  1. 执行命令show alarm current，查看是否存在当前告警，并且数量超过本告警的恢复阀值。\r\n\r\n     * Y→步骤2\r\n\r\n     * N→步骤3\r\n\r\n  2. 处理当前告警池中的告警，使之恢复。当前告警池告警数量低于本告警的恢复阀值之后，查看本告警是否恢复。\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤3\r\n\r\n  3. 请联系中兴通讯技术支持工程师。\n\n[5]:150108\r: 150108\r\n\r\n告警描述\r\n\r\n接口三层IPv6检测状态Down。\r\n\r\n默认级别\r\n\r\n3\r\n\r\n告警恢复\r\n\r\n是\r\n\r\n告警类型\r\n\r\n通信告警\r\n\r\n告警类别\r\n\r\n普通告警\r\n\r\n告警描述原型\r\n    \r\n    \r\n    Comment: Interface ipv6 detect status\r\n    DisplayResult: The interface(index=$2,name='$1') ipv6 detect status turned into $3\r\n\r\n参数说明\r\n\r\n$1：接口名字\r\n\r\n$2：接口索引值\r\n\r\n$3：接口三层IPv6检测状态Up或者Down\r\n\r\n告警样例\r\n\r\n告警产生：\r\n    \r\n    \r\n    An alarm 150108 ID 6 level 3 occurred at 07:21:51 10-25-2011 sent by ZXR10 MPU-0/26/0\r\n    %IP% Interface ipv6 detect status  The interface(index=5,name='smartgroup2') ipv6 \r\n    detect status turned into protocol DOWN\r\n\r\n告警恢复：\r\n    \r\n    \r\n    An alarm 150108 ID 6 level 3 cleared at 07:22:09 10-25-2011 sent by ZXR10 MPU-0/26/0\r\n    %IP% Interface ipv6 detect status  The interface(index=5,name='smartgroup2') ipv6 \r\n    detect status turned into protocol UP\r\n\r\n删除接口导致的告警恢复：\r\n    \r\n    \r\n    An alarm 150108 ID 6 level 3 cleared at 07:22:09 10-25-2011 sent by ZXR10 MPU-0/26/0\r\n    %IP% Interface ipv6 detect status  The interface(index=5,name='smartgroup2') ipv6 \r\n    detect status turned into DELETED\r\n\r\n引起原因\r\n\r\n  * 对端端口Down。\r\n\r\n  * 链路中断。\r\n\r\n\r\n\r\n\r\n产生的影响\r\n\r\n被检测的三层IPv6链路Down。\r\n\r\n处理建议\r\n\r\n  1. 执行命令show samgr track检查track对象是否存在。\r\n\r\n     * Y→步骤2\r\n\r\n     * N→步骤4\r\n\r\n  2. 执行命令show running-config，检查端口是否配置了track实例。\r\n\r\n     * Y→步骤3\r\n\r\n     * N→步骤5\r\n\r\n  3. 检查端口连线是否连好。\r\n\r\n     * Y→步骤7\r\n\r\n     * N→步骤6\r\n\r\n  4. 配置track对象，检查告警是否恢复。\r\n    \r\n        ZXR10(config)#samgr\r\n      ZXR10(config-samgr)#track track_name /*根据不同检测类型配置不同类型对象*/\r\n      ZXR10(config)#interface interace_name\r\n      ZXR10(config-if)#track track_name\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤7\r\n\r\n  5. 配置接口track实例，检查告警是否恢复。\r\n    \r\n        ZXR10(config)#interface interace_name\r\n      ZXR10(config-if)#track track_name\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤7\r\n\r\n  6. 重新插好线缆，检查告警是否恢复。\r\n\r\n     * Y→结束\r\n\r\n     * N→步骤7\r\n\r\n  7. 请联系中兴通讯技术支持工程师。", "answer": "对于ZXR10设备来说，告警级别分为以下八个级别：\n\n1. EMERGENCIES（严重告警）\n2. ALERTS（重大告警）\n3. CRITICAL（紧急告警）\n4. ERRORS（错误告警）\n5. WARNINGS（警告告警）\n6. NOTIFICATIONS（通告信息）\n7. INFORMATIONAL（报告信息）\n8. DEBUGGING（调试信息）"}
{"id": 55, "query": "uMAC支持在线配置和离线配置，区别在什么地方？", "recall": "[1]:配置数据的配置方式\r: 配置数据的配置方式\r\n\r\nMML命令配置和脚本文件配置\r\n\r\n根据操作员在执行配置数据时的操作类型，NF(Network Function, 网络功能)的数据配置方式分为：\r\n\r\n  * MML(Man Machine Language, 人机语言)命令配置也称为逐条配置，此种方式是指在MML命令界面上依次对每一条命令进行配置。这是一种最通用的配置方式，所有的配置数据都可以通过这种方式完成。\r\n\r\n  * 脚本文件配置也称为脚本配置，此种方式是将配置数据做成脚本文件，操作员只需执行这些脚本文件就可以完成数据配置。\r\n\r\n\r\n\r\n\r\n在线配置和离线配置\r\n\r\n根据配置数据是否能即时生效，NF的数据配置方式分为：\r\n\r\n  * 在线配置是指数据立即下发的配置方式。\r\n\r\n此种方式的配置过程是EM(Element Management, 网元管理)和NF实时交互的过程，配置数据即时生效。\r\n\r\n  * 离线配置是指数据在EM下发到NF暂不生效，EM下发同步命令后批量生效的配置方式。\r\n\r\n通过此种方式配置的数据，需要将数据从NF-OAM数据库下发到NFS-OAM内存数据库后才能生效。\n\n[2]:数据同步机制\r: 数据同步机制\r\n\r\n同步说明\r\n\r\n配置数据包括离线配置数据和在线配置数据：\r\n\r\n  * 对于在线配置数据，无需同步，所配置的数据立即生效。\r\n\r\n  * 对于离线配置数据，需要执行数据同步操作，数据才能生效。\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\nNF(Network Function, 网络功能)中有些数据只支持在线配置方式。\r\n\r\n离线数据生效流程\r\n\r\n离线数据生效的流程如下：\r\n\r\n  1. NF-OAM层的配置Manager生成配置数据.xml文件。\r\n\r\n  2. NF-OAM将配置数据.xml文件上传在FTP(File Transfer Protocol, 文件传输协议)服务器指定目录下。\r\n\r\n  3. NF-OAM层的配置Manager发送请求消息给“配置分发同步”模块，完成指定目录下文件的分发和加载工作，并触发存盘、分发、通知流程。\n\n[3]:业务功能配置\r: 业务功能配置\r\n\r\n子主题：\r\n\r\n  * 配置位置信息上报\r\n\r\n  * 配置NITZ\r\n\r\n  * 配置信令风暴抑制\r\n\r\n  * 配置终端双栈\r\n\r\n  * 配置智能寻呼\r\n\r\n  * 配置APN更正\r\n\r\n  * 配置拓扑优选开关\r\n\r\n  * 配置DSCP（可选）\r\n\r\n  * 配置NSA（可选）\r\n\r\n  * 配置NBIoT（可选）\r\n\r\n  * 配置IPv6地址细分（可选）\n\n[4]:VPC（可选）\r: VPC（可选）\r\n\r\n配置原则\r\n\r\nVPC页签用于配置VPC相关的数据，即两个Vrouter之间的互通数据，在运营商开启了VPC(Virtual Private Cloud, 虚拟私有云)功能的场景下，才需要配置。\r\n\r\n说明：\r\n\r\n通常情况下，VPC数据可以在ZXUN uMAC实例化成功后，由操作员手动进行配置，不需要在本页签中进行配置。\r\n\r\n配置说明\r\n\r\nVPC（Virtual Private Cloud )：用户基于云服务商创建的自定义的私有网络，实现二层的逻辑隔离。\r\n\r\nVPC页签如图1所示。\r\n\r\n图1 VPC\n\n[5]:通用功能\r: 通用功能\r\n\r\nIP(Internet Protocol, 因特网协议)功能\r\n\r\nZXUN uMAC支持静态路由和动态路由协议，包括ECMP(Equal-Cost Multi-Path routing, 等价多路由)、OSPF(Open Shortest Path First, 开放最短路径优先)、BGP(Border Gateway Protocol, 边界网关协议)、GRE(General Routing Encapsulation, 通用路由封装)、VLAN(Virtual Local Area Network, 虚拟局域网)、VLAN Trunk等。支持IPv4、IPv6以及IPv4/IPv6双栈，适用于UE以及标准协议定义的接口，如Gb、Iu、Gr/Gf、Gn、Gd/SGd、Ga、S1-MME、S6a/S13、S11/S10、SGS、Sv、N2、N26、AMF SBI、DNS等。\r\n\r\n过负荷和拥塞控制功能\r\n\r\nZXUN uMAC支持过负荷控制功能。 当系统流量超出设计容量时，保障系统稳定运行。\r\n\r\nNFV(Network Functions Virtualization, 网络功能虚拟化)功能\r\n\r\nZXUN uMAC支持NFV(Network Functions Virtualization, 网络功能虚拟化)功能。 采用虚拟化技术实现软硬件的解耦，与其他VNF(Virtualized Network Function, 虚拟化网络功能)共享NFVI(Network Functions Virtualization Infrastructure, 网络功能虚拟化基础设施)资源。 支持自动部署、弹性伸缩、虚机自愈以及虚机反亲和部署功能。", "answer": "uMAC支持在线配置和离线配置的区别主要在于配置数据生效的即时性。\n\n1. 在线配置：指的是配置数据能够立即生效的配置方式。在在线配置过程中，EM（Element Management，网元管理）与NF（Network Function，网络功能）实时交互，配置数据一经下发即立刻生效。\n\n2. 离线配置：指的是配置数据在EM下发到NF后不会立即生效，需要通过后续的同步命令批量生效的配置方式。通过离线配置的数据需要从NF-OAM数据库下发到NFS-OAM内存数据库后才能生效，生效过程不是即时的。"}
{"id": 56, "query": "AMF使用什么协议来保证时间正确", "recall": "[1]:# AMF互操作配置\r: # AMF互操作配置\r\n\r\n## 背景知识\r\n\r\n在5G网络实现全覆盖之前，在很长时间内，4G网络都是5G网络的良好补充，这就意味着5G用户将会在4/5G网络中移动。终端在移动过程中的业务连续性直接影响业务使用体验，尤其是语音类业务。4/5G互操作就是为了保证业务连续性的技术。\r\n\r\n为了提供业务连续性，3GPP定义了两种互操作方案：\r\n\r\n  * Interworking with N26\r\n\r\n当网络中部署了N26接口时，N26接口能够支持在互操作过程中，在源网络和目标网络之间传递移动性管理状态及会话管理状态。当部署了N26接口时，UE仅需以单注册模式运行，即可保证用户无缝的业务和会话连续性。要求保持终端的IP地址不变，并且中断时间敏感的业务时，需要使用此模式。\r\n\r\n  * Interworking without N26\r\n\r\nInterworking without N26: 当网络中未部署N26接口时，网络使用HSS+UDM存储UE相关的PGW-C+SMF和APN/DNN信息，以此来保证UE的IP地址连续性。无法实现业务连续性，但可以实现终端的IP地址保持不变。\r\n\r\n\r\n\r\n\r\n## 功能说明\r\n\r\n当终端用户在4/5G网络之间移动时，且需要保证业务连续性时，需要使用本功能，设置AMF所支持的4/5G互操作模式，及其是否支持Interworking with N26和Interworking without N26功能。\r\n\r\n使用此功能前，先开启对应的4/5G互操作的license， 并配置互操作的其他相关命令。\r\n\r\n## 相关主题\r\n\r\n  * 修改 AMF互操作配置(SET 5GINTERWORKCFG)\r\n  * 查询 AMF互操作配置(SHOW 5GINTERWORKCFG)\r\n\r\n\r\n\r\n**父主题：**\r\n\r\nAMF互操作配置\n\n[2]:# AMF互操作配置\r: # AMF互操作配置\r\n\r\n## 背景知识\r\n\r\n在5G网络实现全覆盖之前，在很长时间内，4G网络都是5G网络的良好补充，这就意味着5G用户将会在4/5G网络中移动。终端在移动过程中的业务连续性直接影响业务使用体验，尤其是语音类业务。4/5G互操作就是为了保证业务连续性的技术。\r\n\r\n为了提供业务连续性，3GPP定义了两种互操作方案：\r\n\r\n  * Interworking with N26\r\n\r\n当网络中部署了N26接口时，N26接口能够支持在互操作过程中，在源网络和目标网络之间传递移动性管理状态及会话管理状态。当部署了N26接口时，UE仅需以单注册模式运行，即可保证用户无缝的业务和会话连续性。要求保持终端的IP地址不变，并且中断时间敏感的业务时，需要使用此模式。\r\n\r\n  * Interworking without N26\r\n\r\nInterworking without N26: 当网络中未部署N26接口时，网络使用HSS+UDM存储UE相关的PGW-C+SMF和APN/DNN信息，以此来保证UE的IP地址连续性。无法实现业务连续性，但可以实现终端的IP地址保持不变。\r\n\r\n\r\n\r\n\r\n## 功能说明\r\n\r\n当终端用户在4/5G网络之间移动时，且需要保证业务连续性时，需要使用本功能，设置AMF所支持的4/5G互操作模式，及其是否支持Interworking with N26和Interworking without N26功能。\r\n\r\n使用此功能前，先开启对应的4/5G互操作的license， 并配置互操作的其他相关命令。\r\n\r\n## 相关主题\r\n\r\n  * 修改 AMF互操作配置(SET 5GINTERWORKCFG)\r\n  * 查询 AMF互操作配置(SHOW 5GINTERWORKCFG)\r\n\r\n\r\n\r\n**父主题：**\r\n\r\nAMF互操作配置\n\n[3]:# AMF互操作配置\r: # AMF互操作配置\r\n\r\n## 背景知识\r\n\r\n在5G网络实现全覆盖之前，在很长时间内，4G网络都是5G网络的良好补充，这就意味着5G用户将会在4/5G网络中移动。终端在移动过程中的业务连续性直接影响业务使用体验，尤其是语音类业务。4/5G互操作就是为了保证业务连续性的技术。\r\n\r\n为了提供业务连续性，3GPP定义了两种互操作方案：\r\n\r\n  * Interworking with N26\r\n\r\n当网络中部署了N26接口时，N26接口能够支持在互操作过程中，在源网络和目标网络之间传递移动性管理状态及会话管理状态。当部署了N26接口时，UE仅需以单注册模式运行，即可保证用户无缝的业务和会话连续性。要求保持终端的IP地址不变，并且中断时间敏感的业务时，需要使用此模式。\r\n\r\n  * Interworking without N26\r\n\r\nInterworking without N26: 当网络中未部署N26接口时，网络使用HSS+UDM存储UE相关的PGW-C+SMF和APN/DNN信息，以此来保证UE的IP地址连续性。无法实现业务连续性，但可以实现终端的IP地址保持不变。\r\n\r\n\r\n\r\n\r\n## 功能说明\r\n\r\n当终端用户在4/5G网络之间移动时，且需要保证业务连续性时，需要使用本功能，设置AMF所支持的4/5G互操作模式，及其是否支持Interworking with N26和Interworking without N26功能。\r\n\r\n使用此功能前，先开启对应的4/5G互操作的license， 并配置互操作的其他相关命令。\r\n\r\n## 子主题：\r\n\r\n  * 修改 AMF互操作配置(SET 5GINTERWORKCFG)\r\n  * 查询 AMF互操作配置(SHOW 5GINTERWORKCFG)\n\n[4]:ZUF-79-19-010 Nnrf\r: ZUF-79-19-010 Nnrf\r\n\r\n概述\r\n\r\nAMF为AMF和NRF之间的连接提供了Nnrf协议接口。\r\n\r\n客户收益\r\n\r\nAMF通过Nnrf协议接口与NRF对接。\r\n\r\n说明\r\n\r\nAMF和NRF之间的接口协议基于HTTP RESTful业务接口提供服务。协议栈如下：\r\n\r\n图1 协议栈\n\n[5]:ZUF-79-19-012 N20\r: ZUF-79-19-012 N20\r\n\r\n概述\r\n\r\nAMF(Access and Mobility Management Function, 接入和移动管理功能)为AMF和SMSF(Short Message Service Function, 短消息服务功能)之间的连接提供了N20协议接口。\r\n\r\n客户收益\r\n\r\nAMF通过N20协议接口与SMSF对接。\r\n\r\n说明\r\n\r\nAMF与SMSF之间的接口协议是通过基于HTTP RESTful的服务接口实现的。\r\n\r\n图1 N20协议栈", "answer": "不确定。上下文信息中并未提供关于AMF使用何种协议来保证时间正确的信息。"}
{"id": 57, "query": "NFS是能够独立完成某个具体功能的软件实体，NFS包括那几类", "recall": "[1]:# NFS管理\r: # NFS管理\r\n\r\n## 背景知识\r\n\r\nNFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务，一个NF（Network Function，网络功能）由多个NFS组成。不同的NFS完成不同的特定功能服务。\r\n\r\nSC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。同一种类型的全部SC实例构成一个SC集群。\r\n\r\n通常，一个服务由多种服务组件组成。具体的SC类型及作用由业务根据需求自行定义。\r\n\r\n一个NFS实例能够正常工作并对外提供完整服务的前提就是其下所有类型的SC都能正常工作并对外提供服务。当某个SC集群出现故障无法正常工作时，就意味着该NFS实例无法对外提供完整的服务。\r\n\r\n通常，网元在实例化的过程可以选择部署或预先增加业务所需的NFS实例。预先增加的NFS实例不会直接部署（或激活），而是增加相应的信息记录，后续可对该预先增加的NFS实例进行激活。若已完成实例化操作，可以在EM上通过命令新增一个NFS实例以及对未部署的NFS实例进行激活操作，从而完成NFS实例的部署。\r\n\r\n对于NFS管理、SC管理以及SC组管理等命令来说，通常要指定具体的NFS实例进行操作，即要指定NFS实例的名称。\r\n\r\nNFS实例的名称支持指定内部名称和外部名称两种：\r\n\r\n  * 内部名称：NFS实例没有特殊配置的、默认的名称，一般为用\"_\"连接服务类型和实例号的形式，例如\"CommonS_TMSP_0\"、\"Nupf_PacketForward_0\"等。\r\n\r\n  * 外部名称（显示名称）：NFS实例在EM界面对外呈现的名称，可以根据业务需求在实例化部署时配置或通过执行命令SET NFS DISPLAYNAME进行修改。\r\n\r\n\r\n\r\n\r\n## 功能说明\r\n\r\nNFS管理命令用于根据业务需求对NFS实例的相关参数进行查询和配置、完成NFS部署相关以及故障处理等功能。\r\n\r\n对NFS实例相关参数进行查询等操作：\r\n\r\n  * 查询NFS(SHOW NFS)：查询NFS实例的信息，包括NFS的实例名称、类型、类型标识、实例号、实例标识、部署状态、版本、归属域以及规格等。在对NFS实例进行其他操作前后可以使用该命令进行查询操作后的结果。\r\n\r\n  * 查询NFS状态(SHOW NFSSTATUS)：查询NFS实例的状态，即该NFS实例是否能够正常工作并对外提供完整的服务。\r\n\r\n\r\n\r\n\r\n当需要配置NFS实例的显示名称时可以执行命令SET NFS DISPLAYNAME进行修改。\r\n\r\n一个NFS实例只有成功部署才能正常工作。要完成一个NFS实例的部署，需先执行命令ADD NFS，再执行命令ACTIVATE NFS；要彻底删除一个NFS实例的记录，需先执行命令DEACTIVATE NFS，再执行命令DEL NFS。与NFS实例部署相关的操作：\r\n\r\n  * 增加NFS(ADD NFS)：新增一个NFS实例的记录，该NFS实例仍为未部署状态。\n\n[2]:# SC组管理\r: # SC组管理\r\n\r\n## 背景知识\r\n\r\nNFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务，一个NF（Network Function，网络功能）由多个NFS组成。不同的NFS完成不同的特定功能服务。\r\n\r\nSC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。一个NFS由多种SC组成。具体的SC类型及作用由业务根据需求自行定义。同一种类型的全部SC实例构成一个SC集群。\r\n\r\n为实现SC的负荷分担，在NFS下建立某SC类型的SC组，即一种SC类型可能包含一个或多个SC组，每个SC组内包含多个SC实例。\r\n\r\n组内的SC进行N+M主备备份，即最多有N个SC为主用SC，最多有M个SC为备用SC。当主用SC中有SC出现故障无法正常工作时，备用SC可以接管故障SC的工作。\r\n\r\nSC组的备份模式主要包括：\r\n\r\n  * N+M模式：所有SC组的备份模式理论上都可以看作是此模式。\r\n\r\n  * 1+1模式：当N=M=1时的备份模式。\r\n\r\n  * N:N模式：当M=0时的备份模式，也称为负荷分担模式。\r\n\r\n\r\n\r\n\r\n业务根据需求配置SC组的备份模式。\r\n\r\n## 功能说明\r\n\r\nSC组管理命令用于根据业务需求对SC组的相关参数进行查询、配置以及完成整组弹性扩容或缩容等功能。\r\n\r\nSC组管理主要包括查询、设置、激活、去激活SC组等操作：\r\n\r\n  * 查询SC组(SHOW SCGROUP)：查询SC组信息，包括SC类型、组号、组内最大主用/备用个数、组内当前/最小实例数以及虚机组等。在对SC组进行其他操作前后可以使用该命令进行查询。\r\n\r\n  * 设置SC组(SET SCGROUP)：设置SC组的相关参数，包括组内最大主用/备用个数、组内最小实例数以及虚机组等。\r\n\r\n  * 激活SC组(ACTIVATE SCGROUP)：激活SC组，即整个SC组进行弹性扩容从而成为已部署状态。\r\n\r\n  * 去激活SC组(DEACTIVATE SCGROUP)：去激活SC组，即整个SC组进行弹性缩容从而成为未部署状态。\r\n\r\n\r\n\r\n\r\n## 子主题：\r\n\r\n  * 查询SC组(SHOW SCGROUP)\r\n  * 设置SC组(SET SCGROUP)\r\n  * 激活SC组(ACTIVATE SCGROUP)\r\n  * 去激活SC组(DEACTIVATE SCGROUP)\n\n[3]:# SC管理\r: # SC管理\r\n\r\n## 背景知识\r\n\r\nNFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务，一个NF（Network Function，网络功能）由多个NFS组成。不同的NFS完成不同的特定功能服务。\r\n\r\nSC（Service Component，服务组件）由一组进程组成，是微服务架构下能够完成特定功能服务的最小单元，具备独立的负荷分担、集群管理、弹性功能等。\r\n\r\n通常，一个服务由多种服务组件组成。具体的SC类型及作用由业务根据需求自行定义。同一种类型的全部SC实例构成一个SC集群。\r\n\r\n每一个SC集群包含一个或者多个SC组，组内的SC进行N+M主备备份，即最多有N个SC为主用SC，最多有M个SC为备用SC。当主用SC中有SC出现故障无法正常工作时，备用SC可以接管故障SC的工作。\r\n\r\nSC组的备份模式主要包括：\r\n\r\n  * N+M模式：所有SC组的备份模式理论上都可以看作是此模式。\r\n\r\n  * 1+1模式：当N=M=1时的备份模式。\r\n\r\n  * N:N模式：当M=0时的备份模式，也称为负荷分担模式。\r\n\r\n\r\n\r\n\r\n部署单元成功部署并正常运行是SC实例能够正常工作的前提。一般，部署单元即VRU（Virtual Running Unit，虚拟运行单元）或POD（CAAS环境）。\r\n\r\n一个SC集群至少有一个SC实例能够正常工作，则该SC集群的服务状态为正常。\r\n\r\n## 功能说明\r\n\r\nSC管理命令用于根据业务需求对SC实例的相关参数进行查询、配置，弹性扩容或缩容以及故障处理等功能。\r\n\r\n对SC实例相关参数进行查询等操作：\r\n\r\n  * 查询SC类型(SHOW SCTYPE)：查询SC类型的信息，包括所属的NFS实例的名称、类型、规格、最大/最小/当前实例数、自动可弹缩性、弹性步长、亲和标签、补丁版本号以及最小组数等。\r\n\r\n  * 查询SC信息(SHOW SCINFO)：查询SC实例的信息，包括SC类型、逻辑编号、组号、组内编号、主备状态、运行状态以及实例名称等。\r\n\r\n  * 查询SC状态(SHOW SCSTATUS)：查询SC集群的状态，包括SC的类型、目标实例数、成功部署比例、正常运行比例以及服务状态等。\r\n\r\n  * 查询SC负荷(SHOW SCLOAD)：查询SC实例或SC集群的负荷信息，包括负荷类型以及负荷等级等。\r\n\r\n\r\n\r\n\r\n对SC实例相关参数进行配置以及弹性扩容或缩容等操作：\r\n\r\n  * 设置SC(SET SC)：设置SC类型的亲和标签以及最小SC组数等。\r\n\r\n  * 增加SC实例(INC SC)：对SC实例进行组内的弹性扩容。\r\n\r\n  * 减少SC实例(DEC SC)：对SC实例进行组内的弹性缩容。\r\n\r\n\r\n\r\n\r\n对SC实例进行故障处理等操作：\r\n\r\n  * 重启SC(RESET SC)：适用于SC实例或SC集群出现故障或异常等场景。\r\n\r\n  * 倒换SC(SWP SC)：适用于N+M备份模式（不包括负荷分担模式）下特定SC实例出现故障或异常等场景。\n\n[4]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 版本要求及变更记录\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\n网络切片| 网络切片，是指提供特定网络功能和网络特征的逻辑网络。本质上就是将运营商的物理网络划分成多个虚拟网络，每一个虚拟网络根据不同的服务需求，比如延时、带宽、安全性和可靠性等来划分，以灵活地应对不同的网络应用场景。  \r\nNF(Network Function, 网络功能)| 在网络中，由3GPP采用或3GPP定义的处理功能，包括3GPP定义的功能行为和接口。  \r\nNF服务| 是NF(Network Function, 网络功能)（NF服务生产者）通过基于服务的接口公开向其他授权NF（NF服务消费者）公开的一种能力。简单来说，NF服务向授权消费者提供了一种能力。  \r\nNF服务操作| NF服务操作是NF服务组成的基本单位。  \r\nNF服务发现| 5G核心网络内的NF可以通过其基于服务的接口将其能力展现为服务，之后可以由其他NF重新使用。NF服务发现使得NF能够发现提供期望的NF服务的NF实例。  \r\nNRF| 网络仓储功能，负责服务发现、维护可用NF实例的信息及支持的服务。  \r\n  \r\n描述\r\n\r\n定义\r\n\r\nNF服务发现：一个NF（AMF）作为消费者准备去消费另一个NF服务时，通过NF服务发现去发现NF服务提供者，并可以通过服务改变订阅通知向NRF订阅NF服务提供者的后续信息变化通知。\r\n\r\n背景知识\r\n\r\n在服务化架构下，5GC(5G Core Network, 5G核心网)网络控制面的每一个NF(Network Function, 网络功能)都是基于“生产-消费”模型作为服务对授权的消费者（或者5GC网络内其他NF）提供业务能力。\r\n\r\n一个NF可以针对不同的消费者提供不同的功能，因此一个NF可以包含多个NF服务，同时这些NF服务是独立、可重用和可自我管理的。\r\n\r\nNRF(NF Repository Function, 网络功能仓储)是服务化架构的核心，通过NRF实现NF及NF服务的统一管理、互相发现及信息变更通知，整个过程全动态自动完成，无需人工参与。NRF(NF Repository Function, 网络功能仓储)是NF(Network Function, 网络功能)的仓储功能，提供以下功能。\r\n\r\n  * 维护可用的NF实例信息及支持的NF服务。\r\n\r\n  * 为其他NF提供目标NF或NF服务的发现服务。\r\n\r\n  * 为其他NF提供信息变更的订阅通知服务。\r\n\r\n\r\n\r\n\r\nZXUN uMAC在5GC(5G Core Network, 5G核心网)网络内通过NRF可以实现与各个NF或NF服务间的动态发现，从而简化网络配置。\r\n\r\n实现过程如图1所示。\r\n\r\n  1.\n\n[5]:# 诊断函数\r: # 诊断函数\r\n\r\n## 背景知识\r\n\r\nNFS（Network Function Service，网络功能服务）是5G标准定义的网络功能服务。\r\n\r\nSC (Service componet 服务组件) 是一组进程，一个SC实例的物理形态就是一个容器。一个NFS实例通常包含多种SC类型。\r\n\r\n诊断函数是为了支持在商用局点执行调试函数，查看调试信息及运行状态，满足系统运维要求而实现的功能。当运维人员需要定位某个容器中的某个进程中的问题时，需要使用该功能。\r\n\r\n## 功能说明\r\n\r\n该组命令可以在不登录到业务容器的情况下，直接在网管界面运行各进程中实现的调试函数，来查看和收集调试信息，便于定位问题。\r\n\r\n该组命令包含三个功能：查询进程信息、查询SC进程调试函数、执行进程调试函数。使用顺序为：\r\n\r\n  1. 查询进程信息(SHOW PROCESSINFO)：先查询要执行调试函数的进程号。\r\n\r\n  2. 查询SC进程调试函数(SHOW NFS)：然后查询该进程的调试函数。\r\n\r\n  3. 执行进程调试函数(EXEC PROCESSDEBUG)：最后执行该进程的特定调试函数。\r\n\r\n\r\n\r\n\r\n该组命令主要是辅助中兴通讯技术支持人员定位问题，建议运维人员在中兴通讯技术支持人员指导下使用。\r\n\r\n## 子主题：\r\n\r\n  * 查询进程信息(SHOW PROCESSINFO)\r\n  * 查询SC进程调试函数(SHOW PROCESSDEBUGINFO)\r\n  * 执行进程调试函数(EXEC PROCESSDEBUG)", "answer": "根据上下文信息，NFS（Network Function Service，网络功能服务）包括以下几类：\n\n1. CommonS_TMSP_0\n2. Nupf_PacketForward_0\n\n这是根据上下文信息中提供的例子推断的，具体的NFS类型及作用由业务根据需求自行定义，因此这里只列举了两个示例。实际上，NFS的种类应该远不止这两种。"}
{"id": 58, "query": "Dump功能中输出的文件中包含的用户信息有哪些内容", "recall": "[1]:ZUF-76-12-001 DUMP\r: ZUF-76-12-001 DUMP\r\n\r\n概述\r\n\r\nDUMP用于从ZXUN uMAC导出用户信息。\r\n\r\nSGSN的用户信息包括IMSI、MSISDN、IMEI、RAI、CELLID、PTMSI、接入类型等。\r\n\r\nMME的用户信息包括IMSI、MSISDN、IMEI、TAI、CELLID、GUTI等。\r\n\r\n客户收益\r\n\r\n方便操作员从ZXUN uMAC获取用户信息。\r\n\r\n说明\r\n\r\n导出的用户信息以普通文件格式TXT和CSV保存。由于用户数过多，执行该程序需要一段时间。指定的模块用于导出用户信息。为了避免对其他操作的影响，可以暂停和恢复导出程序。导出的用户信息按2G/3G/4G用户状态分别统计。\n\n[2]:# 导出用户信息(EXPORT USERINFO) \r: # 导出用户信息(EXPORT USERINFO) \r\n\r\n## 命令功能\r\n\r\n该命令用于查询SGSN/MME网元中所有2G/3G/4G用户的信息。查询结果包括：SCLogicNo、PLMN、IMSI、MSISDN、RAI、CI/SAC/TAC、TLLI/PTMSI/GUTI、用户状态、激活的PDP/承载数量、接入类型和IMEI。\r\n\r\n执行该命令后，系统将查询结果保存为excel或者txt文件。\r\n\r\n## 注意事项\r\n\r\n无\r\n\r\n## 参数说明\r\n\r\n标识 | 名称 | 类型 | 说明  \r\n---|---|---|---  \r\nFORMAT | 输出格式 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 默认值:TXT。 | 该参数用于指定用户信息导出文件的格式，包括TXT和CSV两种输出格式。选择TXT输出时，仅输出一个文件；选择CSV格式输出时，按SC 实例产生文件。  \r\nFLAG | 是否继续上次导出 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 默认值:NO。 | 该参数用于指示如果上一次导出过程被停止，是否选择继续导出。  \r\nUSERTYPE | 查询用户类型 | 参数可选性:任选参数；参数类型:枚举。 参见枚举定义。 默认值:2G&3G&4G。 | 该参数用于指定导出用户的接入类型，包括2G、3G、4G三种基本接入类型。支持单个或者组合用户接入类型选择。  \r\n  \r\n## 命令举例\r\n\r\n导出用户信息。\r\n\r\nEXPORT USERINFO:USERTYPE=2G&3G&4G;\r\n    \r\n    \r\n    \r\n    命令 (No.8): EXPORT USERINFO:USERTYPE=2G&3G&4G;\r\n    \r\n    操作结果 \r\n    ---------\r\n    成功 \r\n    ---------\r\n    \r\n    文件输出URL\r\n    ---------------\r\n    sftp://ems:*******@127.0.0.1:29029/Nfdata/combo23/vru_mmesgsn_dba/combo23/AMM/CMDBA/userinfo/20200109160509.zip\r\n    ---------------\r\n    \r\n    命令执行成功（耗时 elapsed 1.582 秒）。\r\n    \r\n    \r\n\r\n**父主题：** 导出用户信息\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[3]:# 导出用户信息\r: # 导出用户信息\r\n\r\n## 背景知识\r\n\r\n在某些情况下，维护人员希望了解本网元相关的无线网元的相关信息或者本网元所有的用户相关信息。大数据查询功能针对此需求提供相应的查询命令。\r\n\r\n## 功能描述\r\n\r\n导出用户信息功能目前仅适用于SGSN网元，用于维护人员批量查询SGSN网元中2G/3G用户信息的需求，包括所有2G/3G用户的IMSI /MSISDN /RAI /CI等，查询结果保存为TXT或CSV格式的文件。\r\n\r\n## 相关主题\r\n\r\n  * 导出用户信息(EXPORT USERINFO)\r\n  * 导出用户简要信息(EXPORT BRIEFUSERINFO)\r\n  * 停止导出用户信息(STOP USERINFO)\r\n\r\n\r\n\r\n**父主题：** 大数据查询\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[4]:# 查询用户信息\r: # 查询用户信息\r\n\r\n## 背景知识\r\n\r\n获取用户当前在系统的接入信息，包括位置、签约、激活的会话等信息，可以帮助有关人员分析用户当前状态。比如用户故障投诉时，可以通过用户获取接入信息，以便帮助定位用户故障原因。\r\n\r\n## 功能说明\r\n\r\n本功能用于获取用户在本AMF接入信息，比如位置、激活会话等信息。\r\n\r\n## 相关主题\r\n\r\n  * 查询用户信息(SHOW USER INFORMATION)\r\n\r\n\r\n\r\n**父主题：**\r\n\r\n查询用户信息\n\n[5]:# 查询用户信息\r: # 查询用户信息\r\n\r\n## 背景知识\r\n\r\n获取用户当前在系统的接入信息，包括位置、签约、激活的会话等信息，可以帮助有关人员分析用户当前状态。比如用户故障投诉时，可以通过用户获取接入信息，以便帮助定位用户故障原因。\r\n\r\n## 功能说明\r\n\r\n本功能用于获取用户在本AMF接入信息，比如位置、激活会话等信息。\r\n\r\n## 子主题：\r\n\r\n  * 查询用户信息(SHOW USER INFORMATION)", "answer": "根据上下文信息[1]，DUMP功能输出的文件中包含以下用户信息内容：\n\n- SGSN的用户信息：\n  - IMSI\n  - MSISDN\n  - IMEI\n  - RAI\n  - CELLID\n  - PTMSI\n  - 接入类型\n\n- MME的用户信息：\n  - IMSI\n  - MSISDN\n  - IMEI\n  - TAI\n  - CELLID\n  - GUTI\n\n另外，根据上下文信息[2]，导出的用户信息还包括以下内容：\n\n- SCLogicNo\n- PLMN\n- CI/SAC/TAC\n- TLLI/PTMSI/GUTI\n- 用户状态\n- 激活的PDP/承载数量\n- 接入类型\n\n请注意，这些信息是根据上下文提供的，具体内容可能会根据实际执行时的参数和用户类型（2G、3G、4G）有所不同。"}
{"id": 59, "query": "4G已经提供了VoLTE语音功能，为什么还要引入CSFB语音功能？", "recall": "[1]:# SGs口VLR POOL配置\r: # SGs口VLR POOL配置\r\n\r\n## 背景知识\r\n\r\nSGs接口是MME和MSC/VLR之间的接口，支持UE发起的联合类位置更新和CSFB功能。\r\n\r\nCSFB功能：移动通讯系统演进到EPS系统后，运营商为了利用原有的2G和3G的基础设备提供语音、CS定位（LCS）等业务，引入了CSFB（CS fallback）功能，CSFB功能允许终端通过GERAN或者UTRAN接入到CS域。\r\n\r\n## 功能描述\r\n\r\nSGs口VLR POOL配置用于管理多个VLR局向组成一个POOL的场景，配置各个VLR局向在POOL内的优先级和权重。\r\n\r\nVLR局向标识需要通过命令 ADD VLROFFICE 进行配置。 \r\n\r\n需要通过命令 SET SOFTWARE PARAMETER 打开移动管理参数“支持VLR POOL组网”开关，本配置才能够生效。 \r\n\r\n## 相关主题\r\n\r\n  * 新增SGs口VLR POOL配置(ADD VLRPOOL)\r\n  * 修改SGs口VLR POOL配置(SET VLRPOOL)\r\n  * 删除SGs口VLR POOL配置(DEL VLRPOOL)\r\n  * 查询SGs口VLR POOL配置(SHOW VLRPOOL)\r\n\r\n\r\n\r\n**父主题：** SGs口VLR POOL管理\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[2]:功能描述\r: 功能描述\r\n\r\nLTE语音\r\n\r\nLTE语音解决方案主要包括两个。\r\n\r\n  * CSFB(Circuit Switched Fallback, 电路域回落)（Circuit Switched Fall Back）：LTE网络只提供数据业务，当UE发起或者接收语音呼叫时，回落到CS域进行处理。运营商无需部署IMS，只需要升级MSC就可以支持。这是一种快速提供业务的方案，但缺点是呼叫接续速度慢。CSFB适合作为IMS部署之前的过渡方案，另外还可以用来解决LTE手机漫游场景的语音呼叫问题，即在拜访地网络没有部署IMS，或者IMS漫游协议尚未应用的情况下，CSFB可以为漫入的LTE用户提供语音业务。\r\n\r\nUE从E-UTRAN回落到UTRAN/GERAN的CSFB网络架构如下图所示。\r\n\r\nUE从E-UTRAN回落到CDMA 1xRTT的CSFB网络架构如下图所示。\r\n\r\nLTE部署的初期，LTE只处理数据业务，语音业务回落到CS域处理。CSFB作为部署IMS前的过渡方案，可以快速实现网络部署并提供语音业务，但是接续速度慢。CSFB快速回落方案，可以在2s内回落。\r\n\r\n  * VoLTE(Voice over LTE, LTE语音)（Voice over Long Term Evolution）+SRVCC（Single Radio Voice Call Continuity）：通过LTE网络中的IMS域提供高清晰的语音服务。IMS由于支持多种接入和丰富的多媒体业务，成为全IP时代的核心网标准架构。经历了多年的发展成熟后，如今IMS已经跨越裂谷，成为固定话音领域、PSTN网络改造的主流选择，而且也被3GPP、GSMA确定为移动语音的标准架构。在LTE网络部署不完全时，通过SRVCC解决语音控制和UE移动到CS网络切换时的语音连续性问题。SRVCC的实现过程实质上就是一个切换过程，在LTE网络中终端是通过IMS来实现语音功能的，当终端离开LTE网络后，则通过MSC server切换到2G/3G 网络中从而实现在2G/3G网络中的语音功能。\r\n\r\nUE通过LTE网络接入IMS。\r\n\r\nUE从E-UTRAN切换到UTRAN/GERAN的SRVCC网络架构如下图所示。\r\n\r\nUE从E-UTRAN切换到CDMA 1xRTT的SRVCC网络架构如下图所示。\r\n\r\n在LTE覆盖区内提供基于IP的高清晰语音和视频业务，在LTE覆盖区外仍通过CS域提供语音业务。\r\n\r\nSRVCC实现LTE网络中的IMS域语音到2G/3G网络中的CS域语音的无缝切换。\r\n\r\n为了减少SRVCC切换时长，使用户获得更好的通话体验，协议还定义了eSRVCC。eSRVCC相比于SRVCC，媒体切换点改为更靠近本端的设备。具体方案就是增加ATCF/ATGW功能实体作为媒体锚定点，无论是切换前还是切换后的会话消息都要经过ATCF/ATGW转发。\n\n[3]:特性描述\r: SRVCC的实现过程实质上就是一个切换过程，在LTE网络中终端是通过IMS来实现语音功能的，当终端离开LTE网络后，则通过MSC server切换到2G/3G 网络中从而实现在2G/3G网络中的语音功能。\r\n\r\n  * VoLTE（Voice over Long Term Evolution），通过LTE网络中的IMS域提供高清晰的语音服务。IMS由于支持多种接入和丰富的多媒体业务，成为全IP时代的核心网标准架构。经历了多年的发展成熟后，如今IMS已经跨越裂谷，成为固定话音领域、PSTN网络改造的主流选择，而且也被3GPP、GSMA确定为移动语音的标准架构。\r\n\r\n\r\n\r\n\r\nLTE语音解决方案（CSFB）\r\n\r\nUE从E-UTRAN回落到UTRAN/GERAN的CSFB网络架构如下图所示。\r\n\r\nUE从E-UTRAN回落到CDMA 1xRTT的CSFB网络架构如下图所示。\r\n\r\nLTE部署的初期，LTE只处理数据业务，语音业务回落到CS域处理。CSFB作为部署IMS前的过渡方案，可以快速实现网络部署并提供语音业务，但是接续速度慢。CSFB快速回落方案，可以在2 s内回落。\r\n\r\nLTE语音解决方案（SRVCC）\r\n\r\nUE从E-UTRAN切换到UTRAN/GERAN的SRVCC网络架构如下图所示。\r\n\r\nUE从E-UTRAN切换到CDMA 1xRTT的SRVCC网络架构如下图所示。\r\n\r\n在LTE覆盖区内提供基于IP的高清晰语音和视频业务，在LTE覆盖区外仍通过CS域提供语音业务。\r\n\r\nSRVCC实现LTE网络中的IMS域语音到2G/3G网络中的CS域语音的无缝切换。\r\n\r\nLTE语音解决方案（eSRVCC）\r\n\r\neSRVCC方案相对于SRVCC方案的增强在于减少了切换时长（切换时长小于300 ms），使用户获得更好的通话体验。\r\n\r\nSRVCC和eSRVCC对比如下图所示。\r\n\r\nSRVCC：媒体的切换点是对端网络设备（如对端UE），影响切换时长的主要因素是会话切换后需要在IMS网络中创建新的承载。\r\n\r\neSRVCC：相比于SRVCC，媒体切换点改为更靠近本端的设备。具体方案就是增加ATCF/ATGW功能实体作为媒体锚定点，无论是切换前还是切换后的会话消息都要经过ATCF/ATGW转发。后续在发生eSRVCC切换时，只需要创建UE与ATGW之间的承载通道，对端设备与ATGW之间的媒体流还是通过原承载通道传输。这样其创建新承载通道的消息交互路径明显短于SRVCC方案，减少了切换时长。\r\n\r\nLTE语音解决方案（CSFB与SRVCC对比）\r\n\r\n解决方案| 优点| 缺点  \r\n---|---|---  \r\nCSFB| \r\n\r\n  * 不引入IMS，重用现有的CS网络。\r\n  * 终端产业链较成熟。\n\n[4]:ZUF-78-12 语音和短消息\r: ZUF-78-12 语音和短消息\r\n\r\n子主题：\r\n\r\n  * 概述\r\n\r\n  * ZUF-78-12-001 VOLTE能力管理\r\n\r\n  * ZUF-78-12-002 T-ADS\r\n\r\n  * ZUF-78-12-003 LTE IMS紧急会话支持\r\n\r\n  * ZUF-78-12-004 CSFB\r\n\r\n  * ZUF-78-12-005 SRVCC\r\n\r\n  * ZUF-78-12-006 eSRVCC\r\n\r\n  * ZUF-78-12-007 e1xCSFB\r\n\r\n  * ZUF-78-12-008 VoLTE保障信令流程\r\n\r\n  * ZUF-78-12-009 VoLTE容灾之MME故障控制\r\n\r\n  * ZUF-78-12-010 VoLTE容灾之SGW故障控制\r\n\r\n  * ZUF-78-12-011 VoLTE容灾之PGW故障控制\r\n\r\n  * ZUF-78-12-012 VoLTE容灾之P-CSCF故障控制\r\n\r\n  * ZUF-78-12-013 VoLTE故障定位手段增强\r\n\r\n  * ZUF-78-12-014 内嵌IWS功能\r\n\r\n  * ZUF-78-12-015 CSFB语音容灾之MME故障控制\r\n\r\n  * ZUF-78-12-016 CSFB语音容灾之MSC/VLR故障控制\r\n\r\n  * ZUF-78-12-017 SMS over SGs\r\n\r\n  * ZUF-78-12-018 SMS over SGd\r\n\r\n  * ZUF-78-12-019 SMS over IP\r\n\r\n  * ZUF-78-12-020 公共告警系统/小区广播服务\n\n[5]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n描述\r\n\r\n定义\r\n\r\n对于支持1xRTT(1x Radio Transmission Technology, 1x无线传输技术)和E-UTRAN(Evolved Universal Terrestrial Radio Access Network, 演进的通用陆地无线接入网络)的双模终端，网络可为终端提供从LTE(Long Term Evolution, 长期演进)网络回落到1xRTT网络，完成语音起呼或终呼的业务。这样在LTE网络无法提供VoLTE(Voice over LTE, LTE语音)能力的区域，可利用原有1xRTT网络资源，完成语音呼叫；也可以为LTE网络下的终端提供收发1xRTT短信的能力。\r\n\r\n背景知识\r\n\r\n在3GPP 23.272-c00协议中，定义的1xCSFB(1x Circuit Switched Fallback, 1x电路交换回落)相关业务参见下表。\r\n\r\n表1 1xCSFB相关业务业务| 详细描述  \r\n---|---  \r\nCS(Circuit Switched, 电路交换)注册/去注册| 终端通过MME(Mobility Management Entity, 移动管理实体)、IWS(Interworking Solution, 互操作解决方案)网元完成到1xRTT的注册和去注册。  \r\n1xCSFB(1x Circuit Switched Fallback, 1x电路交换回落)语音起呼| 终端从E-UTRAN(Evolved Universal Terrestrial Radio Access Network, 演进的通用陆地无线接入网络)回落到1xRTT之后，在1xRTT下发起语音起呼。  \r\n1xCSFB语音终呼| 终端接收到CS 寻呼消息，从E-UTRAN回落到1xRTT之后，在1xRTT下发起语音终呼响应。  \r\ne1xCSFB语音起呼| 终端在从E-UTRAN回落到1xRTT之前，通过MME、IWS网元将语音起呼消息发送到1xRTT核心网，完成在1xRTT的语音接续后，再回落到1xRTT。  \r\ne1xCSFB语音终呼| 终端接收到CS 寻呼消息，从E-UTRAN回落到1xRTT之前，通过MME、IWS网元将语音终呼响应发送到1xRTT核心网，完成在1xRTT的语音接续后，再回落到1xRTT。  \r\nCS短信起呼| 终端通过MME、IWS网元将短信发送到1xRTT短信中心。  \r\nCS短信终呼| 1xRTT短信中心下发短信，通过IWS、MME网元将短信发送到终端。  \r\n  \r\n  1. 由UE(User Equipment, 用户设备)决策执行1xCSFB语音起呼/终呼还是 e1xCSFB语音起呼/终呼。\r\n\r\n\r\n\r\n\r\n应用场景\r\n\r\n摘要\r\n\r\n1xCSFB(1x Circuit Switched Fallback, 1x电路交换回落)功能的配置主要在于IWS(Interworking Solution,", "answer": "根据上下文信息，4G网络虽然提供了VoLTE语音功能，但引入CSFB语音功能的原因主要包括以下几点：\n\n1. 作为过渡方案：在VoLTE网络部署不完全时，CSFB可以作为过渡方案，快速提供语音业务，特别是在网络初期部署阶段。\n\n2. 利用现有基础设施：运营商可以通过CSFB利用原有的2G和3G基础设备提供语音服务，无需部署IMS，只需升级MSC即可支持。\n\n3. 语音呼叫接续速度慢的缺点：虽然VoLTE能提供高清晰的语音服务，但在某些情况下，如拜访地网络没有部署IMS或者IMS漫游协议尚未应用，CSFB可以为漫入的LTE用户提供语音业务。\n\n4. 漫游场景下的应用：对于LTE手机漫游场景，CSFB能够解决语音呼叫问题。\n\n5. 终端产业链成熟：CSFB方案由于终端产业链较为成熟，易于实施和推广。\n\n综上所述，CSFB语音功能的引入是为了在VoLTE未完全部署或不可用的场景下，提供一种有效的语音通信解决方案，同时充分利用现有网络资源，并满足漫游等特定需求。"}
{"id": 60, "query": "VNF弹性分几类？", "recall": "[1]:特性描述\r: 在VNFM配置SC自动弹缩门限。\r\n\r\n  2. VNF配置使能SC自动弹缩。\r\n\r\n  3. VNF监控SC的KPI指标，如果SC的KPI指标低于门限，SC所在的VM可以缩减。\r\n\r\n  4. VNF选择待删除的VM。\r\n\r\n  5. VNF把待删除的VM的业务迁移到其他VM。\r\n\r\n  6. VNF通知VNFM SC复本数量减少。\r\n\r\n  7. VNF向VNFM发送VM删除请求。\r\n\r\n  8. VNFM向VIM发送VM删除请求。\r\n\r\n  9. VM删除后，VIM向VNFM发送VM删除响应消息。\r\n\r\n  10.\n\n[2]:ZUF-76-02 NFV\r: ZUF-76-02 NFV\r\n\r\n子主题：\r\n\r\n  * ZUF-76-02-001 VNF自动部署\r\n\r\n  * ZUF-76-02-002 VNF弹性伸缩\r\n\r\n  * ZUF-76-02-003 虚机自愈\r\n\r\n  * ZUF-76-02-004 支持多个IaaS云平台\r\n\r\n  * ZUF-76-02-005 虚机的反亲和部署\n\n[3]:特性描述\r: 业务流程\r\n\r\n手工弹扩流程\r\n\r\n手工弹扩业务流程如图4所示。\r\n\r\n图4 手工弹扩业务流程\r\n\r\n流程说明如下：\r\n\r\n  1. 用户在VNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)选择需要弹出的SC（服务组件，Service Component），触发SC弹出。\r\n\r\n  2. VNFM向VNF(Virtualized Network Function, 虚拟化网络功能)发送SC副本数量增加变化请求。\r\n\r\n  3. VNF找到SC归属的VM(Virtual Machine, 虚拟机)，判断VM可以弹出。\r\n\r\n  4. VNF向VNFM发送VM创建请求。\r\n\r\n  5. VNFM向VIM发送VM创建请求。\r\n\r\n  6. VM创建成功后，VIM(Virtualized Infrastructure Manager, 虚拟化基础设施管理系统)向VNFM发送成功建立消息。\r\n\r\n  7. VNFM向VNF回VM创建响应消息。\r\n\r\n  8. VNF收到VM上电成功消息，进行SC负荷重平衡操作，新弹出的SC投入服务。\r\n\r\n\r\n\r\n\r\n手工弹缩流程\r\n\r\n手工弹缩业务流程如图5所示。\r\n\r\n图5 手工弹缩业务流程\r\n\r\n流程说明如下。\r\n\r\n  1. 用户在VNFM选择需要缩减的SC，触发SC缩容。\r\n\r\n  2. VNFM向VNF发送SC副本数量减少变化请求。\r\n\r\n  3. VNF找到SC归属的VM，选择可以删掉的VM。\r\n\r\n  4. VNF把待删除的VM上的业务迁移到其他VM。\r\n\r\n  5. VNFM向VNF查询SC复本数量变化，更新SC复本数量。\r\n\r\n  6. VNF向VNFM发送VM删除请求。\r\n\r\n  7. VNFM向VIM发送VM删除请求。\r\n\r\n  8. VM删除后VIM向VNFM发送删除成功。\r\n\r\n  9. VNFM向VNF发送删除成功。\r\n\r\n\r\n\r\n\r\n自动弹扩流程\r\n\r\n自动弹扩业务流程如图6所示。\r\n\r\n图6 自动弹扩业务流程\r\n\r\n流程说明如下。\r\n\r\n  1. 在VNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)配置SC（服务组件，Service Component）自动弹缩门限。\r\n\r\n  2. VNF(Virtualized Network Function, 虚拟化网络功能)配置使能SC自动弹缩。\r\n\r\n  3. VNF监控SC的KPI(Key Performance Indicator, 关键性能指标)指标，如果SC的KPI指标超过门限，SC所在的VM(Virtual Machine, 虚拟机)可以弹出。\r\n\r\n  4. VNF向VNFM发送VM创建请求。\r\n\r\n  5. VNFM向VIM发送VM创建请求。\r\n\r\n  6. VIM虚机创建完成后，向VNFM发送虚机创建响应消息。\r\n\r\n  7. VNFM向VNF发送虚机创建响应消息。\r\n\r\n  8. VNF收到VM上电成功消息。\r\n\r\n  9. VNF执行SC负荷重平衡。\r\n\r\n  10. VNF通知VNFM SC复本数量增加，VNFM更新SC复本。\r\n\r\n\r\n\r\n\r\n自动弹缩流程\r\n\r\n自动弹缩业务流程如图7所示。\r\n\r\n图7 自动弹缩业务流程\r\n\r\n  1. 在VNFM配置SC自动弹缩门限。\r\n\r\n  2. VNF配置使能SC自动弹缩。\r\n\r\n  3.\n\n[4]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 版本要求及变更记录\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\n无状态| 是指业务组件中不再保存持久化状态，用户可以通过任一业务组件来进行业务处理，从而实现业务组件间负荷分担。  \r\n  \r\n描述\r\n\r\n定义\r\n\r\n3GPP TS 23.501标准规范中，提出了计算和存储分离的概念，对NF(Network Function, 网络功能)的状态数据进行统一存储，实现业务逻辑与状态数据分离，如图1所示，将状态数据存储在UDSF(Unstructured Data Storage Function, 非结构化数据存储功能)中。\r\n\r\n图1 业务逻辑与状态数据\r\n\r\n支持无状态架构的NF需要满足如下特性：\r\n\r\n  * 计算与存储分离。\r\n\r\n  * 同类型的VNFC(Virtualized Network Function Component, 虚拟网络功能组件)以集群的工作方式负荷分担，系统的容量可随VNFC实例数增加而线性增长。\r\n\r\n  * 缩扩容（Scale）和容灾恢复（Resilience）等导致VNFC实例变化后，秒级达到负荷均衡。\r\n\r\n\r\n\r\n\r\n背景知识\r\n\r\n面对万物互联5G时代多样化、极致通讯的需求，运营商需要构建更敏捷、更灵活的网络。NFV(Network Functions Virtualization, 网络功能虚拟化)/SDN(Software Defined Network, 软件定义网络)等虚拟化技术已经广泛应用到云化核心网中，实现了软硬件分离以及网络控制和转发的分离，降低TCO(Total Cost of Ownership, 总体拥有成本)，但还存在如下挑战：\r\n\r\n  * 网络弹性不足：\r\n\r\n核心网各NF各自维护会话上下文数据，网元弹性、缩扩容需消耗较长时间进行迁移和恢复数据，难以实现快速的业务弹性、无损用户体验和加速新业务发布。\r\n\r\n  * 容灾复杂：\r\n\r\nNF故障后，需要进行数据迁移。\r\n\r\n\r\n\r\n\r\n通过NF支持无状态架构，5GC实现了计算与存储的分离，解决了网络弹性不足问题及简化了容灾恢复，具有如下优势：\r\n\r\n  * 快速、业务无损的网络弹性：\r\n\r\n    * 控制类NF组件间无需迁移状态数据，实现秒级弹性。\r\n\r\n    * 弹性过程中，状态数据不丢失，保证了业务的连续性。\r\n\r\n  * 简洁的容灾恢复：\r\n\r\n通过共享UDSF，一个NF故障后，另一个NF可以从UDSF恢复用户数据。\r\n\r\n  * 提高系统稳定性：\r\n\r\n    * 业务逻辑无状态，业务组件支持N+M负荷分担，一个组件故障，其他组件可实时接管。\n\n[5]:特性描述\r: VNFM向VIM发送VM删除请求。\r\n\r\n  9. VM删除后，VIM向VNFM发送VM删除响应消息。\r\n\r\n  10. VNFM向VNF发送VM删除响应消息。\r\n\r\n\r\n\r\n\r\nNF实现\r\n\r\n手工弹缩是在VNFM上对相应的VM进行手工操作弹性，VNFM下发相应的消息给NF，NF经过内部处理给VNFM返回允许或者拒绝操作。\r\n\r\n自动弹缩是SC自动弹缩激活后，如果NF检测某个虚机的CPU或者RAM达到设定的阈值，则发起自动弹性流程，上报VNFM，再由VNFM与云平台交互删除或者创建相应的VM。\r\n\r\n协议栈\r\n\r\n该特性不涉及具体业务接口和协议栈。\r\n\r\n系统影响\r\n\r\n该特性不涉及对系统的影响。\r\n\r\n应用限制\r\n\r\n弹出需要提前预留硬件资源，并且服务组件没有超过系统设定的容量上限。\r\n\r\n特性交互\r\n\r\n自动弹缩与手工弹缩互斥。\r\n\r\n遵循标准\r\n\r\n类别| 标准编号| 标准名称  \r\n---|---|---  \r\nETSI| ETSI GS NFV 001 V1.1.1(2013-10)| Network Functions Virtualization (NFV); Use Cases V1.1.1  \r\nETSI| ETSI GS NFV 002 V1.1.1(2013-10)| Network Functions Virtualization (NFV); Architectural Framework V1.1.1  \r\nETSI| ETSI GS NFV 003 V1.1.1(2013-10)| Network Functions Virtualization (NFV); Terminology for Main Concepts in NFV V1.1.1  \r\nETSI| ETSI GS NFV 004 V1.1.1(2013-10)| Network Functions Virtualization (NFV); Virtualization Requirements V1.1.1  \r\nETSI| ETSI GS NFV-PER 001 V1.1.1(2014-06)| Network Functions Virtualization (NFV); Performance & Portability Best Practises V1.1.1  \r\n  \r\n特性能力\r\n\r\n该特性不涉及规格指标。\r\n\r\n版本要求及变更记录\r\n\r\n序号| 发布版本| 发布说明  \r\n---|---|---  \r\n01| V7.19.10| 首次发布。  \r\n  \r\n可获得性\r\n\r\nLicense要求\r\n\r\n该特性为ZXUN uMAC的基本特性，无需License支持。\r\n\r\n对其他网元的要求\r\n\r\nNFVO| NFVM| VIM  \r\n---|---|---  \r\n√| √| √  \r\n  \r\n说明：\r\n\r\n表中“√”表示本功能对网元有要求，“-”表示本功能对网元无要求。\r\n\r\n工程规划要求\r\n\r\n扩容过程中会创建新的虚机，需要占用额外的云平台资源，特别是如果某种类型的虚机开通了互斥功能的情况下，会占用更多的云平台资源，必须保证云平台的物理硬件资源足够，否则会导致扩容失败。\r\n\r\nO&M相关\r\n\r\n配置命令\r\n\r\n表2 新增的配置命令配置项| 命令  \r\n---|---  \r\n弹性全局配置| SET SCALEGLBBASECFG  \r\nSHOW SCALEGLBBASECFG  \r\n弹性全局策略配置| SET SCALEPOLICYGLB  \r\nSHOW SCALEPOLICYGLB  \r\n  \r\n定时器\r\n\r\n本特性不涉及定时器的变化。\r\n\r\n性能统计\r\n\r\n该特性不涉及计数器的变化。\r\n\r\n告警和通知\r\n\r\n该特性不涉及告警/通知消息的变化。\r\n\r\n话单与计费\r\n\r\n该特性不涉及话单与计费的变化。", "answer": "VNF弹性分为以下几类：\n\n1. 手工弹扩\n2. 手工弹缩\n3. 自动弹扩\n4. 自动弹缩\n\n这些弹性类别分别对应不同的业务流程和操作方式，以适应不同的网络需求和资源管理策略。"}
{"id": 61, "query": "处理故障需要遵循哪些操作思路？", "recall": "[1]:应急思路\r: 应急思路\r\n\r\n紧急故障发生后，按照如下思路进行处理：\r\n\r\n  1. 恢复业务为第一优先级。\r\n\r\n  2. 判断是否因为操作导致，如配置数据修改等，如果是，则立即回退操作尝试恢复业务。\r\n\r\n  3. 观察是否存在硬件告警或者故障现象集中在某个单板或模块，如果是，则立即复位对应的硬件或模块尝试恢复业务。\r\n\r\n  4. 观察告警和关键KPI，快速判断是本网元内部故障还是外部故障。\r\n\r\n  5. 如果无法迅速解决问题，有容灾备份局点，应启动容灾倒换快速恢复业务。\n\n[2]:故障处理流程\r: 故障处理流程\r\n\r\n故障处理包括一般故障处理和重大故障处理，两者有不同的处理流程。\r\n\r\n当出现故障时，现场维护人员需判断故障是否为重大故障（重大故障的定义参见“重大故障处理流程”），如为重大故障，则按重大故障处理流程进行处理。\r\n\r\n本节包含以下内容：\r\n\r\n  * 重大故障处理流程\r\n\r\n  * 一般故障处理流程\r\n\r\n\r\n\r\n\r\n重大故障处理流程\r\n\r\n重大故障的定义\r\n\r\n重大故障的定义为：设备运行出现异常而不能提供基本业务（如设备瘫痪、停机、系统紊乱等）、无法正常运行时间超过30分钟、使用产品对人身安全造成危害，以及其他紧急情况发生时必须立即解决的问题。\r\n\r\n设备重大故障列表如下：\r\n\r\n  * 不能提供基本业务（无论设备瘫痪、停机、系统紊乱、环境、人为等任何原因），经过初步处理未能恢复，需要紧急处理。\r\n\r\n  * 业务处理突然下降5%以上，或者有大量用户、重要客户投诉。\r\n\r\n  * 用户数据访问失败，或者用户数据存储完整性和一致性被破坏。\r\n\r\n  * 网管无法维护设备，且设备无法正常运行时间超过30分钟。\r\n\r\n  * 影响其他设备提供基本业务。\r\n\r\n  * 使用产品时对人身安全造成危害。\r\n\r\n\r\n\r\n\r\n故障处理流程\r\n\r\n重大故障发生后，除组织相关人员、相关单位紧急处理外，还应立即逐级向通信主管部门、主管领导电话报告。事后需补送书面故障专题报告。还必须组织相关人员、相关单位及设备供货商查明原因，从中吸取经验教训，采取有效措施，防止再次发生。重大故障处理完毕要认真填写并保存故障处理的详细记录。\r\n\r\n重大故障处理工作流程如图1所示。\r\n\r\n图1 重大故障处理工作流程\r\n\r\n故障处理原则\r\n\r\n当接到重大故障报告或发现重大故障时，以尽快恢复为原则，应立即按照如图1所示的重大故障工作流程进行处理，同时联系中兴通讯技术支持。\r\n\r\n根据数据统计，系统出现故障的环节包括全局或部分掉电、网络故障、其他原因故障。可据此进行系统排查。在排除掉电和通讯问题后，可以借助网管告警管理功能定位问题发生的节点。\r\n\r\n一般故障处理流程\r\n\r\n故障处理流程\r\n\r\n故障处理需要进行流程分析、网元分析，将问题定位到模块。定位问题需要从流程及系统组成入手，根据现象对故障进行判断、分析定位，逐个排除后定位到具体的模块。\r\n\r\n发生故障时，一般按照如图2所示流程来处理。\n\n[3]:故障处理流程\r: 发生故障时，一般按照如图2所示流程来处理。\r\n\r\n图2 一般故障处理流程\r\n\r\n故障处理原则\r\n\r\n当接到故障报告或发现故障时，应按照如图2所示的故障工作流程进行处理。故障处理后需要详细记录故障现象、处理方法，以利于以后出现类似情况时参照解决。推荐按照“故障处理记录表”所示格式填写，也可以自行设计相关的表格。\n\n[4]:记录故障信息\r: 记录故障信息\r\n\r\n在启动紧急恢复预案或者按照本文进行故障恢复前/期间，按照异常情况记录表格记录运行版本、异常现象等信息。要做好网管服务器配置数据的备份，故障信息的记录内容参考“收集故障信息”。\r\n\r\n说明：\r\n\r\n异常情况的记录，在紧急求助以及后续问题分析总结上非常有用，需务必作好异常情况记录。\n\n[5]:所有DNS服务器不可用\r: 所有DNS服务器不可用\r\n\r\n典型特性\r\n\r\n  * 告警中有DNS服务器不可达及TCP 链路断链告警。\r\n\r\n  * 故障发生前做过配置修改操作。\r\n\r\n\r\n\r\n\r\n故障排查\r\n\r\n  1. 查看告警中是否有DNS服务器不可达及TCP 链路断链告警。\r\n\r\n     * 是→需要判断是否为AMF与DNS间承载网故障导致。\r\n\r\n     * 否→执行下一步。\r\n\r\n  2. 查询操作日志，故障发生前网络中是否修改过AMF/DNS配置。\r\n\r\n     * 是→可能是配置修改导致的故障，需及时回退配置。\r\n\r\n     * 否→执行下一步。\r\n\r\n  3. 收集告警通知、性能统计、信令跟踪的信息，联系中兴通讯技术支持。\r\n\r\n\r\n\r\n\r\n应急恢复\r\n\r\n  1. 如果是承载网故障导致，则立即通知承载网侧维护人员紧急处理。若承载网侧短时间内无法定位并恢复，将该局业务切换至容灾局。\r\n\r\n根据配置IPU的数量，通过手动闭塞IPU的所有父接口，系统会自动切换到容灾局。两个IPU虚机关闭的示例如下：\r\n    \r\n        configure terminal\r\n    interface xgei-1/0/1/1\r\n    shutdown\r\n    exit\r\n    interface xgei-1/0/2/1\r\n    shutdown\r\n    end\r\n    write\r\n\r\n说明：\r\n\r\n如果没有容灾局，通过ADD MMEHOST和ADD ADDRPOOL命令，配置本地解析，恢复本网基本业务。\r\n\r\n  2. 如果是修改了配置导致的故障，根据操作日志查询到修改的配置，则对应恢复到原有配置。", "answer": "处理故障需要遵循以下操作思路：\n\n1. 将恢复业务作为第一优先级。\n2. 判断是否由于操作导致故障，例如配置数据修改，若是，则立即回退操作以尝试恢复业务。\n3. 观察是否存在硬件告警或故障现象集中在某个单板或模块，若存在，则立即复位对应的硬件或模块以尝试恢复业务。\n4. 观察告警和关键KPI，快速判断是本网元内部故障还是外部故障。\n5. 如果无法迅速解决问题，且存在容灾备份局点，应启动容灾倒换以快速恢复业务。"}
{"id": 62, "query": "AMF用户信令跟踪，可以跟踪哪些接口的信令？", "recall": "[1]:AMF用户信令跟踪\r: AMF用户信令跟踪\r\n\r\n摘要\r\n\r\n本节介绍AMF用户信令跟踪的跟踪方法。\r\n\r\n开启全用户跟踪会占用较多内存资源，商用局点不建议开启所有用户跟踪。\r\n\r\n步骤\r\n\r\n  1. 在跟踪页面中，选择CN跟踪（OAM）→AMF节点，进入任务管理页面。\r\n\r\n  2. 单击新建按钮，打开新建任务页面，如图1所示。\r\n\r\n图1 通用参数页面\r\n\r\n  3. 设置跟踪任务的通用参数。\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n基本信息| \r\n    1. 设置跟踪任务的名称。\r\n    2. 在任务分类下拉菜单中选择信令跟踪。\r\n    3. 在任务类型下拉菜单中选择AMF用户信令跟踪。  \r\n选择网元| \r\n    1. 在网元列表中选择需要跟踪的网元。如果列表中的网元较多，可以在过滤前的输入框中，输入网元名称，单击过滤按钮，过滤显示列表中的网元。\r\n    2. 选中需要跟踪的网元后，网元列表右侧呈现该网元包含的NFS，根据需要选择需要跟踪的NFS。  \r\n时间设置| 根据需要选择任务执行的时间。\r\n     * 即时：任务从现在开始启动，经过设置的时长后停止任务。\r\n     * 持续：任务启动后一直运行，不会自动停止任务。可以手动停止跟踪任务。\r\n     * 定时：任务从设置的开始时间启动，到设置的终止时间停止。  \r\n信令存储设置| 设置是否保存信令跟踪数据。选择信令保存，可以查询历史跟踪数据，并能导出跟踪数据。选择信令不保存，只能查看实时跟踪数据，不能查看历史跟踪数据。  \r\n  \r\n  4. 单击下一步，进入业务参数页面，如图2所示。\r\n\r\n图2 业务参数页面\r\n\r\n  5. 设置跟踪任务的业务参数。\r\n\r\n参数| 参数说明  \r\n---|---  \r\n跟踪方式| \r\n     * 全部用户\r\n     * 指定用户  \r\n接口类型| 选择跟踪的接口类型。  \r\n  \r\n  6. 单击新建并监控按钮，任务创建成功，新建的任务显示在任务列表中，如图3所示。\r\n\r\n图3 AMF用户信令跟踪任务\n\n[2]:CN跟踪（OAM）\r: CN跟踪（OAM）\r\n\r\nCN跟踪（OAM）实现核心网5G各类NF(Network Function, 网络功能)的各类信令跟踪流程，包括跟踪指定的接口、跟踪指定的用户、跟踪指定的NF、跟踪随机用户等。通过对跟踪到的各类信令的解码及展示功能，操作维护人员可以直观地分析和判断相关信令的正确性，有助于协助排查相关问题。跟踪码流及其解码结果，可以导出为数据文件，供事后分析。\r\n\r\n子主题：\r\n\r\n  * 通用操作\r\n\r\n  * SIG信令跟踪\r\n\r\n  * SIG失败观察\r\n\r\n  * AMF用户信令跟踪\r\n\r\n  * AMF业务失败观察\r\n\r\n  * SGSN&MME用户信令跟踪\r\n\r\n  * SGSN&MME失败观察\n\n[3]:特性配置\r: AMF Pool环境就绪，环境中部署了至少两套AMF（AMF1和AMF2），一套NRF。\r\n  2. NRF支持NF注册、订阅以及通知流程。\r\n  3. AMF、SMF等已经在NRF上完成注册、订阅操作。\r\n  4. 在各个逻辑网元上建立接口信令跟踪和用户信令跟踪。\r\n\r\n  \r\n测试过程| \r\n\r\n  1. UE在AMF1上注册成功。\r\n  2. 在AMF2查询用户的备份信息。\r\n\r\n  \r\n通过准则| 通过动态命令SHOW BACKUPDATA，可以查询到用户的GUTI、TA list信息。  \r\n测试结果| –  \r\n  \r\n常见问题处理\r\n\r\n无。\n\n[4]:* 端到端跟踪\r: * 端到端跟踪\r\n    * 用户跟踪\r\n    * Pool跟踪\r\n  * CN跟踪（OAM）\r\n    * 通用操作\r\n      * 新建跟踪任务\r\n      * 启动跟踪任务\r\n      * 停止跟踪任务\r\n      * 修改跟踪任务\r\n      * 删除跟踪任务\r\n      * 查看网元状态\r\n      * 实时监控跟踪数据\r\n      * 查看历史跟踪数据\r\n      * 查看详细码流\r\n      * 保存数据\r\n      * 导出数据\r\n    * SIG信令跟踪\r\n      * 基于偶联ID的SCTP跟踪\r\n      * 基于端口号的SCTP跟踪\r\n      * 基于IP+PORT的SCTP跟踪\r\n      * M3UA偶联跟踪\r\n      * M3UA丢弃消息跟踪\r\n      * NIF丢弃消息跟踪\r\n      * SCCP跟踪\r\n      * SCCP丢弃消息跟踪\r\n    * SIG失败观察\r\n      * SCCP失败观察\r\n    * AMF用户信令跟踪\r\n    * AMF业务失败观察\r\n    * SGSN&MME用户信令跟踪\r\n    * SGSN&MME失败观察\r\n  * CN跟踪（OMM）\r\n    * 设置IE浏览器\r\n    * 进入跟踪信令窗口\r\n  * 设置\r\n    * 信令数据存储设置\r\n    * 原因码设置\r\n  * 工具\r\n    * 查看离线数据\r\n  * 缩略语\r\n    * GPSI\r\n    * IMEI\r\n    * IMSI\r\n    * M3UA\r\n    * MSISDN\r\n    * MTP3\r\n    * NF\r\n    * NIF\r\n    * PEI\r\n    * SCCP\r\n    * SCTP\r\n    * SIGTRAN\r\n    * SSN\r\n    * SUPI\r\n    * VPN\n\n[5]:# 跟踪管理\r: # 跟踪管理\r\n\r\n## 背景知识\r\n\r\n为了满足运营商支出于特定的目的，出于对特定目标对象的行为分析，AMF需要支持跟踪相关的信令消息。\r\n\r\n## 功能描述\r\n\r\n跟踪管理提供了根据配置跟踪特定用户的信令消息等功能，包括TRACE、管理MDT和信令MDT等功能。\r\n\r\n## 相关主题\r\n\r\n  * 用户设备跟踪\r\n\r\n\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.", "answer": "AMF用户信令跟踪可以跟踪的接口信令类型在提供的上下文信息中并没有明确列出。但根据上下文中关于AMF用户信令跟踪的描述，可以推断以下几点：\n\n1. 它涉及到跟踪用户在AMF上的信令过程。\n2. 可以设置跟踪全部用户或指定用户的信令。\n\n然而，具体可以跟踪哪些接口的信令，如SIG信令、SCCP、SCTP等，则需要进一步的信息来确定。因此，基于当前上下文信息，对于可以跟踪哪些接口的信令的问题，答案是不确定。"}
{"id": 63, "query": "大量用户无法注册时候应该怎么排查故障？", "recall": "[1]:大量用户无法注册/激活\r: 大量用户无法注册/激活\r\n\r\n典型特征\r\n\r\n  * 有明显软件或硬件告警，用户数、流量急剧下降。\r\n\r\n  * 故障发生前本网元及周边网元（如IWF和UDM）做过配置修改操作。\r\n\r\n  * 信令跟踪和失败观察显示有大量失败。\r\n\r\n\r\n\r\n\r\n故障排查\r\n\r\n  1. 查看告警中是否有明显软硬件告警。\r\n\r\n     * 是→则优先判断是否软硬件故障导致，可以通过倒换或复位相关虚机来解决故障。\r\n\r\n若有虚机离线或重启告警，则同时观察同一服务器或是DC上有无其他网元虚机有同样告警，若只有AMF有虚机告警，则在AMF侧重点排查故障；若多网元都有虚机告警，则底层TECS、硬件都需要排查故障。\r\n\r\n     * 否→执行下一步。\r\n\r\n  2. 查询操作日志，故障发生前网络中是否修改过配置。\r\n\r\n     * 是→可能是配置修改导致的故障，需及时回退配置。\r\n\r\n     * 否→执行下一步。\r\n\r\n  3. 查看告警中是否有重要接口相关告警，如：周边网元不可达告警、大量gNB断链告警、NRF不可达告警、大量管理组件与业务模块间通讯异常/虚拟机检测代理异常等告警。\r\n\r\n     * 是→若有大量管理组件与业务模块间通讯异常/虚拟机检测代理异常等告警，则重点排查本局故障。此种场景可能存在周边网元不可达、gNB断链、NRF不可达和DNS服务器不可达等一种或多种告警。\r\n\r\n若无管理组件与业务模块间通讯异常/虚拟机检测代理异常等告警，存在本省或本大区周边同类型网元均不可达、大量gNB断链和所有DNS服务器不可达其中一种告警，则重点排查与链路和对端，则进行PING包测试，确认是否传输或底层硬件问题，若是传输或底层硬件问题，则第一时间通知传输及TECS、硬件侧共同排查；若非传输或底层硬件问题，则转至下一步。\r\n\r\n     * 否→执行下一步。\r\n\r\n  4. 跟踪信令跟踪、失败观察，查看流程异常的原因，判断是本局原因还是对端局原因。\r\n\r\n     * 对端局原因→通知对端局紧急处理。\r\n\r\n     * 本局原因→执行下一步。\r\n\r\n  5. 收集告警通知、性能统计、信令跟踪的信息，联系中兴通讯技术支持。\r\n\r\n\r\n\r\n\r\n应急恢复\r\n\r\n  1. 如果是个别虚机故障，可以对故障虚机进行隔离、重启或关机，操作方法如下：\r\n\r\n操作内容| 操作方法  \r\n---|---  \r\n隔离虚机| BLOCK VM:VMNAME=\"虚机名称\";  \r\n重启虚机| RESET VM:VMNAME=\"虚机名称\";  \r\n关机虚机| SHUTDOWN VM:VMNAME=\"虚机名称\",OPMODE=\"FORCELY\"  \r\n  \r\n  2.\n\n[2]:大量用户无法注册/激活\r: 如果是修改了配置导致的故障，根据操作日志查询到修改的配置，则对应恢复到原有配置。\r\n\r\n  3. 如果故障仍在，则可将该局业务切换至容灾局。根据配置IPU(Interface Process Unit, 接口处理单元)的数量，通过手动闭塞IPU的所有父接口，系统会自动切换到容灾局。两个IPU虚机关闭的示例如下：\r\n    \r\n        configure terminal\r\n    interface xgei-1/0/1/1\r\n    shutdown\r\n    exit\r\n    interface xgei-1/0/2/1\r\n    shutdown\r\n    end\r\n    write\n\n[3]:典型故障场景\r: 典型故障场景\r\n\r\n子主题：\r\n\r\n  * 大量用户无法注册/激活\r\n\r\n  * 信令风暴\r\n\r\n  * 主备NRF均不可达\r\n\r\n  * 所有DNS服务器不可用\r\n\r\n  * 单个GSU虚机异常\r\n\r\n  * 单个IPU虚机异常\r\n\r\n  * 同类型GSU虚机CPU过载\r\n\r\n  * 承载类故障\n\n[4]:注册指标下降\r: 检查对端NF在NRF的注册情况。联系对端NF和NRF排查原因。\r\n    3. 单用户跟踪检查NRF的响应。联系对端NF和NRF排查原因。  \r\n  \r\n  5. 如果故障不能解决，联系中兴通讯技术支持。\r\n\r\n\r\n\r\n\r\n故障处理结果确认\r\n\r\n注册指标数据正常稳定。\n\n[5]:初始注册类故障\r: 初始注册类故障\r\n\r\n概述\r\n\r\nAMF的初始注册的指标包括：\r\n\r\n  * 初始注册成功率(%)=100*初始注册成功次数/初始注册请求次数\r\n\r\n  * 初始注册成功率（去除周边网元原因）(%)=100*(初始注册请求次数-AMF导致的初始注册失败次数)/初始注册请求次数\r\n\r\n  * 初始注册成功率（去除用户原因）(%)=100*初始注册成功次数/(初始注册请求次数-初始注册失败次数（3-非法UE）-初始注册失败次数（5-PEI不接受）-初始注册失败次数（6-非法ME）-初始注册失败次数（7.user-5GS服务不允许_用户原因）-初始注册失败次数（15.user-该TA中没有合适的小区_用户原因）-初始注册失败次数（111.user-协议失败，未指 定_用户原因）-初始注册失败次数（27.user-N1模式不允许_用户原因）)\r\n\r\n  * 用户自定义的指标\r\n\r\n\r\n\r\n\r\n推荐重点观察初始注册成功率（去除用户原因）(%)这个指标。\r\n\r\n当发现初始注册成功率指标异常时，需要采集异常时间段内的指标数据、初始注册计数器数据、EMS+数据、一键采集数据（仅需debuginfo数据）、配置数据、告警数据等。\r\n\r\n分析思路\r\n\r\n当发现初始注册成功率指标异常时，可以按以下思路去排查故障：\r\n\r\n  1. 观察到初始注册出现了指标异常。\r\n\r\n  2. 获取指标公式。\r\n\r\n  3. 查询异常时间段内的初始注册相关的计数器值，判断导致指标下降的计数器原因。\r\n\r\n  4. 查看异常时间段内的EMS+数据，筛选EventID为Initial Registration(2001)的失败数据，查看InnerCause。通常情况下，执行到此步骤可以分析出原因。\r\n\r\n  5. （可选）如果前面几步骤无法分析原因，可采集失败观察信息，查看指标异常时间段内的失败观察，查找注册流程的失败观察。\r\n\r\n  6. （可选）如果发现异常失败是高频用户，可单用户跟踪此用户，复现失败现象，查明原因。\r\n\r\n  7. （可选）通过一键采集网元调试信息（仅需debuginfo数据），联系中兴通讯技术支持进一步分析。\r\n\r\n\r\n\r\n\r\n子主题：\r\n\r\n  * 注册指标下降\r\n\r\n  * 初始注册成功率低", "answer": "1. 首先检查是否有明显的软硬件告警，如果有，优先判断是否是软硬件故障导致，可以通过倒换或复位相关虚机来解决故障。\n2. 如果没有软硬件告警，查询操作日志，检查故障发生前网络中是否修改过配置。如果是配置修改导致的故障，需要及时回退配置。\n3. 检查告警中是否有重要接口相关告警，如有，重点排查本局故障；如果没有，但存在本省或本大区周边同类型网元均不可达、大量gNB断链和所有DNS服务器不可达等告警，则重点排查链路和对端问题。\n4. 跟踪信令和失败观察，判断是本局原因还是对端局原因。如果是对端局原因，通知对端局紧急处理；如果是本局原因，进行下一步。\n5. 收集告警通知、性能统计、信令跟踪的信息，联系中兴通讯技术支持进行进一步分析。 \n\n此外，在应急恢复方面：\n- 如果是个别虚机故障，可以隔离、重启或关机故障虚机。\n- 如果是配置修改导致的故障，根据操作日志查询到修改的配置，恢复到原有配置。\n- 如果故障持续，可将业务切换至容灾局。\n\n以上是针对大量用户无法注册时排查故障的步骤。"}
{"id": 64, "query": "如何实现对MU指定需要存储的字段数据", "recall": "[1]:配置实例\r: 配置实例\r\n\r\n场景说明\r\n\r\n已经实例化好一个EMSPLus（Logging）局，有新的CGNAT(Carrier Grade Network Address Translation, 运营商级网络地址转换)、SMF(Session Management Function, 会话管理功能)和UPF(User Plane Function, 用户平面功能)业务网元需要和该EMSPLus（Logging）局对接上报业务数据。\r\n\r\n数据规划\r\n\r\n表1 IPDR场景数据规划名称 | 数据 | 说明  \r\n---|---|---  \r\nSMF业务网元地址 | 10.1.1.221 | 确定其网络平面和MDS可以通信  \r\nSMF业务网元发送信息的端口 | 1~65535 | SMF网元向EMSPLus（Reporting）局发送信息时使用的端口  \r\nUPF业务地址 | 10.1.1.222 | 确定其网络平面和MDS可以通信  \r\nUPF业务网元发送信息的端口 | 1~65535 | UPF网元项EMSPlus（Reporting）局发送信息时使用的端口  \r\n组号Group ID | 1 | EMSPLus（Reporting）局内部使用，处理方式相同的网元需要规划统一划分为相同的组  \r\nCGNAT业务地址 | 20.1.1.222 | 确定其网络平面和MDS可以通信  \r\nCGNAT业务网元发送信息的端口 | 1~65535 | CGNAT网元向EMSPLus（Logging）局发送信息时使用的端口  \r\n组号Group ID | 2 | EMSPLus（Reporting）局内部使用，处理方式相同的网元需要规划统一划分为相同的组。  \r\nDCU的Local IP For Upload Data地址 | 182.168.215.5 | 使用SHOW COMMCFG命令可以查询DCU相关地址  \r\nASC的Local IP For Upload Data地址 | 182.168.215.7 | 使用SHOW COMMCFG命令可以查询ASC相关地址  \r\n  \r\n配置步骤\r\n\r\n表2 IPDR场景配置步骤步骤 | 操作 | 说明  \r\n---|---|---  \r\n1 | ADD MDSEXTERNALNE: IP=20.1.1.222, STARTPORT=1, ENDPORT=65535, NETYPE=CGNAT ADD MDSEXTERNALNE: IP=10.1.1.221, STARTPORT=1, ENDPORT=65535, NETYPE=SMF ADD MDSEXTERNALNE: IP=10.1.1.222, STARTPORT=1, ENDPORT=65535, NETYPE=UPF | 配置MDS节点对接的外部网元  \r\n2 | ADD MDSDSPIP: GROUPID=1, MODULETYPE=DCU_MU, IPADDR=182.168.215.5ADD MDSDSPIP: GROUPID=2, MODULETYPE=ASC,IPADDR=182.168.215.7| 配置MDS分发的IP地址  \r\n3 | ADD MDSEXTNEDATADSP: NETYPE=CGNAT, GROUPID=1, DESTINATION=SEND_TO_MU ADD MDSEXTNEDATADSP: NETYPE=SMF, GROUPID=2, DESTINATION=ASC ADD MDSEXTNEDATADSP: NETYPE=SMF, GROUPID=2, DESTINATION=ASC | 配置外部网元数据分发  \r\n4 | SYNC MDS | MDS传送配置数据，使配置生效  \r\n5 | ADD ASCDSPIP:GROUPID=1,MODULETYPE=DCU_MU,IPADDR=182.168.215.5| 配置ASC节点分发的MU的IP地址  \r\n6 | ADD ASCEXTNEDATADSP:NETYPE=UPF,GROUPID=1,DESTINATION=SEND_TO_MU | 配置ASC节点上UPF网元数据分发  \r\n7 | SYNC ASC | ASC传送配置数据，使配置生效\n\n[2]:配置过程\r: 配置过程\r\n\r\n本节包含以下内容：\r\n\r\n  * 配置MDS\r\n\r\n  * 配置MU参数\r\n\r\n\r\n\r\n\r\n配置MDS\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)主要配置：\r\n\r\n  1. 在EMSPlus客户端，单击System，选择Terminal进入终端配置。\r\n\r\n  2. 单击Add MDS External NE Configuration或使用命令ADD MDS EXTERNALNE，添加和MDS对接的外部网元，这里主要是配置对端网元的IP地址、端口号和网元类型。\r\n\r\n  3. 单击Add MDS External NE Data Dispatch Configuration或使用命令ADD MDSEXTNEDATADSP，配置外部网元类型、组号和对应的MU(Merging Unit, 合并单元)，主要是配置对于收到配置的外部网元和对应的局号的消息发到MU上进行消息的处理。\r\n\r\n  4. 单击Add MDS Dispatch IP Address Configuration或是使用命令ADD MDSDSPIP，配置MDS将消息转发到MU的IP地址和组号。\r\n\r\n  5. 单击SYNC MDS DATA或是使用命令SYNC MDS，进行MDS配置数据的同步。\r\n\r\n\r\n\r\n\r\n配置MU参数\r\n\r\nMU(Merging Unit, 合并单元)主要配置：\r\n\r\n  1. 在EMSPlus客户端，单击Add DCU_MU Special Parameter Configuration或使用命令ADD DCUMUCFG，配置MU专有的参数。\r\n\r\n当不同逻辑子网的CGNAT和CHR的私网IPV4地址存在冲突时，可选参数Private IP Conflict Mode配置为ON，其余情况下均不需要配置，默认为OFF。\r\n\r\n若其中的必选参数已在EMSPlus实例化时配置，可单击Set DCU_MU Special ParameterConfiguration或使用命令SET DCUMUCFG配置可选参数。\r\n\r\n  2. （可选）根据业务需求，单击Add APN Address Configuration或使用命令ADD APNADDRCFG，配置APN和VRFID匹配，两者的对应关系由业务侧提供。\r\n\r\n  3. 单击Add MU Save Configuration或使用命令ADD MUSAVECFG，配置MU数据存储参数。\r\n\r\n  4. （可选）根据业务需求，单击Set Packet Filter Configuration或使用命令SET PKTFILTERCFG，配置包过滤。\r\n\r\n  5. （可选）根据业务需求，单击Add IPDR IP Filter或使用命令ADD IPDRIPFILTER，配置IPDR IP过滤器。\r\n\r\n  6. 单击SYNC MU DATA或使用命令SYNC MU，同步MU配置数据。\n\n[3]:配置实例\r: 配置实例\r\n\r\n场景说明\r\n\r\n已经实例化好一个EMSPLus（Logging）局，有新的CGNAT和Firewall业务网元需要和该EMSPLus（Logging）局对接上报业务数据。\r\n\r\n数据规划\r\n\r\n表1 Logging场景数据规划名称| 数据| 说明  \r\n---|---|---  \r\nCGNAT业务网元地址| 20.1.1.222| 确定其网络平面和MDS(Message Dispatch Service, 消息分发服务)在同一网络平面EMSPlus_VNF_FWNAT_NET  \r\nCGNAT业务网元发送信息的端口| 1025~1054| CGNAT网元向EMSPLus（Logging）局发送信息时使用的端口  \r\n组号Group ID| 1| EMSPLus（Logging）局内部使用，CGNAT网元规划统一划分为组1  \r\nDCU的Local IP For Upload Data地址| 182.168.215.5| 使用SHOW COMMCFG命令可以查询DCU(Data Concentrator Unit, 数据集中单元)相关地址  \r\n防火墙业务网元地址| 30.1.1.223| 确定其网络平面和MDS(Message Dispatch Service, 消息分发服务)在同一网络平面EMSPlus_VNF_FWNAT_NET  \r\n防火墙业务网元发送信息的端口| 201| 防火墙网元向EMSPLus（Logging）局发送信息时使用的端口  \r\n组号Group ID| 2| EMSPLus（Logging）局内部使用，防火墙网元规划统一划分为组2  \r\n  \r\n配置步骤\r\n\r\n表2 Logging场景配置步骤步骤| 操作| 说明  \r\n---|---|---  \r\n1| ADD MDSEXTERNALNE: IP=20.1.1.222, STARTPORT=1025, ENDPORT=1054, NETYPE=CGNATADD MDSEXTERNALNE: IP=30.1.1.223, STARTPORT=201, ENDPORT=201, NETYPE=FIREWALL_LOG| 配置MDS节点对接的外部网元  \r\n2| ADD MDSDSPIP: GROUPID=1, MODULETYPE=DCU_MU, IPADDR=182.168.215.5ADD MDSDSPIP: GROUPID=2, MODULETYPE=DCU_MU, IPADDR=182.168.215.5| 配置MDS分发的IP(Internet Protocol, 因特网协议)地址  \r\n3| ADD MDSEXTNEDATADSP: NETYPE=CGNAT, GROUPID=1, DESTINATION=SEND_TO_MUADD MDSEXTNEDATADSP: NETYPE=FIREWALL_LOG, GROUPID=2, DESTINATION=SEND_TO_MU| 配置外部网元数据分发  \r\n4| SYNC MDS| MDS传送配置数据，使配置生效\n\n[4]:配置外部网元数据分发\r: 配置外部网元数据分发\r\n\r\n摘要\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)节点按照配置的不同分发策略，将数据源上报的数据分发到指定数据清洗服务器。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSEXTNEDATADSP命令，配置MDS节点的外部网元数据分发，如图1所示。\r\n\r\n图1 ADD MDSEXTNEDATADSP命令表1 ADD MDSEXTNEDATADSP命令参数参数名称| 参数说明  \r\n---|---  \r\nNE Type| MDS节点接入的网元类型。\r\n     * MDS节点分发Firewall数据时，选择FW (FIREWALL)。\r\n     * MDS节点分发CGNAT数据时，选择CGNat (CGNAT)。\r\n     * MDS节点分发FTU的数据源时，选择FTU处理的相应网元类型。  \r\nGroup ID| 同一目标类型的多个IP地址可以设置为一个组，MDS对同一组的多个IP地址（IP地址设置参见ADD MDSDSPIP命令）进行负载均衡数据分发。通过SHOW MDSDSPIP命令查询组号对应的模块类型和数据分发IP地址。不同网络平面网元数据的目标类型配置为不同组号。  \r\nTarget| 数据分发目标的类型。对于EMSPlus（Logging）网元，选择Send_to_MU (SEND_TO_MU)。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSEXTNEDATADSP:NETYPE=<MDS节点接入的网元类型>,GROUPID=<组号>,DESTINATION=<数据分发目标的类型>\n\n[5]:配置外部网元数据分发\r: 配置外部网元数据分发\r\n\r\n摘要\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)节点按照配置的不同分发策略，将数据源上报的数据分发到指定数据清洗服务器。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSEXTNEDATADSP命令，配置MDS节点的外部网元数据分发，如图1所示。\r\n\r\n图1 ADD MDSEXTNEDATADSP命令表1 ADD MDSEXTNEDATADSP命令参数参数名称| 参数说明  \r\n---|---  \r\nNE Type| MDS节点接入的网元类型，例如：\r\n     * MDS节点分发xGW数据时，选择XGW (XGW)。\r\n     * MDS节点分发CGNAT数据时，选择CGNat (CGNAT)。\r\n     * MDS节点接收Fortinet数据源时，选择Fortinet (FORTINET)。\r\n     * MDS节点分发FTU的数据源时，选择FTU处理的相应网元类型。  \r\nGroup ID| 同一目标类型的多个IP地址可以设置为一个组，MDS对同一组的多个IP地址（IP地址设置参见ADD MDSDSPIP命令）进行负载均衡数据分发。通过SHOW MDSDSPIP命令查询组号对应的模块类型和数据分发IP地址。不同网络平面网元数据的目标类型配置为不同组号。  \r\nTarget| 数据分发目标的类型。对于EMSPlusLog网元，选择Send_TO_MU (SEND_to_MU)。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSEXTNEDATADSP:NETYPE=<MDS节点接入的网元类型>,GROUPID=<组号>,DESTINATION=<数据分发目标的类型>", "answer": "实现对MU指定需要存储的字段数据，可以通过以下步骤：\n\n1. 在EMSPlus客户端，使用命令或图形界面配置MU的数据存储参数。\n   \n   - 可以通过单击“Add MU Save Configuration”或使用命令“ADD MUSAVECFG”来配置MU数据存储参数。\n\n2. 在配置过程中，指定需要存储的字段。\n\n   - 具体的字段选择可能依赖于业务需求，通常会在配置界面或命令参数中指定需要存储的数据字段。\n\n3. （如果需要）根据业务需求，配置APN和VRFID的匹配关系。\n\n   - 可以通过“Add APN Address Configuration”或使用命令“ADD APNADDRCFG”来配置。\n\n4. 同步MU配置数据。\n\n   - 完成配置后，需要执行“SYNC MU DATA”或使用命令“SYNC MU”来同步MU配置数据，以确保配置生效。\n\n请注意，具体的字段数据配置取决于MU支持的字段和业务需求，上下文信息中并未详细列出所有可配置的字段选项。如果需要具体字段配置的详细信息，可能需要参考相关的产品文档或技术支持。"}
{"id": 65, "query": "如何查看虚机的内存占用？", "recall": "[1]:网元上报“数据溢出(2365983024)” \r: 网元上报“数据溢出(2365983024)” \r\n\r\n故障现象\r\n\r\n网元上报“数据溢出(2365983024)”。\r\n\r\n可能原因\r\n\r\n负荷超出系统处理能力。\r\n\r\n处理步骤\r\n\r\n  1. 检查虚机的内存是否耗尽。通过命令free –g，查看交换分区（swap）已使用（used）的值是否大于10。\r\n\r\n     * 是→步骤2\r\n\r\n     * 否→步骤3\r\n\r\n  2. 登录虚机操作系统，通过执行命令reboot，重启虚机。操作完成后，检查故障是否解决。\r\n     * 是→结束\r\n\r\n     * 否→步骤3\r\n\r\n  3. 联系中兴通讯技术支持人员。\n\n[2]:检查虚拟机内存占用情况\r: 检查虚拟机内存占用情况\r\n\r\n检查目的\r\n\r\n保证FTU节点虚拟机内存空间足够。\r\n\r\n检查步骤\r\n\r\n  1. 使用浮动地址通过SSH登录EMSPlus服务端，查询FTU节点IP地址：\r\n\r\ncat /ubas/clustershell/groups | grep \"FTU\" \r\n\r\n  2. 登录FTU虚拟机。\r\n\r\n  3. 执行内存占用查询指令：free -g \r\n\r\n图1 查询内存占用率\r\n\r\n  4. 计算内存使用率。\r\n\r\n内存使用率 = used / total = 2 / 7 * 100% ≈ 28.6%\r\n\r\n\r\n\r\n\r\n检查标准\r\n\r\nFTU节点所有虚拟机内存使用率小于80% 。\n\n[3]:检查虚拟机内存占用情况\r: 检查虚拟机内存占用情况\r\n\r\n检查目的\r\n\r\n保证MU节点虚拟机内存空间足够。\r\n\r\n检查步骤\r\n\r\n  1. 使用浮动地址通过SSH登录EMSPlus服务端，查询MU节点IP地址：\r\n\r\ncat /ubas/clustershell/groups | grep \"DCU_LOG\" \r\n\r\n  2. 登录MU虚拟机。\r\n\r\n  3. 执行内存占用查询命令：free -g\r\n\r\n图1 查询内存占用率\r\n\r\n  4. 计算内存使用率。\r\n\r\n内存使用率 = used / total = 33 / 78 * 100% ≈ 42.3%\r\n\r\n\r\n\r\n\r\n检查标准\r\n\r\nMU节点所有虚拟机内存使用率小于80% 。\n\n[4]:检查虚拟机内存占用情况\r: 检查虚拟机内存占用情况\r\n\r\n检查目的\r\n\r\n保证MDS节点虚拟机内存空间足够。\r\n\r\n检查步骤\r\n\r\n  1. 使用浮动地址通过SSH登录EMSPlus服务端，查询MDS节点IP地址：\r\n\r\ncat /ubas/clustershell/groups | grep \"MDS\" \r\n\r\n  2. 登录MDS虚拟机。\r\n\r\n  3. 执行内存占用查询指令：free -g 。\r\n\r\n图1 检查内存占用率\r\n\r\n  4. 计算内存使用率：\r\n\r\n内存使用率 = used / total = 11 / 23 * 100% ≈ 47.8% 。\r\n\r\n\r\n\r\n\r\n检查标准\r\n\r\nMDS节点所有虚拟机内存使用率小于80% 。\n\n[5]:检查虚拟机内存占用情况\r: 检查虚拟机内存占用情况\r\n\r\n检查目的\r\n\r\n保证ASC节点虚拟机内存空间足够。\r\n\r\n检查步骤\r\n\r\n检查标准\r\n\r\nASC节点所有虚拟机内存使用率小于80% 。", "answer": "可以通过执行命令 `free -g` 来查看虚机的内存占用情况。这条命令会显示内存的使用情况，包括已使用（used）和总内存（total），并以GB为单位。通过这个命令可以计算出内存的使用率。"}
{"id": 66, "query": "怎么调整通用查询结果中列的顺序", "recall": "[1]:查询通用日志\r: 单击按钮，查询结果显示在页面下方，如图6所示。\r\n\r\n查询结果左侧的列表区域显示网元的业务记录信息。\r\n\r\n图6 报表查询结果表3 报表查询结果按钮说明按钮| 使用说明  \r\n---|---  \r\n| 导出报表查询结果，导出的文件支持Excel和CSV格式，如图7所示。\r\n     * 默认不选中Full Scale：仅导出表格中的数据。\r\n     * 选中Full Scale：由于表格最多只展示4000条数据，选中Full Scale，可以导出全部的数据（全量）。最大可以导出5万条数据。\r\nCHR报表导出任务结果显示在窗口右上侧的中。  \r\n| 报表查询结果中的列排序。\r\n    1. 单击该按钮，在打开的对话框中选中某一项，按住鼠标上下拖拽。\r\n    2. 如果列顺序发生改变，则OK按钮立即激活，如图8所示。单击OK按钮，表格按最新的列顺序显示。  \r\n图7 数据导出图8 列排序\r\n\r\n  8. 单击列表区域某一条业务记录，查询结果右侧的Detail Content区域显示该条记录的详细信息。\r\n\r\n说明：\r\n\r\n关闭查询结果页面后，再次打开查询页面，系统默认会记住上次查询使用的条件。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n右击Detail Content区域的字段，选择快捷菜单，如图9所示，可执行相关的操作。\r\n\r\n图9 快捷菜单\r\n\r\n快捷菜单功能如下：\r\n\r\n  * Apply as Filter：添加高级查询条件\r\n\r\n  * Column Statistics：按字段统计日志数据\r\n\r\n  * Trend Analysis：跳转到趋势分析，参见“查询通用趋势分析”\r\n\r\n  * Add Column：设置查询结果列\r\n\r\n\r\n\r\n\r\n子主题：\r\n\r\n  * 添加高级查询条件\r\n\r\n  * 按字段统计日志数据\r\n\r\n  * 设置查询结果列\n\n[2]:设置查询结果列\r: 设置查询结果列\r\n\r\n摘要\r\n\r\n在日志查询结果中，系统会默认显示一些常用的字段作为表格列。而在右侧的Detail Content区域中，系统会显示日志中包含的所有字段。如果维护人员对某一个字段比较关注，但默认并未显示在查询结果列中，可以将其手工添加至查询结果表格列。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的CHR页面，选择左侧导航树的数据分析→专家模式→通用日志查询，打开专家模式(通用日志查询)页面，如图1所示。\r\n\r\n图1 通用日志查询\r\n\r\n  2. 单击按钮，查询结果显示在页面下方，如图2所示。\r\n\r\n图2 报表查询结果\r\n\r\n  3. 右击Detail Content区域需要添加的列的字段，例如StartTimeMill，如图3所示。\r\n\r\n图3 Detail Content区域添加列\r\n\r\n  4. 选择快捷菜单**Add Column** ，将字段添加到查询结果中的最后一列，如图4所示。\r\n\r\n图4 成功添加列至查询结果\r\n\r\n\r\n\r\n\r\n相关操作\r\n\r\n  * 单击查询结果中字段名后面的按钮，即可将此字段从查询结果中删除。\r\n\r\n  * 单击查询结果下方的按钮，拖动字段名，单击OK，可调整字段在查询结果中显示的顺序。\r\n\r\n单击Reset，可恢复到操作前设置。\r\n\r\n图5 调整字段顺序\n\n[3]:按预定义模板查询数据\r: 按预定义模板查询数据\r\n\r\n统计查询的预定义模板包括以下几种。\r\n\r\n  * Log Query\r\n\r\n    * General Query\r\n\r\n  * CGNAT\r\n\r\n    * Create Session Log (CGNAT)\r\n\r\n    * Delete Session Log (CGNAT)\r\n\r\n    * Statistics Data\r\n\r\n  * FIREWALL\r\n\r\n    * Create Session Log (Firewall)\r\n\r\n    * Delete Session Log (Firewall)\r\n\r\n    * Security Log\r\n\r\n    * System Log\r\n\r\n    * Session Statistics Data\r\n\r\n    * Security Statistics Data\r\n\r\n\r\n\r\n\r\n本文以Statistics Data和Delete Session Log为例，介绍数据统计和日志查询操作，其他操作类似。\r\n\r\n本节包含以下内容：\r\n\r\n  * General Query\r\n\r\n  * 统计日志数据\r\n\r\n  * 查询删除会话的日志\r\n\r\n\r\n\r\n\r\nGeneral Query\r\n\r\n摘要\r\n\r\n介绍如何使用预定义模板查询5GC的控制面日志。\r\n\r\n步骤\r\n\r\n  1. 在左侧菜单选择All→Predefined Query→Logging→Log Query→General Query，打开General Query查询页面，如图1所示。\r\n\r\n说明：\r\n\r\n系统最多可以同时打开3个General Query报表，并在页签右上角以数字显示。\r\n\r\n图1 General Query表1 General Query参数说明参数名称| 参数说明  \r\n---|---  \r\nTime| 设置日志查询的时间段  \r\nRecords| 查询结果显示的记录数。取值范围为1~4000。  \r\nIMSI_SUPI| 按照指定的IMSI(International Mobile Subscriber Identity, 国际移动用户标识)_SUPI(Subscriber Permanent Identifier, 用户永久标识)号码或MSISDN(Mobile Station International Subscriber Directory Number, 移动台国际用户目录号)_GPSI(Generic Public Subscription Identifier, 一般公共用户标识)号码进行查询。\r\n     * “=” : 精准匹配\r\n     * “!=” : 反选  \r\nMSISDN_GPSI  \r\nNFTypeNFID| 按照指定的NF(Network Function, 网络功能)类型（NF Type）或NFID进行查询。\r\n     * in表示查询选择所选条件的数据。\r\n     * not in表示查询除这些条件之外的数据。  \r\nCause| 按照指定的原因码进行查询。  \r\n  \r\n  2. 配置General Query的参数。\r\n\r\n  3. （可选）单击按钮，选择查询结果展示表格的表头字段，单击Confirm按钮，如图2所示。\r\n\r\n如果配置则至少选择一个，如果都不选择则查询所有字段的流量。\r\n\r\n图2 选择维度和KPI字段\r\n\r\n  4. 单击按钮，查询结果显示在页面下方，如图3所示。\r\n\r\n图3 General Query结果\r\n\r\n查询结果区的左侧显示查询的所有的日志信息。\r\n\r\n查询结果的的右侧显示单条日志的详细内容。\r\n\r\n\r\n\r\n\r\n统计日志数据\r\n\r\n摘要\r\n\r\n统计日志数据，包括上行流量和下行流量，以及上行包和下行包。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的Logging窗口，单击功能操作区的Query。\r\n\r\n  2. 选择左侧菜单All→Predefined Query→Logging→CGNAT→Statistics Data，打开日志数据统计页面，如图4所示。\r\n\r\n图4 统计日志数据表2 统计日志数据参数说明参数名称| 参数说明  \r\n---|---  \r\nTime Granularity| 当Time Granularity设置为15Min或Hour，则查询Time可选择1~24小时内。当Time Granularity设置为Day，则查询Time可选择1~3天内。当Time Granularity设置为Month，则查询Time可选择1~2个月内。  \r\nTime  \r\nRecords| 统计结果显示的记录数。取值范围为1~4000，默认值为20。  \r\n  \r\n  3. 配置日志数据统计的参数。\r\n\r\n  4.\n\n[4]:添加高级查询条件\r: 添加高级查询条件\r\n\r\n摘要\r\n\r\nEMSPlus系统支持多字段结合逻辑表达式的高级查询条件。维护人员可以从查询结果的Detail Content中选择需要查询的字段，将其添加到高级查询条件区域，并再次进行查询。\r\n\r\n例如，如果需要查询在某个时间段内的所有EventID为10008，且失败原因码为2的日志，可按照如下步骤进行操作。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的CHR页面，选择左侧导航树的数据分析→专家模式→通用日志查询，打开专家模式(通用日志查询)页面，如图1所示。\r\n\r\n图1 通用日志查询\r\n\r\n  2. 单击按钮，查询结果显示在页面下方，如图2所示。\r\n\r\n图2 报表查询结果\r\n\r\n  3. 右击Detail Content区域某一字段，例如EventID=10008，在弹出的快捷菜单中选择[Apply as Filter→Selected]，如图3所示，系统自动在自定义输入框中生成该查询条件，如图4所示。\r\n\r\n图3 Detail Content区域添加字段到高级查询条件区表1 高级查询参数说明参数名称| 参数说明  \r\n---|---  \r\nSelected| 从所有查询结果中筛选拥有此字段对应信息的结果。单次查询不可重复选择，且与Not Selected不可以同时选择。  \r\nNot Selected| 从所有查询结果中筛选不拥有此字段对应信息的结果。单次查询不可重复选择，且与Selected不可以同时选择。  \r\n... and Selected| 从所有查询结果中筛选同时满足and Selected前后条件的对应信息结果，可重复选择。  \r\n... or Selected| 从所有查询结果中筛选满足or Selected前后任意一条或者两条条件的对应信息结果，可重复选择。  \r\n... and not Selected| 从所有查询结果中筛选同时满足and not Selected前后条件的对应信息结果，可重复选择。  \r\n... or not Selected| 从所有查询结果中筛选满足or not Selected前后任意一条或者两条条件的对应信息结果，可重复选择。  \r\n图4 成功添加至高级查询条件区1\r\n\r\n  4. 右击Detail Content区域某一字段，例如Cause=2，在弹出的快捷菜单中选择[Apply as Filter→... and Selected]，系统自动在自定义输入框中生成该查询条件，如图5所示。\r\n\r\n图5 成功添加至高级查询条件区2\r\n\r\n说明：\r\n\r\n在高级查询条件区域，也可手动输入查询语句。\r\n\r\n在高级查询条件区域手动输入查询条件时，系统会自动检查输入的表达式是否合法。\r\n\r\n  5. 单击，可以查询到所有符合此条件的失败日志。\n\n[5]:按任务查询性能数据\r: 切换到Time Selection页面，设置Query Granularity、Time Setting、Effective data和Effective time参数，如图4所示。\r\n\r\n图4 查询时间页面\r\n\r\nTime Selection页面的参数说明参见表3。\r\n\r\n表3 查询时间页面的参数说明参数名称| 参数说明  \r\n---|---  \r\nQuery Granularity| 查询网元性能的周期。选择的测量对象类型不同，支持的查询粒度也不同。  \r\nTime Setting| 查询网元性能的时间段。选中各选项前的单选按钮，单击下拉按钮，在文本框中设置时间。  \r\nEffective data| 以周或月为周期，设置查询任务执行的日期。日期上有颜色的表示已选择，如果单击该日期，可以取消选择该日期。  \r\nEffective time| 以分钟为单位，设置查询任务执行的时段。输入开始时间和结束时间，并通过Add和Delete按钮来设置多个时段。  \r\n  \r\n  6. 单击OK按钮，历史性能查询结果示例如图5所示。\r\n\r\n图5 性能数据查询结果", "answer": "可以通过以下步骤调整通用查询结果中列的顺序：\n\n1. 在EMSPlus客户端的CHR页面，查询结果显示在页面下方。\n2. 单击查询结果中字段名后面的按钮，按住鼠标上下拖拽字段名。\n3. 如果列顺序发生改变，则OK按钮立即激活。\n4. 单击OK按钮，表格按最新的列顺序显示。"}
{"id": 67, "query": "当上报“用户License不足一级告警”且“告警类型”为“5G在线用户数不足”时，应如何进行确认？", "recall": "[1]:3306553345 用户License不足一级告警\r: 根据告警附加信息中的“告警类型”参数，检查实际用户数与License控制的总用户数的比值是否达到配置的告警门限。\r\n\r\n如果...| 那么...  \r\n---|---  \r\n“告警类型”为：5G在线用户数不足| 比较实际的5G在线用户总数与License控制的5G总在线用户数比值是否达到配置的一级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询5G在线用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的5G总在线用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“一级告警门限值（%）”。  \r\n“告警类型”为：5G注册用户数不足| 比较实际的5G注册用户总数与License控制的5G总注册用户数比值是否达到配置的一级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询连接态用户总数、空闲态用户总数、去注册态用户总数。（实际的5G注册用户总数=连接态用户总数+空闲态用户总数+去注册态用户总数）\r\n    2. 执行SHOW LICENSE命令，查询License控制的5G总注册用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“一级告警门限值（%）”。  \r\n“告警类型”为：总在线用户数不足| 比较实际的在线用户总数（包含2G/3G/4G/5G用户）与License控制的总在线用户数比值是否达到配置的一级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询在线用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的总在线用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“一级告警门限值（%）”。  \r\n“告警类型”为：总注册用户数不足| 比较实际的注册用户总数（包含2G/3G/4G/5G用户）与License控制的总注册用户数比值是否达到配置的一级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询连接态用户总数、空闲态用户总数、去注册态用户总数。（实际的注册用户总数=连接态用户总数+空闲态用户总数+去注册态用户总数）\r\n    2. 执行SHOW LICENSE命令，查询License控制的总注册用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“一级告警门限值（%）”。  \r\n“告警类型”为：PRA用户数不足| 比较实际的PRA用户总数与License控制的PRA用户数比值是否达到配置的一级告警门限。 \r\n    1. 执行SHOW USER STATISTICS命令，查询PRA用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的PRA用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“一级告警门限值（%）”。  \r\n“告警类型”为：AMF支持分级容灾用户数不足| 比较实际的分级容灾用户总数与License控制的分级容灾用户数比值是否达到配置的一级告警门限。 \r\n    1. 执行SHOW AMFFULLDRUSERNUM命令，查询分级容灾用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的分级容灾用户数。\r\n    3.\n\n[2]:3308650497 用户License不足三级告警\r: 根据告警附加信息中的“告警类型”参数，检查实际用户数与License控制的总用户数的比值是否达到配置的告警门限。\r\n\r\n如果...| 那么...  \r\n---|---  \r\n“告警类型”为：5G在线用户数不足| 比较实际的5G在线用户总数与License控制的5G总在线用户数比值是否达到配置的三级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询5G在线用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的5G总在线用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“三级告警门限值（%）”。  \r\n“告警类型”为：5G注册用户数不足| 比较实际的5G注册用户总数与License控制的5G总注册用户数比值是否达到配置的三级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询连接态用户总数、空闲态用户总数、去注册态用户总数。（实际的5G注册用户总数=连接态用户总数+空闲态用户总数+去注册态用户总数）\r\n    2. 执行SHOW LICENSE命令，查询License控制的5G总注册用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“三级告警门限值（%）”。  \r\n“告警类型”为：总在线用户数不足| 比较实际的在线用户总数（包含2G/3G/4G/5G用户）与License控制的总在线用户数比值是否达到配置的三级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询在线用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的总在线用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“三级告警门限值（%）”。  \r\n“告警类型”为：总注册用户数不足| 比较实际的注册用户总数（包含2G/3G/4G/5G用户）与License控制的总注册用户数比值是否达到配置的三级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询连接态用户总数、空闲态用户总数、去注册态用户总数。（实际的注册用户总数=连接态用户总数+空闲态用户总数+去注册态用户总数）\r\n    2. 执行SHOW LICENSE命令，查询License控制的总注册用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“三级告警门限值（%）”。  \r\n“告警类型”为：PRA用户数不足| 比较实际的PRA用户总数与License控制的PRA用户数比值是否达到配置的三级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询PRA用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的PRA用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“三级告警门限值（%）”。  \r\n“告警类型”为：AMF支持分级容灾用户数不足| 比较实际的分级容灾用户总数与License控制的分级容灾用户数比值是否达到配置的三级告警门限。\r\n    1. 执行SHOW AMFFULLDRUSERNUM命令，查询分级容灾用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的分级容灾用户数。\r\n    3.\n\n[3]:3306553345 用户License不足一级告警\r: 3306553345 用户License不足一级告警\r\n\r\n告警描述\r\n\r\n当系统检测到接入用户数大于系统局容量的一级告警门限（可配置）时，上报此告警。\r\n\r\n当License用户数不足告警等级升高，系统将恢复低级别的告警，并上报新级别的告警；当License用户数不足告警等级降低，系统将恢复原来高级别告警，并上报新级别的告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：严重\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n当前上下文数| 该取值含义根据“告警类型”取值不同而变化。\r\n\r\n  * 当“告警类型”为“5G在线用户数不足”时，该取值表示当前本局的5G在线用户数。\r\n  * 当“告警类型”为“5G注册用户数不足”时，该取值表示当前本局的5G注册用户数。\r\n  * 当“告警类型”为“总在线用户数不足”时，该取值表示当前本局总在线用户数。\r\n  * 当“告警类型”为“总注册用户数不足”时，该取值表示当前本局总注册用户数。\r\n  * 当“告警类型”为“PRA用户数不足”时，该取值表示当前本局的PRA用户数。\r\n  * 当“告警类型”为“AMF支持分级容灾用户数不足”时，该取值表示当前本局的满足分级容灾的用户数。\r\n\r\n  \r\n局容量| 该取值含义根据“告警类型”取值不同而变化。\r\n\r\n  * 当“告警类型”为“5G在线用户数不足”时，该取值表示License项“5G在线用户数”的授权值。\r\n  * 当“告警类型”为“5G注册用户数不足”时，该取值表示License项“5G注册用户数”的授权值。\r\n  * 当“告警类型”为“总在线用户数不足”时，该取值表示License项“总在线用户数”的授权值。\r\n  * 当“告警类型”为“总注册用户数不足”时，该取值表示License项“总注册用户数”的授权值。\r\n  * 当“告警类型”为“PRA用户数不足”时，该取值表示License项“5G PRA用户数”的授权值。\r\n  * 当“告警类型”为“AMF支持分级容灾用户数不足”时，该取值表示License项“AMF支持分级容灾用户数量”的授权值。\r\n\r\n  \r\n使用率| 使用率=当前上下文数/局容量。  \r\n告警类型| 告警类型包括如下：\r\n\r\n  * 5G在线用户数不足\r\n  * 5G注册用户数不足\r\n  * 总在线用户数不足\r\n  * 总注册用户数不足\r\n  * PRA用户数不足\r\n  * AMF支持分级容灾用户数不足\r\n\r\n  \r\nS-NSSAI| 本AMF的S-NSSAI，可通过SHOW AMFSNSSAI命令查询。  \r\n  \r\n可能原因\r\n\r\n  * 系统容量小。\r\n\r\n  * 当前话务量突发过大。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n用户无法接入。\r\n\r\n处理建议\r\n\r\n  1.\n\n[4]:3307601921 用户License不足二级告警\r: 根据告警附加信息中的“告警类型”参数，检查实际用户数与License控制的总用户数的比值是否达到配置的告警门限。\r\n\r\n如果...| 那么...  \r\n---|---  \r\n“告警类型”为：5G在线用户数不足| 比较实际的5G在线用户总数与License控制的5G总在线用户数比值是否达到配置的二级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询5G在线用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的5G总在线用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“二级告警门限值（%）”。  \r\n“告警类型”为：5G注册用户数不足| 比较实际的5G注册用户总数与License控制的5G总注册用户数比值是否达到配置的二级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询连接态用户总数、空闲态用户总数、去注册态用户总数。（实际的5G注册用户总数=连接态用户总数+空闲态用户总数+去注册态用户总数）\r\n    2. 执行SHOW LICENSE命令，查询License控制的5G总注册用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“二级告警门限值（%）”。  \r\n“告警类型”为：总在线用户数不足| 比较实际的在线用户总数（包含2G/3G/4G/5G用户）与License控制的总在线用户数比值是否达到配置的二级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询在线用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的总在线用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“二级告警门限值（%）”。  \r\n“告警类型”为：总注册用户数不足| 比较实际的注册用户总数（包含2G/3G/4G/5G用户）与License控制的总注册用户数比值是否达到配置的二级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询连接态用户总数、空闲态用户总数、去注册态用户总数。（实际的注册用户总数=连接态用户总数+空闲态用户总数+去注册态用户总数）\r\n    2. 执行SHOW LICENSE命令，查询License控制的总注册用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“二级告警门限值（%）”。  \r\n“告警类型”为：PRA用户数不足| 比较实际的PRA用户总数与License控制的PRA用户数比值是否达到配置的二级告警门限。\r\n    1. 执行SHOW USER STATISTICS命令，查询PRA用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的PRA用户数。\r\n    3. 执行SHOW LICENSEALARM命令，查询配置的“二级告警门限值（%）”。  \r\n“告警类型”为：AMF支持分级容灾用户数不足| 比较实际的分级容灾用户总数与License控制的分级容灾用户数比值是否达到配置的二级告警门限。\r\n    1. 执行SHOW AMFFULLDRUSERNUM命令，查询分级容灾用户总数。\r\n    2. 执行SHOW LICENSE命令，查询License控制的分级容灾用户数。\r\n    3.\n\n[5]:3308650497 用户License不足三级告警\r: 3308650497 用户License不足三级告警\r\n\r\n告警描述\r\n\r\n当系统检测到接入用户数大于系统局容量的三级告警门限（可配置）时，上报此告警。\r\n\r\n当License用户数不足告警等级升高，系统将恢复低级别的告警，并上报新级别的告警；当License用户数不足告警等级降低，系统将恢复原来高级别告警，并上报新级别的告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：次要\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n当前上下文数| 该取值含义根据“告警类型”取值不同而变化。\r\n\r\n  * 当“告警类型”为“5G在线用户数不足”时，该取值表示当前本局的5G在线用户数。\r\n  * 当“告警类型”为“5G注册用户数不足”时，该取值表示当前本局的5G注册用户数。\r\n  * 当“告警类型”为“总在线用户数不足”时，该取值表示当前本局总在线用户数。\r\n  * 当“告警类型”为“总注册用户数不足”时，该取值表示当前本局总注册用户数。\r\n  * 当“告警类型”为“PRA用户数不足”时，该取值表示当前本局的PRA用户数。\r\n  * 当“告警类型”为“AMF支持分级容灾用户数不足”时，该取值表示当前本局的满足分级容灾的用户数。\r\n\r\n  \r\n局容量| 该取值含义根据“告警类型”取值不同而变化。\r\n\r\n  * 当“告警类型”为“5G在线用户数不足”时，该取值表示License项“5G在线用户数”的授权值。\r\n  * 当“告警类型”为“5G注册用户数不足”时，该取值表示License项“5G注册用户数”的授权值。\r\n  * 当“告警类型”为“总在线用户数不足”时，该取值表示License项“总在线用户数”的授权值。\r\n  * 当“告警类型”为“总注册用户数不足”时，该取值表示License项“总注册用户数”的授权值。\r\n  * 当“告警类型”为“PRA用户数不足”时，该取值表示License项“5G PRA用户数”的授权值。\r\n  * 当“告警类型”为“AMF支持分级容灾用户数不足”时，该取值表示License项“AMF支持分级容灾用户数量”的授权值。\r\n\r\n  \r\n使用率| 使用率=当前上下文数/局容量。  \r\n告警类型| 告警类型包括如下：\r\n\r\n  * 5G在线用户数不足\r\n  * 5G注册用户数不足\r\n  * 总在线用户数不足\r\n  * 总注册用户数不足\r\n  * PRA用户数不足\r\n  * AMF支持分级容灾用户数不足\r\n\r\n  \r\nS-NSSAI| 本AMF的S-NSSAI，可通过SHOW AMFSNSSAI命令查询。  \r\n  \r\n可能原因\r\n\r\n  * 系统容量小。\r\n\r\n  * 当前话务量突发过大。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n用户无法接入。\r\n\r\n处理建议\r\n\r\n  1.", "answer": "1. 执行SHOW USER STATISTICS命令，查询5G在线用户总数。\n2. 执行SHOW LICENSE命令，查询License控制的5G总在线用户数。\n3. 执行SHOW LICENSEALARM命令，查询配置的“一级告警门限值（%）”。\n4. 比较实际的5G在线用户总数与License控制的5G总在线用户数比值是否达到配置的一级告警门限。如果达到或超过该门限值，则确认上报的“用户License不足一级告警”且“告警类型”为“5G在线用户数不足”的情况属实。"}
{"id": 68, "query": "EMSPlus可以接收哪些类型的数据？", "recall": "[1]:产品定位\r: 产品定位\r\n\r\n分类\r\n\r\nZXUN EMSPlus是面向用户的数据业务运营分析产品，立足于从客户的角度去感知和分析网络和业务信息，通过对海量数据灵活的挖掘和分析，实现对业务流量、用户流量、日志查询、终端应用和用户回溯等全方位的可视化，构建可视、可管、可控的业务管道，为移动数据业务精细化运营提供了全面支撑。\r\n\r\nZXUN EMSPlus按功能定位分为ZXUN EMSPlus（Reporting）和ZXUN EMSPlus（Logging）两个子产品：\r\n\r\n  * ZXUN EMSPlus（Reporting）提供流量统计报表查询。\r\n\r\n  * ZXUN EMSPlus（Logging）提供网元日志关联存储查询。\r\n\r\n\r\n\r\n\r\nZXUN EMSPlus的详细功能如图1所示。\r\n\r\n图1 系统功能定位\r\n\r\n定位\r\n\r\nReport功能是EMSPlus（Reporting）根据应用提供的具体报表模型，向用户呈现各种丰富的数据统计图表。\r\n\r\nEMSPlus（Reporting）可为运营商带来以下价值：\r\n\r\n  * 通过采集用户在各网元上的控制面话单和媒体面数据记录，进行各网元数据的关联分析，快速找出用户失败原因，提高用户投诉处理效率和用户满意度。\r\n\r\n  * 建立多重指标体系，通过网络质量、业务流量和用户流量的采集和挖掘分析，实现数据业务问题的定位和优化，提升网络质量和业务性能，提高运维效率，打造精品网络。\r\n\r\n  * 支撑市场精准营销，通过热门业务，用户偏好，终端使用等分析功能，为运营商挖掘潜在应用和套餐，定制用户所需终端，发展目标用户和关怀用户提供有力支撑，增加运营收益。\r\n\r\n\r\n\r\n\r\nEMSPlus（Reporting）支持内部接口，从中兴核心网网元获取控制面数据和媒体面数据。将控制面CHR(Call History Record, 呼叫历史记录)和媒体面DPI(Deep Packet Inspection, 深度包检测)数据整合后，再通过多层的多维度报表对数据进行分析呈现，实现数据业务分析优化。\r\n\r\nEMSPlus（Reporting）系统的网络架构如图2所示。\r\n\r\n图2 系统网络架构\n\n[2]:MDS级联\r: MDS级联\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)在对接网元时，可能会面临多种组网场景，其中一种就是网元消息只会发送给一个局的MDS，而EMSPlus（Reporting）/EMSPlus（Logging）功能是单独的一套设备，所以需要第一个局的MDS将数据复制转发一份给第二个局点的MDS。\r\n\r\n对于一个局点同时部署EMSPlus（Reporting）和EMSPlus（Logging）时，数据源只有一个，只有一个EMSPlus网元的MDS与数据源交互。因此需要支持EMSPlus（Reporting）和EMSPlus（Logging）两网元间的MDS级联，xGW(Extendable Gateway, 综合接入网关)网元的MDS级联的组网结构如图1所示。\r\n\r\n图1 MDS级联\r\n\r\nMDS级联说明如下：\r\n\r\n  * MDS向MU(Merging Unit, 合并单元)转发消息，通过EMSPlus的内部数据面。\r\n\r\n  * EMSPlus网元间MDS级联消息的转发，通过与数据源交互的网络。\r\n\r\n  * MDS级联场景下，以EMSPlus（Logging）的MDS为主，由它向EMSPlus（Reporting）的MDS转发。\r\n\r\nEMSPlus（Logging）会接收xGW/Firewall/CGNAT(Carrier Grade Network Address Translation, 运营商级网络地址转换)/5GC(5G Core Network, 5G核心网)等消息，由它再将其中xGW的CHR(Call History Record, 呼叫历史记录)消息转发给EMSPlus（Reporting）。\n\n[3]:组网方案\r: 网元管理系统)使用相同的网络平面。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEARTBEAT_1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEARTBEAT_2_NET| 双机心跳备用。  \r\nDPU| 数据库数据节点| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 数据入库和查询。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nFTU| 文件转换单元，将文件接口的日志转换为消息接口的消息发送给MDS| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_NET| 内部数据传输使用。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEART1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEART2_NET| 双机心跳备用。  \r\nEMSPlus_VNF_FTU_NET| ZTE_EMSPlus_<局号>_VNF_FTU_NET| EMSPlus对接文件接口的网元，获取日志数据。\n\n[4]:组网方案\r: 网元管理系统)使用相同的网络平面。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEARTBEAT_1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEARTBEAT_2_NET| 双机心跳备用。  \r\nDPU| 数据库数据节点| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 数据入库和查询。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nFTU| 文件转换单元，将文件接口的日志转换为消息接口的消息发送给MDS| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_NET| 内部数据传输使用。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEART1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEART2_NET| 双机心跳备用。  \r\nEMSPlus_VNF_FTU_NET| ZTE_EMSPlus_<局号>_VNF_FTU_NET| EMSPlus对接文件接口的网元，获取日志数据。\n\n[5]:EMSPlus（Reporting）局点\r: EMSPlus（Reporting）局点\r\n\r\nEMSPlus（Reporting）提供流量统计报表查询。\r\n\r\n子主题：\r\n\r\n  * 配置FTU节点（可选）\r\n\r\n  * 配置CU合并（可选）\r\n\r\n  * 配置MDS节点的外部网元\r\n\r\n  * 配置分发IP地址\r\n\r\n  * 配置外部网元数据分发\r\n\r\n  * 过滤业务类型分发（可选）\r\n\r\n  * 配置BFD（可选）\r\n\r\n  * 传送配置数据\r\n\r\n  * 配置实例", "answer": "EMSPlus可以接收以下类型的数据：\n\n1. 控制面话单数据：从各网元上采集的用户控制面话单数据。\n2. 媒体面数据记录：从各网元上采集的用户媒体面数据记录。\n3. 日志数据：通过文件转换单元（FTU）将文件接口的日志转换为消息接口的消息发送给MDS。\n4. CHR（呼叫历史记录）消息：从xGW/Firewall/CGNAT/5GC等网元接收的CHR消息。\n5. DPI（深度包检测）数据：从中兴核心网网元获取的媒体面DPI数据。\n\n这些数据经过整合和分析后，用于生成报表和提供其他业务分析功能。"}
{"id": 69, "query": "AMF如何识别对端SMF故障或恢复？", "recall": "[1]:特性描述\r: * AMF扫描与故障I-SMF相关的PDU会话，重选I-SMF继续会话。\r\n\r\n\r\n\r\n\r\n业务流程\r\n\r\nSMF发生故障或恢复， AMF通过NRF状态通知或链路检测识别SMF故障或恢复\r\n\r\n图2 SMF发生故障或恢复， AMF通过NRF状态通知或链路检测识别SMF故障或恢复\r\n\r\n  1. SMF_1接通电源后向NRF发送Nnrf_NFManagement_NFRegister消息进行网元注册。\r\n\r\n  2. SMF_2接通电源后向NRF发送Nnrf_NFManagement_NFRegister消息进行网元注册。\r\n\r\n  3. UE注册更新完毕后，发起PDU会话建立，AMF向NRF请求发现SMF后，向NRF发送Nnrf_NFManagement_NFStatusSubscribe消息，与NRF交互订阅SMF的状态。\r\n\r\n  4. 当SMF_1发生故障，NRF通过链路检测发现SMF_1故障。\r\n\r\n  5. NRF根据状态订阅列表，向AMF发送Nnrf_NFManagement_NFStatusNotify通知SMF_1发生故障，AMF将SMF_1放入NF故障列表。\r\n\r\n  6. 当SMF_1故障恢复，NRF通过链路检测发现SMF_1故障已经恢复。\r\n\r\n  7. NRF根据状态订阅列表，向AMF发送Nnrf_NFManagement_NFStatusNotify通知SMF_1故障已经恢复，AMF将SMF_1从NF故障列表移除。\r\n\r\n\r\n\r\n\r\nSMF故障时，AMF选择其他正常SMF执行业务流程\r\n\r\n图3 AMF选择正常SMF执行业务流程\r\n\r\n  1. UE通过在N1 SM容器内发送包含PDU会话建立请求的NAS消息触发PDU会话建立过程，PDU会话建立请求携带PDU session ID, PDU Session Type, SSC mode, 5GSM Capability等信息。\r\n\r\n  2. AMF通过NRF发现或本地策略选择SMF，排除故障的SMF_1，选择没有故障的SMF_2发起PDU会话建立流程。\r\n\r\n  3. AMF向选择后的SMF_2发起Nsmf_PDUSession_CreateSMContext Request消息。\r\n\r\n  4. SMF_2和PCF、UDM完成订阅检索、订阅更新、计费、QoS和规则创建等操作。\r\n\r\n  5. SMF_2在会话承载创建完成后，向AMF发送Nsmf_PDUSession_CreateSMContext Response消息。\r\n\r\n  6. SMF_2执行辅助身份验证和授权。\r\n\r\n  7. SMF_2完成SM Policy关联创建和UPF会话创建。\r\n\r\n  8. SMF_2会话和承载资源创建完成后，向AMF发送Namf_Communication_N1N2MessageTransfer消息，创建N1和N2接口会话，携带QoS信息。AMF返回响应。\r\n\r\n  9. AMF收到消息，向gNodeB发送N2 PDU Session Establishment消息建立无线会话资源，同时向UE透传PDU Session Establishment Accept消息。\r\n\r\n  10.\n\n[2]:特性描述\r: 场景5：SMSF故障，AMF收到备用SMSF的MT短信业务处理\r\n\r\nSMSF故障后，AMF收到备用SMSF的MT(Mobile Terminal, 移动终端)短信业务时，正常向UE投递短信业务。后续当收到UE短信业务消息时，会触发SMSF的重选和更新。\r\n\r\n客户收益\r\n\r\n受益方| 受益描述  \r\n---|---  \r\n运营商| 满足运营商业务功能的需求，在SMSF发生故障及容灾场景下继续为用户提供业务服务，保障整个网络正常运行，提高5G网络的可靠性。  \r\n移动用户| 在SMSF故障容灾场景下， AMF选择备用SMSF处理用户的短信业务，快速恢复用户的业务，保证用户的利益，提高用户满意度。  \r\n  \r\n实现原理\r\n\r\n系统架构\r\n\r\nAMF支持SMSF容灾网络架构图如图1所示。\r\n\r\n图1 SMF容灾架构示意图\r\n\r\nSMSF容灾短信业务路径组网，如图2所示。\r\n\r\n图2 短信业务路径示意图\r\n\r\n涉及的NF\r\n\r\n网元名称| 网元作用  \r\n---|---  \r\nAMF(Access and Mobility Management Function, 接入和移动管理功能)| \r\n\r\n  * SMSF发生故障， AMF通过NRF订阅通知或链路检测识别SMSF故障。\r\n  * 业务流程中，AMF识别故障的SMSF，选择同组运行正常的SMSF执行业务流程。\r\n  * SMSF故障恢复，AMF通过NRF或自动检测识别SMSF已经恢复。\r\n  * AMF识别已经恢复的SMSF，业务过程中，恢复选择故障已经恢复的SMSF执行业务流程。\r\n\r\n  \r\nNRF(NF Repository Function, 网络功能仓储)| \r\n\r\n  * AMF向NRF订阅SMSF的状态，NRF检测到SMSF故障已经恢复，向AMF发送SMSF故障通知。\r\n  * 当NRF检测到SMSF恢复，向AMF发送AUSF/UDM故障恢复通知。\r\n\r\n  \r\nSMSF(Short Message Service Function, 短消息服务功能)| SMSF向NRF注册NF。NRF监测与SMSF的网络运行。由NRF通知AMF订阅的SMSF的状态，AMF进行SMSF重选。  \r\n  \r\n协议栈\r\n\r\n接口| 协议栈信息参考  \r\n---|---  \r\nN1| ZUF-79-19-001 N1  \r\nN2| ZUF-79-19-002 N2  \r\nN8| ZUF-79-19-003 N8  \r\nN11| ZUF-79-19-004 N11  \r\nN20| ZUF-79-19-012 N20  \r\nNRF| ZUF-79-19-010 Nnrf  \r\n  \r\n本NF实现\r\n\r\n  * AMF支持通过SMSF状态订阅和本地检测识别SMSF的故障及恢复。\r\n\r\n  * AMF支持SMS over NAS短消息激活过程中，排除故障SMSF和重选。\r\n\r\n  * SMSF故障，MO SMS over NAS短消息激活支持SMSF网元级容灾，AMF在SMSF无响应时执行重选。\n\n[3]:3305242916 SMF不可达\r: NRF检查到故障SMF已恢复，会主动通知订阅该SMF的NF。\r\n\r\n    2. AMF收到NRF的变更通知消息，判定该SMF已恢复正常。“SMF不可达”告警会自动恢复。\r\n\r\n  * AMF根据SMF的NFID定时向NRF进行周期性发现SMF（默认配置60秒/个，不上报信令跟踪），如果周期性发现响应中携带的SMF服务状态为注册态，判定该SMF已恢复正常。“SMF不可达”告警会自动恢复。\r\n\r\n说明：\r\n\r\n如果AMF收到SMF恢复正常的通知消息，但业务线程还在进行扫描和释放操作，则恢复当前SMF不可达告警，暂不删除该SMF的不可达记录（将记录中该SMF置为NF恢复态）。待业务线程扫描和释放操作结束后，再删除该SMF的不可达记录。\r\n\r\n\r\n\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\nNF标识| NF实例标识  \r\nIP地址| IP地址  \r\nFQDN(Fully Qualified Domain Name, 全称域名)| 带有主机名和域名的名称。  \r\n原因| \r\n\r\n  * 自动检测\r\n  * 手动干预\r\n\r\n  \r\n  \r\n可能原因\r\n\r\n  * 在升级或容灾演练等场景下，对SMF的操作导致SMF和NRF之间心跳断链。\r\n\r\n  * SMF和NRF之间的链路不通。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n  * 在SMF状态恢复之前，AMF不会再通过NRF发现到该SMF，用户会话建立可能受影响。\r\n\r\n  * 对于SMF容灾功能，触发业务线程释放在已该SMF上创建的PDU会话。\r\n\r\n\r\n\r\n\r\n处理建议\r\n\r\n  1. 在EM客户端的告警页面查看该告警附加信息中对端SMF的IP地址和FQDN，确认IP地址和FQDN是否服务于本地区的网元。。\r\n\r\n  2. 在NRF上执行SHOW ALL NFID命令，查询告警涉及的SMF网元的状态是否为Suspended状态，并查询SMF状态变化的时间点，联系SMF网元的维护人员确认在SMF侧是否发生了操作。\r\n\r\n  3. 在NRF上检查SMF和NRF之间的链路是否正常。\r\n\r\n  4. 联系中兴通讯技术支持。\n\n[4]:特性配置\r: SMF通知AMF其处于故障后，AMF检测到SMF故障恢复。\r\n  2. 用户注册成功，创建PDU会话。\r\n\r\n  \r\n通过准则 | AMF会选择恢复的SMF，发起PDU会话创建过程。  \r\n测试结果 | -  \r\n表5 测试用例5 测试项目 | SMF本地检测故障  \r\n---|---  \r\n测试目的 | SMF本地检测故障后PDU会话创建可以选择其它的SMF  \r\n预置条件 | \r\n\r\n  * AMF开启SMF本地检测。\r\n  * SMF跟AMF间链路故障，本地检测状态为不可用。\r\n\r\n  \r\n测试过程 | \r\n\r\n  1. AMF创建PDU会话，通过NRF发现多个SMF，其中部分SMF的本地检测状态为故障。\r\n  2. 用户注册成功，向本地检测状态为正常的SMF成功创建PDU会话。\r\n\r\n  \r\n通过准则 | AMF会选择本地检测正常的SMF，发起PDU会话创建过程。  \r\n测试结果 | -  \r\n表6 测试用例6 测试项目 | SMF本地检测故障恢复  \r\n---|---  \r\n测试目的 | SMF故障恢复后PDU会话创建可以选择已恢复的SMF  \r\n预置条件 | \r\n\r\n  * AMF开启SMF本地检测。\r\n  * SMF跟AMF间链路故障，本地检测状态为不可用。\r\n\r\n  \r\n测试过程 | \r\n\r\n  1. 恢复故障的SMF链路，本地检测该SMF状态正常。\r\n  2. 用户注册成功，向本地检测状态正常的SMF成功创建PDU会话。\r\n\r\n  \r\n通过准则 | AMF会选择本地检测状态恢复的SMF，发起PDU会话创建过程。  \r\n测试结果 | -  \r\n表7 测试用例7 测试项目 | I-SMF故障后AMF触发I-SMF重选  \r\n---|---  \r\n测试目的 | I-SMF故障后，AMF重选I-SMF继续会话  \r\n预置条件 | \r\n\r\n  * AMF向NRF订阅SMF的状态以及检测和SMF之间的链路运行。\r\n  * 配置SMF容灾策略，包括会话释放延时时间、会话释放频率、单次查询用户个数、本地释放后原因值。\r\n  * 配置I/V-SMF容灾策略，故障I-SMF涉及的IMS语音会话释放开关配置为“”会话不释放，重选I-SMF”。\r\n\r\n  \r\n测试过程 | \r\n\r\n  1. 批量用户建立包含I-SMF的PDU会话成功。\r\n  2. 故障I-SMF通知AMF其处于故障状态。\r\n\r\n  \r\n通过准则 | 按“会话释放频率”和“单次查询用户个数”周期性进行扫描，故障SMF对应的IMS语音会话，不释放当前会话，且触发UE重选I-SMF重建会话。\r\n\r\n  * 对于连接态用户I-SMF故障后，对于连接态用户，AMF执行N2释放，等待用户主动发起业务请求后，AMF执行I-SMF重选，选择其他可用I-SMF重建会话。\r\n  * 对于空闲态用户I-SMF故障后，对于空闲态用户，AMF寻呼用户，触发用户发起业务请求后，AMF执行I-SMF重选，选择其他可用I-SMF重建会话。\r\n\r\n  \r\n测试结果 | -  \r\n  \r\n常见问题处理\r\n\r\n无。\n\n[5]:3305242916 SMF不可达\r: 3305242916 SMF不可达\r\n\r\n告警描述\r\n\r\n当本端AMF订阅了对端SMF的状态时，如果对端SMF无法提供服务，NRF会根据订阅信息主动通知本端AMF订阅的SMF服务不可用。AMF收到NRF的状态变更通知后，触发上报该告警。\r\n\r\n当对端SMF服务的状态由异常转为正常后，NRF会主动通知订阅方该SMF状态可用。AMF收到NRF的状态变更通知后，恢复该告警。\r\n\r\n该告警上报的相关原理如下：\r\n\r\n流程说明：\r\n\r\n  1. 用户发起会话创建时，AMF根据DNN、SNSSAI，向NRF发现SMF。\r\n\r\n  2. （可选）AMF向NRF发送订阅SMF的消息。 （如果此前已订阅该SMF的状态，则不会重复订阅）\r\n\r\n  3. 当该SMF的NFProfile变化（例如，支持的DNN配置发生变更）或状态变化（状态为非注册态）时，NRF主动向AMF发送SMF的变更通知消息。\r\n\r\n  4. AMF收到NRF的变更通知消息后，根据携带的变更通知内容，判定该SMF不可用（状态为非注册态），会上报“SMF不可达”告警。 同时，AMF立即删除缓存的该SMF的NFProfile，确保本地缓存信息中不再存在该SMF的信息。\r\n\r\n\r\n\r\n\r\n告警恢复的相关原理如下：\r\n\r\n  * NRF主动通知AMF进行恢复\r\n\r\n    1. NRF检查到故障SMF已恢复，会主动通知订阅该SMF的NF。\r\n\r\n    2.", "answer": "AMF识别对端SMF故障或恢复的方式如下：\n\n1. 通过NRF状态通知：AMF向NRF订阅SMF的状态，当SMF发生故障或恢复时，NRF会主动向AMF发送Nnrf_NFManagement_NFStatusNotify消息，通知SMF的状态变更。\n\n2. 通过链路检测：AMF会定期通过链路检测机制来识别与SMF之间的连接状态。如果检测到链路故障，则认为SMF发生故障；当链路恢复，则认为SMF已恢复。\n\n3. 本地策略：在特定情况下，AMF也可能根据本地策略来识别SMF的故障或恢复，例如通过检测SMF的响应时间或心跳消息等。\n\n4. 周期性发现：AMF会根据SMF的NFID定时向NRF进行周期性发现SMF，如果在周期性发现响应中携带的SMF服务状态为注册态，则判定该SMF已恢复正常。"}
{"id": 70, "query": "ZXUN uMAC引入GSU N+M负荷分担有何作用", "recall": "[1]:GSU备份\r: GSU备份\r\n\r\n为提高系统运行的安全可靠性，ZXUN uMAC的GSU(General Service Unit, 通用业务单元)提供N+M负荷分担方式。\r\n\r\n  * N指在不考虑冗余下，满负荷运转的GSU数。M指的是在这基础上额外增加的冗余GSU数。所有GSU都作为主用GSU，处理用户的接入信息和数据业务。\r\n\r\n  * 冗余的GSU数越多，总的GSU个数就越多，在相同局用户数下，每个GSU的负荷就越低，能承受的同时宕机的GSU数也越多。\r\n\r\n  * 每个GSU的用户数据都备份在CDU上。\r\n\r\n  * 当某个GSU重启时，其他GSU接替这个GSU，继续用户的业务流程，其中用户数据从CDU读取后恢复到这些GSU。\n\n[2]:架构可靠性\r: 架构可靠性\r\n\r\n概述\r\n\r\nZXUN uMAC支持负荷分担、主备实例功能和无状态特性，从而实现架构可靠性。\r\n\r\n负荷分担\r\n\r\n负荷分担是指运行实例采用负荷分担的工作方式，即所有运行实例共同分担处理业务。当部分运行实例异常宕机时，由其余运行正常的实例共同分担处理业务，从而保证业务正常运行。\r\n\r\n  * 采用N+M冗余方式，即当N个实例可以满足系统容量的业务处理时，再提供M个实例用于冗余。\r\n\r\n  * 采用N+M个实例共同分担处理业务，此时系统能够承受最多M个实例的异常宕机而不影响系统处理能力。\r\n\r\n  * 采用负荷分担工作方式的运行实例，全部为主用（Active）工作状态。运行实例分别运行在不同的资源之上，如不同的虚机或容器、不同的硬件服务器，以及不同的资源分区（ZONE）。当部分（小于等于M个）运行实例出现故障宕机时，其业务由其他正常运行的实例继续处理，从而能够不间断提供服务。\r\n\r\n\r\n\r\n\r\n采用N+M冗余的负荷分担的系统架构如图1所示。\r\n\r\n图1 负荷分担方式系统架构图\r\n\r\n上图中N=3、M=1。当任何1个运行实例故障时，其他3个运行实例继续工作，从而保证系统容量及业务处理不受影响。\r\n\r\n主备实例\r\n\r\n主备实例是指运行实例采用主用和备用的工作方式，即一个主用、一个备用。正常工作状态时，主用实例提供服务，备用实例对主用实例的数据进行备份。当主用实例异常宕机或执行主备倒换命令时，备用实例转换为主用实例提供服务，从而保证业务正常运行。引入主备实例特性的目的在于提高运行实例的可靠性，从而进一步提高NF的可靠性。 \r\n\r\n主备实例的系统架构如图2所示。\r\n\r\n图2 主备实例系统架构图\r\n\r\n无状态\r\n\r\n无状态是指微服务的无状态设计，任何状态信息或数据都需要被抽取出来，并通过后端服务的方式保存在数据库、缓存等。业务逻辑APP随时可以执行弹性、扩容、销毁、重生、迁移操作。在此过程中，由于状态数据通过后端数据库进行存储，可以保障业务处理不受影响，使系统实现和系统运行更富有可恢复性和敏捷的适应性。\r\n\r\n3GPP TS 23.501标准规范提出了计算和存储分离的概念，并定义了UDSF用于统一存储NF的状态数据（又称为非结构化数据），实现业务逻辑执行与状态数据分离。\r\n\r\n中兴通讯系列产品采用无状态的设计思路实现各个NF，业务处理逻辑实现了计算与存储分离。\n\n[3]:特性描述\r: 应用场景\r\n\r\n遭遇突发业务场景\r\n\r\nuMAC网元接入超过估算话务模型的业务量，CPU占用陡升，例如：举办大型赛事、大量外地用户涌入。\r\n\r\nuMAC网元可采用以下过负荷控制功能来保证自身安全：\r\n\r\n  * 入向业务总量控制功能\r\n\r\n  * 入向业务单项控制功能\r\n\r\n  * CPU拥塞控制功能\r\n\r\n  * 按网元拥塞控制功能\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n开启“CPU拥塞控制功能”（该功能默认开启）时，CPU的过载门限为75%，高过载门限为85%。过载拥塞时只对低优先级业务（默认为Attach、Service Request等）进行控制。在CPU高过载时，对所有业务进行控制，包括高优先级业务（默认为TAU/RAU、HO）。\r\n\r\n如果持续出现过负荷告警，建议通过扩容来降低uMAC设备的负荷。\r\n\r\n设备升级场景\r\n\r\n在uMAC设备升级时，一般都需要整局重启。在重启后，本局的所有用户都会很快重新附着，导致单位时间内的用户附着数很高。\r\n\r\nuMAC网元可采用以下过负荷控制功能来保证自身安全：\r\n\r\n  * 入向业务总量控制功能\r\n\r\n  * 入向业务单项控制功能\r\n\r\n  * CPU拥塞控制功能\r\n\r\n  * 按网元拥塞控制功能\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n建议除了使用默认开启的“CPU拥塞控制功能”外，开启“入向业务单项控制功能”对Attach业务进行限制。\r\n\r\n限制的数值为1小时内所有用户接入的速率，即全部接入的用户数/MP模块数/3600。例如：本局有100万用户，16个模块，则需要限制Attach接入业务数为1000000/16/3600=17次。\r\n\r\n邻接网元处理能力弱场景\r\n\r\n由于HLR/HSS是老旧网元或未完成扩容，整体处理能力弱。在SGSN/MME业务繁忙时，无法处理位置更新业务，甚至出现了宕机重启的情况。\r\n\r\nuMAC网元提供了如下功能来保护邻接网元：\r\n\r\n  * 出向单项业务控制功能\r\n\r\n  * 信令拥塞控制功能\r\n\r\n\r\n\r\n\r\n说明：\r\n\r\n除默认开启“信令拥塞控制功能”外，还建议开启“出向单项业务控制功能”，对SGSN/MME发出的业务进行控制。例如，如果HLR/HSS最多处理1000条/秒位置更新业务消息，则可以在出向单项业务控制功能中配置本局到该HLR/HSS局向最多发送1000条/秒位置更新业务消息。\r\n\r\n客户收益\r\n\r\n受益方| 受益描述  \r\n---|---  \r\n运营商| \r\n\r\n  * 在突发大话务情况下，防止uMAC设备异常或者崩溃，提高网络的稳定性。\r\n  * 通过特定局向的负荷控制，保障HSS网元的稳定性。\r\n\r\n  \r\n移动用户| 在大量突发业务冲击的场景下，使得移动用户可以接入网络，用户业务不受影响。\n\n[4]:特性描述\r: 如果SGSN网元宕机，对整个SGSN网络的影响也十分巨大；因此，SGSN网元需要增加保障自身正常运行的机制，实现自身的过负荷控制。\r\n\r\n为了防止以下情况而引起突发业务冲击对整个系统的影响，各个设备上必须使用过负荷控制。\r\n\r\n  * 在各个网元中，经常会出现因为某些原因（例如网元重启后、对方网元不可达，用户大量移动）导致用户短时间内暴发超过正常话务模型的业务请求次数。此时，SGSN网元的处理器CPU资源、数据区资源、甚至接口或内部交换带宽都可能达到极限能力，从而导致系统崩溃（例如CPU占用率长时间100%会导致自愈系统认为故障而复位），同时对外围网元也会造成冲击（例如，对HLR的冲击）。\r\n\r\n  * SGSN网元处理能力很强，突然涌现的业务对自身影响不大。周边MAP接口网元（HLR\\EIR\\SMS-IWMSC）由于比较老旧，无法处理突发业务，也没有过负荷保护，从而导致系统崩溃，而周边MAP接口网元的宕机会导致了SGSN网元自身的业务也无法进行。\r\n\r\n\r\n\r\n\r\nSGSN网元提供的过负荷控制功能参见表1。\r\n\r\n表1 过负荷控制功能功能名称| 功能概述  \r\n---|---  \r\n入向业务总量控制| 控制单位时间内允许通过的业务总量，业务总量的计算为各个单项业务的加权叠加。  \r\n入向单项业务控制| 控制单位时间内通过的各个单项业务量。  \r\nCPU拥塞控制| 在MP上根据CPU拥塞情况对各类业务限制一定的通过率，保护MP CPU不会冲高。  \r\n出向单向业务控制| 对于本系统发起的到其他网元（比如HSS、EIR、HLR、SMS-IWMSC）的业务，限制一定的业务量，保护对方网元不会被冲击  \r\n信令拥塞控制| 对于信令处理MP按照信令链路拥塞情况，保护信令链路  \r\n按网元拥塞控制| 对于MME/SGSN，协议支持Iu、S1口overload消息，可以告知对方网元本局拥塞情况，接收overload消息的网元就会控制本方发送的信令。对于Iu口，SGSN和RNC可以互相通知；对于S1口，只有MME通知eNodeB。  \r\n  \r\n应用场景\r\n\r\n突发业务场景\r\n\r\nSGSN网元接入超过估算话务模型的业务量，CPU占用陡升。例如，举办大型赛事，大量外地用户涌入。uMAC SGSN网元可采用以下过负荷控制功能来保证自身和外部网元安全。\n\n[5]:特性描述\r: 网元自身的过载控制\r\n\r\nSGSN是GSM\\UMTS网络中的移动性管理网元，也是终端的控制面接入点，一旦遇到业务量突然增加的情况，SGSN将更加直接地受到冲击，自身资源（包括处理能力、内部资源、外部接口带宽等）将迅速耗尽。如果SGSN网元宕机，将会对整个GSM\\UMTS网络造成巨大的影响。因此，SGSN网元需要保障自身正常运行的机制，实现自身的过载控制。\r\n\r\n为了防止出现以下情况影响整个系统，各个设备上都需要使用过载控制。\r\n\r\n  * 在各个网元中，经常会出现因为某些原因，例如网元重启、对方网元不可达，用户大量移动等，导致用户短时间内暴发超过正常话务模型的业务量。此时，SGSN网元的处理器CPU资源、数据区资源、甚至接口或内部交换带宽都可能到达极限，从而导致系统崩溃。\r\n\r\n  * SGSN网元处理能力很强，突然涌现的业务，对自身可能影响不大，但周边MAP接口网元（HLR(Home Location Register, 归属位置寄存器)\\EIR(Equipment Identity Register, 设备标识寄存器)\\SMS-IWMSC(Interworking Mobile Switching Center, 网间移动交换中心)）可能会比较老旧，无法处理突发业务，也没有过载保护，从而导致系统崩溃，而周边MAP接口网元的宕机也会导致SGSN自身网元的业务无法进行。\r\n\r\n\r\n\r\n\r\nZXUN uMAC网元（MME/SGSN）过载控制功能参见表1。\r\n\r\n表1 过载控制功能功能名称| 功能概述  \r\n---|---  \r\n入向业务总量控制| 控制单位时间内允许通过的业务总量，业务总量的计算为各个单项业务的加权叠加。  \r\n入向单项业务控制| 控制单位时间内通过的各个单项业务量。  \r\nCPU过载控制| 根据CPU拥塞情况对各类业务限制一定的通过率，保护CPU不会过载。  \r\n出向单项业务控制| 对于本端发起的到其他网元的业务，比如到HSS、EIR、HLR、SMS-IWMSC，限制一定的业务量，保护对端网元不会被冲击。  \r\n信令过载控制| 根据信令链路拥塞情况，保护信令链路。  \r\n网元过载控制| 对于MME/SGSN网元，协议支持Iu、S1接口Overload消息。MME/SGSN发送Overload消息，通知对端网元本端的过载情况，对端就会控制发送的信令。对于Iu接口，SGSN和RNC可以互相通知，对于S1接口，只能MME通知eNodeB。  \r\n  \r\n在业务量突然增加时，ZXUN uMAC为了保障自身工作正常，可通过以下方式控制本网元处理的业务量。\r\n\r\n  * 使用入向业务控制功能（包括总量和单项业务量）和CPU过载控制功能。", "answer": "ZXUN uMAC引入GSU N+M负荷分担的作用主要包括以下几点：\n\n1. 提高系统运行的安全可靠性，通过冗余的GSU数，增强了系统的容错能力。\n   \n2. 在相同局用户数下，每个GSU的负荷可以得到降低，因为业务被多个GSU共同分担。\n\n3. 能够承受更多的GSU同时宕机而不影响系统处理能力，增加了系统的鲁棒性。\n\n4. 当某个GSU重启时，其他GSU可以接替其工作，继续处理用户业务，减少了服务中断的时间。\n\n5. 通过备份在CDU上的用户数据，GSU能够快速恢复服务，保证了用户数据的完整性和业务的连续性。"}
{"id": 71, "query": "IPDR怎么查询用户上网日志？", "recall": "[1]:查询用户上网日志\r: 查询用户上网日志\r\n\r\n摘要\r\n\r\n通过IPDR功能，维护人员可以查询选定时间范围的IP(Internet Protocol, 因特网协议)地址的使用情况，如使用该IP的用户号码和IMSI(International Mobile Subscriber Identity, 国际移动用户标识)号码。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的IPDR窗口，单击功能操作区的Query。\r\n\r\n  2. 选择左侧菜单All→Predefined Query→IPDR→IPDR，打开上网日志查询页面，如图1所示。\r\n\r\n图1 IPDR页签\r\n\r\n  3. 单击More Conditions，展开更多条件设置区域，如图2所示。\r\n\r\n图2 IPDR窗口表1 查询上网日志参数说明参数名称| 参数说明  \r\n---|---  \r\n| 选择查询的时间段。  \r\nRecords| 查询结果显示的记录数。  \r\nMSISDN(Mobile Station International Subscriber Directory Number, 移动台国际用户目录号)| 根据用户的MSISDN或IMSI号码，查询该用户的上网日志信息。  \r\nIMSI  \r\nPublic Source IP| 根据公网IP地址和端口号，查询指定时间段内使用该IP地址和端口号的用户信息。  \r\nPublic Source Port  \r\nPrivate Source IP| 根据私网IP地址和端口号，查询指定时间段内使用该IP地址和端口号的用户信息。  \r\nPrivate Source Port  \r\nDest IP| 根据目的IP地址和端口号，查询指定时间段内访问该IP地址和端口号的用户信息。  \r\nDest Port  \r\nDest Nat IP| 根据经过NAT转换后的目的端口号，查询指定时间段内访问该IP地址和端口号的用户信息。  \r\nDest Nat Port  \r\n  \r\n  4. 配置上网日志查询的参数。\r\n\r\n  5. 单击按钮，查询结果显示在页面下方，如图3所示。\r\n\r\n图3 查询结果表2 上网日志详细信息参数说明输出字段名| 输出字段说明  \r\n---|---  \r\nStart Time| 用户上网业务的上线时间  \r\nEnd Time| 用户上网业务的下线时间  \r\nActive Time| 用户上网业务的在线时间  \r\nPrivate IP| 用户上网时被分配的私网IP地址  \r\nPublic IP| 用户上网时使用的公网IP地址  \r\nDest IP| 用户访问的目的IP地址  \r\nIMSI| 用户的IMSI号码  \r\nMSISDN| 用户手机号码。为了保护用户隐私，在查询结果和导出的文件中，用户手机号码的部分位数以“*”代替。  \r\nPrivate Port| 用户上网时使用的私网端口号  \r\nPublic Port| 用户上网时使用的公网端口号  \r\nDest Port| 用户访问的目的端口号  \r\nProtocol| 用户上网时使用的协议类型\n\n[2]:系统原理\r: 系统原理\r\n\r\nIPDR(Internet Protocol Detail Record, 互联网协议详细记录)通过xGW(Extendable Gateway, 综合接入网关)/SMF/UPF网元获取用户的上网记录信息，主要包含用户面的信息，同时通过NAT(Network Address Translation, 网络地址转换)设备获取NAT信息，IPDR实时将两种信息进行关联存储。最后提供给用户查询回溯。\r\n\r\nLogging功能在上述IPDR工作的同时，可以将NAT设备、路由设备的一些日志直接存储，后续提供给用户查询，并提供一些基本的报表及指标统计。\n\n[3]:* 特性描述\r: * 特性描述\r\n    * 术语\r\n    * 描述\r\n      * 定义\r\n      * 背景知识\r\n    * 应用场景\r\n    * 客户收益\r\n    * 实现原理\r\n      * 系统架构\r\n      * 涉及的网元\r\n      * 本网元实现\r\n      * 业务流程\r\n    * 系统影响\r\n    * 应用限制\r\n    * 特性交互\r\n    * 遵循标准\r\n    * 特性能力\r\n    * 可获得性\r\n      * 版本要求及变更记录\r\n      * License要求\r\n      * 对其他网元的要求\r\n    * O&M相关\r\n      * 命令\r\n      * 性能统计\r\n      * 告警和通知\r\n      * 业务观察/失败观察\r\n      * 话单与计费\r\n  * 特性配置\r\n    * 配置说明\r\n    * 配置前提\r\n    * 配置过程\r\n      * 配置MDS\r\n      * 配置MU参数\r\n    * 配置实例\r\n  * 特性操作\r\n    * Logging日志查询分析\r\n      * Logging窗口介绍\r\n      * 按预定义模板查询数据\r\n        * General Query\r\n        * 统计日志数据\r\n        * 查询删除会话的日志\r\n    * IPDR日志查询分析\r\n      * IPDR窗口介绍\r\n      * 查询用户上网日志\r\n    * 创建定时任务\r\n  * 测试用例\r\n    * IPDR测试用例\r\n    * Logging测试用例\r\n  * 缩略语\r\n    * CGNAT\r\n    * CHR\r\n    * CN\r\n    * CS\r\n    * DPU\r\n    * eNodeB\r\n    * FTP\r\n    * IMSI\r\n    * IP\r\n    * IPDR\r\n    * KPI\r\n    * MAN\r\n    * MDS\r\n    * MS\r\n    * MSISDN\r\n    * MU\r\n    * NAT\r\n    * PDN\r\n    * PS\r\n    * SFTP\r\n    * UMTS\r\n    * xGW\n\n[4]:IPDR日志查询分析\r: IPDR日志查询分析\r\n\r\n用户通过终端上网，数据经过核心网网元后，过NAT(Network Address Translation, 网络地址转换)转换最后到达Internet。查询用户上网日志信息，追溯用户的上网行为。\r\n\r\n子主题：\r\n\r\n  * IPDR窗口介绍\r\n\r\n  * 查询用户上网日志\n\n[5]:IPDR查询\r: IPDR查询\r\n\r\nIPDR(Internet Protocol Detail Record, 互联网协议详细记录)功能提供用户上网记录溯源查询，提供任意一个月时间范围内（界面最多显示4000条，后台导出最多导出50万条），MSISDN、IMSI、Public Source IP/Port、Private Source IP/Port、Dest IP/Port、Dest Nat IP/Port多种条件的查询，覆盖常见溯源场景。\r\n\r\nIPDR查询条件参见表1。\r\n\r\n表1 IPDR查询条件查询条件| 是否必选  \r\n---|---  \r\nTime Range| 必选  \r\nMSISDN(Mobile Station International Subscriber Directory Number, 移动台国际用户目录号)| 可选  \r\nIMSI(International Mobile Subscriber Identity, 国际移动用户标识)  \r\nPrivate Source IP  \r\nPublic Source IP  \r\nDest IP  \r\nDest Nat IP  \r\nPrivate Source Port  \r\nPublic Source Port  \r\nDest Port  \r\nDest Nat Port  \r\n  \r\n呈现字段参见表2，用户可以选择性的只存储某些字段，查询结果可以按照CSV或者Excel格式导出。\r\n\r\n表2 IPDR记录字段字段| 含义| 是否可选存储  \r\n---|---|---  \r\nStart Time| 流开始时间| 必选  \r\nEnd Time| 流结束时间| 必选  \r\nDuration| 持续时间| 可选  \r\nActive Time| 用户激活时间| 可选  \r\nIMSI| IMSI| 必选  \r\nMSISDN| 用户号码| 必选  \r\nIMEI| 终端IMEI(International Mobile Equipment Identity, 国际移动设备标识)| 可选  \r\nPrivate Source IP| 私网源IP(Internet Protocol, 因特网协议)| 可选  \r\nPublic Source IP| 公网源IP| 可选  \r\nDest IP| 目的IP| 可选  \r\nDest NAT IP| 转换后的目的IP| 可选  \r\nPrivate Source Port| 私网源端口| 必选  \r\nPublic Source Port| 公网源端口| 必选  \r\nDEST Port| 目的端口| 可选  \r\nDEST NAT Port| 转换后的目的端口| 可选  \r\nProtocol| 协议类型| 必选  \r\nUL Packets| 上行包数| 可选  \r\nDL Packets| 下行包数| 可选  \r\nUL Volume| 上行流量| 可选  \r\nDL Volume| 下行流量| 可选  \r\nHost| 域名| 可选  \r\nURL| 用户访问的URL(Uniform Resource Locator, 统一资源定位符)| 可选，可指定长度，最长128字节  \r\nUser Agent| User Agent| 可选，可指定长度，最长128字节  \r\nHttp Method| HTTP 方法| 可选  \r\nHttp Status Code| HTTP 状态码| 可选  \r\nResponse Content Type| 响应内容类型| 可选  \r\nAPP Type| 应用类型，网元上报的业务小类| 可选  \r\nService Type| 业务类型，网元上报的业务大类| 可选  \r\nCI| 小区ID| 可选  \r\nTAC(Tracking Area Code, 跟踪区域码) RAC(Routing Area Code, 路由区域码)| 区域标识| 可选  \r\nCharge ID| Charging ID| 可选  \r\nCharge CAC(Connection Admission Control, 连接允许控制)| 计费特性| 可选  \r\nRate Group| 费率组| 可选  \r\nAPN| APN(Access Point Name, 接入点名称)| 可选  \r\nPDP Type| PDP IP类型| 可选  \r\nPDP IPv4| PDP IPv4| 可选  \r\nPDP IPv6| PDP IPv6| 可选  \r\nPGW/GGSN IP| PGW(PDN Gateway, 分组数据网网关)/GGSN(Gateway GPRS Support Node, GPRS网关支持节点) IP(Internet Protocol, 因特网协议)| 可选  \r\nSGW/SGSN IP| SGW(Serving Gateway, 服务网关)/SGSN(Serving GPRS Support Node,", "answer": "IPDR查询用户上网日志的方法如下：\n\n1. 在EMSPlus客户端的IPDR窗口中，单击功能操作区的Query按钮。\n\n2. 通过左侧菜单选择All→Predefined Query→IPDR→IPDR，打开上网日志查询页面。\n\n3. 单击More Conditions，展开更多条件设置区域，配置查询参数，包括：\n   - 选择查询的时间段（必选）。\n   - 设置查询结果显示的记录数。\n   - 根据需要输入MSISDN或IMSI号码。\n   - 可选输入公网或私网IP地址及端口号。\n   - 可选输入目的IP地址及端口号。\n   - 可选输入经过NAT转换后的目的IP地址及端口号。\n\n4. 配置完查询参数后，单击查询按钮，查询结果将显示在页面下方。\n\n5. 查询结果可以包含以下字段（用户可以选择性存储某些字段）：\n   - 上线时间（Start Time）。\n   - 下线时间（End Time）。\n   - 在线时间（Active Time）。\n   - 分配的私网IP地址（Private IP）。\n   - 使用的公网IP地址（Public IP）。\n   - 访问的目的IP地址（Dest IP）。\n   - 用户的IMSI号码。\n   - 用户手机号码（MSISDN）。\n   - 使用的私网端口号（Private Port）。\n   - 使用的公网端口号（Public Port）。\n   - 访问的目的端口号（Dest Port）。\n   - 使用的协议类型（Protocol）。\n\n6. 查询结果可以按照CSV或Excel格式导出。"}
{"id": 72, "query": "EMSPlus出现告警后处理办法有哪些？", "recall": "[1]:2415919134 不生成北向文件告警\r: 2415919134 不生成北向文件告警\r\n\r\n告警描述\r\n\r\n检测周期内统计北向文件生成数为0，上报该告警。统计北向文件生成数不为0，恢复该告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：严重\r\n\r\n  * 告警类型：通信告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\n  * 北向模板未加载，导致北向文件不生成。\r\n\r\n  * 该节点未收到数据，导致北向文件不生成。\r\n\r\n  * 系统资源已满，导致北向文件不生成。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n北向文件未生成，会导致北向数据丢失。\r\n\r\n处理建议\r\n\r\n  1. 在EMSPlus客户端命令窗口，执行CHECK CONSISTENCY:TYPE=NORTH，查看北向模板文件是否一致。\r\n\r\n     * 是→步骤2\r\n\r\n     * 否→步骤4\r\n\r\n  2. 检查当前局点是否接入业务。\r\n\r\n     * 是→步骤3\r\n\r\n     * 否→步骤5\r\n\r\n  3. 检查告警节点是否有系统资源异常告警，比如CPU超限告警、内存使用率超限告警。\r\n\r\n     * 是→步骤6\r\n\r\n     * 否→步骤7\r\n\r\n  4. 根据现场实际情况，重新导入北向模板，等待10分钟，观察告警是否消除。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤2\r\n\r\n  5. 接入业务之后，等待10分钟，观察告警是否消除。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤3\r\n\r\n  6. 解决系统资源异常告警之后，等待10分钟，观察告警是否消除。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤7\r\n\r\n  7. 联系中兴通讯技术支持。\n\n[2]:2415919127 MDS配置同步失败\r: 2415919127 MDS配置同步失败\r\n\r\n告警描述\r\n\r\n当同步MDS(Message Dispatch Service, 消息分发服务)参数失败时上报该告警；当同步MDS参数成功时，恢复该告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：严重\r\n\r\n  * 告警类型：通信告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\nMDS配置同步失败。\r\n\r\n系统影响\r\n\r\nMDS将无法正常分发网元发送的日志消息，DCU(Data Collection Unit, 数据采集单元)将无法清洗这些日志消息。\r\n\r\n处理步骤\r\n\r\n执行人机命令SYNC MDS。\n\n[3]:2365981698 告警箱与网管服务端链路断\r: 2365981698 告警箱与网管服务端链路断\r\n\r\n告警描述\r\n\r\n当OMM(Operation & Maintenance Module, 操作维护模块)系统检测到告警箱与OMM(Operation & Maintenance Module, 操作维护模块)服务器之间的通讯链路中断时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：次要\r\n\r\n  * 告警类型：通信告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n告警箱IP(Internet Protocol, 因特网协议)| 与OMM(Operation & Maintenance Module, 操作维护模块)系统连接的对端告警箱的物理IP(Internet Protocol, 因特网协议)地址。  \r\n  \r\n可能原因\r\n\r\n  * 告警箱未连接。\r\n\r\n  * 告警箱和OMM(Operation & Maintenance Module, 操作维护模块)服务器通讯中断，产生告警。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n告警情况无法在告警箱提示。\r\n\r\n处理建议\r\n\r\n  1. 检查断链节点和OMM(Operation & Maintenance Module, 操作维护模块)服务器之间网络物理连接是否正常。\r\n\r\n     * 是→3\r\n\r\n     * 否→2\r\n\r\n  2. 排除网络物理连接故障，检查本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 使用人机命令SHOW ALARMBOX查看OMM(Operation & Maintenance Module, 操作维护模块)服务器上配置的服务端端口是否被占用，告警箱地址和OMM(Operation & Maintenance Module, 操作维护模块)服务器上设置的告警箱地址是否一致，且地址未被占用。\r\n\r\n     * 是→4\r\n\r\n     * 否→5\r\n\r\n  4. 使用人机命令SET ALARMBOX修改告警箱端口设置，检查本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→5\r\n\r\n  5. 使用人机命令SET ALARMBOX在OMM(Operation & Maintenance Module, 操作维护模块)服务器告警设置中将告警箱“是否启用”设置成否，检查本告警是否恢复。\r\n     * 是→结束\r\n\r\n     * 否→6\r\n\r\n  6. 联系中兴通讯。\n\n[4]:2415919112 数据源异常\r: 2415919112 数据源异常\r\n\r\n告警描述\r\n\r\n当DRS不能与数据源正常通信时上报该告警。当DRS与数据源通信正常后，该告警恢复。\r\n\r\n告警属性\r\n\r\n  * 告警级别：严重\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\n  1. 数据源配置错误。\r\n\r\n  2. 数据源停止工作。\r\n\r\n  3. DRS与数据源的链路断开。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\nDCU上日志清洗异常。\r\n\r\n处理步骤\r\n\r\n  1. 确认数据源是否正常工作。\r\n\r\n是->3。\r\n\r\n否->2。\r\n\r\n  2. 联系数据源维护人员，解决数据源故障。操作完成后，检查告警是否恢复。\r\n\r\n是->结束。\r\n\r\n否->3。\r\n\r\n  3. 检查DRS与数据源的链路是否正常。在DRS所在节点上，执行命令ping destination（其中destination为数据源的IP地址），观察是否所有的ping请求都收到响应。\r\n\r\n是->5。\r\n\r\n否->4。\r\n\r\n  4. 联系网络维护人员，解决DRS与数据源之间网络故障。操作完成后，检查告警是否恢复。\r\n\r\n是->结束。\r\n\r\n否->5。\r\n\r\n  5. 检查DRS的数据源配置是否正确。\r\n\r\n     * 如果DRS作为UDP服务器，接收数据源上报数据，在操作维护客户端的命令终端上，执行命令SHOW DRS UDPPARA，检查命令返回结果中的''UDP服务IP地址''和''UDP监听端口''是否正确。\r\n\r\n     * 如果DRS作为TCP客户端，从数据源采集数据，在操作维护客户端的命令终端上，执行命令SHOW DRS TCPPARA，检查命令返回结果中的''TCP服务IP地址''和''TCP监听端口''是否正确。\r\n\r\n     * 如果DRS作为FTP客户端，从数据源采集数据，在操作维护客户端的命令终端上，执行命令SHOW DRS FTPPARA，检查命令返回结果中的''FTP协议类型''、''FTP IP地址''、''FTP端口''、''FTP用户名称''、''FTP密码''和''FTP目录''是否正确。\r\n\r\n是->7。\r\n\r\n否->6。\r\n\r\n  6. 修正DRS的数据源配置。\r\n\r\n     * 如果DRS作为UDP服务器，接收数据源上报数据，在操作维护客户端的命令终端上，执行命令SET DRS UDPPARA，修正对应数据源的配置。\r\n\r\n     * 如果DRS作为TCP客户端，从数据源采集数据，在操作维护客户端的命令终端上，执行命令SET DRS TCPPARA，修正对应数据源的配置。\r\n\r\n     * 如果DRS作为FTP客户端，从数据源采集数据，在操作维护客户端的命令终端上，执行命令SET DRS FTPPARA，修正对应数据源的配置。操作完成后，检查告警是否恢复。\r\n\r\n是->结束。\r\n\r\n否->7。\r\n\r\n  7. 联系中兴通讯。\n\n[5]:查看告警信息\r: 查看告警信息\r\n\r\n摘要\r\n\r\n检查NetNumen U31接收EMSPlus告警的功能是否正常。\r\n\r\n前提\r\n\r\nEMSPlus已接入NetNumen U31。\r\n\r\n步骤\r\n\r\n  1. 在NetNumen U31客户端窗口，单击网元树中的EMSPlus网元，切换到NE Alarms Table页签，查看当前告警列表，如图1所示。\r\n\r\n图1 查看当前告警\r\n\r\n  2. 双击一条告警条目，查看告警详情，如图2所示。\r\n\r\n图2 查看告警详情\r\n\r\n  3. 单击Alarm Monitoring按钮，选择快捷菜单History Alarms→History Alarms Within One Day，查看最近1天的历史告警，如图3所示。选择快捷菜单History Alarms→History Alarms Within Three Day，查看最近3天的历史告警。\r\n\r\n图3 查看历史告警", "answer": "EMSPlus出现告警后的处理办法主要包括以下几点：\n\n1. 对于“2415919134 不生成北向文件告警”：\n   - 检查北向模板是否加载，节点是否收到数据，系统资源是否已满。\n   - 根据实际情况重新导入北向模板，检查系统资源异常告警，解决相关问题。\n   - 若问题未解决，联系中兴通讯技术支持。\n\n2. 对于“2415919127 MDS配置同步失败”：\n   - 执行人机命令SYNC MDS尝试重新同步MDS配置。\n\n3. 对于“2365981698 告警箱与网管服务端链路断”：\n   - 检查网络物理连接，告警箱与OMM服务器之间的配置。\n   - 使用人机命令SHOW ALARMBOX和SET ALARMBOX查看和修改告警箱配置。\n   - 若问题未解决，联系中兴通讯。\n\n4. 对于“2415919112 数据源异常”：\n   - 确认数据源是否正常工作，检查DRS与数据源的链路和配置。\n   - 联系数据源或网络维护人员解决问题。\n   - 若配置有误，修正DRS的数据源配置。\n   - 若问题未解决，联系中兴通讯。\n\n5. 对于查看告警信息：\n   - 在NetNumen U31客户端查看当前告警列表和详情。\n   - 查看历史告警记录，分析告警趋势和原因。\n\n以上步骤是针对不同类型告警的处理建议，具体操作时需要根据实际情况和告警类型进行相应处理。"}
{"id": 73, "query": "故障类别有哪些？", "recall": "[1]:故障处理记录表\r: 故障处理记录表\r\n\r\n设备名称 |   \r\n| 设备编号 |   \r\n  \r\n---|---|---|---  \r\n发生时间| 年 月 日 时| 解决时间| 年 月 日 时  \r\n故障类别：硬件设备故障、电源故障、传输网故障、数据修改、其它故障。  \r\n  \r\n  \r\n  \r\n故障来源：用户投诉、日志系统、例行维护中发现、其它来源。  \r\n  \r\n  \r\n  \r\n  \r\n故障现象：  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n故障解决方案：  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n经验总结：  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n值班人签名：| 处理人签名：\n\n[2]:故障说明\r: 故障说明\r\n\r\n故障分类\r\n\r\n故障是设备或系统软件在工作过程中，因某种原因“丧失规定功能”或危害安全的现象。按照故障影响的业务和故障影响的范围，故障分为紧急故障和一般故障。\r\n\r\n  * 紧急故障\r\n\r\n指严重影响业务运营的故障，包括系统关键指标严重下降、业务大面积甚至全部中断和计费异常。\r\n\r\n  * 一般故障\r\n\r\n除紧急故障以外的，对业务运营影响不大的故障。\r\n\r\n\r\n\r\n\r\n故障来源\r\n\r\n故障来源主要有下面三种：\r\n\r\n  * 终端用户投诉\r\n\r\n业务无法使用或使用异常，导致用户投诉。\r\n\r\n  * 网管界面告警\r\n\r\n系统设备或软件异常产生告警，上报到网管，在网管界面进行声光告警，具体处理步骤可参见告警处理中相应告警码内容。\r\n\r\n  * 例行维护检查\r\n\r\n维护工程师在日常例行维护中发现的设备或系统异常情况。\n\n[3]:* 硬件类故障\r: * 硬件类故障\r\n    * 局域网内交换机掉电\r\n    * 磁盘阵列硬件故障\r\n  * 通讯类故障\r\n    * MDS上报“MDS与DCUMU/DCURP/ASC链路异常(2365983488)”\r\n    * OMM上报“NTP服务器链路中断(2365981953)”\r\n  * 业务类故障\r\n    * 网元上报硬盘使用率超标告警\r\n    * OMM上报“内存使用率超标(2365981186)” \r\n    * OMM上报“CPU使用率超标(2365981185)” \r\n    * OMM上报“NewstartHA双机资源告警(2365981706)” 或“NewstartHA双机服务告警(2365981707)” \r\n    * OMM上报“NewstartHA双机备机离线告警(2365981710)” \r\n    * 网元上报“数据溢出(2365983024)” \r\n    * 网元上报“数据源异常(2365983041)” \r\n    * 网元上报“组件异常(2365983264)” \r\n    * 网元上报“文件推送失败(2365983008)”\r\n    * 网元上报“文件入库失败(2365983280)”\r\n  * 云盘类故障\r\n    * 云盘文件系统损坏\r\n  * 应急操作\r\n    * 重启应用程序\r\n    * 停止应用程序\r\n    * 启动应用程序\r\n    * 重启系统\r\n  * 缩略语\r\n    * CPU\r\n    * DPU\r\n    * DRS\r\n    * FTP\r\n    * IP\r\n    * MDS\r\n    * NTP\r\n    * OMM\r\n    * SFTP\r\n    * TCP\r\n    * TECS\r\n    * UDP\n\n[4]:硬件类故障\r: 硬件类故障\r\n\r\n子主题：\r\n\r\n  * 局域网内交换机掉电\r\n\r\n  * 磁盘阵列硬件故障\n\n[5]:通讯类故障\r: 通讯类故障\r\n\r\n子主题：\r\n\r\n  * MDS上报“MDS与DCUMU/DCURP/ASC链路异常(2365983488)”\r\n\r\n  * OMM上报“NTP服务器链路中断(2365981953)”", "answer": "故障类别包括以下几种：\n1. 硬件设备故障\n2. 电源故障\n3. 传输网故障\n4. 数据修改\n5. 其他故障\n\n此外，根据故障影响的业务和范围，还可以分为：\n- 紧急故障\n- 一般故障\n\n具体到硬件类和通讯类故障，又包括：\n- 局域网内交换机掉电\n- 磁盘阵列硬件故障\n- MDS与DCUMU/DCURP/ASC链路异常\n- NTP服务器链路中断等。"}
{"id": 74, "query": "AMF网元的采集方式有哪几种？", "recall": "[1]:C510570023 发送Nnssf_NSSelection_Get请求次数(漫游切片映射)\r: C510570023 发送Nnssf_NSSelection_Get请求次数(漫游切片映射)\r\n\r\n计数器描述\r\n\r\n在采集周期内，统计AMF向NSSF请求切片映射信息时，发送Nnssf_NSSelection_Get消息的次数。\r\n\r\n测量触发点\r\n\r\nAMF发送Nnssf_NSSelection_Get消息时进行统计，HTTP方法为GET，触发点如下图A点所示。\r\n\r\n采集方式\r\n\r\n累加值\n\n[2]:C510570024 接收Nnssf_NSSelection_Get响应次数(漫游切片映射)\r: C510570024 接收Nnssf_NSSelection_Get响应次数(漫游切片映射)\r\n\r\n计数器描述\r\n\r\n在采集周期内，统计AMF向NSSF请求切片映射信息时，AMF收到Nnssf_NSSelection_Get响应消息的次数。\r\n\r\n测量触发点\r\n\r\nAMF收到Nnssf_NSSelection_Get响应消息时进行统计，触发点如下图A点所示。\r\n\r\n采集方式\r\n\r\n累加值\n\n[3]:C510560048 收到 Namf_Communication_N1N2MessageSubscriber次数\r: C510560048 收到 Namf_Communication_N1N2MessageSubscriber次数\r\n\r\n计数器描述\r\n\r\n在采集周期内，统计AMF接收Namf_Communication_N1N2MessageSubscriber消息次数。\r\n\r\n测量触发点\r\n\r\nAMF接收Namf_Communication_N1N2MessageSubscriber消息时进行统计，HTTP方法为POST，触发点如下图A点所示。\r\n\r\n采集方式\r\n\r\n累加值\n\n[4]:C510630022 通过SCP发送Namf接口请求次数\r: C510630022 通过SCP发送Namf接口请求次数\r\n\r\n计数器描述\r\n\r\n在采集周期内，统计AMF的EEX服务通过SCP或SEPP发送Namf接口请求消息次数。\r\n\r\n测量触发点\r\n\r\nAMF的EEX服务通过SCP或SEPP发送Namf接口请求消息时进行统计，触发点如下图A点所示。\r\n\r\n采集方式\r\n\r\n累加值\n\n[5]:C514600001 接收Namf_Location_ProvidePositioningInfo请求个数\r: C514600001 接收Namf_Location_ProvidePositioningInfo请求个数\r\n\r\n计数器描述\r\n\r\n在采集周期内，统计AMF接收到的Namf_Location_ProvidePositioningInfo请求次数。\r\n\r\n测量触发点\r\n\r\nAMF收到Namf_Location_ProvidePositioningInfo请求消息后，进行统计。\r\n\r\n采集方式\r\n\r\n累加值", "answer": "AMF网元的采集方式有以下几种：\n\n1. 累加值：对于发送Nnssf_NSSelection_Get请求次数、接收Nnssf_NSSelection_Get响应次数、收到Namf_Communication_N1N2MessageSubscriber次数、通过SCP发送Namf接口请求次数以及接收Namf_Location_ProvidePositioningInfo请求个数等计数器，均采用累加值的方式进行采集。"}
{"id": 75, "query": "License文件过期影响业务怎么办？", "recall": "[1]:2365981441 License文件非法\r: 2365981441 License文件非法\r\n\r\n告警描述\r\n\r\n当检测到OMM(Operation & Maintenance Module, 操作维护模块)服务器$ZXHOME/%网元%/server/conf/license目录存在以下License文件时，则上报本告警。\r\n\r\n  * License文件中设置的用户信息和License文件名（不包括后缀）不一致。\r\n\r\n  * License文件中设置的MAC(Media Access Control, 媒介接入控制)地址和OMM(Operation & Maintenance Module, 操作维护模块)服务器的网卡MAC(Media Access Control, 媒介接入控制)地址都无法匹配。\r\n\r\n  * 没使用License工具生成的License文件，内容文本格式非法。\r\n\r\n  * License文件损坏。\r\n\r\n\r\n\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\n  * License文件中设置的用户信息和License文件名（不包括后缀）不一致。\r\n\r\n  * License文件中设置的MAC(Media Access Control, 媒介接入控制)地址和OMM(Operation & Maintenance Module, 操作维护模块)服务器的网卡MAC(Media Access Control, 媒介接入控制)地址都无法匹配。\r\n\r\n  * 没使用License工具生成的License文件，内容文本格式非法。\r\n\r\n  * License文件损坏。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\nLicense文件加载失败，所有受License文件控制的所有网管或者业务功能都不可用。\r\n\r\n处理建议\r\n\r\n联系中兴通讯重新制作License文件。\n\n[2]:2365981445 系统中加载的License已经过期\r: 2365981445 系统中加载的License已经过期\r\n\r\n告警描述\r\n\r\nOMM(Operation & Maintenance Module, 操作维护模块)系统中加载的License文件超过购买License文件时约定的有效期后，如果有客户端登录到OMM(Operation & Maintenance Module, 操作维护模块)系统，或者到了第二天早上5：00都会触发该告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\nOMM(Operation & Maintenance Module, 操作维护模块)系统中加载的License文件超过购买License文件时约定的有效期。\r\n\r\n系统影响\r\n\r\nLicense失效，导致受License控制的所有网管或者业务功能都不可用。\r\n\r\n处理建议\r\n\r\n  1. 使用人机命令SHOW LICENSE查询License的详细信息，查看License的有效期是否已经达到指定时间。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. License已经过期，需要马上联系中兴通讯升级License文件。升级License文件后，确认本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 联系中兴通讯。\n\n[3]:2365981442 系统中加载的License即将到期\r: 2365981442 系统中加载的License即将到期\r\n\r\n告警描述\r\n\r\n当检测到OMM(Operation & Maintenance Module, 操作维护模块)服务器$ZXHOME/%网元%/server/conf/license目录的License文件快要到达失效时期时，上报本通知。\r\n\r\n默认提前15天开始上报本通知。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：否\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n当前的License还有x天即将过期| License过期前的剩余天数，最大15天。  \r\n  \r\n可能原因\r\n\r\nOMM(Operation & Maintenance Module, 操作维护模块)系统中加载的License文件即将超过购买License文件时约定的有效期。系统默认在有效期的前15天开始上报此通知。\r\n\r\n系统影响\r\n\r\n对系统暂无影响。但需要在过期前加载新的License文件，否则会导致业务功能不可用。\r\n\r\n处理建议\r\n\r\n  1. 在本地维护终端，使用命令SHOW LICENSE查询License的详细信息，查看License的有效期是否和告警附加信息中的剩余天数相对应。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. License即将过期，为保证系统的正常运行，需要及时联系中兴通讯升级License文件。升级License文件后，查看此通知是否仍然上报。\r\n\r\n     * 是→3\r\n\r\n     * 否→结束\r\n\r\n  3. 联系中兴通讯。\n\n[4]:2365981443 License文件不存在\r: 2365981443 License文件不存在\r\n\r\n告警描述\r\n\r\n当检测到OMM(Operation & Maintenance Module, 操作维护模块)服务器上的$ZXHOME/%网元%/server/conf/license目录中没有License文件时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\nOMM(Operation & Maintenance Module, 操作维护模块)系统未在服务器指定目录下找到License文件。\r\n\r\n系统影响\r\n\r\n导致License文件加载失败，所有受License文件控制的所有网管或者业务功能都不可用。\r\n\r\n处理建议\r\n\r\n  1. 使用人机命令LOAD LICENSE导入License，命令执行成功后，检查本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→2\r\n\r\n  2. 使用操作系统命令ls检查OMM(Operation & Maintenance Module, 操作维护模块)服务器本地硬盘上$ZXHOME/%网元%/server/conf/license目录下是否有License文件，License文件的后缀名一般为.lrc或LCS。\r\n\r\n     * 是→4\r\n\r\n     * 否→3\r\n\r\n  3. 联系中兴通讯重新获取License文件后，将License文件上传至$ZXHOME/%网元%/server/conf/license目录下，并使用人机命令LOAD LICENSE导入License，执行成功后检查本告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→4\r\n\r\n  4. 联系中兴通讯。\n\n[5]:2365981444 存在多个License文件\r: 2365981444 存在多个License文件\r\n\r\n告警描述\r\n\r\n当执行LOAD LICENSE命令加载License文件时，检测到OMM(Operation & Maintenance Module, 操作维护模块)服务器上的$ZXHOME/%网元%/server/conf/license目录中存在多个License文件时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\nOMM(Operation & Maintenance Module, 操作维护模块)服务器指定目录下存在多个License文件。\r\n\r\n系统影响\r\n\r\nLicense文件加载失败，所有受License文件控制的所有网管或者业务功能都不可用。\r\n\r\n处理建议\r\n\r\n  1. 使用操作系统命令ls检查OMM(Operation & Maintenance Module, 操作维护模块)服务器本地硬盘上$ZXHOME/%网元%/server/conf/license目录下是否存在有多个License文件，License文件的后缀名一般为.lic或LCS。\r\n\r\n     * 是→2 \r\n\r\n     * 否→4 \r\n\r\n  2. 使用人机命令SHOW LICENSE查看License信息，其中“用户信息”对应的信息即是正确License文件的文件名，是否与第1步中ls结果对应。\r\n     * 是→3\r\n\r\n     * 否→4\r\n\r\n  3. 使用操作系统命令**rm** 删除License目录下其他License文件，并使用人机命令LOAD LICENSE重新加载License，命令执行成功后，检查本告警是否恢复。\r\n     * 是→结束\r\n\r\n     * 否→4\r\n\r\n  4. 联系中兴通讯。", "answer": "License文件过期影响业务处理办法如下：\n\n1. 确认License已经过期的情况。\n   - 使用人机命令SHOW LICENSE查询License的详细信息，确认License的有效期是否已经达到指定时间。\n\n2. 联系中兴通讯升级License文件。\n   - 如果确认License已经过期，需要马上联系中兴通讯进行License文件的升级。\n\n3. 升级License文件后确认业务恢复。\n   - 升级完成后，检查受License控制的所有网管或业务功能是否已经恢复正常。\n   - 如果业务恢复正常，则问题解决。\n   - 如果业务未恢复，继续下一步。\n\n4. 如果问题依旧，再次联系中兴通讯寻求进一步帮助。"}
{"id": 76, "query": "如何查询MDS节点IP地址？", "recall": "[1]:检查虚拟机硬盘占用情况\r: 检查虚拟机硬盘占用情况\r\n\r\n检查目的\r\n\r\n保证MDS节点虚拟机硬盘空间足够。\r\n\r\n检查步骤\r\n\r\n  1. 使用浮动地址通过SSH登录EMSPlus服务端，查询MDS节点IP地址：\r\n\r\ncat /ubas/clustershell/groups | grep \"MDS\"\r\n\r\n  2. 登录MDS虚拟机。\r\n\r\n  3. 执行df -h指令查看磁盘空间。\r\n\r\n图1 查看磁盘空间\r\n\r\n\r\n\r\n\r\n检查标准\r\n\r\nMDS节点所有虚拟机磁盘使用率小于40%。\n\n[2]:检查虚拟机CPU占用情况\r: 检查虚拟机CPU占用情况\r\n\r\n检查目的\r\n\r\n保证MDS节点虚拟机CPU资源足够。\r\n\r\n检查步骤\r\n\r\n  1. 使用浮动地址通过SSH登录EMSPlus服务端，查询MDS节点IP地址：\r\n\r\ncat /ubas/clustershell/groups | grep \"MDS\"\r\n\r\n  2. 登录MDS虚拟机。\r\n\r\n  3. 执行性能分析指令：top 。\r\n\r\n图1 查询性能\r\n\r\n  4. 查看CPU平均使用率：%Cpu(s)\r\n\r\n图2 查看CPU平均使用率\r\n\r\n\r\n\r\n\r\n检查标准\r\n\r\nCPU平均使用率小于80% 。\n\n[3]:配置分发IP地址\r: 配置分发IP地址\r\n\r\n摘要\r\n\r\n配置MDS(Message Dispatch Service, 消息分发服务)节点的数据分发的模块号和IP地址。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSDSPIP命令，配置MDS节点的数据分发IP地址，如图1所示。\r\n\r\n图1 ADD MDSDSPIP命令表1 ADD MDSDSPIP命令参数名称| 参数说明  \r\n---|---  \r\nGroup ID| MDS对同一组的多个IP地址进行负载均衡数据分发，可通过SHOW MDSDSPIP命令查询组号对应的数据分发IP地址。  \r\nModel Type| 模块类型选择DCU_MU Module (DCU_MU)。ADD MODULE命令中配置的模块类型，可通过SHOW MODULE命令查询Module type。  \r\nIP| MDS分发数据到DCU，则该地址是DCU的Local IP For Upload Data地址。可使用SHOW COMMCFG命令查询DCU相关IP地址。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=<数据分发的模块类型>,IPADDR=<DCU的Local IP For Upload Data地址>\n\n[4]:配置分发IP地址\r: 配置分发IP地址\r\n\r\n摘要\r\n\r\n配置MDS(Message Dispatch Service, 消息分发服务)节点的数据分发的模块号和IP地址。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSDSPIP命令，配置MDS节点的数据分发IP地址，如图1所示。\r\n\r\n图1 ADD MDSDSPIP命令表1 ADD MDSDSPIP命令参数名称| 参数说明  \r\n---|---  \r\nGroup ID| MDS对同一组的多个IP地址进行负载均衡数据分发，可通过SHOW MDSDSPIP命令查询组号对应的数据分发IP地址。  \r\nModel Type| 模块类型选择DCU_MU Module (DCU_MU)。ADD MODULE命令中配置的模块类型，可通过SHOW MODULE命令查询Module type。  \r\nIP| MDS分发数据到DCU，则该地址是DCU的Local IP For Upload Data地址。可使用SHOW COMMCFG命令查询DCU相关IP地址。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=<数据分发的模块类型>,IPADDR=<DCU的Local IP For Upload Data地址>\n\n[5]:配置分发IP地址\r: 配置分发IP地址\r\n\r\n摘要\r\n\r\n配置MDS(Message Dispatch Service, 消息分发服务)节点的数据分发的模块号和IP地址。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSDSPIP命令，配置MDS节点的数据分发IP地址，如图1所示。\r\n\r\n图1 ADD MDSDSPIP命令表1 ADD MDSDSPIP命令参数名称| 参数说明  \r\n---|---  \r\nGroup ID| MDS对同一组的多个IP(Internet Protocol, 因特网协议)地址进行负载均衡数据分发，可通过SHOW MDSDSPIP命令查询组号对应的数据分发IP地址。  \r\nModel Type| 模块类型选择DCU_RP Module (DCU_RP)或者ASC Module (ASC)。ADD MODULE命令中配置的模块类型，可通过SHOW MODULE命令查询Module type。  \r\nIP| MDS分发数据到DCU(Data Collection Unit, 数据采集单元)/ASC（Association Node，关联节点），则该地址是DCU/ASC的Local IP For Upload Data地址。可使用SHOW COMMCFG命令查询DCU/ASC相关IP地址。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=<数据分发的模块类型>,IPADDR=<DCU/ASC的Local IP For Upload Data地址>", "answer": "查询MDS节点IP地址的步骤如下：\n\n1. 使用浮动地址通过SSH登录EMSPlus服务端。\n2. 在命令行执行以下指令：`cat /ubas/clustershell/groups | grep \"MDS\"`。\n\n通过上述步骤，可以查询到MDS节点的IP地址。"}
{"id": 77, "query": "不同类型的SC间是如何发现彼此的？", "recall": "[1]:# 查询SC类型(SHOW SCTYPE) \r: ## 命令举例\r\n    \r\n    \r\n    \r\n    \r\n    查询SC类型为sc-tmsp-mgt的信息。\r\n    \r\n    \r\n    \r\n    \r\n    SHOW SCTYPE:SCTYPE=\"sc-tmsp-mgt\"\r\n    \r\n    \r\n    \r\n    (No.1) : SHOW SCTYPE:SCTYPE=\"sc-tmsp-mgt\"\r\n    \r\n    NFS实例名称    SC类型         SC规格 SC最大实例数 SC最小实例数 SC当前实例数 自动可弹缩性 弹性步长 亲和标签 补丁版本号 最小SC组数 部署策略\r\n    ------------------------------------------------------------------------------------------------------------------------------------\r\n    CommonS_TMSP_0 sc-tmsp-mgt   SIZE_S 2           2            2           否           1                          1          NORMAL\r\n    ------------------------------------------------------------------------------------------------------------------------------------\r\n    记录数：1\n\n[2]:# 新增SCP按NF类型选择配置(ADD SBISCPSELBYNFTYPE) \r: SCP将请求路由到选定的NF服务实例。\r\n  * D模式SCP：该模式下为有委托发现的间接通信，服务消费者不进行服务发现，而是将发现参数发送给SCP。SCP可以向NRF执行服务发现并选择合适的服务生产者进行路由。\r\n  * 普通代理模式SCP：相比于C模式SCP，该模式下的服务消费者向SCP发送的外部信令请求中无SCP信息体现，请求的url由选定的服务生产者指向的NF服务实例地址构成。\r\n\r\n  \r\nSCPROUTESET | 路由集ID | 参数可选性: 任选  \r\n参数类型: 数字  \r\n参数范围: 0-65535  \r\n默认值: 0 | 该参数用于设置对端NF归属的SCP路由集ID，可以通过SHOW SBISCPROUTESET命令查询当前配置的路由集信息。 默认值为0，含义为无效值，仅SCP模式为不启用SCP时，该值可为0。 当修改SCP模式为其它模式时，需要修改路由集ID为非0的有效值。  \r\n  \r\n## 命令举例\r\n    \r\n    \r\n    \r\n    \r\n    新增SCP按NF类型选择配置，目的NF类型为“NRF_TYPE”，SCP模式为“SCP_C”，SCP路由集ID为“1”。\r\n    \r\n    \r\n    \r\n    \r\n    ADD SBISCPSELBYNFTYPE:NFTYPE=\"NRF_TYPE\",SCPMODE=\"SCP_C\",SCPROUTESET=1\n\n[3]:# SC管理\r: * 闭塞SC(BLOCK SC)：适用于业务测试、N+M备份模式（包括负荷分担模式）下特定SC实例出现故障或异常等场景。\r\n\r\n  * 解闭塞SC(UNBLOCK SC)：与闭塞SC命令配套操作。\r\n\r\n\r\n\r\n\r\n## 子主题：\r\n\r\n  * 重启SC(RESET SC)\r\n  * 倒换SC(SWP SC)\r\n  * 闭塞SC(BLOCK SC)\r\n  * 解闭塞SC(UNBLOCK SC)\r\n  * 查询SC信息(SHOW SCINFO)\r\n  * 查询SC类型(SHOW SCTYPE)\r\n  * 增加SC实例(INC SC)\r\n  * 减少SC实例(DEC SC)\r\n  * 设置SC(SET SC)\r\n  * 查询SC状态(SHOW SCSTATUS)\r\n  * 查询SC负荷(SHOW SCLOAD)\n\n[4]:# SCP按NF类型选择配置\r: # SCP按NF类型选择配置\r\n\r\n## 背景知识\r\n\r\n5G核心网新增SCP(Service Communication Proxy)提供路由策略及管理功能，从而各NF可专心于各自业务功能，实现业务功能和网络通讯/路由功能的分离。SCP的主要特性包括间接通讯和委托发现。\r\n\r\nSBI-GW收到请求后，可以根据对端网元的NF类型来选择SCP模式和路由集，然后根据实际场景需要将请求发送到SCP。\r\n\r\n## 功能说明\r\n\r\n该配置用于配置按对端网元的NF类型选择的SCP模式和归属的路由集。\r\n\r\n当业务需要使用SCP功能，并按对端网元的NF类型来选择SCP模式和通过路由集选择SCP/SEPP服务器和节点时，使用该配置。\r\n\r\n## 相关主题\r\n\r\n  * 新增SCP按NF类型选择配置(ADD SBISCPSELBYNFTYPE)\r\n  * 修改SCP按NF类型选择配置(SET SBISCPSELBYNFTYPE)\r\n  * 删除SCP按NF类型选择配置(DEL SBISCPSELBYNFTYPE)\r\n  * 查询SCP按NF类型选择配置(SHOW SBISCPSELBYNFTYPE)\r\n\r\n\r\n\r\n**父主题：**\r\n\r\nSCP按NF类型选择配置\n\n[5]:# 查询当前NFS内的SC类型(SHOW SCTYPE) \r: # 查询当前NFS内的SC类型(SHOW SCTYPE) \r\n\r\n## 功能说明\r\n\r\n该命令用于显示某个NFSC下所有SC实例的SC类型信息。\r\n\r\n## 注意事项\r\n\r\n无。\r\n\r\n## 命令举例\r\n    \r\n    \r\n    \r\n    \r\n    这个示例显示了NFSC下的所有SC类型名。\r\n    \r\n    \r\n    \r\n    \r\n    SHOW SCTYPE\r\n    \r\n    \r\n    \r\n    (No.1) : SHOW SCTYPE:\r\n    -----------------CommonS_HTTP_LB_0----------------\r\n    SC类型名称    SC个数    SC归属的NFS         HA方式\r\n    http_proxy    1        CommonS_HTTP_LB_0   N:N\r\n    sc_http_ddm   1        CommonS_HTTP_LB_0   1+1\r\n    记录数：2\r\n    \r\n    执行成功耗时: 0.201 秒\r\n    \r\n\r\n## 输出参数说明\r\n\r\n标识 | 名称 | 参数可选性 | 参数类型 | 范围 | 说明  \r\n---|---|---|---|---|---  \r\nSC_TYPENAME | SC类型名称 | 必选 | 字符串 | 0-64 | SC的类型名称。  \r\nSC_NUM | SC个数 | 必选 | 数字 | 0-1002 | 该SC类型下SC的个数。  \r\nNFS_NAME | SC归属的NFS | 必选 | 字符串 | 0-64 | 该SC类型归属的NFS。  \r\nHA_MODE | HA方式 | 必选 |  普通枚举:HA_MODE(HA方式) | 0-3 | 该SC的HA（高可用性）方式。  \r\n  \r\n**父主题：**\r\n\r\nSC管理", "answer": "不同类型的SC（Service Component）之间发现彼此的方式在提供的上下文信息中并没有直接说明。但根据上下文中提到的SCP（Service Communication Proxy）的功能，可以推测以下几点：\n\n1. SCP可能扮演了中介角色，帮助不同的SC之间进行发现。在D模式下，SCP可以执行服务发现，这意味着它能够帮助SC发现其他SC。\n\n2. SCP通过某种配置，可以根据对端网元的NF类型来选择SCP模式和路由集，这表明可能存在一种注册或配置机制，允许SC向SCP注册自己的存在，以便于被其他SC发现。\n\n3. 上下文信息中提到了“委托发现”，这可能意味着SC通过某种协议或接口，将发现其他SC的任务委托给了SCP。\n\n综上所述，SC之间的发现可能依赖于以下机制：\n\n- SCP的服务发现功能。\n- 通过预配置的信息，如NF类型和路由集，来间接实现SC之间的发现。\n- 某种形式的注册机制，SC在启动时或在发生变化时向SCP注册自己的信息。\n\n然而，具体的实现细节和协议并未在上下文中明确，因此上述回答是基于上下文信息的合理推测，并不代表确切的实现方式。如果需要更准确的答案，可能需要查阅更详细的系统设计文档或协议规范。"}
{"id": 78, "query": "uMAC支持适应哪些IaaS云平台", "recall": "[1]:ZUF-76-02-004 支持多个IaaS云平台\r: ZUF-76-02-004 支持多个IaaS云平台\r\n\r\n概述\r\n\r\nZTE AMF/MME/SGSN支持适应多个IaaS云平台，如ZTE TECS、VMWare以及基于OpenStack的第三方IaaS云平台。\r\n\r\n客户收益\r\n\r\n操作员层面：\r\n\r\n有助于网络操作员在多个IaaS云平台中部署VNF。\r\n\r\n说明\r\n\r\nZTE AMF/MME/SGSN支持适应以下多个IaaS云平台：\r\n\r\n  * ZTE TECS\r\n\r\n  * VMWare\r\n\r\n  * 基于OpenStack（如RedHat OpenStack）的第三方IaaS云平台\n\n[2]:服务组成\r: 服务组成\r\n\r\n业务服务和服务组件说明\r\n\r\n为了适应5GC网络的灵活性、扩展性，ZXUN uMAC系统采用服务化架构。服务化架构由一系列业务服务NFS(Network Function Service, 网络功能服务)和服务组件SC(Service Component, 服务组件)构成。\r\n\r\n  * 业务服务，是NF的具体功能，能够独立完成某个具体功能的软件实体，服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征，多个业务服务组合可实现一定的业务功能。\r\n\r\n  * 服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。\r\n\r\n\r\n\r\n\r\n业务服务模型和资源模型的映射关系\r\n\r\n业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（IaaS形态），也可以运行在POD资源模型（CaaS形态），业务功能逻辑呈现一致，底层的部署方式不同。\r\n\r\n服务组件的运行载体为VRU(Virtual Running Unit, 虚拟运行单元)，VRU在IaaS形态部署时呈现为容器实例，在CaaS形态部署时呈现为POD实例。\r\n\r\n业务服务模型和资源模型的映射关系如图1所示。\r\n\r\n图1 业务服务模型和资源模型的映射关系\r\n\r\n各业务服务和服务组件介绍\r\n\r\n各业务服务及其包含的服务组件介绍参见下表。\r\n\r\n服务分类| 服务| 说明| 归属NF| 服务组件| 功能描述  \r\n---|---|---|---|---|---  \r\n平台支撑&网管运维类服务| Service Governance| 微服务治理，又称CommonS_TMSP。| 公共服务SMF/AMF/PCF/UPF……| sc-tmsp-mgt| 管理SC，服务部署资源的编排，升级，自愈。  \r\nsc-tmsp-smc| 管理SC，服务管理，服务注册，发现，升级。  \r\nsc-tmsp-mp| 本服务配置管理，性能统计管理等。  \r\nsc-tmsp-rosng| 路由协议栈SC。  \r\nsc-tmsp-amu| 仲裁SC，对其他SC提供主备仲裁。  \r\nOperation and Maintenance| 操作维护，又称CommonS_OAM。| 公共服务SMF/AMF/PCF/UPF……| sc-oam-gateway| OAM接入网关，负责管理口http/ssh等协议接入。  \r\nsc-oam-main| OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。  \r\nsc-oam-umf| OAM统一消息上报单元，负责信令跟踪消息上报。  \r\nsc-oam-ccmf| OAM配置管理单元，负责配置数据校验、存储、同步。  \r\nsc-oam-upgrade| OAM升级管理单元，负责业务SC和OAM自身升级控制。  \r\nsc-oam-postgre| OAM数据库，负责存储OAM配置、安全、接入等数据。  \r\nsc-oam-web| 提供本地网管web服务。  \r\nAMF Management Process| 业务公共服务，又称Namf_MP。| AMF/MME/SGSN| sc-amf-mp-dba| MME/SGSN网元级配置、告警、性能统计等。\n\n[3]:安装导读\r: 安装导读\r\n\r\n在进行ZXUN uMAC软件安装前，确保已经完成硬件设备安装、VIM云平台管理软件（如中兴通讯的TECS OpenStack）和MANO（如中兴通讯的CloudStudio）软件安装，本文只涉及ZXUN uMAC版本软件的安装过程。安装全流程参见表1。\r\n\r\n表1 软件安装全流程安装步骤| 安装内容| 安装参考文档  \r\n---|---|---  \r\n1| VIM云平台| VIM云平台软件| \r\n\r\n  * TECS OpenStack云平台参考`TECS OpenStack用户手册文档包`中用户手册文档包中的《软件安装》内容进行安装。\r\n  * 其他云平台，参见各云平台相应的手册。\r\n\r\n  \r\n2| MANO| 安装CloudStudio| 参考`CloudStudio用户手册文档包`中用户手册文档包中的《安装与调测》内容进行安装。  \r\n3| VNF| 安装ZXUN uMAC| 详细信息请参考本文档后续章节。\n\n[4]:安装导读\r: 安装导读\r\n\r\n在进行ZXUN uMAC软件安装前，确保已经完成硬件设备安装、VIM云平台管理软件（如中兴通讯的TECS OpenStack）和MANO（如中兴通讯的CloudStudio）软件安装，本文只涉及ZXUN uMAC版本软件的安装过程。安装全流程参见表1。\r\n\r\n表1 软件安装全流程安装步骤| 安装内容| 安装参考文档  \r\n---|---|---  \r\n1| VIM云平台| VIM云平台软件| \r\n\r\n  * TECS OpenStack云平台参考`TECS OpenStack用户手册文档包`中用户手册文档包中的《软件安装》内容进行安装。\r\n  * 其他云平台，参见各云平台相应的手册。\r\n\r\n  \r\n2| MANO| 安装CloudStudio| 参考`CloudStudio用户手册文档包`中用户手册文档包中的《安装与调测》内容进行安装。  \r\n3| VNF| 安装ZXUN uMAC| 详细信息请参考本文档后续章节。\n\n[5]:特性描述\r: 应用场景\r\n\r\n融合AMF&MME&SGSN支持全接入，可灵活适应多种部署场景，主要的使用场景如下：\r\n\r\n场景1：2/3/4/5G全接入，系统平滑演进\r\n\r\n现网ZXUN uMAC版本通过软件升级支持融合AMF&MME&SGSN功能，支持2G/3G/4G/5G全接入，保证网络的平滑演进，如图2所示。\r\n\r\n图2 平滑演进\r\n\r\n场景2：AMF&MME&SGSN融合组Pool\r\n\r\nAMF、MME和SGSN可以融合组Pool，通过融合节点选择功能保证跨RAT移动时选择同一融合节点，缩短互操作时延，示意图如图3所示（图中未体现SGSN）。\r\n\r\n图3 融合组Pool\r\n\r\n客户收益\r\n\r\n受益方| 受益描述  \r\n---|---  \r\n运营商| \r\n\r\n  * 降低管理成本：可有效降低需要管理的网元数，节约网络管理成本。\r\n  * 降低使用成本：提供2/3/4/5G统一接入，支持4G到5G的平滑演进，节约网络维护及升级成本。\r\n  * 节约系统资源：互操作过程中涉及的GTP、DNS等资源可共享，支持合一的管理维护虚机、数据处理虚机、IP路由虚机、SCTP链路处理虚机、业务主处理虚机。\r\n\r\n  \r\n终端用户| \r\n\r\n  * 提升用户体验：基于N26的互操作，特别是语音回落时，可有效降低N26接口传输时延，缩短语音接通时延。\r\n\r\n  \r\n  \r\n实现原理\r\n\r\n系统架构\r\n\r\n融合AMF&MME&SGSN组网如图4所示。AMF&MME&SGSN作为一个融合网元，涵盖AMF、MME及SGSN协议网元功能，并通过标准协议接口与周边网元对接。\r\n\r\n图4 融合AMF组网\r\n\r\n融合AMF&MME&SGSN内部架构如图5所示，统一数据和管理，业务独立，其中：\r\n\r\n  1. 通过统一数据服务，实现用户2/3/4/5G数据融合及统一管理。\r\n\r\n  2. 通过统一网管服务，实现AMF&MME&SGSN服务的统一编排、部署和操作维护。\r\n\r\n  3. 通过公共服务，实现通用功能（如：SCTP、IPU）在融合网元内的共享。\r\n\r\n  4. 通过统一平台，融合网元提供统一的内部通讯、虚机管理等平台服务。\r\n\r\n  5.", "answer": "uMAC支持适应以下IaaS云平台：\n\n  * ZTE TECS\n  * VMWare\n  * 基于OpenStack的第三方IaaS云平台（如RedHat OpenStack）"}
{"id": 79, "query": "服务化架构由一系列业务服务NFS和服务组件SC构成。uMAC的3G的媒体面报文处理由哪个SC负责", "recall": "[1]:服务组成\r: sc-amf-loc| AMF定位服务，向Communication服务和MT服务提供UE位置信息订阅和通知服务。  \r\nMMESGSN Sevice| MMESGSN服务，又称NFS_MMESGSN。| MME/SGSN| sc-mmesgsn-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-mmesgsn-oam-dba| MME/SGSN服务中负责配置功能。  \r\nsc-mmesgsn-cmp| MME/SGSN服务的主业务处理SC，负责2/3/4G业务处理。  \r\nsc-mmesgsn-up| MME/SGSN服务的媒体面数据处理，负责2/3G的媒体面报文转发。  \r\n数据存储类服务| UDSF Management| 非结构化数据管理，又称Nudsf_UnstructuredDataManagement。| 公共服务SMF/AMF/PCF……| sc-cudr-cdn-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-cudr-cdn-l| 内存数据库（左域），提供数据存储、备份和同步。  \r\nsc-cudr-cdn-r| 内存数据库（右域），提供数据存储、备份和同步。  \r\nCUDR System Management| 云数据系统管理，又称Ncudr_SystemManagement。| sc-cudr-sys-mp| 数据存储控制中心，负责CDN组件的弹性策略控制。\n\n[2]:ZUF-79-02-002 NF服务管理\r: ZUF-79-02-002 NF服务管理\r\n\r\n子主题：\r\n\r\n  * 特性描述\r\n\r\n  * 特性配置\n\n[3]:服务组成\r: 服务组成\r\n\r\n业务服务和服务组件说明\r\n\r\n为了适应5GC网络的灵活性、扩展性，ZXUN uMAC系统采用服务化架构。服务化架构由一系列业务服务NFS(Network Function Service, 网络功能服务)和服务组件SC(Service Component, 服务组件)构成。\r\n\r\n  * 业务服务，是NF的具体功能，能够独立完成某个具体功能的软件实体，服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征，多个业务服务组合可实现一定的业务功能。\r\n\r\n  * 服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。\r\n\r\n\r\n\r\n\r\n业务服务模型和资源模型的映射关系\r\n\r\n业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（IaaS形态），也可以运行在POD资源模型（CaaS形态），业务功能逻辑呈现一致，底层的部署方式不同。\r\n\r\n服务组件的运行载体为VRU(Virtual Running Unit, 虚拟运行单元)，VRU在IaaS形态部署时呈现为容器实例，在CaaS形态部署时呈现为POD实例。\r\n\r\n业务服务模型和资源模型的映射关系如图1所示。\r\n\r\n图1 业务服务模型和资源模型的映射关系\r\n\r\n各业务服务和服务组件介绍\r\n\r\n各业务服务及其包含的服务组件介绍参见下表。\r\n\r\n服务分类| 服务| 说明| 归属NF| 服务组件| 功能描述  \r\n---|---|---|---|---|---  \r\n平台支撑&网管运维类服务| Service Governance| 微服务治理，又称CommonS_TMSP。| 公共服务SMF/AMF/PCF/UPF……| sc-tmsp-mgt| 管理SC，服务部署资源的编排，升级，自愈。  \r\nsc-tmsp-smc| 管理SC，服务管理，服务注册，发现，升级。  \r\nsc-tmsp-mp| 本服务配置管理，性能统计管理等。  \r\nsc-tmsp-rosng| 路由协议栈SC。  \r\nsc-tmsp-amu| 仲裁SC，对其他SC提供主备仲裁。  \r\nOperation and Maintenance| 操作维护，又称CommonS_OAM。| 公共服务SMF/AMF/PCF/UPF……| sc-oam-gateway| OAM接入网关，负责管理口http/ssh等协议接入。  \r\nsc-oam-main| OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。  \r\nsc-oam-umf| OAM统一消息上报单元，负责信令跟踪消息上报。  \r\nsc-oam-ccmf| OAM配置管理单元，负责配置数据校验、存储、同步。  \r\nsc-oam-upgrade| OAM升级管理单元，负责业务SC和OAM自身升级控制。  \r\nsc-oam-postgre| OAM数据库，负责存储OAM配置、安全、接入等数据。  \r\nsc-oam-web| 提供本地网管web服务。  \r\nAMF Management Process| 业务公共服务，又称Namf_MP。| AMF/MME/SGSN| sc-amf-mp-dba| MME/SGSN网元级配置、告警、性能统计等。\n\n[4]:ZUF-79-02 服务化架构\r: ZUF-79-02 服务化架构\r\n\r\n子主题：\r\n\r\n  * ZUF-79-02-001 5G服务化架构\r\n\r\n  * ZUF-79-02-002 NF服务管理\r\n\r\n  * ZUF-79-02-003 NF服务发现\n\n[5]:服务化架构\r: PCF| Npcf_AMPolicyControl| 提供接入控制，网络选择，移动性管理等AMF相关的策略控制服务。  \r\nNpcf_EventNotification| 提供策略信息及事件通知服务。  \r\nNpcf_Policy Authorization| 提供AF授权及为AF相关的会话生成策略规则服务。  \r\nNpcf_SMPolicyControl| 提供会话等SMF相关的策略控制服务。  \r\nNRF| Nnrf_NF Discovery| 提供NF发现服务。  \r\nNnrf_NFLoadManagement| 提供NF状态维护服务。  \r\nAUSF| Nausf UEauthentication| 提供用户鉴权服务。  \r\nNSSF| Nnssf_NSSelection| 向请求者提供请求的网络切片信息。  \r\nNnssf_NSSAIAvailability| 根据每个TA为NF消费者提供S-NSSAI(Single Network Slice Selection Assistance Information, 单个网络切片选择辅助信息)的可用性。  \r\nNEF| Nnef_EventExposure| 提供NEF相关信息的开放服务。  \r\nNnef_PFDManagement| 提供PFD管理功能  \r\nNnef_ParameterProvision| 提供可以在5GS中用于UE的供应信息。  \r\nNnef_Trigger| 提供设备触发功能。  \r\nNnef_BDTPNegotiation| 提供有关后台数据传输策略的协商功能。  \r\nNnef_ TrafficInfluence| 提供影响流量路由的能力。  \r\n  \r\nNF服务化接口\r\n\r\n在5G标准规范的系统架构中引入了服务化接口（即SBI(Service Based Interface, 基于服务的接口)）的概念，来表述一个NF提供其所具有的服务（或服务集合）给其他NF使用的方式。在5G标准中一般采用Nxxx（如Namf，Nudm等）的方式表达。\r\n\r\nSBI接口使用HTTP/2协议，统一了信令接口的协议和操作行为，提供了接口功能扩展能力、接口访问性能自适应调整能力，以及接口安全互操作能力。SBI接口协议栈如图3所示。\r\n\r\n图3 SBI接口协议栈\r\n\r\n5GC中涉及的服务化接口说明参见表3。\r\n\r\n表3 服务化接口说明接口| 接口  \r\n---|---  \r\nNnssf| NSSF提供的服务化接口  \r\nNnef| NEF提供的服务化接口  \r\nNnrf| NRF提供的服务化接口  \r\nNpcf| PCF提供的服务化接口  \r\nNudm| UDM提供的服务化接口  \r\nNudr| UDR提供的服务化接口  \r\nNausf| AUSF提供的服务化接口  \r\nNamf| AMF提供的服务化接口  \r\nNsmf| SMF提供的服务化接口  \r\n  \r\n服务化通信模型\r\n\r\n服务化架构提供了Request-Response方式和Subscribe-Notify方式两种服务化通信模型。\r\n\r\n  * Request-Response方式\r\n\r\nRequest-Response方式的服务化通信模型如图4所示，NF-A作为消费者（Consumer）通过Request请求NF-B的某个服务，NF-B作为生产者（Producer）。NF-B根据NF-A的请求通过Response为其提供相应的NF Service服务。NF-B为完成NF-A的服务请求，也可以向其他NF请求服务。\r\n\r\n图4 Request-Response方式\r\n\r\n  * Subscribe-Notify方式\r\n\r\n    * 方式一\r\n\r\n如图5所示，NF-A作为消费者（Consumer）通过Subscribe向NF-B订阅某个服务，NF-B作为生产者（Producer）。多个NF可以同时订阅NF-B的某个服务。NF-B通过Notify通知NF-A及其他订阅了此服务的NF相关信息。", "answer": "uMAC的3G的媒体面报文处理由服务组件 `sc-mmesgsn-up` 负责处理。"}
{"id": 80, "query": "开启全量日志上报需要开启license项是哪个？", "recall": "[1]:3305504773 License容灾告警\r: 3305504773 License容灾告警\r\n\r\n告警描述\r\n\r\n当License授权项使用量大于License基础容量时，上报此告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n授权项| License授权项  \r\n使用量| License使用量  \r\n基础容量| License基础容量  \r\n  \r\n可能原因\r\n\r\nLicense容灾容量超限。\r\n\r\n系统影响\r\n\r\nLicense容灾容量超限，业务将无法接入。\r\n\r\n处理建议\r\n\r\n联系中兴通讯技术支持，对容灾容量超限的License扩容。\n\n[2]:3305504773 License容灾告警\r: 3305504773 License容灾告警\r\n\r\n告警描述\r\n\r\n当License授权项使用量大于License基础容量时，上报此告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n授权项| License授权项  \r\n使用量| License使用量  \r\n基础容量| License基础容量  \r\n  \r\n可能原因\r\n\r\nLicense容灾容量超限。\r\n\r\n系统影响\r\n\r\nLicense容灾容量超限，业务即将无法接入。\r\n\r\n处理建议\r\n\r\n联系中兴通讯技术支持，对容灾容量超限的License扩容。\n\n[3]:License流控\r: License流控\r\n\r\n应用场景\r\n\r\n接收请求超过系统License设置时，通过控制入向流控防止拥塞恶化造成整系统瘫痪，保证业务稳定。\r\n\r\n保护对象\r\n\r\nCGF\r\n\r\n流控原理\r\n\r\n流量控制与License功能融合，当每个流控检测周期（100秒）已接收到的话务量超过License最大处理话务量，进行流控，该粒度的后续时间都不再处理UDP(User Datagram Protocol, 用户数据报协议)的socket缓存话单。\r\n\r\n防御策略\r\n\r\n本功能默认开启。当每个流控检测周期的话务量超过License最大处理话务量，进行流控。当一个检测周期（1800秒）内流控次数达到指定次数（默认3次）时，上报告警。\r\n\r\n推荐使用默认配置。\r\n\r\n配置方法\r\n\r\n推荐采用默认配置。\r\n\r\nLicense流控的开关，设置在/global/bill/conf/nmbsys.ini文件中。\r\n    \r\n    \r\n    [FlowControl]\r\n    FlowControlSwitch=1 /*开启license流控*/\r\n    CheckPeriod=100    /*流控检测周期*/\r\n    ThresholdTimes=3   /*一个检测周期内每秒话务量超过license设置的次数才上报告警*/\r\n    AlarmPeriod=1800   /*上报告警检测周期*/\n\n[4]:2114322560 License项缺失\r: 2114322560 License项缺失\r\n\r\n告警描述\r\n\r\n根据License模板中的License项，判断当前环境的License文件中是否有缺失项，如有缺失上报此告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：严重\r\n\r\n  * 告警类型：设备告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称 | 参数含义  \r\n---|---  \r\n缺失的License项 | 缺失的License项名称。  \r\n  \r\n可能原因\r\n\r\nLicense文件中License项存在缺失。\r\n\r\n系统影响\r\n\r\n系统将按默认容量接入用户和eNodeB。\r\n\r\n处理建议\r\n\r\n联系中兴通讯技术支持重新申请License。\n\n[5]:License流控\r: License流控\r\n\r\n应用场景\r\n\r\n接收请求超过系统License设置时，通过控制入向流控防止拥塞恶化造成整系统瘫痪，保证业务稳定。\r\n\r\n保护对象\r\n\r\nCGF\r\n\r\n流控原理\r\n\r\n流量控制与License功能融合，当每个流控检测周期（100秒）接收到的话务量超过License最大处理话务量，将不再接收ACR，向前台网元回复resultCode为3004（Diameter too busy）的ACA，网元会处理此类回复消息。\r\n\r\n防御策略\r\n\r\n本功能默认开启。当每个流控检测周期的话务量超过License最大处理话务量，进行流控。当一个检测周期（1800秒）内流控次数达到指定次数（默认3次）时，上报告警。\r\n\r\n推荐使用默认配置。\r\n\r\n配置方法\r\n\r\n推荐采用默认配置。\r\n\r\nLicense流控的开关，设置在/global/bill/conf/nmbsys.ini文件中。\r\n    \r\n    \r\n    [FlowControl]\r\n    FlowControlSwitch=1 /*开启license流控*/\r\n    CheckPeriod=100    /*流控检测周期*/\r\n    ThresholdTimes=3   /*一个检测周期内每秒话务量超过license设置的次数才上报告警*/\r\n    AlarmPeriod=1800   /*上报告警检测周期*/", "answer": "不确定。上下文信息中并未提供关于开启全量日志上报需要开启的具体license项的描述。"}
{"id": 81, "query": "EMSPlus Logging产品架构中数据分发层的功能是什么？", "recall": "[1]:系统架构\r: 系统架构\r\n\r\nEMSPlus（Logging）系统的架构如图1所示。\r\n\r\n图1 系统架构\r\n\r\nEMSPlus（Logging）系统的组成说明参见表1。\r\n\r\n表1 节点说明节点类型| 节点说明  \r\n---|---  \r\nFTU| 文件转换单元，将文件接口的日志转换为消息接口的消息发送给MDS(Message Dispatch Service, 消息分发服务)。  \r\nMDS(Message Dispatch Service, 消息分发服务)| 消息分发服务节点。  \r\nASC(Access Service Class, 接入服务等级)| SMF(Session Management Function, 会话管理功能)/UPF(User Plane Function, 用户平面功能)数据关联服务器  \r\nDCU(Data Collection Unit, 数据采集单元)| 数据采集单元，实现对IPDR(Internet Protocol Detail Record, 互联网协议详细记录)/Logging数据接收、清洗、合并、聚集、推送等。  \r\nMAN(Manager Node, 管理节点)| EMSPlus（Logging）的主控模块。  \r\nDPU(Data Processing Unit, 数据处理单元)| 数据库节点。  \r\n  \r\n整体部署可分为5个层次：\r\n\r\n  * 数据源\r\n\r\n负责从多种网元接口采集数据。ZTE(Zhongxing Telecommunications Equipment, 中兴通讯)网元直接上报CHR(Call History Record, 呼叫历史记录)/DPI(Deep Packet Inspection, 深度包检测)数据给数据分发层， 分发层进行编码、组包，转成需要的数据格式，再发给数据采集层处理。\r\n\r\n  * 数据分发层\r\n\r\n消息分发服务。FTU将文件转换为消息分发到不同的MDS节点上，MDS则按照配置的不同分发策略，将数据分发到指定的数据采集单元。\r\n\r\n  * 数据采集层\r\n\r\n数据采集节点。ASC在5G C/U分离组网场景下，将控制数据和用户数据进行过滤和关联。DCU实现对MDS或者ASC关联后的数据进行清洗、聚集、推送等。\r\n\r\n  * 数据统计层\r\n\r\n实现CHR/DPI原始记录数据和KPI数据的存储和挖掘分析，还可处理用户登录、权限控制、日志管理及数据导出等工作。\r\n\r\n  * 数据呈现层\r\n\r\n客户端采用Web方式，面向客服、运维、网管、市场多个部门，提供了权限控制功能。针对不同角色，开放相应界面和操作。\r\n\r\n\r\n\r\n\r\n系统部署原则：\r\n\r\n  * IPDR的NAT(Network Address Translation, 网络地址转换)日志来源于FireWall或者CGNAT路由器，NAT日志来源只接收两者之一，即现场实施时，NAT只能在一个设备上启用。\r\n\r\n  * IPDR的日志存储功能和上网溯源功能使用相同的处理模块。\r\n\r\n  * 支持分布式架构，通过增加MDS、ASC、DCU、DPU节点实现平滑扩容。\n\n[2]:系统架构\r: 系统架构\r\n\r\nEMSPlus（Reporting）软件系统采用多层架构分为数据源、数据分发层、数据采集层、数据统计层、数据呈现层，如图1所示。\r\n\r\n图1 系统架构\r\n\r\n整体部署各层说明如下：\r\n\r\n  * 数据源\r\n\r\n负责从多种网元接口采集数据。ZTE(Zhongxing Telecommunications Equipment, 中兴通讯)网元直接上报CHR(Call History Record, 呼叫历史记录)/DPI(Deep Packet Inspection, 深度包检测)数据给数据分发层，分发层进行编码、组包，转成需要的数据格式，再发给数据采集层处理。\r\n\r\n  * 数据分发层\r\n\r\n消息分发服务。FTU将文件转换为消息分发到不同的MDS(Message Dispatch Service, 消息分发服务)节点上，MDS则按照配置的不同分发策略，将数据分发到指定的数据采集单元。\r\n\r\n  * 数据采集层\r\n\r\n数据采集节点。ASC在5G C/U分离组网场景下，将控制数据和用户数据进行过滤和关联。DCU(Data Collection Unit, 数据采集单元)实现对MDS或者ASC关联后的数据进行清洗、聚集、推送等。\r\n\r\n  * 数据统计层\r\n\r\n实现CHR/DPI原始记录数据和KPI数据的存储和挖掘分析，还可处理用户登录、权限控制、日志管理及数据导出等工作。\r\n\r\n  * 数据呈现层\r\n\r\n客户端采用Web方式，面向客服、运维、网管、市场多个部门，提供了权限控制功能。针对不同角色，开放相应界面和操作。\n\n[3]:配置外部网元数据分发\r: 配置外部网元数据分发\r\n\r\n摘要\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)节点按照配置的不同分发策略，将数据源上报的数据分发到指定数据清洗服务器。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSEXTNEDATADSP命令，配置MDS节点的外部网元数据分发，如图1所示。\r\n\r\n图1 ADD MDSEXTNEDATADSP命令表1 ADD MDSEXTNEDATADSP命令参数参数名称| 参数说明  \r\n---|---  \r\nNE Type| MDS节点接入的网元类型，例如：\r\n     * MDS节点分发xGW数据时，选择XGW (XGW)。\r\n     * MDS节点分发CGNAT数据时，选择CGNat (CGNAT)。\r\n     * MDS节点接收Fortinet数据源时，选择Fortinet (FORTINET)。\r\n     * MDS节点分发FTU的数据源时，选择FTU处理的相应网元类型。  \r\nGroup ID| 同一目标类型的多个IP地址可以设置为一个组，MDS对同一组的多个IP地址（IP地址设置参见ADD MDSDSPIP命令）进行负载均衡数据分发。通过SHOW MDSDSPIP命令查询组号对应的模块类型和数据分发IP地址。不同网络平面网元数据的目标类型配置为不同组号。  \r\nTarget| 数据分发目标的类型。对于EMSPlusLog网元，选择Send_TO_MU (SEND_to_MU)。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSEXTNEDATADSP:NETYPE=<MDS节点接入的网元类型>,GROUPID=<组号>,DESTINATION=<数据分发目标的类型>\n\n[4]:实现原理\r: 实现原理\r\n\r\n系统架构\r\n\r\n针对GDPR的影响，EMSPlus系统结构如图1所示。\r\n\r\n图1 GDPR安全系统架构图\r\n\r\nEMSPlus系统采用层次结构，包括NE(Network Element, 网络单元（网元）)层、数据采集层、数据处理和客户端。\r\n\r\n  * NE层\r\n\r\nNE层以TCP(Transmission Control Protocol, 传输控制协议)方式向DCU(Data Collection Unit, 数据采集单元)提供原始数据，实现了关键的CHR(Call History Record, 呼叫历史记录)数据采集、缓冲和分发。\r\n\r\n  * 数据采集层\r\n\r\nDCU(Data Collection Unit, 数据采集单元)与NE直接相连， 接收NE发送的实时CHR/UDR(User Data Record, 用户数据记录)信息，提取和转换关键数据，并将结果输出到文件中，DPU(Data Processing Unit, 数据处理单元)通过FTP(File Transfer Protocol, 文件传输协议)/SFTP(Secure File Transfer Protocol, 安全文件传输协议)方式获取。\r\n\r\nDCU产生的CHR文件不需要进行加密。\r\n\r\n  * 数据处理层\r\n\r\nDPU(Data Processing Unit, 数据处理单元)负责DCU与客户端之间的数据传输，实现全网监控和分析。 DPU实现CHR/UDR数据存储、挖掘和分析，处理用户登录、权限控制、日志管理、数据导出等。\r\n\r\n    * GBase数据库采用列式加密。\r\n\r\n    * CHR数据以SFTP方式加载到数据库中。\r\n\r\n    * 数据库访问启用SSL(Secure Sockets Layer, 安全套接字层)通道。\r\n\r\n    * 通过数据库软件SQLite加密用户信息。\r\n\r\n  * 展现层\r\n\r\n客户端采用Web模式，面向客户服务、OAM(Operation, Administration and Maintenance, 操作管理与维护)、OSS(Operation Support System, 运营支撑系统)、市场等部门，为不同角色提供权限控制功能。\r\n\r\n    * Web采用HTTPS(Hypertext Transfer Protocol Secure, 超文本传输安全协议)方式，支持TLS(Transport Layer Security, 传输层安全) 2.0。\r\n\r\n    * 报表查询支持屏蔽相关用户信息。\r\n\r\n    * 对导出权限进行控制。\r\n\r\n    * 使用匿名化工具加密个人信息。\r\n\r\n\r\n\r\n\r\n涉及网元\r\n\r\n该特性由本网元单独实现，无需其他网元的配合。\r\n\r\n本网元实现\r\n\r\nEMSPlus通过License对用户进行鉴权。在License个人数据保护功能开关打开时，客户端呈现的个人数据，区分用户明文显示和匿名化显示权限，显示的结果不同；用户在导出数据时，区分用户明文导出和匿名化导出权限，导出的结果不同。\r\n\r\nEMSPlus功能实现如下：\r\n\r\n  * 提供个人数据保护License，如果GDPR开关没有打开，则原有功能不变。\r\n\r\n  * 个人数据保护License开启：\r\n\r\n对于密钥管理，EMSPlus接入EMS(Element Management System, 网元管理系统)场景，EMSPlus从EMS上获取密钥；不接入EMS场景，EMSPlus提供本地密钥中心。\r\n\r\n对于服务端数据，EMSPlus系统运行记录的日志中，个人数据匿名化处理。\r\n\r\n对于客户端数据，用户配置数据、报表查询数据、报表导出数据、操作日志查询区分用户明文显示、匿名显示；操作日志导出区分明文导出、匿名导出权限。\r\n\r\n\r\n\r\n\r\n业务流程\r\n\r\n  1.\n\n[5]:术语\r: 术语\r\n\r\n表1 术语术语| 含义  \r\n---|---  \r\nEMSPlus| 电信云及核心网增值网管。  \r\nMDS(Message Dispatch Service, 消息分发服务)| 消息分发服务，网元将消息发送到MDS，MDS对网元的消息进行分发到各个MU(Merging Unit, 合并单元)上。  \r\nMU(Merging Unit, 合并单元)| 数据采集单元，与具体网元对接，实现事实数据的接收与处理（清洗、聚集）。  \r\nDPU(Data Processing Unit, 数据处理单元)| 负责数据的存储和查询，采用GBase数据库。  \r\nMAN(Manager Node, 管理节点)| 为整个EMSPlus提供配置数据管理和进行数据推送。  \r\nFTU| 文件转换单元，将文件接口的日志转换为消息接口的消息发送给MDS。  \r\nASC| 消息合并单元，将SMF消息与UPF消息关联合并。", "answer": "EMSPlus Logging产品架构中数据分发层的功能主要包括：\n\n1. 消息分发服务：负责接收来自文件转换单元（FTU）的消息，并将其分发到不同的消息分发服务节点（MDS）。\n\n2. 分发策略：MDS节点根据配置的不同分发策略，将数据分发到指定的数据采集单元。\n\n3. 数据路由：确保来自不同网元的数据能够被正确地发送到对应的数据采集节点，以便进一步处理。"}
{"id": 82, "query": "CPU使用率过高的影响有哪些？", "recall": "[1]:2365981185 CPU使用率超标\r: 2365981185 CPU使用率超标\r\n\r\n告警描述\r\n\r\n在监控时间点检测到的OMM(Operation & Maintenance Module, 操作维护模块)系统服务器CPU(Central Processing Unit, 中央处理器)使用率超过设定的门限时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：主要\r\n\r\n  * 告警类型：设备告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\nCPU告警门限| CPU使用率告警门限，对应查询命令SHOW CPUPARA中的“CPU使用率告警门限（%）”字段。  \r\nCPU当前使用率| CPU当前使用率，多CPU时取平均值，单位%。  \r\n占用CPU最多的5个进程| 占用CPU最多的5个进程，类似：CPURATE=6.0,PID=27759,COMMAND=omsservice;CPURATE=1.0,PID=27996,COMMAND=fmservice;CPURATE=0.0,PID=28958,COMMAND=bash;CPURATE=0.0,PID=28955,COMMAND=sshd;CPURATE=0.0,PID=28764,COMMAND=audispd。 其中：CPURATE表示此进程当前的CPU使用率，PID表示进程ID号，COMMAND表示进程名称。  \r\n  \r\n可能原因\r\n\r\nCPU资源监控参数设置监控开关为开，连续N次（N= CPU使用率连续越界次数告警门限，连续越界次数可通过SET CPUPARA命令设置），在监控时间点监测到的OMM(Operation & Maintenance Module, 操作维护模块)服务器CPU使用率超过设定的门限，引发CPU使用率超标告警。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)中创建了大量的性能统计任务，任务统计粒度过小，任务对象数量过多。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)中创建了有大量消息上报的信令跟踪任务。\r\n\r\n  * CPU监控参数设置不合理。\r\n\r\n  * 话务高峰时，OMM(Operation & Maintenance Module, 操作维护模块)服务器性能统计及信令跟踪等引起CPU占用率高。\r\n\r\n  * 进行大批量的操作维护项目（如：通过批命令脚本放号等）。\r\n\r\n  * 正在进行备份恢复操作。\r\n\r\n  * 当前存在大量告警上报。\r\n\r\n  * 当前OMM(Operation & Maintenance Module, 操作维护模块)服务器管理的网元超过规划负荷。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\nCPU使用率过高，有可能会导致：\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常安装、升级。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法登录。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常记录日志。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常运行，影响操作维护。\r\n\r\n\r\n\r\n\r\n处理建议\r\n\r\n  1. 通过人机命令SHOW PMSYSTASK检查网管系统中是否存在大量已激活的性能任务，并且任务粒度比较小（5分钟粒度）、对象过多（超过500）。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2.\n\n[2]:OMM上报“CPU使用率超标(2365981185)” \r: 按照系统要求进行调整，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤11\r\n\r\n  11. 根据需要判断是否需要监控CPU资源占用情况（如果当前系统正在执行某特殊操作导致CPU过高，可以暂时不对CPU资源占用情况进行监控，例如：执行备份恢复或批量放号操作）。\r\n\r\n     * 是→步骤13\r\n\r\n     * 否→步骤12\r\n\r\n  12. 通过人机命令SET CPUPARA，将监控开关修改为关，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤13\r\n\r\n  13. 联系中兴通讯技术支持人员。\n\n[3]:2365981187 硬盘使用率超标一级告警\r: 2365981187 硬盘使用率超标一级告警\r\n\r\n告警描述\r\n\r\n针对某一特定分区，监控参数中监控类型为按绝对值监控或按百分比监控，在监控时间点监测到对应的使用空间超过设定的监控阈值－严重（非0值）时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：严重\r\n\r\n  * 告警类型：设备告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n分区描述| 上报该告警的硬盘的分区情况，对应SHOW PARTITIONPARA命令中的分区描述字段。  \r\n监控阈值（严重）| 严重级别的监控阈值，对应SHOW PARTITIONPARA命令中的监控阈值－严重字段。  \r\n使用空间| 已使用空间。\r\n\r\n  * 如果监控类型选择按绝对值监控，则此信息对应SHOW PARTITIONPARA命令中的使用空间（MB）字段。\r\n  * 如果监控类型选择按百分比监控，则此信息是由SHOW PARTITIONPARA命令中的使用空间（MB）字段除以总空间（MB）获取的百分比值。\r\n\r\n  \r\n  \r\n可能原因\r\n\r\n  * 性能数据导出清理参数设置不合理，周期过长，推荐设置为7天。\r\n\r\n  * 告警数据导出清理参数设置不合理，周期过长，推荐设置为7天。\r\n\r\n  * 日志数据导出清理参数设置不合理，周期过长，推荐设置为60天。\r\n\r\n  * CHR(Call History Record, 呼叫历史记录)日志记录保存时间过长。\r\n\r\n  * 临时文件保存时间过长。\r\n\r\n  * 硬盘监控参数设置不合理。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n硬盘使用率过高，有可能会导致：\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常安装、升级。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法登录。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常记录日志。\r\n\r\n  * OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常运行，影响操作维护。\r\n\r\n\r\n\r\n\r\n处理建议\r\n\r\n  1. 使用SHOW PMCLEANPARA（或者SHOW PMTYPECLEANPARA）命令检查性能数据导出清理参数设置，确认保存天数是否过长。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. 使用SET PMCLEANPARA（或者SET PMTYPECLEANPARA）命令适当调整保存天数（推荐设置为7天），待数据清理完成后，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 使用SHOW FMCLEARPARA命令检查告警数据导出清理参数设置，确认保存天数是否过长。\r\n\r\n     * 是→4\r\n\r\n     * 否→5\r\n\r\n  4. 使用SET FMCLEARPARA命令适当调整保存天数（推荐设置为7天），待数据清理完成后，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→5\r\n\r\n  5. 使用SHOW LOGCLEAR PARAM命令检查日志数据导出清理参数设置，确认保存天数是否过长。\r\n\r\n     * 是→6\r\n\r\n     * 否→7\r\n\r\n  6.\n\n[4]:OMM上报“CPU使用率超标(2365981185)” \r: OMM上报“CPU使用率超标(2365981185)” \r\n\r\n故障现象\r\n\r\nOMM(Operation and Maintenance Management, 操作维护管理)上报“CPU使用率超标(2365981185)”。\r\n\r\n可能原因\r\n\r\nCPU(Central Processing Unit, 中央处理器)资源监控参数设置监控开关为开，连续N次（N=CPU使用率连续越界告警门限的次数，连续越界次数可通过SET CPUPARA命令设置），在监控时间点监测到的网管服务器CPU使用率超过设定的门限，引发CPU使用率超标告警。\r\n\r\n可能原因如下：\r\n\r\n  * 存在大量的性能统计任务，任务统计粒度过小，任务对象数量过多。\r\n\r\n  * 存在大量消息上报的信令跟踪任务。\r\n\r\n  * CPU监控参数设置不合理。\r\n\r\n  * 话务高峰。\r\n\r\n  * 进行大批量的网管操作（如：通过批命令脚本放号）。\r\n\r\n  * 正在进行网管备份恢复操作。\r\n\r\n  * 当前存在大量告警上报。\r\n\r\n  * 当前网管服务器管理的网元超过规划负荷。\r\n\r\n\r\n\r\n\r\n处理步骤\r\n\r\n  1. 通过人机命令SHOW PMSYSTASK检查网管系统中是否存在大量已激活的性能任务，并且任务粒度比较小、对象过多。\r\n\r\n     * 是→步骤2\r\n\r\n     * 否→步骤3\r\n\r\n  2. 根据实际需要，通过人机命令SET PMSYSTASK修改性能统计任务，提高任务粒度、减少对象。待修改生效后，查看告警是否恢复。\r\n     * 是→结束\r\n\r\n     * 否→步骤3\r\n\r\n  3. 进入跟踪管理界面，检查系统中是否存在消息量较大的信令跟踪任务。\r\n\r\n     * 是→步骤4\r\n\r\n     * 否→步骤5\r\n\r\n  4. 根据实际需要，暂停或删除大消息的信令跟踪任务，检查告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤5\r\n\r\n  5. 通过人机命令SHOW CPUPARA查看CPU资源监控参数设置是否合适，门限值默认为80%。\r\n\r\n     * 是→步骤7\r\n\r\n     * 否→步骤6\r\n\r\n  6. 通过人机命令SET CPUPARA修改CPU资源监控参数，按需要修改CPU告警门限值，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤7\r\n\r\n  7. 查看网管告警界面，检查网管中是否存在大量告警上报。\r\n\r\n     * 是→步骤8\r\n\r\n     * 否→步骤9\r\n\r\n  8. 根据上报的故障对系统进行修复。待故障现象消失后，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤9\r\n\r\n  9. 检查网管服务器管理的网元是否超过了系统说明书中的最大容量。\r\n\r\n     * 是→步骤10\r\n\r\n     * 否→步骤11\r\n\r\n  10. 按照系统要求进行调整，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→步骤11\r\n\r\n  11.\n\n[5]:2365981189 硬盘使用率超标三级告警\r: 2365981189 硬盘使用率超标三级告警\r\n\r\n告警描述\r\n\r\n针对某一特定分区，监控参数中监控类型为按绝对值监控或按百分比监控，在监控时间点监测到对应的使用空间超过设定的监控阈值－次要（非0值），但未超过监控阈值－主要时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：次要\r\n\r\n  * 告警类型：设备告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n分区描述| 上报该告警的硬盘的分区情况，对应SHOW PARTITIONPARA命令中的分区描述字段。  \r\n监控阈值（次要）| 次要级别的监控阈值，对应SHOW PARTITIONPARA命令中的监控阈值－次要字段。  \r\n使用空间| 已使用空间。\r\n\r\n  * 如果监控类型选择按绝对值监控，则此信息对应SHOW PARTITIONPARA命令中的使用空间（MB）字段。\r\n  * 如果监控类型选择按百分比监控，则此信息是由SHOW PARTITIONPARA命令中的使用空间（MB）字段除以总空间（MB）获取的百分比值。\r\n\r\n  \r\n  \r\n可能原因\r\n\r\n  * 性能数据导出清理参数设置不合理，周期过长，推荐设置为7天。\r\n\r\n  * 告警数据导出清理参数设置不合理，周期过长，推荐设置为7天。\r\n\r\n  * 日志数据导出清理参数设置不合理，周期过长，推荐设置为60天。\r\n\r\n  * CHR(Call History Record, 呼叫历史记录)日志记录保存时间过长。\r\n\r\n  * 临时文件保存时间过长。\r\n\r\n  * 硬盘监控参数设置不合理。\r\n\r\n\r\n\r\n\r\n系统影响\r\n\r\n硬盘使用率过高，有可能会导致：\r\n\r\n  * OMM系统无法正常安装、升级。\r\n\r\n  * OMM系统无法登录。\r\n\r\n  * OMM系统无法正常记录日志。\r\n\r\n  * OMM系统无法正常运行，影响操作维护。\r\n\r\n\r\n\r\n\r\n处理建议\r\n\r\n  1. 使用SHOW PMCLEANPARA（或者SHOW PMTYPECLEANPARA）命令检查性能数据导出清理参数设置，确认保存天数是否过长。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. 使用SET PMCLEANPARA（或者SET PMTYPECLEANPARA）命令适当调整保存天数（推荐设置为7天），待数据清理完成后，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 使用SHOW FMCLEARPARA命令检查告警数据导出清理参数设置，确认保存天数是否过长。\r\n\r\n     * 是→4\r\n\r\n     * 否→5\r\n\r\n  4. 使用SET FMCLEARPARA命令适当调整保存天数（推荐设置为7天），待数据清理完成后，查看告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→5\r\n\r\n  5. 使用SHOW LOGCLEAR PARAM命令检查日志数据导出清理参数设置，确认保存天数是否过长。\r\n\r\n     * 是→6\r\n\r\n     * 否→7\r\n\r\n  6.", "answer": "CPU使用率过高可能会导致以下影响：\n\n1. OMM(Operation & Maintenance Module, 操作维护模块)系统无法正常安装、升级。\n2. OMM系统无法登录。\n3. OMM系统无法正常记录日志。\n4. OMM系统无法正常运行，影响操作维护。\n5. 可能会导致话务高峰时，OMM服务器性能统计及信令跟踪等引起CPU占用率高。\n6. 影响大批量的操作维护项目（如：通过批命令脚本放号等）的执行。\n7. 影响正在进行备份恢复操作的正常进行。\n8. 当前存在大量告警上报时，可能加剧系统负担。\n9. 当前OMM服务器管理的网元超过规划负荷时，可能导致系统性能下降。"}
{"id": 83, "query": "安装前的准备工作有哪些？", "recall": "[1]:安装前准备\r: 安装前准备\r\n\r\n子主题：\r\n\r\n  * 获取版本文件\r\n\r\n  * 客户端准备\r\n\r\n  * VIM侧的数据准备\r\n\r\n  * MANO侧的数据准备\r\n\r\n  * 查询VNFM用户的权限\n\n[2]:安装前准备\r: 安装前准备\r\n\r\n子主题：\r\n\r\n  * 获取版本文件\r\n\r\n  * 客户端准备\r\n\r\n  * VIM侧的数据准备\r\n\r\n  * MANO侧的数据准备\r\n\r\n  * 查询VNFM用户的权限\n\n[3]:安装流程\r: 安装流程\r\n\r\nZXUN uMAC虚拟化的软件安装流程参见表1。\r\n\r\n表1 虚拟化软件安装流程说明步骤| 操作| 说明| 参考  \r\n---|---|---|---  \r\n1| 安装前准备| 安装前的准备工作。| 安装前准备  \r\n2| 创建虚机资源| 创建项目以及创建项目对应的网络平面、子网。| 创建虚拟资源  \r\n3| 部署VNF| 注册VNF版本包以及实例化VNF，完成VNF所需虚拟资源的创建和业务程序的自动部署。| VNF的部署\n\n[4]:安装前准备\r: 安装前准备\r\n\r\n子主题：\r\n\r\n  * 软件准备\r\n\r\n  * 获取用户名和密码\r\n\r\n  * 在VNFM上创建API用户\n\n[5]:软件安装（MANO）\r: 软件安装（MANO）\r\n\r\n子主题：\r\n\r\n  * 安装概述\r\n\r\n  * 安装前准备\r\n\r\n  * 网络数据规划\r\n\r\n  * 创建虚拟资源\r\n\r\n  * VNF的部署\r\n\r\n  * 部署参数配置说明\r\n\r\n  * 配置示例\r\n\r\n  * 参考", "answer": "安装前的准备工作包括以下方面：\n\n1. 获取版本文件。\n2. 客户端准备。\n3. VIM侧的数据准备。\n4. MANO侧的数据准备。\n5. 查询VNFM用户的权限。\n6. 软件准备。\n7. 获取用户名和密码。\n8. 在VNFM上创建API用户。"}
{"id": 84, "query": "怎么查看是否有用户尝试执行未授权的命令？", "recall": "[1]:2365980938 用户尝试执行未授权命令\r: 2365980938 用户尝试执行未授权命令\r\n\r\n告警描述\r\n\r\n当系统检测到用户尝试执行未授权命令时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n用户名| 执行命令的用户名，对应查询命令SHOW CMDLOG中的“操作员”字段。  \r\n命令| 命令，对应查询命令SHOW CMDLOG中的“操作详细信息”字段。  \r\n  \r\n可能原因\r\n\r\n用户尝试执行命令但却没有该命令的执行权限。\r\n\r\n系统影响\r\n\r\n无\r\n\r\n处理建议\r\n\r\n  1. 执行SHOW CMDLOG命令查看是否有用户尝试执行未授权的命令。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. 执行SHOW ADMCCLEAR命令查询自动恢复时间，确认经过自动恢复时间后告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 联系中兴通讯。\n\n[2]:2365980940 用户尝试执行非法命令\r: 2365980940 用户尝试执行非法命令\r\n\r\n告警描述\r\n\r\n当系统检测到用户尝试执行非法命令时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n用户名| 执行命令的用户名，对应查询命令SHOW CMDLOG中的“操作员”字段。  \r\n命令| 命令，对应查询命令SHOW CMDLOG中的“操作详细信息”字段。  \r\n  \r\n可能原因\r\n\r\n用户尝试执行系统中未定义的非法命令。\r\n\r\n系统影响\r\n\r\n无\r\n\r\n处理建议\r\n\r\n  1. 执行SHOW CMDLOG命令查看是否有用户尝试执行未授权的命令。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. 执行SHOW ADMCCLEAR命令查询自动恢复时间，确认经过自动恢复时间后告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 联系中兴通讯。\n\n[3]:2365980939 用户执行危险命令\r: 2365980939 用户执行危险命令\r\n\r\n告警描述\r\n\r\n当系统检测到用户执行危险命令时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n用户名| 执行命令的用户名，对应查询命令SHOW CMDLOG中的“操作员”字段。  \r\n命令| 命令，对应查询命令SHOW CMDLOG中的“操作详细信息”字段。  \r\n  \r\n可能原因\r\n\r\n用户执行了可能对系统功能产生影响的危险命令。\r\n\r\n系统影响\r\n\r\n无\r\n\r\n处理建议\r\n\r\n  1. 执行SHOW CMDLOG命令查看是否有用户尝试执行未授权的命令。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. 执行SHOW ADMCCLEAR命令查询自动恢复时间，确认经过自动恢复时间后告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 联系中兴通讯。\n\n[4]:2365980937 非法用户登录\r: 2365980937 非法用户登录\r\n\r\n告警描述\r\n\r\n当系统检测到用户因登录用户名或密码错误导致登录失败时，上报本告警。\r\n\r\n告警属性\r\n\r\n  * 告警级别：警告\r\n\r\n  * 告警类型：处理错误告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\n用户名| 登录的用户名，对应查询命令SHOW SCRTLOG中的“操作员”字段。  \r\n终端类型| 终端类型，对应查询命令SHOW SCRTLOG中的“接入方式”字段。  \r\n登录IP| 登录的IP地址，对应查询命令SHOW SCRTLOG中的“IP地址”字段。  \r\n鉴权方式| 进行鉴权的方式。  \r\n  \r\n可能原因\r\n\r\n用户尝试登录的用户名或密码不正确。\r\n\r\n系统影响\r\n\r\n可能存在非法用户尝试登录系统。\r\n\r\n处理建议\r\n\r\n  1. 执行SHOW SCRTLOG命令查看是否有用户尝试登录系统。\r\n\r\n     * 是→2\r\n\r\n     * 否→3\r\n\r\n  2. 执行SHOW ADMCCLEAR命令查询自动恢复时间，确认经过自动恢复时间后告警是否恢复。\r\n\r\n     * 是→结束\r\n\r\n     * 否→3\r\n\r\n  3. 联系中兴通讯。\n\n[5]:内部调测命令\r: | 否  \r\nSET ROLE| 修改角色| 该命令用于修改一个用户自定义角色的基本参数。当角色的基本信息发生变化时，可以使用此命令进行修改。命令执行成功后，角色的基本信息被修改。| 否  \r\nDEL ROLE| 删除角色| 该命令用于删除一个用户自定义的角色。当删除角色成功后，系统会将其角色标识回收；同时解除和角色包含的命令集的关联。| 否  \r\nCOPY ROLE| 复制角色| 该命令用于增加一个具有已经存在角色属性的新角色。当需要增加的角色信息和已经存在的角色信息很接近时，可以通过先复制角色，再修改部分角色属性的方式来增加新角色。| 否  \r\nSHOW ROLE CMDSET| 查询角色命令集| 该命令用于查询角色与命令集的对应关系，当需要查看角色中包含的命令集列表时，可以通过此命令查看。若不指定角色标识或名称，则表示查询用户有权限的所有角色与命令集的对应关系。| 否  \r\nADD ROLE CMDSET| 增加角色命令集| 该命令用于给一个用户自定义角色授权命令集。当需要给某个角色增加更多的命令执行权限时，可以使用此命令。执行成功后，包含此角色的用户可以执行新增加进来的命令集中的命令。| 否  \r\nDEL ROLE CMDSET| 删除角色命令集| 该命令用于删除一个用户自定义角色所拥有的命令集。当需要给某个角色减少一些操作命令的权限时，可以使用此命令。命令执行成功后，拥有此角色的用户将不能执行命令集中包含的命令。| 否  \r\nSHOW ROLE USER| 查询角色对应的用户| 该命令用于查询某角色被哪些用户使用。当需要知道某个角色被分配给哪些用户使用时，可以使用此命令进行查询。| 否  \r\nSHOW USER| 查询用户| 该命令用于查询用户的详细信息，查询对象可以是OMM系统中的用户信息以及EMS系统下发的用户信息。| 否  \r\nADD USER| 增加用户| 该命令用于向OMM增加一个本地用户。当需要admin之外的人员来操作管理OMM时，采用此命令增加用户。增加用户成功后，还需要执行ADD USER ROLE命令为新用户分配角色信息。分配完成后，新用户才能登录OMM来维护管理OMM系统。| 否  \r\nSET USER| 修改用户| 该命令用于修改一个用户的信息。当用户信息发生变更时，使用该命令修改用户信息。| 否  \r\nDEL USER| 删除用户| 该命令用于删除一个自定义用户。当OMM系统不需要某用户时，可以删除用户。| 否  \r\nCOPY USER| 复制用户| 该命令用于增加一个具有已经存在用户属性的新用户。当需要增加的用户信息和已经存在的用户信息很接近时，可以通过先复制用户，再修改部分用户属性的方式来增加新用户。| 否  \r\nSHOW USER ROLE| 查询用户角色| 该命令用于查询用户具有的角色信息。当需要知道用户具有的操作角色集时，可以使用此命令进行查询。命令执行成功后，会将用户具有的所有角色信息都显示出来。| 否  \r\nADD USER ROLE| 增加用户角色| 该命令用于给一个自定义用户授权角色。", "answer": "执行SHOW CMDLOG命令可以查看是否有用户尝试执行未授权的命令。"}
{"id": 85, "query": "服务化架构由一系列业务服务NFS和服务组件SC构成。uMAC的业务类服务包含哪些服务", "recall": "[1]:服务组成\r: 服务组成\r\n\r\n业务服务和服务组件说明\r\n\r\n为了适应5GC网络的灵活性、扩展性，ZXUN uMAC系统采用服务化架构。服务化架构由一系列业务服务NFS(Network Function Service, 网络功能服务)和服务组件SC(Service Component, 服务组件)构成。\r\n\r\n  * 业务服务，是NF的具体功能，能够独立完成某个具体功能的软件实体，服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征，多个业务服务组合可实现一定的业务功能。\r\n\r\n  * 服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。\r\n\r\n\r\n\r\n\r\n业务服务模型和资源模型的映射关系\r\n\r\n业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（IaaS形态），也可以运行在POD资源模型（CaaS形态），业务功能逻辑呈现一致，底层的部署方式不同。\r\n\r\n服务组件的运行载体为VRU(Virtual Running Unit, 虚拟运行单元)，VRU在IaaS形态部署时呈现为容器实例，在CaaS形态部署时呈现为POD实例。\r\n\r\n业务服务模型和资源模型的映射关系如图1所示。\r\n\r\n图1 业务服务模型和资源模型的映射关系\r\n\r\n各业务服务和服务组件介绍\r\n\r\n各业务服务及其包含的服务组件介绍参见下表。\r\n\r\n服务分类| 服务| 说明| 归属NF| 服务组件| 功能描述  \r\n---|---|---|---|---|---  \r\n平台支撑&网管运维类服务| Service Governance| 微服务治理，又称CommonS_TMSP。| 公共服务SMF/AMF/PCF/UPF……| sc-tmsp-mgt| 管理SC，服务部署资源的编排，升级，自愈。  \r\nsc-tmsp-smc| 管理SC，服务管理，服务注册，发现，升级。  \r\nsc-tmsp-mp| 本服务配置管理，性能统计管理等。  \r\nsc-tmsp-rosng| 路由协议栈SC。  \r\nsc-tmsp-amu| 仲裁SC，对其他SC提供主备仲裁。  \r\nOperation and Maintenance| 操作维护，又称CommonS_OAM。| 公共服务SMF/AMF/PCF/UPF……| sc-oam-gateway| OAM接入网关，负责管理口http/ssh等协议接入。  \r\nsc-oam-main| OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。  \r\nsc-oam-umf| OAM统一消息上报单元，负责信令跟踪消息上报。  \r\nsc-oam-ccmf| OAM配置管理单元，负责配置数据校验、存储、同步。  \r\nsc-oam-upgrade| OAM升级管理单元，负责业务SC和OAM自身升级控制。  \r\nsc-oam-postgre| OAM数据库，负责存储OAM配置、安全、接入等数据。  \r\nsc-oam-web| 提供本地网管web服务。  \r\nAMF Management Process| 业务公共服务，又称Namf_MP。| AMF/MME/SGSN| sc-amf-mp-dba| MME/SGSN网元级配置、告警、性能统计等。\n\n[2]:服务组成\r: | AMF/MME/SGSN| sc-amf-mp-dba| MME/SGSN网元级配置、告警、性能统计等。  \r\nsc-amf-mp| 本服务SC控制单元，负责升级控制、动态命令。  \r\n接口管理&转发服务| Interface Management| 接口处理，又称CommonS_IPS。| 公共服务SMF/AMF/PCF/UPF……| sc-ips-mp| 本服务SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。  \r\nsc-ips| 转发接口服务，提供报文分发服务以及IP路由转发功能。  \r\nHTTP Service| HTTP服务，又称CommonS_HTTP_LB| 公共服务SMF/AMF/PCF/UPF……| sc-http-lb-mp| 本服务SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。  \r\nsc-http-lb| HTTP协议处理，提供能力开发查询功能。  \r\nSIG Service|  信令服务，又称CommonS_SIG。| AMF/MME/SGSN| sc-sig-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-sig| SCTP、M3UA协议处理。  \r\n业务资源管理类服务| AMF Resource Management| AMF资源管理服务，又称Namf_ResourceManage。| AMF| sc-amf-rm-mp| 本服务SC控制单元，负责SC集群管理、弹性控制、升级控制、SC注册&发现、SC负荷分担。  \r\nsc-amf-rm| 全局类业务资源管理。  \r\n业务类服务| AMF Communication| AMF通讯服务，又称Namf_Communication。| AMF| sc-amf-comm-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-amf-comm| AMF通讯服务，AMF的主要流程处理，为其他NF提供访问UE和AN的能力。支持SMF发起的EBI分配请求，以便支持和EPS的互操作。  \r\nAMF MT| AMF终呼服务，又称Namf_MT。| AMF| sc-amf-mt-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-amf-mt| AMF终呼服务，执行寻呼流程，允许NF确认UE是可达的。  \r\nAMF Event Exposure| AMF事件暴露服务，又称Namf_EventExposure。| AMF| sc-amf-ee-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-amf-ee| AMF事件暴露服务，允许其他NF订阅并获取事件和统计信息通知，这些事件和统计与用户移动性相关。  \r\nAMF Location| AMF定位服务，又称Namf_Location。| AMF| sc-amf-loc-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-amf-loc| AMF定位服务，向Communication服务和MT服务提供UE位置信息订阅和通知服务。\n\n[3]:ZUF-79-02-003 NF服务发现\r: ZUF-79-02-003 NF服务发现\r\n\r\n子主题：\r\n\r\n  * 特性描述\r\n\r\n  * 特性配置\n\n[4]:ZUF-79-02 服务化架构\r: ZUF-79-02 服务化架构\r\n\r\n子主题：\r\n\r\n  * ZUF-79-02-001 5G服务化架构\r\n\r\n  * ZUF-79-02-002 NF服务管理\r\n\r\n  * ZUF-79-02-003 NF服务发现\n\n[5]:系统架构\r: 系统架构\r\n\r\nZXUN uMAC系统架构统一遵循ETSI(European Telecommunications Standards Institute, 欧洲电信标准化协会)定义的NFV(Network Functions Virtualization, 网络功能虚拟化)标准架构，提供从硬件COTS(Commercial Off The Shelf, 商用货架产品)、虚拟化平台、容器平台到VNF的端到端能力，具备全云全栈能力。\r\n\r\nZXUN uMAC是VNF的一个功能实体，提供AMF/MME/SGSN网元功能，NF的业务功能通过若干服务来承载，系统架构如图1所示。\r\n\r\n图1 uMAC系统架构\r\n\r\nNFV架构中部件组成及其功能参见下表。\r\n\r\n表1 NFV架构中部件组成及其功能部件类别| 部件名称| 部件功能简述  \r\n---|---|---  \r\n运营支撑部件| OSS(Operation Support System, 运营支撑系统)/BSS(Business Support System, 业务支撑系统)| 运营商的运营支撑和业务支撑系统。  \r\n应用管理部件| EMS(Element Management System, 网元管理系统)| VNF网元运维管理系统，可根据实际情况部署一个或多个。  \r\nNFVO(Network Functions Virtualization Orchestrator, 网络功能虚拟化编排器)| NS(Network Service, 网络服务)（Network Service，网络服务）生命周期的管理模块，实现对整个NFV基础架构、软件资源、网络服务的编排和管理，同时负责协调NS、组成NS的VNFs以及承载各VNF的虚拟资源的控制和管理。  \r\nVNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)| VNF管理模块，也就是应用管理单元，是VNF的生命周期管理部件，主要对VNF的生命周期实例化、配置、关闭、弹性、重建等进行控制。  \r\n业务网元| VNF(Virtualized Network Function, 虚拟化网络功能)| 网络功能实体，提供5G核心网控制面NF的功能，以及融合的2/3/4G功能。ZXUN uMAC提供的控制面NF包括AMF、MME、SGSN。NF在软件实现上通过各种NFS组合来承载，NFS是能够独立完成某个具体功能的软件实体，NFS包括5类：\r\n\r\n  * 信令业务类服务\r\n  * 平台支撑&网管运维类服务\r\n  * 接口管理&转发服务\r\n  * 数据存储类服务\r\n  * 业务资源管理类服务\r\n\r\n  \r\n容器平台| CIM| （可选）容器管理平台，实现容器部署及容器资源管理。  \r\n部件| VIM(Virtualized Infrastructure Manager, 虚拟化基础设施管理系统)| 提供对虚拟化基础设施的管理，主要功能包括：\r\n\r\n  * 资源的发现、虚拟资源的管理分配、故障处理等，为VNF运行提供资源支持。\r\n  * 采集和上报基础设施性能指标和相关事件。\r\n\r\n  \r\n基础设施| CloudOS| 提供虚拟化功能，将硬件物理资源虚拟成虚拟资源，供VNF使用，其中虚拟网络支持SR-IOV/DVS。  \r\nCOTS| 通用COTS设备，包括服务器、存储、网络设备。", "answer": "uMAC的业务类服务包含以下服务：\n\n1. AMF Communication（AMF通讯服务，又称Namf_Communication）\n2. AMF MT（AMF终呼服务，又称Namf_MT）\n3. AMF Event Exposure（AMF事件暴露服务，又称Namf_EventExposure）\n4. AMF Location（AMF定位服务，又称Namf_Location）"}
{"id": 86, "query": "服务化架构由一系列业务服务NFS和服务组件SC构成。uMAC的MMESGSN Sevice服务包含哪些SC", "recall": "[1]:服务组成\r: sc-amf-loc| AMF定位服务，向Communication服务和MT服务提供UE位置信息订阅和通知服务。  \r\nMMESGSN Sevice| MMESGSN服务，又称NFS_MMESGSN。| MME/SGSN| sc-mmesgsn-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-mmesgsn-oam-dba| MME/SGSN服务中负责配置功能。  \r\nsc-mmesgsn-cmp| MME/SGSN服务的主业务处理SC，负责2/3/4G业务处理。  \r\nsc-mmesgsn-up| MME/SGSN服务的媒体面数据处理，负责2/3G的媒体面报文转发。  \r\n数据存储类服务| UDSF Management| 非结构化数据管理，又称Nudsf_UnstructuredDataManagement。| 公共服务SMF/AMF/PCF……| sc-cudr-cdn-mp| 本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。  \r\nsc-cudr-cdn-l| 内存数据库（左域），提供数据存储、备份和同步。  \r\nsc-cudr-cdn-r| 内存数据库（右域），提供数据存储、备份和同步。  \r\nCUDR System Management| 云数据系统管理，又称Ncudr_SystemManagement。| sc-cudr-sys-mp| 数据存储控制中心，负责CDN组件的弹性策略控制。\n\n[2]:服务组成\r: 服务组成\r\n\r\n业务服务和服务组件说明\r\n\r\n为了适应5GC网络的灵活性、扩展性，ZXUN uMAC系统采用服务化架构。服务化架构由一系列业务服务NFS(Network Function Service, 网络功能服务)和服务组件SC(Service Component, 服务组件)构成。\r\n\r\n  * 业务服务，是NF的具体功能，能够独立完成某个具体功能的软件实体，服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征，多个业务服务组合可实现一定的业务功能。\r\n\r\n  * 服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。\r\n\r\n\r\n\r\n\r\n业务服务模型和资源模型的映射关系\r\n\r\n业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（IaaS形态），也可以运行在POD资源模型（CaaS形态），业务功能逻辑呈现一致，底层的部署方式不同。\r\n\r\n服务组件的运行载体为VRU(Virtual Running Unit, 虚拟运行单元)，VRU在IaaS形态部署时呈现为容器实例，在CaaS形态部署时呈现为POD实例。\r\n\r\n业务服务模型和资源模型的映射关系如图1所示。\r\n\r\n图1 业务服务模型和资源模型的映射关系\r\n\r\n各业务服务和服务组件介绍\r\n\r\n各业务服务及其包含的服务组件介绍参见下表。\r\n\r\n服务分类| 服务| 说明| 归属NF| 服务组件| 功能描述  \r\n---|---|---|---|---|---  \r\n平台支撑&网管运维类服务| Service Governance| 微服务治理，又称CommonS_TMSP。| 公共服务SMF/AMF/PCF/UPF……| sc-tmsp-mgt| 管理SC，服务部署资源的编排，升级，自愈。  \r\nsc-tmsp-smc| 管理SC，服务管理，服务注册，发现，升级。  \r\nsc-tmsp-mp| 本服务配置管理，性能统计管理等。  \r\nsc-tmsp-rosng| 路由协议栈SC。  \r\nsc-tmsp-amu| 仲裁SC，对其他SC提供主备仲裁。  \r\nOperation and Maintenance| 操作维护，又称CommonS_OAM。| 公共服务SMF/AMF/PCF/UPF……| sc-oam-gateway| OAM接入网关，负责管理口http/ssh等协议接入。  \r\nsc-oam-main| OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。  \r\nsc-oam-umf| OAM统一消息上报单元，负责信令跟踪消息上报。  \r\nsc-oam-ccmf| OAM配置管理单元，负责配置数据校验、存储、同步。  \r\nsc-oam-upgrade| OAM升级管理单元，负责业务SC和OAM自身升级控制。  \r\nsc-oam-postgre| OAM数据库，负责存储OAM配置、安全、接入等数据。  \r\nsc-oam-web| 提供本地网管web服务。  \r\nAMF Management Process| 业务公共服务，又称Namf_MP。| AMF/MME/SGSN| sc-amf-mp-dba| MME/SGSN网元级配置、告警、性能统计等。\n\n[3]:ZUF-79-02-003 NF服务发现\r: ZUF-79-02-003 NF服务发现\r\n\r\n子主题：\r\n\r\n  * 特性描述\r\n\r\n  * 特性配置\n\n[4]:SC\r: SC\r\n\r\n全称\r\n\r\nService Componen，服务组件\r\n\r\n解释\r\n\r\nZTE定义的服务组件，多种SC组成NFS(Network Function Service, 网络功能服务)或Common Service微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性功能。\n\n[5]:服务化架构\r: PCF| Npcf_AMPolicyControl| 提供接入控制，网络选择，移动性管理等AMF相关的策略控制服务。  \r\nNpcf_EventNotification| 提供策略信息及事件通知服务。  \r\nNpcf_Policy Authorization| 提供AF授权及为AF相关的会话生成策略规则服务。  \r\nNpcf_SMPolicyControl| 提供会话等SMF相关的策略控制服务。  \r\nNRF| Nnrf_NF Discovery| 提供NF发现服务。  \r\nNnrf_NFLoadManagement| 提供NF状态维护服务。  \r\nAUSF| Nausf UEauthentication| 提供用户鉴权服务。  \r\nNSSF| Nnssf_NSSelection| 向请求者提供请求的网络切片信息。  \r\nNnssf_NSSAIAvailability| 根据每个TA为NF消费者提供S-NSSAI(Single Network Slice Selection Assistance Information, 单个网络切片选择辅助信息)的可用性。  \r\nNEF| Nnef_EventExposure| 提供NEF相关信息的开放服务。  \r\nNnef_PFDManagement| 提供PFD管理功能  \r\nNnef_ParameterProvision| 提供可以在5GS中用于UE的供应信息。  \r\nNnef_Trigger| 提供设备触发功能。  \r\nNnef_BDTPNegotiation| 提供有关后台数据传输策略的协商功能。  \r\nNnef_ TrafficInfluence| 提供影响流量路由的能力。  \r\n  \r\nNF服务化接口\r\n\r\n在5G标准规范的系统架构中引入了服务化接口（即SBI(Service Based Interface, 基于服务的接口)）的概念，来表述一个NF提供其所具有的服务（或服务集合）给其他NF使用的方式。在5G标准中一般采用Nxxx（如Namf，Nudm等）的方式表达。\r\n\r\nSBI接口使用HTTP/2协议，统一了信令接口的协议和操作行为，提供了接口功能扩展能力、接口访问性能自适应调整能力，以及接口安全互操作能力。SBI接口协议栈如图3所示。\r\n\r\n图3 SBI接口协议栈\r\n\r\n5GC中涉及的服务化接口说明参见表3。\r\n\r\n表3 服务化接口说明接口| 接口  \r\n---|---  \r\nNnssf| NSSF提供的服务化接口  \r\nNnef| NEF提供的服务化接口  \r\nNnrf| NRF提供的服务化接口  \r\nNpcf| PCF提供的服务化接口  \r\nNudm| UDM提供的服务化接口  \r\nNudr| UDR提供的服务化接口  \r\nNausf| AUSF提供的服务化接口  \r\nNamf| AMF提供的服务化接口  \r\nNsmf| SMF提供的服务化接口  \r\n  \r\n服务化通信模型\r\n\r\n服务化架构提供了Request-Response方式和Subscribe-Notify方式两种服务化通信模型。\r\n\r\n  * Request-Response方式\r\n\r\nRequest-Response方式的服务化通信模型如图4所示，NF-A作为消费者（Consumer）通过Request请求NF-B的某个服务，NF-B作为生产者（Producer）。NF-B根据NF-A的请求通过Response为其提供相应的NF Service服务。NF-B为完成NF-A的服务请求，也可以向其他NF请求服务。\r\n\r\n图4 Request-Response方式\r\n\r\n  * Subscribe-Notify方式\r\n\r\n    * 方式一\r\n\r\n如图5所示，NF-A作为消费者（Consumer）通过Subscribe向NF-B订阅某个服务，NF-B作为生产者（Producer）。多个NF可以同时订阅NF-B的某个服务。NF-B通过Notify通知NF-A及其他订阅了此服务的NF相关信息。", "answer": "uMAC的MMESGSN Service服务包含以下SC（服务组件）：\n\n1. sc-mmesgsn-mp：本服务SC控制单元，负责本服务SC集群管理、升级控制、SC注册&发现、动态命令等。\n2. sc-mmesgsn-oam-dba：MME/SGSN服务中负责配置功能。\n3. sc-mmesgsn-cmp：MME/SGSN服务的主业务处理SC，负责2/3/4G业务处理。\n4. sc-mmesgsn-up：MME/SGSN服务的媒体面数据处理，负责2/3G的媒体面报文转发。"}
{"id": 87, "query": "SGSN/MME网元的采集方式有哪几种？", "recall": "[1]:C405200015 二次或二次以上寻呼尝试次数-UMTS\r: C405200015 二次或二次以上寻呼尝试次数-UMTS\r\n\r\n计数器描述\r\n\r\nSGSN对MS（3G接入）发送二次或二次以上寻呼请求的次数，不区分是路由区范围还是SGSN范围的寻呼。\r\n\r\n测量触发点\r\n\r\nSGSN对MS（3G接入）发送二次或二次以上的寻呼请求消息（Paging），消息中的网络侧Domain为PS时统计，不计重发。\r\n\r\n采集方式\r\n\r\nCC\n\n[2]:C405200014 二次或二次以上寻呼尝试次数-GSM\r: C405200014 二次或二次以上寻呼尝试次数-GSM\r\n\r\n计数器描述\r\n\r\nSGSN对MS（2G接入）发送二次或二次以上寻呼请求的次数，不区分是路由区范围还是SGSN范围的寻呼。\r\n\r\n测量触发点\r\n\r\nSGSN对MS（2G接入）发送二次或二次以上的寻呼请求消息（Paging），消息中的网络侧Domain为PS时统计，不计重发。\r\n\r\n采集方式\r\n\r\nCC\n\n[3]:C405400045 附着用户数\r: C405400045 附着用户数\r\n\r\n计数器描述\r\n\r\n某NSEI上某一时刻附着的用户数。\r\n\r\n测量触发点\r\n\r\n按照采集粒度对SGSN中的某NSEI上附着用户的数量进行取样，上报给网管系统。\r\n\r\n采集方式\r\n\r\nSample\n\n[4]:C405640052 基于PLMN的附着失败次数(无线侧失败)-GSM\r: C405640052 基于PLMN的附着失败次数(无线侧失败)-GSM\r\n\r\n计数器描述\r\n\r\n统计基于PLMN的RAN失败导致的附着失败次数（GSM）。\r\n\r\n测量触发点\r\n\r\nSGSN收到用户的附着请求（包括GPRS、联合、已IMSI附着），SGSN 下发附着拒绝消息，拒绝原因值为”0x11:Network failure”，失败是由于无线导致（如：加密无响应）时，进行统计。\r\n\r\n采集方式\r\n\r\nCC\n\n[5]:C405640042 基于PLMN的附着用户数-GSM\r: C405640042 基于PLMN的附着用户数-GSM\r\n\r\n计数器描述\r\n\r\n某PLMN上某一时刻Gb口附着的用户数。\r\n\r\n测量触发点\r\n\r\n按照采集粒度对SGSN中的某PLMN上附着用户的数量进行取样，上报给网管系统。\r\n\r\n采集方式\r\n\r\nSample", "answer": "SGSN/MME网元的采集方式有两种：\n\n1. CC（Counter Collection，计数器采集）：用于对特定事件或操作进行次数统计，如二次或二次以上寻呼尝试次数的统计。\n2. Sample（取样）：用于在某一时刻对特定信息进行采集，如附着用户数的统计。"}
{"id": 88, "query": "AMF软参包含哪几类？", "recall": "[1]:# 查询AMF软件参数配置(SHOW AMF SOFTWARE PARAMETER) \r: * 参数13：单SC上报失败观察超过最大速率而消息丢弃时，为了防止CPU的锯齿状的波动以及给与维护人员的操作时间，该参数表示在默认时间内只有单用户失败观察可以上报。\r\n  * 参数15：该参数用于控制是否支持监测索引资源。开启时，系统会对索引资源进行监测，关闭时，系统不会对索引资源进行检测。默认开启。\r\n  * 参数17：该参数用于控制是否开启内部性能测试。\r\n  * 参数18：该参数用于控制选择SCP时，是否支持NF级重选。\r\n  * 参数19：该参数用于控制选择SEPP时，是否支持NF级重选。\r\n  * 参数22：该软参用于控制AMF对SBI出向消息动态设置消息优先级的方式。默认按照消息号设置消息优先级。\r\n  * 参数23：该软参用于控制AMF对OAuth2访问令牌校验失败后回复响应消息是否带WWW-Authenticate头部和最新协议的状态码。\r\n  * 参数24：该软参用于控制AMF对OAuth2访问令牌校验对没有内容的场景是否通过。\r\n  * 参数25：该软参用于控制UDSF数据版本和本地版本不一致时是否丢弃UDSF数据。\r\n  * 参数26：该软参用于控制是否对发送HTTP请求时的IP地址进行有效性检查。\r\n  * 参数27：该软参用于控制Nnrf_NFDiscovery请求携带的requester-snssais的最大个数。\r\n  * 参数28：该软参用于设置HTTP请求消息中携带的内部消息优先级5所对应非直连模式下头部消息的优先级。\r\n  * 参数29：该软参用于设置HTTP请求消息中携带的内部消息优先级4所对应非直连模式下头部消息的优先级。\r\n  * 参数30：该软参用于设置HTTP请求消息中携带的内部消息优先级3所对应非直连模式下头部消息的优先级。\r\n  * 参数31：该软参用于设置HTTP请求消息中携带的内部消息优先级2所对应非直连模式下头部消息的优先级。\r\n  * 参数32：该软参用于设置HTTP请求消息中携带的内部消息优先级1所对应非直连模式下头部消息的优先级。\r\n  * 参数33：该软参用于设置HTTP请求消息中携带的内部消息优先级0所对应非直连模式下头部消息的优先级。\r\n  * 参数34：该软参用于控制NF发现结果包含多个NF时决策SCP及SEPP模式是否以第一个NF为准，当软参打开时，所有NF的SCP/SEPP模式都保持一致，以提高性能。\r\n  * 参数36：该软参用于控制Communication服务动态库占用内存的大小。\r\n  * 参数37：该软参用于设置http方式下NF Profile中IP地址对应端口。\r\n  * 参数38：该软参用于设置https方式下NF Profile中IP地址对应端口。\r\n  * 参数39：该软参用于设置是否将配置中读取的AMF本局NFID转为小写。\n\n[2]:# 查询AMF软件参数配置(SHOW AMF SOFTWARE PARAMETER) \r: * 参数22：该软参用于控制AMF对SBI出向消息动态设置消息优先级的方式。默认按照消息号设置消息优先级。\r\n  * 参数23：该软参用于控制AMF对OAuth2访问令牌校验失败后回复响应消息是否带WWW-Authenticate头部和最新协议的状态码。\r\n  * 参数24：该软参用于控制AMF对OAuth2访问令牌校验对没有内容的场景是否通过。\r\n  * 参数25：该软参用于控制UDSF数据版本和本地版本不一致时是否丢弃UDSF数据。\r\n  * 参数26：该软参用于控制是否对发送HTTP请求时的IP地址进行有效性检查。\r\n  * 参数27：该软参用于控制Nnrf_NFDiscovery请求携带的requester-snssais的最大个数。\r\n  * 参数28：该软参用于设置HTTP请求消息中携带的内部消息优先级5所对应非直连模式下头部消息的优先级。\r\n  * 参数29：该软参用于设置HTTP请求消息中携带的内部消息优先级4所对应非直连模式下头部消息的优先级。\r\n  * 参数30：该软参用于设置HTTP请求消息中携带的内部消息优先级3所对应非直连模式下头部消息的优先级。\r\n  * 参数31：该软参用于设置HTTP请求消息中携带的内部消息优先级2所对应非直连模式下头部消息的优先级。\r\n  * 参数32：该软参用于设置HTTP请求消息中携带的内部消息优先级1所对应非直连模式下头部消息的优先级。\r\n  * 参数33：该软参用于设置HTTP请求消息中携带的内部消息优先级0所对应非直连模式下头部消息的优先级。\r\n  * 参数34：该软参用于控制NF发现结果包含多个NF时决策SCP及SEPP模式是否以第一个NF为准，当软参打开时，所有NF的SCP/SEPP模式都保持一致，以提高性能。\r\n  * 参数36：该软参用于控制Communication服务动态库占用内存的大小。\r\n  * 参数37：该软参用于设置http方式下NF Profile中IP地址对应端口。\r\n  * 参数38：该软参用于设置https方式下NF Profile中IP地址对应端口。\r\n  * 参数39：该软参用于设置是否将配置中读取的AMF本局NFID转为小写。\r\n  * 参数40：AMF故障时，备份AMF支持接管用户，用户在主局时可能和周边网元建立过关联，接管到备份局后，如果关联的周边网元没在故障检测列表里面，本软参控制是否把NF加入到故障检测列表里面做故障检测。默认否。\r\n  * 参数41：该软参用于设置不同DNN选择相同SMF，NRF返回的IP地址不包含匹配上的已有PDU的地址时，是否从NRF中优选IP。默认否。\r\n  * 参数43：该软参用于设置EMS+上报是否进行链路检测判断。默认是。\r\n  * 参数44：该软参用于设置EMS+进行链路检测使用的本端端口号。\r\n  * 参数45：该软参用于设置EMS+是否支持断链缓存。\n\n[3]:# 新增AMF软件参数配置(ADD AMF SOFTWARE PARAMETER) \r: DEFAULTVALUE | 默认参数值 | 参数可选性: 必选  \r\n参数类型: 数字 | 软件参数默认取值。  \r\nMINVALUE | 参数最小值 | 参数可选性: 必选  \r\n参数类型: 数字 | 软件参数最小值  \r\nMAXVALUE | 参数最大值 | 参数可选性: 必选  \r\n参数类型: 数字 | 软件参数最大值  \r\nNAME | 参数名称 | 参数可选性: 必选  \r\n参数类型: 字符串  \r\n参数范围: 0-180 | 软参的名称，代表每个软参的含义  \r\nREMARK | 备注 | 参数可选性: 任选  \r\n参数类型: 字符串  \r\n参数范围: 0-180 | 参数取值的具体含义介绍  \r\n  \r\n## 命令举例\r\n    \r\n    \r\n    \r\n    \r\n    新增AMF软件参数配置，软参索引为99，当前参数值为1，默认参数值为1，参数最小值为0，参数最大值为1，参数名称为“保留软参99”。\r\n    \r\n    \r\n    \r\n    \r\n    ADD AMF SOFTWARE PARAMETER:ID=99,VALUE=1,DEFAULTVALUE=1,MINVALUE=0,MAXVALUE=1,NAME=\"spareSoftwareParameter99\"\n\n[4]:配置AMF EE软参\r: 配置AMF EE软参\r\n\r\n摘要\r\n\r\n本节介绍如何进行AMF EE软参配置。\r\n\r\n步骤\r\n\r\n  1. 执行SET EE SOFTWARE PARAMETER命令，配置AMF EE软参。\r\n\r\n\r\n\r\n\r\n举例\r\n\r\n在配置数据之前，应当完成相关数据规划，数据规划示例参见下表。\r\n\r\n配置项| 参数ID| 参数名称| 取值  \r\n---|---|---|---  \r\nAMF EE软参配置| 4| 是否对订阅数据去重 | 0  \r\n  \r\n根据规划，进行如下配置。\r\n\r\n  1. 配置AMF EE软参，命令仅包括和默认值不一致的软参，命令如下。\r\n\r\nSET EE SOFTWARE PARAMETER:ID=4,VALUE=0\n\n[5]:185 SmContextCreateData结构中hSmfUri, smfUri, additionalHsmfUri, additionalSmfUri信元的URI模式\r: 185 SmContextCreateData结构中hSmfUri, smfUri, additionalHsmfUri, additionalSmfUri信元的URI模式\r\n\r\n功能说明\r\n\r\n该软参用于控制SmContextCreateData结构中hSmfUri、smfUri、additionalHsmfUri、additionalSmfUri信元的URI的模式（详细参见协议3GPP TS 29.502 CR0321）。\r\n\r\n由于早期3GPP协议的定义有歧义，会导致AMF发送给SMF的URI格式为\"{apiRoot}/nsmf-pdusession/v1/\"或者\"{apiRoot}/nsmf-pdusession/v1/pdu-sessions/...\"。根据3GPP TS 29.502 CR0321协议，要求AMF发送给SMF的URI格式为\"{apiRoot}/nsmf-pdusession/v1/\"。\r\n\r\n应用场景\r\n\r\n该软参用于控制当AMF向SMF发送Nsmf_PDUSession_CreateSMContext Request消息时，携带hSmfUri、smfUri、additionalHsmfUri、additionalSmfUri信元的URI的模式。AMF通过该软参兼容对接现网版本。\r\n\r\n  * 该软件参数值设置为0：API URI，即AMF发送给SMF的URI格式为\"{apiRoot}/nsmf-pdusession/v1/\"。\r\n\r\n  * 该软件参数值设置为1： Resource URI，即AMF发送给SMF的URI格式为{apiRoot}/nsmf-pdusession/v1/pdu-sessions/...”\r\n\r\n\r\n\r\n\r\n默认取值\r\n\r\n0\r\n\r\n影响说明\r\n\r\n无。\r\n\r\n其他相关配置\r\n\r\n无。", "answer": "AMF软参包含以下几类：\n\n1. 控制单SC上报失败观察超过最大速率而消息丢弃的相关参数（如参数13）。\n2. 控制是否支持监测索引资源的参数（如参数15）。\n3. 控制是否开启内部性能测试的参数（如参数17）。\n4. 控制选择SCP和SEPP时是否支持NF级重选的参数（如参数18和参数19）。\n5. 控制AMF对SBI出向消息动态设置消息优先级的参数（如参数22）。\n6. 控制AMF对OAuth2访问令牌校验失败后响应消息处理的参数（如参数23和参数24）。\n7. 控制UDSF数据版本和本地版本不一致时数据处理的参数（如参数25）。\n8. 控制发送HTTP请求时IP地址有效性检查的参数（如参数26）。\n9. 控制Nnrf_NFDiscovery请求中requester-snssais个数的参数（如参数27）。\n10. 设置HTTP请求消息中内部消息优先级对应的非直连模式下头部消息优先级的参数（如参数28至参数33）。\n11. 控制NF发现结果决策SCP及SEPP模式的参数（如参数34）。\n12. 控制Communication服务动态库占用内存大小的参数（如参数36）。\n13. 设置http和https方式下NF Profile中IP地址对应端口的参数（如参数37和参数38）。\n14. 控制是否将配置中读取的AMF本局NFID转为小写的参数（如参数39）。\n15. 控制备份AMF接管用户时故障检测列表处理的参数（如参数40）。\n16. 控制NRF返回IP地址优选的参数（如参数41）。\n17. 控制EMS+上报是否进行链路检测判断的参数（如参数43）。\n18. 设置EMS+进行链路检测使用的本端端口号的参数（如参数44）。\n19. 控制EMS+是否支持断链缓存的参数（如参数45）。\n\n此外，还包括用于配置SmContextCreateData结构中URI模式的参数，如hSmfUri、smfUri、additionalHsmfUri、additionalSmfUri信元的URI模式控制参数。"}
{"id": 89, "query": "EMSPlus Logging产品网络平面有哪几种类型？", "recall": "[1]:组网方案\r: 组网方案\r\n\r\n虚拟化实际组网平面如图1所示。\r\n\r\n图1 网络架构图\r\n\r\nEMSPlus（Logging）的网络平面规划参见表1。\r\n\r\n表1 网络平面规划节点类型| 节点说明| 平面类型| 平面名称| 说明  \r\n---|---|---|---|---  \r\nMDS| 消息分发服务，MDS(Message Dispatch Service, 消息分发服务)按照配置的不同分发策略，将数据源上报的数据分发到指定的数据清洗服务器| EMSPlus_VNF_EMSPlus_NET| ZTE_EMSPlus_<局号>_VNF_EMSPlus_NET| 默认对接各个网元的平面，其它网元通过VRF(Virtual Route Forwarding, 虚拟路由转发)（EMSPlus）与本平面三层互通，目前该平面暂时不使用。  \r\nEMSPlus_VNF_GI_NET| ZTE_EMSPlus_<局号>_VNF_GI_NET| 对接xGW(Extendable Gateway, 综合接入网关)网元日志的，使用GI VRF转发。  \r\nEMSPlus_VNF_FWNAT_NET| ZTE_EMSPlus_<局号>_VNF_FWNAT_NET| 对接FireWall/CGNAT日志的，使用FWNAT_ROUTER VRF转发。  \r\nEMSPlus_VNF_BOSS_NET| ZTE_EMSPlus_<局号>_VNF_BOSS_NET| 对接PCRF(Policy and Charging Rules Function, 策略和计费规则功能)日志的，使用BOSS VRF转发。  \r\nEMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| MDS向DCU转发数据。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nDCU| 数据采集单元，实现对数据的接收、清洗、聚集、推送等| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 接收由MDS转发来的CHR(Call History Record, 呼叫历史记录)数据。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nEMSPlus_VNF_North_NET| ZTE_EMSPlus_<局号>_VNF_North_NET| 北向平面。  \r\nASC| SMF/UPF数据关联| EMSPlus_MEDIA_INT_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 接收由MDS转发来的CHR数据。  \r\nEMSPlus_CTRL_INT_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nMAN| EMSPlus（Logging）的主控模块| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 与DCU(Data Collection Unit, 数据采集单元)和DPU(Data Processing Unit, 数据处理单元)交互，完成数据的二次聚集、入库。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| MAN管理EMSPlus（Logging）系统的各个模块。  \r\nVNF_link| ZTE_VNFM_<局号>_VNF_NET| 与VNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)交互，完成EMSPlus（Logging）虚拟化相关的生命周期管理。  \r\nEMSPlus_OMM_NET| 运营商规划| OMM(Operation & Maintenance Module, 操作维护模块)网管大网，用于EMSPlus（Logging）客户端登录。所有网元共用，与EMS(Element Management System, 网元管理系统)使用相同的网络平面。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEARTBEAT_1_NET| 双机心跳主用。\n\n[2]:组网方案\r: 组网方案\r\n\r\n虚拟化实际组网平面如图1所示。\r\n\r\n图1 网络架构图\r\n\r\nEMSPlus（Reporting）的网络平面规划参见表1。\r\n\r\n表1 网络平面规划节点类型| 节点说明| 平面类型| 平面名称| 说明  \r\n---|---|---|---|---  \r\nMDS| 消息分发服务，MDS(Message Dispatch Service, 消息分发服务)按照配置的不同分发策略，将数据源上报的数据分发到指定的数据清洗服务器| EMSPlus_VNF_EMSPlus_NET| ZTE_EMSPlus_<局号>_VNF_EMSPlus_NET| 默认对接各个网元的平面，其它网元通过VRF(Virtual Route Forwarding, 虚拟路由转发)（EMSPlus）与本平面三层互通，目前该平面暂时不使用。  \r\nEMSPlus_VNF_GI_NET| ZTE_EMSPlus_<局号>_VNF_GI_NET| 对接xGW(Extendable Gateway, 综合接入网关)网元日志的，使用GI VRF转发。  \r\nEMSPlus_VNF_FWNAT_NET| ZTE_EMSPlus_<局号>_VNF_FWNAT_NET| 对接FireWall/CGNAT日志的，使用FWNAT_ROUTER VRF转发。  \r\nEMSPlus_VNF_BOSS_NET| ZTE_EMSPlus_<局号>_VNF_BOSS_NET| 对接PCRF(Policy and Charging Rules Function, 策略和计费规则功能)日志的，使用BOSS VRF转发。  \r\nEMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| MDS向DCU转发数据。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nDCU| 数据采集单元，实现对数据的接收、清洗、聚集、推送等| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 接收由MDS转发来的CHR(Call History Record, 呼叫历史记录)数据。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nEMSPlus_VNF_North_NET| ZTE_EMSPlus_<局号>_VNF_North_NET| 北向平面。  \r\nASC| SMF/UPF数据关联| EMSPlus_MEDIA_INT_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 接收由MDS转发来的CHR数据。  \r\nEMSPlus_CTRL_INT_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nMAN| EMSPlus（Reporting）的主控模块| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 与DCU(Data Collection Unit, 数据采集单元)和DPU(Data Processing Unit, 数据处理单元)交互，完成数据的二次聚集、入库。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| MAN管理EMSPlus（Reporting）系统的各个模块。  \r\nVNF_link| ZTE_VNFM_<局号>_VNF_NET| 与VNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)交互，完成EMSPlus（Reporting）虚拟化相关的生命周期管理。  \r\nEMSPlus_OMM_NET| 运营商规划| OMM(Operation & Maintenance Module, 操作维护模块)网管大网，用于EMSPlus（Reporting）客户端登录。所有网元共用，与EMS(Element Management System, 网元管理系统)使用相同的网络平面。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEARTBEAT_1_NET| 双机心跳主用。\n\n[3]:系统组网\r: 系统组网\r\n\r\n网络平面与EMSPlus虚拟部署单元的关系如图1所示。\r\n\r\n图1 EMSPlus系统组网\r\n\r\nEMSPlus规划的网络平面参见表1。\r\n\r\n表1 网络平面平面类型| 用途| 说明  \r\n---|---|---  \r\nZTE_EMS_NET| EMS(Element Management System, 网元管理系统)网络平面，对接EMS、VNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)。| 预创建，与MANO(Management and Orchestration, 管理和编排)等网元共用，支持IPV4、IPV6  \r\nNORTH_NET| 北向网络平面| 对接第三方数据分析系统，支持IPV4  \r\nEMSPlus_CTRL_NET| 内部控制面| 实例化时自动创建，支持IPV4  \r\nEMSPlus_MEDIA_NET| 内部媒体面  \r\nEMSPlus_HeartBeat1| 双机心跳主用| HA(High Availability, 高可用性)集群场景时自动创建，支持IPV4  \r\nEMSPlus_HeartBeat2| 双机心跳备用  \r\nEMSPlus_VNF_FWNAT_NET| 对接FIREWALL/CGNAT(Carrier Grade Network Address Translation, 运营商级网络地址转换)网元| 现场部署时对接网元，则需要提前在VIM(Virtualized Infrastructure Manager, 虚拟化基础设施管理系统)上创建，支持IPV4  \r\nEMSPlus_VNF_GI_NET| 对接V5 xGW(Extendable Gateway, 综合接入网关)网元或者V7 UPF(User Plane Function, 用户平面功能)网元  \r\nEMSPlus_VNF_SIG_NET（即INFO文件中的BOSS网络平面）| 对接AMF(Access and Mobility Management Function, 接入和移动管理功能)、SMF(Session Management Function, 会话管理功能)网元  \r\nEMSPlus_VNF_FTU_NET| 当网元只有文件接口，没有消息接口时，EMSPlus通过FTU节点使用FTP(File Transfer Protocol, 文件传输协议)文件接口方式对接该网元。网元的日志数据传送到FTU节点，FTU节点处理这些文件，并通过消息接口转发给MDS(Message Dispatch Service, 消息分发服务)节点\n\n[4]:组网方案\r: 网元管理系统)使用相同的网络平面。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEARTBEAT_1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEARTBEAT_2_NET| 双机心跳备用。  \r\nDPU| 数据库数据节点| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 数据入库和查询。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nFTU| 文件转换单元，将文件接口的日志转换为消息接口的消息发送给MDS| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_NET| 内部数据传输使用。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEART1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEART2_NET| 双机心跳备用。  \r\nEMSPlus_VNF_FTU_NET| ZTE_EMSPlus_<局号>_VNF_FTU_NET| EMSPlus对接文件接口的网元，获取日志数据。\n\n[5]:组网方案\r: 网元管理系统)使用相同的网络平面。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEARTBEAT_1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEARTBEAT_2_NET| 双机心跳备用。  \r\nDPU| 数据库数据节点| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_INT_NET| 数据入库和查询。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_INT_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nFTU| 文件转换单元，将文件接口的日志转换为消息接口的消息发送给MDS| EMSPlus_MEDIA_NET| ZTE_EMSPlus_<局号>_MEDIA_NET| 内部数据传输使用。  \r\nEMSPlus_CTRL_NET| ZTE_EMSPlus_<局号>_CTRL_NET| 接受MAN主控模块的管理控制以及配置消息。  \r\nEMSPlus_HeartBeat1| ZTE_EMSPlus_<局号>_HEART1_NET| 双机心跳主用。  \r\nEMSPlus_HeartBeat2| ZTE_EMSPlus_<局号>_HEART2_NET| 双机心跳备用。  \r\nEMSPlus_VNF_FTU_NET| ZTE_EMSPlus_<局号>_VNF_FTU_NET| EMSPlus对接文件接口的网元，获取日志数据。", "answer": "EMSPlus Logging产品网络平面有以下几种类型：\n\n1. EMSPlus_VNF_EMSPlus_NET\n2. EMSPlus_VNF_GI_NET\n3. EMSPlus_VNF_FWNAT_NET\n4. EMSPlus_VNF_BOSS_NET\n5. EMSPlus_MEDIA_NET\n6. EMSPlus_CTRL_NET\n7. EMSPlus_VNF_North_NET\n8. EMSPlus_OMM_NET\n9. EMSPlus_HeartBeat1\n\n以上是根据提供的信息整理的网络平面类型。"}
{"id": 90, "query": "在某些情况下，维护人员希望了解本网元相关的无线网元的相关信息，应如何查询？", "recall": "[1]:# 无线信息查询\r: # 无线信息查询\r\n\r\n## 背景知识\r\n\r\n在某些情况下，维护人员希望了解本网元相关的无线网元的相关信息或者本网元所有的用户相关信息。大数据查询功能针对此需求提供相应的查询命令。\r\n\r\n## 功能描述\r\n\r\n无线信息查询功能用于维护人员批量查询MME/SGSN关联的无线网元的无线相关信息，例如：2G BSC/3G RNC支持的路由区信息，4G eNodeB支持的跟踪区信息等。\r\n\r\n无线信息查询支持以下三种查询：\r\n\r\n  * 查询BSC网元的无线信息。\r\n  * 查询RNC网元的无线信息。\r\n  * 查询eNodeB网元的无线信息。\r\n\r\n\r\n\r\n## 相关主题\r\n\r\n  * 查询NSE信息(SHOW NSE INFO)\r\n  * 查询RNC信息(SHOW RNCALL INFO)\r\n  * 查询eNodeB信息(SHOW ENODEBALL INFO)\r\n  * 查询eNB邻接关系信息(SHOW ENB NEIGHBOR INFO)\r\n\r\n\r\n\r\n**父主题：** 大数据查询\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[2]:# 导出用户信息\r: # 导出用户信息\r\n\r\n## 背景知识\r\n\r\n在某些情况下，维护人员希望了解本网元相关的无线网元的相关信息或者本网元所有的用户相关信息。大数据查询功能针对此需求提供相应的查询命令。\r\n\r\n## 功能描述\r\n\r\n导出用户信息功能目前仅适用于SGSN网元，用于维护人员批量查询SGSN网元中2G/3G用户信息的需求，包括所有2G/3G用户的IMSI /MSISDN /RAI /CI等，查询结果保存为TXT或CSV格式的文件。\r\n\r\n## 相关主题\r\n\r\n  * 导出用户信息(EXPORT USERINFO)\r\n  * 导出用户简要信息(EXPORT BRIEFUSERINFO)\r\n  * 停止导出用户信息(STOP USERINFO)\r\n\r\n\r\n\r\n**父主题：** 大数据查询\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[3]:# 基本配置\r: # 基本配置\r\n\r\n## 背景知识\r\n\r\n在某些情况下，维护人员希望即时了解网元运行时的静态或动态信息，例如：MME的特有信息、用户信息、配置信息等，通过直连接口查询功能执行相应的查询命令以获取相关信息。\r\n\r\n## 功能描述\r\n\r\n本功能用于操作员查询本局的一些相关信息时使用。\r\n\r\n直连接口支持的查询功能包括：\r\n\r\n  * 获取MME的特有信息。\r\n\r\n  * 获取配置数据。\r\n\r\n  * 获取单个用户信息。\r\n\r\n  * 获取eNodeB的连接信息。\r\n\r\n\r\n\r\n\r\n对于信息量比较小的数据，操作员员可以在网管界面上直接查看。\r\n\r\n对于信息量比较大的数据，如：配置信息、eNodeB连接信息，系统会将查询结果存为excel或者txt文件，操作员可以通过下载文件的方式获取到相关内容。\r\n\r\n## 相关主题\r\n\r\n  * 获取MME特有信息(GET MME INFO)\r\n  * 获取配置数据(GET ICMDATA)\r\n  * 获取单用户信息(GET USER INFO)\r\n  * 获取eNodeB连接信息(GET ENODEBS INFO)\r\n\r\n\r\n\r\n**父主题：** 直连接口管理\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[4]:# 直连接口管理\r: # 直连接口管理\r\n\r\n## 背景知识\r\n\r\n在某些情况下，维护人员希望即时了解网元运行时的静态或动态信息，例如：MME的特有信息、用户信息、配置信息等，通过直连接口查询功能执行相应的查询命令以获取相关信息。\r\n\r\n## 功能描述\r\n\r\n本功能用于操作员查询本局的一些相关信息时使用。\r\n\r\n直连接口支持的查询功能包括：\r\n\r\n  * 获取MME的特有信息。\r\n\r\n  * 获取配置数据。\r\n\r\n  * 获取单个用户信息。\r\n\r\n  * 获取eNodeB的连接信息。\r\n\r\n\r\n\r\n\r\n对于信息量比较小的数据，操作员员可以在网管界面上直接查看。\r\n\r\n对于信息量比较大的数据，如：配置信息、eNodeB连接信息，系统会将查询结果存为excel或者txt文件，操作员可以通过下载文件的方式获取到相关内容。\r\n\r\n## 相关主题\r\n\r\n  * 基本配置\r\n\r\n\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.\n\n[5]:# 查询RNC信息(SHOW RNCALL INFO) \r: # 查询RNC信息(SHOW RNCALL INFO) \r\n\r\n## 命令功能\r\n\r\n该命令用于查询SGSN网元管理的RNC网元关联的无线信息。查询结果包括：RNC局向号、路由区信息等。\r\n\r\n## 注意事项\r\n\r\n该命令仅适用于SGSN和Combo MME/GnGp SGSN网元。\r\n\r\n## 命令举例\r\n\r\n查询RNC无线信息。\r\n\r\nSHOW RNCALL INFO;\r\n    \r\n    \r\n    \r\n    (No.2) : SHOW RNCALL INFO:\r\n    -----------------NFS_MMESGSN_0----------------\r\n    命令结果的文件路径\r\n    ---------------\r\n    请点击下面URL获取命令结果\r\n    a2ffb56ea0ec470db9c43d1ef15a908b_SHOW RNCALL INFO_1_2020-03-24 15-41-33.csv\r\n    ---------------\r\n    \r\n    \r\n\r\n**父主题：** 无线信息查询\r\n\r\n  \r\n  \r\n\r\n\r\n* * *\r\n\r\nCopyright © ZTE Corporation. All right reserved.\r\n\r\nPPDN Online KnowledgeBase Powered by DITA. Technology Management Dept, Central R&D Insititute.", "answer": "应如何查询本网元相关的无线网元的相关信息：\n\n1. 使用无线信息查询功能，该功能支持查询BSC、RNC和eNodeB网元的无线信息。\n   - 对于BSC网元的无线信息查询，可以使用相应的查询命令。\n   - 对于RNC网元的无线信息查询，可以使用命令“SHOW RNCALL INFO”。\n   - 对于eNodeB网元的无线信息查询，可以使用命令“SHOW ENODEBALL INFO”。\n\n2. 如果是SGSN网元，还可以使用命令“SHOW NSE INFO”查询关联的无线网元信息。\n\n3. 如果需要批量查询SGSN网元中2G/3G用户信息，可以使用导出用户信息功能，包括IMSI、MSISDN、RAI、CI等信息，并以TXT或CSV格式保存查询结果。\n\n4. 对于需要即时了解网元运行时的静态或动态信息的情况，可以通过直连接口管理功能进行查询，包括获取MME特有信息、配置数据、单个用户信息、eNodeB连接信息等。\n\n以上查询方式可以根据维护人员的具体需求选择使用。"}
{"id": 91, "query": "如何创建定时任务？", "recall": "[1]:创建定时任务\r: 创建定时任务\r\n\r\n摘要\r\n\r\nEMSPlus系统按照任务中指定的条件周期性地查询日志数据，并生成查询结果报表。生成的查询结果报表也能被自动发送到指定的FTP(File Transfer Protocol, 文件传输协议)/SFTP(Secure File Transfer Protocol, 安全文件传输协议)服务器。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的Logging或者IPDR窗口，单击功能操作区的Task，功能操作区显示已有的定时任务，如图1所示。\r\n\r\n图1 定时任务列表\r\n\r\n  2. 单击功能操作区的+Add Task按钮，在弹出的对话框中设置任务的名称，如图2所示。\r\n\r\n图2 任务基本属性表1 任务基本属性参数说明参数名称| 参数说明  \r\n---|---  \r\nTask Name| 定时任务的名称，任务名称最长为40个字符。  \r\n  \r\n  3. 切换到Schedule Frequency页面，设置任务时间表，如图3所示。设置任务开始时间、结束任务、任务类型、执行频率参数。\r\n\r\n图3 任务自定义时间表2 任务时间频率参数说明参数名称| 参数说明  \r\n---|---  \r\n开始时间设置| Immediately| 配置完成后立即执行该任务。  \r\nStart Timestamp| 在设定的Time执行该任务。选择此项需在其后的输入框中设置开始时间。  \r\n结束时间设置| Indefinitely| 无限期执行任务。  \r\nEnd Timestamp| 在设定的Time停止该任务。选择此项需在其后的输入框中设置结束时间。  \r\n任务类型设置| Simple Repeatedly| 需要设定该任务的Execute Frequency。  \r\nCustom Repeatedly| 按天或周、月中的某几天来重复执行该任务，需要设置任务执行Trigger Timestamp以及执行的日期。  \r\n执行频率设置| 如果任务类型选择Simple Repeatedly，需要设置Execute Frequency。如果任务类型选择Custom Repeatedly，则打开以下配置参数。\r\n     * Trigger Timestamp：任务触发的时间，格式为HH：MM。\r\n     * Date Type：选择任务执行的周期是Per Day、Per Week或者Per Month。\r\n     * Date Selection：选择每周或每月执行任务的日期。\r\n     * Effective Month：选择执行任务的月份。  \r\n  \r\n  4. 切换到Output Setting页面，设置任务执行结果导出为文件时的相关属性，如图4所示。\r\n\r\n图4 任务输出设置表3 任务导出参数说明参数名称| 参数说明  \r\n---|---  \r\nFile Type| 查询结果输出文件的文件类型。  \r\nFile Prefix| 查询结果输出文件的的命名规则。  \r\nFile Transfer Mode| 是否将输出文件自动上传至指定的FTP(File Transfer Protocol, 文件传输协议)/SFTP(Secure File Transfer Protocol, 安全文件传输协议)服务器。选中File Transfer Mode，需要配置FTP/SFTP服务器参数，如服务器IP地址、端口号、保存路径、用户名和密码。  \r\n  \r\n  5. 单击Confirm按钮。\r\n\r\n  6. 单击General View，查看所有的任务。可以停止或者删除任务，查看任务主要信息，如图5所示。\r\n\r\n图5 所有任务\r\n\r\n  7. 单击Task Operation列的按钮，查看任务详细信息，如图6所示。\r\n\r\n单击最右边的按钮可以导出数据。\r\n\r\n图6 任务详细信息\n\n[2]:确认脚本执行结果\r: 确认脚本执行结果\r\n\r\n摘要\r\n\r\n本节介绍如何确认静态路由是否有效，且已添加到系统定时任务中。\r\n\r\n步骤\r\n\r\n  1. 执行route命令，查看其输出确认所配置的路由已经加到系统中。\r\n    \r\n        [omc@mds1 server]$ route\r\n    Kernel IP routing table\r\n    Destination     Gateway         Genmask         Flags Metric Ref    Use Iface\r\n    10.228.62.0     0.0.0.0         255.255.255.0   U     0      0        0 eth1_0\r\n    10.228.63.0     10.228.62.1     255.255.255.0   UG    0      0        0 eth1_0\r\n\r\n以上示例中，蓝色部分即表示已存在新增的路由信息。\r\n\r\n  2. 通过如下命令，确认/etc/crontab中已经增加了addmdsroute.sh的5分钟定时任务。\r\n    \r\n        [omc@mds1 server]$ grep \"^*/5\" /etc/crontab | grep \"addmdsroute.sh\"\r\n    */5 * * * * omc  /ubas/ZXUN-EMSPLUS/server/addmdsroute.sh\n\n[3]:特性操作\r: 特性操作\r\n\r\n子主题：\r\n\r\n  * Logging日志查询分析\r\n\r\n  * IPDR日志查询分析\r\n\r\n  * 创建定时任务\n\n[4]:创建测量任务\r: 创建测量任务\r\n\r\n摘要\r\n\r\n网元根据测量任务设定的条件，采集相关数据，上报到EMSPlus服务器。\r\n\r\n步骤\r\n\r\n  1. 在ElasticNet UME客户端，选择菜单性能→性能任务→测量任务，打开测量任务页签，如图1所示。\r\n\r\n图1 测量任务管理\r\n\r\n  2. 单击新建，打开新建测量任务页面。输入名称，选择网元类型、测量对象类型和测量族，如图2所示。\r\n\r\n图2 选择测量族\r\n\r\n测量任务页面的参数说明参见表1。\r\n\r\n表1 测量任务页面的参数说明参数| 说明  \r\n---|---  \r\n名称| 测量任务的名称，例如`EMSPlus_test`。  \r\n网元类型| 选择测量任务归属的网元类型，选择EMSPLUS。  \r\n测量对象类型| 选择网元类型支持的测量对象类型，选择EMSPLUS。  \r\n测量族| 测量对象类型支持的测量类型，如果已经选择了测量对象类型，则下拉列表框仅显示该类型下支持的测量族。  \r\n  \r\n  3. 单击下一步，切换到选择对象页面，如图3所示。\r\n\r\n图3 选择对象页面\r\n\r\n选择对象页面的参数说明参见表2。\r\n\r\n表2 对象选择页面的参数说明参数名称| 参数说明  \r\n---|---  \r\n选择类型| \r\n     * 按对象范围：配置对象范围参数，并选择资源。\r\n     * 按测量对象模板：配置对象过滤和测量对象模板参数。  \r\n对象范围| 选择类型选择按对象范围，该参数可见。  \r\n  \r\n  4. 选择按对象范围，并单击选择，在弹出的对话框中选择EMSPlus网元，如图4所示。\r\n\r\n图4 选择网元\r\n\r\n  5. 单击下一步切换到选择时间页签，设置测量任务的基本信息，如图5所示。\r\n\r\n图5 选择时间\r\n\r\n时间页面的参数说明参见表3。\r\n\r\n表3 时间参数说明参数| 说明  \r\n---|---  \r\n状态| 测量任务创建后默认的状态。  \r\n粒度| 在粒度下拉菜单后选择查询粒度，包括5分钟、15分钟、30分钟、1小时、1天。例如：选择15分钟，表示以15分钟为单位显示查询结果。  \r\n时间范围| 自定义选择任务有效时间。  \r\n有效时段和日期| \r\n     * 有效时段有效时间为：00:00-24:00。每段时间以小时为单位分为24个时间粒度，可以单击选择时间段中的小时时间粒度。\r\n     * 有效日期查询的有效日期，包括：按月和按周。勾选中按月：下面列出一个月的所有待选天，可全选，可选择某些天。勾选中按周：下面列出一周的所有天，从周一 ~ 周日，可全选，可单击选择某些天。  \r\n  \r\n  6. 单击新建按钮，完成测量任务的新建。新建的测量任务出现在测量任务页签中。\n\n[5]:运行静态路由配置脚本\r: 运行静态路由配置脚本\r\n\r\n摘要\r\n\r\n本节介绍如何将静态路由配置文件添加到系统定时任务中，以保证配置的静态路由持续有效。\r\n\r\n步骤\r\n\r\n  1. 通过SSH(Secure Shell, 安全外壳)方式登录到MDS虚机操作系统的命令终端。\r\n\r\n  2. 切换到$ZXHOME目录下，执行sh addmdsroute.sh命令，将配置的静态路由增加到系统中。\r\n    \r\n        [omc@mds1 ~]$cd $ZXHOME\r\n    [omc@mds1 server]$sh addmdsroute.sh\r\n\r\n若有报错，可参考如何验证静态路由参数检查静态路由文件中的配置及格式是否正确。", "answer": "如何创建定时任务？\n\n回答：\n1. 在EMSPlus客户端的Logging或者IPDR窗口，单击功能操作区的Task，查看已有的定时任务。\n2. 单击+Add Task按钮，设置任务的名称。\n3. 切换到Schedule Frequency页面，设置任务开始时间、结束时间、任务类型和执行频率参数。\n4. 切换到Output Setting页面，设置任务执行结果导出为文件时的相关属性，如文件类型、文件前缀和文件传输模式等。\n5. 单击Confirm按钮确认创建任务。\n6. 可以通过General View查看所有任务，进行停止、删除操作或查看任务详细信息。"}
{"id": 92, "query": "EMSPlus告警种类有种？", "recall": "[1]:设置告警箱（可选）\r: 设置告警箱（可选）\r\n\r\n摘要\r\n\r\n告警箱用于统计并显示EMSPlus服务器上报的告警，并以声音、灯光、液晶显示、短消息发送等多种形式提示维护人员。\r\n\r\n当需要连接一个新的告警箱时，需要在EMSPlus服务器上设置该告警箱的参数，EMSPlus根据设置的参数与告警箱建立连接，并将相应的告警信息转发给告警箱。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端，单击告警管理，打开告警管理页面，如图1所示。\r\n\r\n图1 告警管理页面\r\n\r\n  2. 选择左侧菜单告警设置→告警箱设置，打开查询告警箱设置页面，如图2所示。\r\n\r\n图2 查询所有当前告警页面\r\n\r\n  3. 单击新建按钮，打开新增告警箱参数设置页面，如图3所示。\r\n\r\n图3 新建告警箱页面表1 新建告警箱参数说明参数名称| 参数说明  \r\n---|---  \r\nAlarm Box IP| 配置告警箱的IP地址，该IP地址需要与EMSPlus服务器IP地址在同一网段。  \r\nStatus| \r\n     * Disabled：表示告警箱设置完成后，禁止告警箱连接，该告警箱暂不开始工作。\r\n     * Enabled：表示告警箱设置完成后，允许告警箱连接，该告警箱即开始工作。  \r\nMinimum Acoustic-optic Display Level| 配置需要告警箱发声发光的最低告警级别，如果EMSPlus当前告警中有等于或高于此级别的告警，告警箱会在液晶屏上显示并通过内置喇叭发声。告警级别可以选择：Critical、Major、Minor、Warning。  \r\nSend Short Message| \r\n     * No：表示告警发生时，不发送短信。\r\n     * Yes：表示告警发生时，发送短信给指定人员，选中后需设置Phone Number参数。  \r\nMinimum SMS Level| 配置需要告警箱发送短信的最低告警级别，当新告警第一次产生时，如果级别大于或等于此级别，则发送短信。可以选择：Critical、Major、Minor、Warning。此功能只在新告警第一次产生时作用，即短信只在告警第一次产生时发送，后续不再发送。  \r\nServer Port| 配置EMSPlus服务端用来与告警箱连接的端口号，取值范围：6000~65535之间的整数。  \r\nPhone Number| 配置接收短信的手机号码。  \r\n  \r\n  4. 设置增加告警箱的参数，单击确定按钮，新增的告警箱将显示在告警箱列表中。\n\n[2]:告警管理检查\r: 告警管理检查\r\n\r\n检查目的\r\n\r\n检查EMSPlus系统能否将告警正常上报给ElasticNet UME系统。\r\n\r\n检查步骤\r\n\r\n  1. 登录ElasticNet UME客户端，选择菜单Alarm→History ALarm→Alarm Query，如图1所示。\r\n\r\n图1 Alarm Query页面\r\n\r\n  2. 选择类型为emsplus的网元，并单击按钮，如图2所示。\r\n\r\n图2 选择类型为emsplus的网元\r\n\r\n  3. 检查最近7天EMSPlus上报的告警记录。\r\n\r\n\r\n\r\n\r\n检查标准\r\n\r\nElasticNet UME系统上EMSPlus的告警能够正常上报和消除。\n\n[3]:O&M相关\r: O&M相关\r\n\r\n命令\r\n\r\n本特性不涉及命令的变化。\r\n\r\n性能统计\r\n\r\n该特性不涉及计数器的变化。\r\n\r\n告警与通知\r\n\r\n当EMS(Element Management System, 网元管理系统)和网元间链路断时，EMS上会触发告警。\r\n\r\n新增的告警/通知参见表1。\r\n\r\n表1 新增的告警和通知告警和通知  \r\n---  \r\n1015 网元代理链路断（The link between the server and the NE agent is broken）  \r\n  \r\n失败观察\r\n\r\n该特性不涉及失败观察的变化。\r\n\r\n计费\r\n\r\n该特性不涉及话单与计费的变化。\n\n[4]:描述\r: 描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 定义\r\n\r\n  * 背景知识\r\n\r\n\r\n\r\n\r\n定义\r\n\r\n告警管理\r\n\r\n告警管理功能是实时展现系统运行中的异常或者关键事件，以便操作人员及时采取措施解决故障，或者了解系统过往运行过程中的关键信息，从而保证系统长期正常稳定运行。\r\n\r\n告警可以上报给上级网管（EMS(Element Management System, 网元管理系统)网元管理系统），并支持告警同步。\r\n\r\n告警\r\n\r\n当系统检测到可能影响系统功能或性能的事件发生时，将告警事件、可能原因、处理建议、附加信息内容以告警的形式在网管系统呈现，并上报给上级网管（如EMS）。\r\n\r\n维护人员可借助告警信息定位并排除故障，以保障系统的稳定运行。告警对应的问题或故障解决后，系统将自动返回告警恢复消息。\r\n\r\n系统类型\r\n\r\n系统类型描述了告警信息产生的位置，分为以下三种：\r\n\r\n  * 网元告警：网元设备上产生的告警信息。\r\n\r\n  * 网管系统告警：网管系统上产生的告警信息。\r\n\r\n  * 外围节点告警：系统其它节点上产生的告警信息。\r\n\r\n\r\n\r\n\r\n告警级别\r\n\r\n根据对系统的影响程度分为四种级别：\r\n\r\n  * 严重：系统出现了严重的故障，无法正常运行，需要立即修复。\r\n\r\n  * 主要：系统出现了比较严重的故障，虽然可以继续运行，但某些重要功能不能正常实现，影响正常业务，需要立即修复。\r\n\r\n  * 次要：系统出现了一般故障，虽然可以正常运行，但局部功能受到一定影响。应采取纠正措施，以免发生更严重的故障。\r\n\r\n  * 警告：系统出现了轻微故障，不影响正常运行，对系统的局部功能影响也不大，如果长时间不解决，可能会发展为更高级别的故障。应采取措施诊断纠正，以免其转变成更加严重的、影响正常业务的故障。\r\n\r\n\r\n\r\n\r\n告警类型\r\n\r\n按照告警的类型来划分，支持如下几类告警：\r\n\r\n  * 设备告警：与设备故障相关的告警类型。\r\n\r\n  * 通讯告警：与信息传输过程相关的告警类型。\r\n\r\n  * 环境告警：与设备所处的环境相关的告警类型。\r\n\r\n  * 服务质量告警：与服务质量降级相关的告警类型。\r\n\r\n  * 处理错误告警：与软件或进程故障相关的告警类型。\r\n\r\n\r\n\r\n\r\n告警状态\r\n\r\n告警根据状态分为当前告警和历史告警：\r\n\r\n  * 当前告警：系统中当前存在，仍未恢复的告警。\r\n\r\n  * 历史告警：系统中已经恢复的告警，保存于数据库中。\n\n[5]:查询告警和通知\r: 单击确定按钮，将列出符合条件的告警。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n维护人员可以查看告警的详细信息；单击页面下方的按钮，执行对应的操作，具体操作参见“导出告警信息”。\r\n\r\n查询通知\r\n\r\n摘要\r\n\r\n通知查询功能支持直接查询所有通知信息，同时也支持用户按照设置查询条件，只查看符合条件的通知。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端窗口单击Fault，选择左侧菜单FM Query→ Show Notification，打开通知查询页面，如图7所示。\r\n\r\n图7 通知查询\r\n\r\n表2 通知查询条件参数说明参数名称| 参数说明  \r\n---|---  \r\nOccurrence Time| 设置通知的发生时间段，由系统自动检索符合条件的通知。若不设置发生时间，则查询所有时间段的通知。格式：YYYY-MM-DD hh:mm:ss  \r\nPosition Information| 模糊匹配通知发生的位置，例如vnfid=xx、vmname=xx。若不选择，则匹配所有位置的通知。  \r\nSystem Type| 设置通知的系统类型。可以选择：\r\n     * All Alarm\r\n     * NE Alarm\r\n     * OMM System Alarm\r\n     * Peripheral Node Alarm  \r\nSelected Alarm Codes| 已选择查询的告警码。  \r\nAlarm Code| 设置需要查询的告警码，通过单击告警名称前的复选框进行选择。可供选择的告警码由System Type决定，若不选，则匹配所有告警码。  \r\n  \r\n  2. 设置通知查询条件，例如告警产生时间、位置，并可进一步设置系统类型、告警码。\r\n\r\n  3. 单击Query按钮，将列出符合条件的通知。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n维护人员可以查看通知的详细信息；单击页面下方的按钮，执行对应的操作，具体操作参见“导出告警信息”。", "answer": "EMSPlus告警种类在提供的上下文信息中并未明确说明具体有多少种。但根据上下文中的描述，可以知道告警按照级别分为严重、主要、次要、警告四种；按照类型分为设备告警、通讯告警、环境告警、服务质量告警、处理错误告警等几类。具体的种类数量没有直接给出，因此回答为：不确定。"}
{"id": 93, "query": "uMAC网元VNFC有哪几种备份方式", "recall": "[1]:ZUF-76-04-008 VNFC支持1+1互备冗余\r: ZUF-76-04-008 VNFC支持1+1互备冗余\r\n\r\n概述\r\n\r\nVNFC(Virtualized Network Function Component, 虚拟网络功能组件)支持1+1互备冗余，是指运行实例采用互备的工作方式。正常情况下，两个实例都工作，均处理业务。当一个运行实例故障，则由另一个运行实例接管业务，从而保证业务正常运行。\r\n\r\nuMAC网元采用实例1+1互备工作方式的VNFC为CDU。\r\n\r\nUDSF(Unstructured Data Storage Function, 非结构化数据存储功能)或CDB(Cloud Database, 云数据库)运行在CDU(Cloud Database Unit, 云数据库单元)上，是基于内存数据库的分布式存储系统，主要存储用户的稳态上下文数据。当处理服务的某个虚机出现异常并被其他虚机接管时，CDB可以恢复用户数据防止会话丢弃。\r\n\r\n说明：\r\n\r\n当vAMF/vMME/vSGSN启用ZUF-76-01-001 支持与UDSF/CDB合一部署特性时，vAMF/vMME/vSGSN才能支持CDU（UDSF/CDB） 1+1互备。\r\n\r\n客户收益\r\n\r\n该特性可提升设备可靠性，便于设备监控和升级。\r\n\r\n引入CDU（UDSF/CDB）有以下收益：\r\n\r\n  * 业务流程和用户数据存储分离\r\n\r\n  * 提升系统可靠性\r\n\r\n  * 跨数据中心的数据部署\r\n\r\n  * 实现ISSU\r\n\r\n  * 降低成本\r\n\r\n\r\n\r\n\r\n说明\r\n\r\n实例采用1+1互备工作方式时，实例分别运行在不同的资源之上，如：不同的虚机或容器、不同的硬件服务器、以及不同的资源分区（ZONE）。当一个运行实例故障宕机或执行倒换时，另一个运行实例接管业务，保证服务不间断。\n\n[2]:VNF UDSFCfg Setting\r: VNF UDSFCfg Setting\r\n\r\n配置原则\r\n\r\nVNF UDSFCfg Setting页签用于配置ZXUN uMAC的数据备份参数，必须配置。\r\n\r\n配置说明\r\n\r\n当ZXUN uMAC没有开启全量备份功能时，VNF UDSFCfg Setting页签如图1所示。\r\n\r\n图1 VNF UDSFCfg Setting（没有开启全量备份）\r\n\r\n主要参数说明参见表1。\r\n\r\n表1 参数说明参数名称| 参数说明| 配置指引  \r\n---|---|---  \r\nTenant Count| 本参数用于配置租户的个数。| 配置原则如下：\r\n\r\n  * 使用默认值1，表示ZXUN uMAC没有开启全量备份功能。\r\n  * ZXUN uMAC的数据备份方式采用全量备份时，该参数需要设置为2，表示需要两个租户。当VNF UDSFCfg Setting页面中的参数Tenant Count配置为2时，VM Parameters页面中的CDU虚机的VM Count参数需要配置为3，参见”VM Parameters“\r\n\r\n  \r\nTenant Name| 本参数用于配置租户的名称。| 配置原则如下：\r\n\r\n  * ZXUN uMAC部署为AMF时，必须和SET AMFLOCALOFFICECFG命令中配置的参数AMF名称一致。\r\n  * ZXUN uMAC部署MME/SGSN，没有特殊要求，可以使用默认名称。\r\n\r\n  \r\nMasterNfId| 本参数用于配置主用租户的局号。| 两个ID不能相同，取值范围：1~255。  \r\nSlaveNfId| 本参数用于配置备用租户的局号。  \r\n其他参数使用默认值。  \r\n  \r\n在ZXUN uMAC在开启全量备份的情况下，网络中需要配置两个租户，即本AMF和接管AMF，本AMF和接管AMF互为备份：\r\n\r\n  * 租户的名称和ID是通过VNF UDSFCfg Setting页签配置的。\r\n\r\n  * 这两个租户，哪一个租户为主用租户，哪一个租户为备用租户，是通过VNF Scenario页签的参数Master Tenant ID配置的。Master Tenant ID配置为2，表示租户2为主用。Master Tenant ID配置为1，表示租户1为主用。\r\n\r\n\r\n\r\n\r\n本AMF（本文档示例名称为AMF-145）的VNF UDSFCfg Setting页签如图2所示。\r\n\r\n图2 本AMF \r\n\r\n接管AMF（本文档示例名称为AMF-146）的VNF UDSFCfg Setting页签如图3所示。\r\n\r\n图3 接管AMF\n\n[3]:VNF UDSFCfg Setting\r: VNF UDSFCfg Setting\r\n\r\n配置原则\r\n\r\nVNF UDSFCfg Setting页签用于配置ZXUN uMAC的数据备份参数，必须配置。\r\n\r\n配置说明\r\n\r\n当ZXUN uMAC没有开启全量备份功能时，VNF UDSFCfg Setting页签如图1所示。\r\n\r\n图1 VNF UDSFCfg Setting（没有开启全量备份）\r\n\r\n主要参数说明参见表1。\r\n\r\n表1 参数说明参数名称| 参数说明| 配置指引  \r\n---|---|---  \r\nTenant Count| 本参数用于配置租户的个数。| 配置原则如下：\r\n\r\n  * 使用默认值1，表示ZXUN uMAC没有开启全量备份功能。\r\n  * ZXUN uMAC的数据备份方式采用全量备份时，该参数需要设置为2，表示需要两个租户。当VNF UDSFCfg Setting页面中的参数Tenant Count配置为2时，VM Parameters页面中的CDU虚机的VM Count参数需要配置为3，参见”VM Parameters“\r\n\r\n  \r\nTenant Name| 本参数用于配置租户的名称。| 配置原则如下：\r\n\r\n  * ZXUN uMAC部署为AMF时，必须和SET AMFLOCALOFFICECFG命令中配置的参数AMF名称一致。\r\n  * ZXUN uMAC部署MME/SGSN，没有特殊要求，可以使用默认名称。\r\n\r\n  \r\nMasterNfId| 本参数用于配置主用租户的局号。| 两个ID不能相同，取值范围：1~255。  \r\nSlaveNfId| 本参数用于配置备用租户的局号。  \r\n其他参数使用默认值。  \r\n  \r\n在ZXUN uMAC在开启全量备份的情况下，网络中需要配置两个租户，即本AMF和接管AMF，本AMF和接管AMF互为备份：\r\n\r\n  * 租户的名称和ID是通过VNF UDSFCfg Setting页签配置的。\r\n\r\n  * 这两个租户，哪一个租户为主用租户，哪一个租户为备用租户，是通过VNF Scenario页签的参数Master Tenant ID配置的。Master Tenant ID配置为2，表示租户2为主用。Master Tenant ID配置为1，表示租户1为主用。\r\n\r\n\r\n\r\n\r\n本AMF（本文档示例名称为AMF-145）的VNF UDSFCfg Setting页签如图2所示。\r\n\r\n图2 本AMF \r\n\r\n接管AMF（本文档示例名称为AMF-146）的VNF UDSFCfg Setting页签如图3所示。\r\n\r\n图3 接管AMF\n\n[4]:恢复配置数据和数据同步\r: 恢复配置数据和数据同步\r\n\r\n摘要\r\n\r\n本节介绍根据NF数据备份恢复备份的内容，恢复配置数据并将数据同步的操作。\r\n\r\n相关知识\r\n\r\nuMAC网元，需要同步离线配置的全部数据。\r\n\r\n步骤\r\n\r\n  1. 将待恢复的数据文件上传至与OMU(Operation & Management Unit, 操作管理单元)互通的SFTP服务器。\r\n\r\n  2. 登录EMS网管客户端，选择配置→命令处理→NF节点。\r\n\r\n小心！\r\n\r\n在原局恢复数据后，建议整局重启，如果当前不允许中断业务或者不允许重启说明**不具备重启** 条件，联系中兴通讯技术支持评估后操作。\r\n\r\n  3. 执行RESTORE:ID=1,NAME=\"default\",FILENAME=\"sftp://172.5.20.7/tmp/backup/cm_backup_1123.zip\",USERNAME=\"root\",PASSWORD=\"**************\",ISREINST=\"RESTORE_LOCAL\"命令，命令中的关键参数参见表1。\r\n\r\n表1 RESTORE命令释义参数释义| 填写说明  \r\n---|---  \r\nFILENAME（恢复文件路径）| 该参数为存放备份文件的SFTP路径。  \r\nBAKFILEPWD（恢复文件密码）| 该参数为当前网元License的受控项NF_0001当GDPR开关为**打开** 状态时需要填写备份时设置的密码，否则不需要配置。  \r\nUSERNAME（SFTP用户名）| 该参数为对应的SFTP的用户名。  \r\nPASSWORD（SFTP密码）| 该参数为对应的SFTP密码。  \r\nISREINST（恢复场景）| 该参数为设置为**RESTORE_LOCAL** （本局恢复）  \r\n  \r\n说明：\r\n\r\n在网管操作记录页面中，查看恢复进度至**100%** 并且执行结果为**成功** 状态，表示恢复完成。\r\n\r\n  4. 执行SYNA:STYPE=\"ALL\"命令，同步CUDR(Cloud Unified Data Repository, 云化统一数据仓库)和MME/SGSN服务的离线配置数据。\r\n\r\n  5. 执行SYN ONLINE:STYPE=\"ALL\"命令，进行在线一致性同步。\r\n\r\n  6. 如果恢复前的配置修改涉及Rosng协议栈数据的修改，需要在数据恢复后，同时重启主备Rosng容器生效，否则不需要重启。\r\n\r\n小心！\r\n\r\n重启前不能执行Rosng配置命令并且不能进行Rosng写入操作。\r\n\r\n    1. 通过SSH(Secure Shell, 安全外壳)方式，以admin账号分别登录网管虚机OMU0001和OMU0002。\r\n\r\n    2. 执行SU命令，将用户模式切换到ROOT模式。\r\n\r\n    3. 务必同时在两个虚机中，执行以下对应命令重启主备OMU0001和OMU0002虚机。\r\n        \r\n                docker restart vru-tmsp-rosng-0     /*OMU0001虚机执行命令*/\r\n        docker restart vru-tmsp-rosng-1     /*OMU0002虚机执行命令*/\n\n[5]:备份网元数据\r: 备份网元数据\r\n\r\n摘要\r\n\r\n本节介绍如何备份MEP网元的数据。系统支持对多个MEP网元的数据进行批量备份。\r\n\r\n步骤\r\n\r\n  1. 在配置管理页面，选择MEP管理→网元备份恢复→网元数据备份，打开**网元数据备份** 页面，如图1所示。\r\n\r\n图1 网元数据备份页面\r\n\r\n  2. 在**基本信息** 区域填写**文件前缀** 以及**备份说明** 。\r\n\r\n  3. 在**网元列表** 区域单击**选择网元** ，在**待选列表** 中选择网元。\r\n\r\n  4. （可选）单击**已选列表** ，页面显示已选择网元的信息。\r\n\r\n  5. 单击**确定** 按钮，**网元列表** 区域显示待备份的网元。连接状态中显示的表示为双CC网元，鼠标移动至图标处可查看具体的连接状态，如图2所示。\r\n\r\n图2 待备份网元\r\n\r\n  6. 单击**备份** 按钮，页面显示备份进度和结果。\r\n\r\n说明：\r\n\r\n备份页面备份的文件导出将直接导出到本地。周期备份文件导出会跳转到网元备份数据导出页面，用户选择需要的网元，再导出文件。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n网元数据备份页面的相关任务参见表1。\r\n\r\n表1 相关任务操作| 说明  \r\n---|---  \r\n查看历史备份| 单击**历史备份** 按钮，查看历史备份文件的记录。  \r\n恢复| 单击**恢复** 按钮，跳转到恢复页面，使用备份文件做恢复操作。  \r\n导出| 单击**导出** 按钮，导出备份文件。  \r\n删除| 单击**删除** 按钮，删除备份文件。", "answer": "uMAC网元VNFC的备份方式主要包括以下几种：\n\n1. 1+1互备冗余：即两个实例都工作，当一个运行实例故障时，由另一个运行实例接管业务。\n\n2. 全量备份：在VNF UDSFCfg Setting页签中配置，当开启全量备份功能时，需要配置两个租户，本AMF和接管AMF互为备份。\n\n3. 离线配置数据同步：通过RESTORE命令恢复配置数据，并使用SYNA和SYN ONLINE命令进行数据同步。\n\n4. 周期性备份：在网元数据备份页面，可以周期性地对多个MEP网元的数据进行批量备份。\n\n这些备份方式可以提升系统可靠性，便于设备监控和升级，以及实现数据的快速恢复。"}
{"id": 94, "query": "EMSPlus支持MAN节点扩容吗？", "recall": "[1]:应用限制\r: 应用限制\r\n\r\n  * 目前只支持扩容，缩容暂不考虑。\r\n\r\n  * 目前只支持FTU、MDS(Message Dispatch Service, 消息分发服务)、MU(Merging Unit, 合并单元)、DCU(Data Collection Unit, 数据采集单元)、DPU(Data Processing Unit, 数据处理单元)、ASC的扩容，不支持MAN(Manager Node, 管理节点)扩容。\r\n\r\n  * DPU(Data Processing Unit, 数据处理单元)是数据库模块，不支持和其它业务模块同时扩容，需要单独扩容。\r\n\r\n  * 扩容基于正在运行系统。\r\n\r\n  * 扩容仅支持虚机数量扩容，不支持虚拟资源扩容。\n\n[2]:上传csar包\r: 上传csar包\r\n\r\n摘要\r\n\r\n扩容操作前，需要上传和当前系统正在使用的相同版本的csar包。\r\n\r\n步骤\r\n\r\n  1. 在客户端PC(Personal Computer, 个人电脑)的浏览器地址栏中输入`https://<MAN节点EMS网络平面的双机浮动IP地址:2329`，登录到EMSPlus客户端窗口。\r\n\r\n  2. 选择菜单System→Version Management→Version Operation，查看当前系统正在使用的版本号，如图1所示。\r\n\r\n图1 查看版本号\r\n\r\n  3. 切换到菜单Package Management，进入版本包管理页面，如图2所示。\r\n\r\n图2 版本包管理\r\n\r\n  4. 单击Select Files按钮，在弹出的对话框中选择和当前系统使用的相同版本的.csar包，并单击Upload按钮，如图3所示。\r\n\r\n图3 上传csar软件包\n\n[3]:特性操作\r: 特性操作\r\n\r\nFTU、MDS(Message Dispatch Service, 消息分发服务)、DCU(Data Collection Unit, 数据采集单元)、DPU(Data Processing Unit, 数据处理单元)、ASC节点扩容时，如果虚机扩容失败，则根据不同情况，进行不同的操作。\r\n\r\n虚机扩容失败有两种情况：\r\n\r\n  * 虚机创建失败，MANO(Management and Orchestration, 管理和编排)返回失败，会有自动回滚操作，用户不需要进行回滚操作。\r\n\r\n  * 虚机创建部分成功，部分失败，MANO返回成功，EMSPlus会给MANO返回扩容失败，但MANO只要创建了虚机，就认为扩容的流程是成功的，如图1所示。因此MANO是不会自动回滚，用户需要手动进行回滚操作，参见“MANO为V5.20.12.B6之前版本回退操作”。\r\n\r\n\r\n图1 任务查看\r\n\r\n子主题：\r\n\r\n  * 扩容磁阵\r\n\r\n  * 上传csar包\r\n\r\n  * 扩容FTU/MDS/DCU/ASC\r\n\r\n  * 扩容DPU\r\n\r\n  * 回滚操作\n\n[4]:MANO为V5.20.12.B6之前版本回退操作\r: MANO为V5.20.12.B6之前版本回退操作\r\n\r\n摘要\r\n\r\nEMSPlus的虚机扩容操作失败，但是MANO(Management and Orchestration, 管理和编排)已经成功创建了虚机，用户需要手动进行扩容回退操作。\r\n\r\n本文的TECS(Tulip Elastic Cloud System, 郁金香弹性云系统)界面仅供参考。\r\n\r\n步骤\r\n\r\n  1. 登录到VNFM(Virtualized Network Function Manager, 虚拟化网络功能管理器)客户端的/home/mano/ngomm/vnfm_1/ftpvnf/vnfd/73dce03b-6a65-4e9c-a870-27b37f5a79ae路径。EMSPlus虚机扩容操作会在该路径下生成一个vnfd_model_bak.json文件，如图1所示。\r\n\r\n图1 vnfd_model_bak.json文件\r\n\r\n  2. 将vnfd_model_bak.json文件名修改为vnfd_model.json，并覆盖到/home/mano/ngomm/vnfm_1/ftpvnf/vnfd/73dce03b-6a65-4e9c-a870-27b37f5a79ae/base文件夹下的同名文件。\r\n\r\n  3. 登录到TECS(Tulip Elastic Cloud System, 郁金香弹性云系统)客户端，选择菜单虚拟资源→云主机，在云主机列表中查找MANO扩容时创建的虚机，如图2所示。\r\n\r\n图2 TECS客户端\r\n\r\n  4. 单击该虚机的选择操作下拉列表框，选择删除云主机，如图3所示。\r\n\r\n图3 删除虚机\n\n[5]:配置说明\r: 配置说明\r\n\r\n配置MAN节点作为NTP服务器，使EMSPlus其他次节点与时钟源MAN同步。", "answer": "EMSPlus不支持MAN(Manager Node, 管理节点)扩容。"}
{"id": 95, "query": "EMSPlus_HeartBeat_NET如何进行IP地址规划", "recall": "[1]:配置实例\r: 配置实例\r\n\r\n场景说明\r\n\r\n假设EMSPlus本网元号为3，MU(Merging Unit, 合并单元)的组号为1。\r\n\r\nxGW(Extendable Gateway, 综合接入网关)网元对接的IP地址10.1.1.59，端口号为11001，使用的业务类型号为3011。\r\n\r\nCGNAT(Carrier Grade Network Address Translation, 运营商级网络地址转换)网元对接的IP地址10.2.1.59，端口号为11002。\r\n\r\nFireWall网元对接的IP地址10.3.1.59，端口号为11003。\r\n\r\n数据规划\r\n\r\n根据假设的场景，EMSPlus内部IP规划参见表1。\r\n\r\n表1 EMSPlus内部IP规划名称| 地址| 模块号  \r\n---|---|---  \r\nMDS| 接收媒体面Eth2: 10.1.1.59接收媒体面Eth3: 10.2.1.59接收媒体面Eth4: 10.3.1.59转发媒体面Eth1: 182.168.1.7控制面Eth0: 172.168.1.7| 4  \r\nMAN(Manager Node, 管理节点)| 控制面：172.168.1.4| 1  \r\nMU| 接收媒体面：182.168.1.6控制面：172.168.1.6| 3  \r\n  \r\n配置步骤\r\n\r\n手工部署时，根据规划进行配置，参见表2。实例化部署时，所有的配置都可以在Inputs参数中配置。\r\n\r\n表2 配置步骤步骤| 说明| 操作  \r\n---|---|---  \r\n1| 进入MDS客户端配置模式| \r\n\r\n  1. 创建MDS的外部网元：ADD MDSEXTERNALNE:IP=10.1.1.59, PORT=11001, NETYPE=XGWADD MDSEXTERNALNE:IP=10.2.1.59, PORT=11002, NETYPE=CGNATADD MDSEXTERNALNE:IP=10.3.1.59, PORT=11003, NETYPE=FIREWALL_LOG\r\n  2. 配置MDS外部网元数据分发：ADD MDSEXTNEDATADSP:NETYPE=XGW, GROUPID=1, DESTINATION=SEND_TO_MUADD MDSEXTNEDATADSP:NETYPE=FIREWALL_LOG, GROUPID=1, DESTINATION=SEND_TO_MUADD MDSEXTNEDATADSP:NETYPE=CGNAT,GROUPID=1,DESTINATION=SEND_TO_MU\r\n  3. 配置MDS分发IP地址：ADD MDSDSPIP:GROUPID=1, MODULETYPE=DCU_MU, IPADDR=182.168.1.6\r\n  4. 同步MDS配置信息：SYNC MDS\r\n\r\n  \r\n2| 进入MU客户端配置模式| \r\n\r\n  1. 配置APN和VRFID匹配表（两者的对应关系由业务提供）：ADD APNADDRCFG:APN=CMNET, VRFID=2\r\n  2. 同步MU配置信息：SYNC MU\r\n  3. 同步MDS配置信息，也可等到MDS配置完毕后一起执行：SYNC MDS\n\n[2]:配置分发IP地址\r: 配置分发IP地址\r\n\r\n摘要\r\n\r\n配置MDS(Message Dispatch Service, 消息分发服务)节点的数据分发的模块号和IP地址。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSDSPIP命令，配置MDS节点的数据分发IP地址，如图1所示。\r\n\r\n图1 ADD MDSDSPIP命令表1 ADD MDSDSPIP命令参数名称| 参数说明  \r\n---|---  \r\nGroup ID| MDS对同一组的多个IP地址进行负载均衡数据分发，可通过SHOW MDSDSPIP命令查询组号对应的数据分发IP地址。  \r\nModel Type| ADD MODULE命令中配置的模块类型，可通过SHOW MODULE命令查询Module type。\r\n     * 当模块类型选择DCU_RP Module (DCU_RP)、DCU_MU Module (DCU_MU)或者ASC Module (ASC)时，表示MDS分发数据到同一网元的模块。\r\n     * 当模块类型选择MDS Module (MDS)时，表示MDS分发数据到另一个网元中的MDS（即MDS级联中的目的MDS）。  \r\nIP| MDS分发数据到DCU/ASC，则该地址是DCU/ASC的Local IP For Upload Data地址。可使用SHOW COMMCFG命令查询DCU/ASC相关IP地址。MDS级联，即MDS分发数据到另一个MDS，则该地址是目的MDS节点的实IP地址，MDS级联的组网结构示例参见“MDS级联”。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=<数据分发的模块类型>,IPADDR=<DCU/ASC的Local IP For Upload Data地址>\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=MDS,IPADDR=<目的MDS节点的实IP地址>\n\n[3]:配置MDS节点的外部网元\r: 配置MDS节点的外部网元\r\n\r\n摘要\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)节点的数据源主要来自于外部接入的5GC(5G Core Network, 5G核心网)网元（例如SMF(Session Management Function, 会话管理功能)、AMF(Access and Mobility Management Function, 接入和移动管理功能)、UPF(User Plane Function, 用户平面功能)）。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSEXTERNALNE命令，配置MDS节点的外部接入网元，如图1所示。\r\n\r\n图1 ADD MDSEXTERNALNE命令表1 ADD MDSEXTERNALNE命令参数参数名称| 参数说明  \r\n---|---  \r\nIP| 外接网元对接EMSPlus的业务地址。外接网元与EMSPLus（CHR）局对接，上报业务数据。当MDS节点接收FTU的数据源时，配置为FTU使用的承载消息的网络平面的地址，通常为FTU在GI面的地址。  \r\nStart Port| 外接网元向EMSPLus（CHR）局发送信息的起始端口。接入IP为FTU节点的地址时，填写为1。  \r\nEnd Port| 外接网元向EMSPLus（CHR）局发送信息的结束端口。如果仅需要配置一个端口，则Start Port和End Port配置一致。接入IP为FTU节点的地址时，填写为65535。  \r\nNE Type| MDS节点接入的网元类型。例如：\r\n     * MDS节点接收SMF数据源，选择SMF (SMF)。\r\n     * MDS节点接收FTU的数据源时，选择FTU处理的相应网元类型。  \r\n  \r\n说明：\r\n\r\n在各网元IP地址不重复的情况下，配置Start Port为1、End Port为65535。\r\n\r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSEXTERNALNE:IP=<外接网元对接EMSPlus的业务地址>,STARTPORT=<外接网元发送信息的起始端口>,ENDPORT=<外接网元发送信息的结束端口>,NETYPE=<MDS节点接入的网元类型>\n\n[4]:配置过程\r: 配置过程\r\n\r\n本节包含以下内容：\r\n\r\n  * 配置MDS\r\n\r\n  * 配置MU参数\r\n\r\n\r\n\r\n\r\n配置MDS\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)主要配置：\r\n\r\n  1. 在EMSPlus客户端，单击System，选择Terminal进入终端配置。\r\n\r\n  2. 单击Add MDS External NE Configuration或使用命令ADD MDS EXTERNALNE，添加和MDS对接的外部网元，这里主要是配置对端网元的IP地址、端口号和网元类型。\r\n\r\n  3. 单击Add MDS External NE Data Dispatch Configuration或使用命令ADD MDSEXTNEDATADSP，配置外部网元类型、组号和对应的MU(Merging Unit, 合并单元)，主要是配置对于收到配置的外部网元和对应的局号的消息发到MU上进行消息的处理。\r\n\r\n  4. 单击Add MDS Dispatch IP Address Configuration或是使用命令ADD MDSDSPIP，配置MDS将消息转发到MU的IP地址和组号。\r\n\r\n  5. 单击SYNC MDS DATA或是使用命令SYNC MDS，进行MDS配置数据的同步。\r\n\r\n\r\n\r\n\r\n配置MU参数\r\n\r\nMU(Merging Unit, 合并单元)主要配置：\r\n\r\n  1. 在EMSPlus客户端，单击Add DCU_MU Special Parameter Configuration或使用命令ADD DCUMUCFG，配置MU专有的参数。\r\n\r\n当不同逻辑子网的CGNAT和CHR的私网IPV4地址存在冲突时，可选参数Private IP Conflict Mode配置为ON，其余情况下均不需要配置，默认为OFF。\r\n\r\n若其中的必选参数已在EMSPlus实例化时配置，可单击Set DCU_MU Special ParameterConfiguration或使用命令SET DCUMUCFG配置可选参数。\r\n\r\n  2. （可选）根据业务需求，单击Add APN Address Configuration或使用命令ADD APNADDRCFG，配置APN和VRFID匹配，两者的对应关系由业务侧提供。\r\n\r\n  3. 单击Add MU Save Configuration或使用命令ADD MUSAVECFG，配置MU数据存储参数。\r\n\r\n  4. （可选）根据业务需求，单击Set Packet Filter Configuration或使用命令SET PKTFILTERCFG，配置包过滤。\r\n\r\n  5. （可选）根据业务需求，单击Add IPDR IP Filter或使用命令ADD IPDRIPFILTER，配置IPDR IP过滤器。\r\n\r\n  6. 单击SYNC MU DATA或使用命令SYNC MU，同步MU配置数据。\n\n[5]:配置实例\r: 配置实例\r\n\r\n场景说明\r\n\r\n本节介绍如何在NetNumen U31上接入EMSPlus，EMSPlus需要接入EMS系统进行集中维护管理。\r\n\r\n数据规划\r\n\r\n根据实际情况进行配置，假设场景的数据规划参见表1。\r\n\r\n表1 数据规划参数名称| 参数值| 备注  \r\n---|---|---  \r\n网元代理名称| emsplus| EMSPlus在EMS上显示的名称。  \r\nEMSPlus的IP地址| 10.43.37.224| MAN(Manager Node, 管理节点)节点的EMS网络平面的浮动IP(Internet Protocol, 因特网协议)地址  \r\nEMS服务器的IP地址| 10.43.37.252| -  \r\n  \r\n配置步骤\r\n\r\n设置接入EMS的参数\r\n\r\n  1. 部署EMSPlus虚机时，EMS网络平面的浮动IP地址为EMSPlus接入EMS的IP地址，如图1所示。\r\n\r\n图1 配置浮动IP地址\r\n\r\n\r\n\r\n\r\n打开网元代理管理\r\n\r\n  1. 登录NetNumen U31客户端。\r\n\r\n  2. 单击客户端窗口工具栏中的图标，切换到Topology Management窗口，如图2所示。\r\n\r\n图2 拓扑管理\r\n\r\n  3. 右击拓扑树中的根节点EMS Server，选择快捷菜单CN NE Agent Management，如图3所示。\r\n\r\n图3 网元树\r\n\r\n弹出CN NE Agent Management对话框，如图4所示。\r\n\r\n图4 核心网网元代理管理\r\n\r\n\r\n\r\n\r\n创建网元代理\r\n\r\n  1. 单击对话框右侧的Add按钮，弹出Create NE Agent对话框，如图5所示。\r\n\r\n图5 创建网元代理\r\n\r\n  2. 选择V4 OMS。在Basic Attributes页面输入网元代理的名称、EMSPlus的MAN节点的浮动IP地址、EMS服务器的IP地址，如图6所示。\r\n\r\n图6 配置网元代理基本属性\r\n\r\n  3. 切换到Extended Attributes页面，参数保持默认值，如图7所示。\r\n\r\n图7 网元代理扩展属性\r\n\r\n  4. 单击OK按钮，在弹出的提示框中单击OK按钮，如图8所示，完成网元代理的创建。\r\n\r\n图8 网元代理创建成功\r\n\r\n\r\n\r\n\r\n启动网元代理\r\n\r\n  1. 在CN NE Agent Management对话框中，选中新建的EMSPlus网元代理emsplus，单击右侧的Start按钮，如图9所示。\r\n\r\n图9 启动网元代理\r\n\r\n  2. 在弹出的Start NE Agent对话框中等待网元代理接入完成提示The NE Agent starts successfully。单击Close按钮，关闭对话框，如图10所示。\r\n\r\n图10 网元代理启动成功\r\n\r\n网元树中显示刚启动的EMSPlus网元代理和网元。V4 OMS(Operation and Maintenance Subsystem, 操作维护子系统)网元代理的节点呈两层结构，第一层为网元代理，第二层为V4网元，如图11所示。\r\n\r\n图11 接入EMSPlus", "answer": "根据提供的上下文信息，关于EMSPlus_HeartBeat_NET的IP地址规划没有具体的提及。因此，对于这个问题，我无法给出一个明确的答案，只能回答为“不确定”。如果需要了解EMSPlus_HeartBeat_NET的IP地址规划，建议查阅相关的产品文档或技术规格说明书。"}
{"id": 96, "query": "EMSPlus支持DPU和其他业务模块同时扩容吗？", "recall": "[1]:应用限制\r: 应用限制\r\n\r\n  * 目前只支持扩容，缩容暂不考虑。\r\n\r\n  * 目前只支持FTU、MDS(Message Dispatch Service, 消息分发服务)、MU(Merging Unit, 合并单元)、DCU(Data Collection Unit, 数据采集单元)、DPU(Data Processing Unit, 数据处理单元)、ASC的扩容，不支持MAN(Manager Node, 管理节点)扩容。\r\n\r\n  * DPU(Data Processing Unit, 数据处理单元)是数据库模块，不支持和其它业务模块同时扩容，需要单独扩容。\r\n\r\n  * 扩容基于正在运行系统。\r\n\r\n  * 扩容仅支持虚机数量扩容，不支持虚拟资源扩容。\n\n[2]:扩容DPU\r: 如果扩容的新虚机数据库盘使用不同的云硬盘类型，在公共配置/数据库盘区域中，修改云硬盘类型参数。清空原有云硬盘类型，依次输入新扩容DPU虚机数据库盘挂载的云硬盘类型，输入的云硬盘类型的数量为“扩容DPU虚机数”×每虚机数据库盘数量，云硬盘类型之间使用英文逗号分隔，该区域其他参数不需要修改，如图5所示。\r\n\r\n每个虚机的每个数据库盘都挂载一个云硬盘类型，同一个DPU下多个数据库盘挂载的云硬盘类型相同。\r\n\r\n例如：\r\n\r\n     * 扩容两个DPU虚机，每虚机数据库盘数量参数为1。\r\n\r\n       * 如果两个DPU虚机数据库盘都挂载云硬盘类型emsplus_vol_02，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_02`。\r\n\r\n       * 如果两个DPU虚机数据库盘分别挂载云硬盘类型emsplus_vol_02和emsplus_vol_03，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_03`。\r\n\r\n     * 扩容两个DPU虚机，每虚机数据库盘数量参数为2。\r\n\r\n如果第一个DPU虚机两个数据库盘都挂载云硬盘类型emsplus_vol_02，第二个DPU虚机两个数据库盘都挂载云硬盘类型emsplus_vol_03，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_02,emsplus_vol_03,emsplus_vol_03`。\r\n\r\n图5 修改数据库盘\r\n\r\n升级后再扩容的场景，镜像有变更，需要在inputs界面填写升级后版本对应的镜像名称。\r\n\r\n在公共配置区域中，镜像名称填为升级后版本对应的镜像名称\r\n\r\n图6 扩容时填写镜像名称\r\n\r\n  7. 单击提交按钮，虚机创建成功，进度条显示100%，表示扩容虚机成功，如图7所示。\r\n\r\n图7 缩扩容结果\r\n\r\n\r\n\r\n\r\n扩容节点\r\n\r\n摘要\r\n\r\n在EMSPlus客户端扩容DPU节点，安装EMSPlus各模块的业务。\r\n\r\n步骤\r\n\r\n  1. 在客户端PC的浏览器地址栏中输入`https://<MAN节点EMS网络平面的双机浮动IP地址>:2329`，登录到EMSPlus客户端窗口。\r\n\r\n  2. 单击导航栏System，选择菜单Version Management→Expansion Management，检查扩容前后的虚机数量是否有误，如图8所示。\r\n\r\n图8 扩容管理\r\n\r\n  3. 虚机数量无误后，单击Expansion，弹出密码输入对话框，如图9所示。\r\n\r\n图9 密码输入对话框\r\n\r\n  4. 输入客户端的登录密码，单击OK。\r\n\r\n等待EMSPlus各模块业务安装，完成DPU节点扩容。\r\n\r\n图10 节点扩容结果\r\n\r\n\r\n\r\n\r\n验证扩容结果\r\n\r\n摘要\r\n\r\n查询EMSPlus系统中的模块，验证扩容是否成功。\r\n\r\n步骤\r\n\r\n  1. 在客户端PC的浏览器地址栏中输入`https://<MAN节点EMS网络平面的双机浮动IP地址>:2329`，登录到EMSPlus客户端窗口。\r\n\r\n  2.\n\n[3]:扩容FTU/MDS/DCU/ASC\r: 在公共配置/数据盘区域中，如果原有硬盘类型为volume，且扩容的新虚机数据盘使用不同的云硬盘类型时，修改云硬盘类型参数。清空原有云硬盘类型，依次输入新扩容DCU虚机、MDS虚机、ASC虚机、FTU虚机数据盘挂载的云硬盘类型（每个虚机数据盘都挂载一个云硬盘类型），云硬盘类型之间使用英文逗号分隔，该区域其他参数不需要修改，如图10所示。\r\n\r\n例如：\r\n\r\n     * 只扩容两个DCU虚机。\r\n\r\n如果DCU虚机数据盘分别挂载云硬盘类型emsplus_vol_02和emsplus_vol_03，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_03`。\r\n\r\n     * 扩容两个DCU虚机和一个MDS虚机。\r\n\r\n       * 如果两个DCU虚机数据盘都挂载云硬盘类型emsplus_vol_02，MDS虚机数据盘挂载云硬盘类型emsplus_vol_03，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_02,emsplus_vol_03`。\r\n\r\n       * 如果两个DCU虚机数据盘分别挂载云硬盘类型emsplus_vol_02和emsplus_vol_03，MDS虚机数据盘挂载云硬盘类型emsplus_vol_04，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_03,emsplus_vol_04`。\r\n\r\n图10 修改云硬盘类型\r\n\r\n升级后再扩容的场景，镜像有变更，需要在inputs界面填写升级后版本对应的镜像名称。\r\n\r\n在公共配置区域中，镜像名称填为升级后版本对应的镜像名称\r\n\r\n图11 扩容时填写镜像名称\r\n\r\n  12. 单击提交按钮，虚机创建成功，进度条显示100%，表示扩容虚机成功，如图12所示。\r\n\r\n图12 缩扩容结果\r\n\r\n\r\n\r\n\r\n扩容节点\r\n\r\n摘要\r\n\r\n在EMSPlus客户端扩容DCU、MDS、ASC、FTU节点，安装EMSPlus各模块的业务。\r\n\r\n步骤\r\n\r\n  1. 在客户端PC的浏览器地址栏中输入`https://<MAN节点EMS网络平面的双机浮动IP地址>:2329`，登录到EMSPlus客户端窗口。\r\n\r\n  2. 选择菜单System→Expansion Management，检查扩容前后的虚机数量是否有误，如图13所示。\r\n\r\n图13 扩容管理\r\n\r\n  3. 虚机数量无误后，单击Expansion，弹出密码输入对话框，如图14所示。\r\n\r\n图14 密码输入对话框\r\n\r\n  4. 输入客户端的登录密码，单击OK。\r\n\r\n等待EMSPlus各模块业务安装，完成DCU、MDS、ASC、FTU节点扩容。\r\n\r\n图15 节点扩容结果\r\n\r\n\r\n\r\n\r\n验证扩容结果\r\n\r\n摘要\r\n\r\n查询EMSPlus系统中的模块，验证扩容是否成功。\r\n\r\n步骤\r\n\r\n  1. 在客户端PC的浏览器地址栏中输入`https://<MAN节点EMS网络平面的双机浮动IP地址>:2329`，登录到EMSPlus客户端窗口。\r\n\r\n  2.\n\n[4]:扩容磁阵\r: 扩容磁阵\r\n\r\n摘要\r\n\r\n当虚机对应的云硬盘类型所在的磁阵空间不足时，扩容磁阵。\r\n\r\n前提\r\n\r\n磁阵的RAID(Redundant Array of Independent Disks, 独立冗余磁盘阵列)类型已配置为RAID 5。\r\n\r\n相关信息\r\n\r\n  * 优先扩容EMSPlus系统。\r\n\r\n  * 如无法优先扩容EMSPlus系统，建议其它网元指定云硬盘类型。\r\n\r\n  * 如果在扩容时DPU(Data Processing Unit, 数据处理单元)的数据库盘创建失败，须要检查对应的云硬盘类型所在的磁阵空间是否被其它VNF(Virtualized Network Function, 虚拟化网络功能)占用，如果被其它VNF占用，须要相应VNF释放磁阵空间。\r\n\r\n\r\n\r\n\r\n步骤\r\n\r\n  1. 新增磁阵柜添加到TECS(Tulip Elastic Cloud System, 郁金香弹性云系统)存储池，具体操作参考TECS开通文档，不同磁阵参考对应的指导手册，例如KS3200磁阵参考《vCN磁阵配置指导手册（ZTE KS3200)）》。\r\n\r\n  2. 在TECS建立磁阵和云硬盘类型的对应关系，参考TECS开通手册。\n\n[5]:扩容DPU\r: 扩容DPU\r\n\r\n本节介绍DPU(Data Processing Unit, 数据处理单元)的扩容，目前EMSPlus仅支持扩容操作，不支持缩容操作。\r\n\r\n小心！\r\n\r\n二次扩容DPU之前，需要手工完成DPU Rebalance，否则不许扩容。详细操作参见“配置DPU Rebalance（可选）”。\r\n\r\n本节包含以下内容：\r\n\r\n  * 创建虚机\r\n\r\n  * 扩容节点\r\n\r\n  * 验证扩容结果\r\n\r\n  * 配置DPU Rebalance（可选）\r\n\r\n\r\n\r\n\r\n创建虚机\r\n\r\n摘要\r\n\r\n在NFVO(Network Functions Virtualization Orchestrator, 网络功能虚拟化编排器)客户端创建用于扩容的虚机。\r\n\r\n步骤\r\n\r\n  1. 在客户端打开Google Chrome浏览器，在地址栏输入`https://NFVO服务端IP:28808/nfvo-mano-portal`，登录CloudStudio系统的NFVO客户端窗口。\r\n\r\n  2. 选择菜单编排→应用→VNF，进入VNF(Virtualized Network Function, 虚拟化网络功能)列表页面，如图1所示。\r\n\r\n图1 VNF列表\r\n\r\n  3. 单击需要扩容虚机的更多按钮，选择下拉菜单容量调整，进入容量调整配置页面，页面显示原有虚机的各项配置，如图2所示。\r\n\r\n图2 缩扩容配置\r\n\r\n  4. 在虚机配置/虚机个数区域中，修改DPU的虚机数量，DPU虚机数至少增加2个虚机。例如虚拟机个数由`4`修改为`6`，其他参数不需要修改，如图3所示。\r\n\r\n说明：\r\n\r\n目前仅支持虚机数量的扩容，不支持虚机虚拟资源规格的扩容。\r\n\r\n图3 修改DPU虚机数\r\n\r\n  5. 在公共配置/数据盘区域中，如果原有硬盘类型为volume，且扩容的新虚机数据盘使用不同的云硬盘类型时，修改云硬盘类型参数。清空原有云硬盘类型，依次输入新扩容DPU虚机数据盘挂载的云硬盘类型（每个虚机数据盘都挂载一个云硬盘类型），云硬盘类型之间使用英文逗号分隔，该区域其他参数不需要修改，如图4所示。\r\n\r\n例如扩容两个DPU虚机：\r\n\r\n     * 如果两个DPU虚机数据盘都挂载云硬盘类型emsplus_vol_02，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_02`。\r\n\r\n     * 如果两个DPU虚机数据盘分别挂载云硬盘类型emsplus_vol_02和emsplus_vol_03，则云硬盘类型参数修改为`emsplus_vol_02,emsplus_vol_03`。\r\n\r\n图4 修改数据盘\r\n\r\n  6.", "answer": "EMSPlus不支持DPU和其他业务模块同时扩容。DPU(Data Processing Unit, 数据处理单元)是数据库模块，需要单独扩容。"}
{"id": 97, "query": "Logging日志查询预定义模板包含哪些？", "recall": "[1]:* 特性描述\r: * 特性描述\r\n    * 术语\r\n    * 描述\r\n      * 定义\r\n      * 背景知识\r\n    * 应用场景\r\n    * 客户收益\r\n    * 实现原理\r\n      * 系统架构\r\n      * 涉及的网元\r\n      * 本网元实现\r\n      * 业务流程\r\n    * 系统影响\r\n    * 应用限制\r\n    * 特性交互\r\n    * 遵循标准\r\n    * 特性能力\r\n    * 可获得性\r\n      * 版本要求及变更记录\r\n      * License要求\r\n      * 对其他网元的要求\r\n    * O&M相关\r\n      * 命令\r\n      * 性能统计\r\n      * 告警和通知\r\n      * 业务观察/失败观察\r\n      * 话单与计费\r\n  * 特性配置\r\n    * 配置说明\r\n    * 配置前提\r\n    * 配置过程\r\n      * 配置MDS\r\n      * 配置MU参数\r\n    * 配置实例\r\n  * 特性操作\r\n    * Logging日志查询分析\r\n      * Logging窗口介绍\r\n      * 按预定义模板查询数据\r\n        * General Query\r\n        * 统计日志数据\r\n        * 查询删除会话的日志\r\n    * IPDR日志查询分析\r\n      * IPDR窗口介绍\r\n      * 查询用户上网日志\r\n    * 创建定时任务\r\n  * 测试用例\r\n    * IPDR测试用例\r\n    * Logging测试用例\r\n  * 缩略语\r\n    * CGNAT\r\n    * CHR\r\n    * CN\r\n    * CS\r\n    * DPU\r\n    * eNodeB\r\n    * FTP\r\n    * IMSI\r\n    * IP\r\n    * IPDR\r\n    * KPI\r\n    * MAN\r\n    * MDS\r\n    * MS\r\n    * MSISDN\r\n    * MU\r\n    * NAT\r\n    * PDN\r\n    * PS\r\n    * SFTP\r\n    * UMTS\r\n    * xGW\n\n[2]:按预定义模板查询数据\r: 配置日志数据统计的参数。\r\n\r\n  4. 单击按钮，统计结果显示在页面下方，如图5所示。\r\n\r\n图5 查询结果\r\n\r\n\r\n\r\n\r\n查询删除会话的日志\r\n\r\n摘要\r\n\r\n维护人员可以查询选定时间范围的IP(Internet Protocol, 因特网协议)地址的删除会话日志信息。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的Logging窗口，单击功能操作区的Query。\r\n\r\n  2. 选择左侧菜单All→Predefined Query→Logging→CGNAT→Delete Session Log(CGNAT)，打开日志查询页面，如图6所示。\r\n\r\n图6 查询删除会话日志表3 查询删除会话日志参数说明参数名称| 参数说明  \r\n---|---  \r\nTime| 查询3天时间范围内的日志数据。  \r\nRecords| 查询结果显示的记录数。  \r\nPublic Source IP| 分配给MS的公网IP地址和端口号。  \r\nPublic Source Port  \r\nPrivate Source IP| 分配给MS(Mobile Station, 移动台)的私网IP地址和端口号。  \r\nPrivate Port  \r\nDest IP| MS被访问的目的IP地址和端口号。  \r\nDest Port  \r\nDest Nat IP| MS经过NAT(Network Address Translation, 网络地址转换)映射后的目的IP地址和端口号。  \r\nDest Nat Port  \r\nProtocol| MS使用的协议类型。  \r\n  \r\n  3. 配置日志查询的参数。\r\n\r\n  4. 单击按钮，查询结果显示在页面下方。\n\n[3]:按预定义模板查询数据\r: 按预定义模板查询数据\r\n\r\n统计查询的预定义模板包括以下几种。\r\n\r\n  * Log Query\r\n\r\n    * General Query\r\n\r\n  * CGNAT\r\n\r\n    * Create Session Log (CGNAT)\r\n\r\n    * Delete Session Log (CGNAT)\r\n\r\n    * Statistics Data\r\n\r\n  * FIREWALL\r\n\r\n    * Create Session Log (Firewall)\r\n\r\n    * Delete Session Log (Firewall)\r\n\r\n    * Security Log\r\n\r\n    * System Log\r\n\r\n    * Session Statistics Data\r\n\r\n    * Security Statistics Data\r\n\r\n\r\n\r\n\r\n本文以Statistics Data和Delete Session Log为例，介绍数据统计和日志查询操作，其他操作类似。\r\n\r\n本节包含以下内容：\r\n\r\n  * General Query\r\n\r\n  * 统计日志数据\r\n\r\n  * 查询删除会话的日志\r\n\r\n\r\n\r\n\r\nGeneral Query\r\n\r\n摘要\r\n\r\n介绍如何使用预定义模板查询5GC的控制面日志。\r\n\r\n步骤\r\n\r\n  1. 在左侧菜单选择All→Predefined Query→Logging→Log Query→General Query，打开General Query查询页面，如图1所示。\r\n\r\n说明：\r\n\r\n系统最多可以同时打开3个General Query报表，并在页签右上角以数字显示。\r\n\r\n图1 General Query表1 General Query参数说明参数名称| 参数说明  \r\n---|---  \r\nTime| 设置日志查询的时间段  \r\nRecords| 查询结果显示的记录数。取值范围为1~4000。  \r\nIMSI_SUPI| 按照指定的IMSI(International Mobile Subscriber Identity, 国际移动用户标识)_SUPI(Subscriber Permanent Identifier, 用户永久标识)号码或MSISDN(Mobile Station International Subscriber Directory Number, 移动台国际用户目录号)_GPSI(Generic Public Subscription Identifier, 一般公共用户标识)号码进行查询。\r\n     * “=” : 精准匹配\r\n     * “!=” : 反选  \r\nMSISDN_GPSI  \r\nNFTypeNFID| 按照指定的NF(Network Function, 网络功能)类型（NF Type）或NFID进行查询。\r\n     * in表示查询选择所选条件的数据。\r\n     * not in表示查询除这些条件之外的数据。  \r\nCause| 按照指定的原因码进行查询。  \r\n  \r\n  2. 配置General Query的参数。\r\n\r\n  3. （可选）单击按钮，选择查询结果展示表格的表头字段，单击Confirm按钮，如图2所示。\r\n\r\n如果配置则至少选择一个，如果都不选择则查询所有字段的流量。\r\n\r\n图2 选择维度和KPI字段\r\n\r\n  4. 单击按钮，查询结果显示在页面下方，如图3所示。\r\n\r\n图3 General Query结果\r\n\r\n查询结果区的左侧显示查询的所有的日志信息。\r\n\r\n查询结果的的右侧显示单条日志的详细内容。\r\n\r\n\r\n\r\n\r\n统计日志数据\r\n\r\n摘要\r\n\r\n统计日志数据，包括上行流量和下行流量，以及上行包和下行包。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的Logging窗口，单击功能操作区的Query。\r\n\r\n  2. 选择左侧菜单All→Predefined Query→Logging→CGNAT→Statistics Data，打开日志数据统计页面，如图4所示。\r\n\r\n图4 统计日志数据表2 统计日志数据参数说明参数名称| 参数说明  \r\n---|---  \r\nTime Granularity| 当Time Granularity设置为15Min或Hour，则查询Time可选择1~24小时内。当Time Granularity设置为Day，则查询Time可选择1~3天内。当Time Granularity设置为Month，则查询Time可选择1~2个月内。  \r\nTime  \r\nRecords| 统计结果显示的记录数。取值范围为1~4000，默认值为20。  \r\n  \r\n  3. 配置日志数据统计的参数。\r\n\r\n  4.\n\n[4]:Logging日志查询分析\r: Logging日志查询分析\r\n\r\n当MS(Mobile Station, 移动台)通过UMTS(Universal Mobile Telecommunication System, 通用移动通讯系统)接入外部PDN(Packet Data Network, 分组数据网)网络（如Internet）时，必须采用一个公网IP(Internet Protocol, 因特网协议)地址来传送数据包。MS获取到一个私网IP地址，通过NAT(Network Address Translation, 网络地址转换)服务将私网IP被映射为公网IP地址，并接入Internet。\r\n\r\n通过查询CGNAT、防火墙等相关日志信息，提供数据业务运营分析，为移动数据业务精细化运营提供了全面支撑。\r\n\r\n子主题：\r\n\r\n  * Logging窗口介绍\r\n\r\n  * 按预定义模板查询数据\n\n[5]:Logging查询\r: 表5 Firewall会话创建日志字段 字段 | 含义  \r\n---|---  \r\nStart Time | 流开始时间  \r\nSource IP | 源IP  \r\nSource NAT IP | 转换后的源IP  \r\nDest IP | 目的IP  \r\nDest NAT IP | 转换后的目的IP  \r\nSource Port | 源端口  \r\nSource NAT Port | 转化后的源端口  \r\nDest Port | 目的端口  \r\nDest NAT Port | 转换后的目的端口  \r\nProtocol | 协议类型  \r\nFacility | Facility  \r\nLevel | 级别  \r\nOperator | 操作字  \r\nIP TOS | IP TOS  \r\nLog Type | 日志类型  \r\nNAT Type | NAT 类型  \r\nIngress VRF ID | 入向VRF ID  \r\nEgress VRF ID | 出向VRF ID  \r\nModule | 模块  \r\nRack ID | Rack ID  \r\nShelf ID | Shelf ID  \r\nSlot ID | Slot ID  \r\nCPU ID | CPU ID  \r\nHost Name | 主机名（最长128字节）  \r\nSource Zone | Source Zone  \r\nDest Zone | Dest Zone  \r\n  \r\nFireWall会话删除日志字段参见表6。\r\n\r\n表6 Firewall会话删除日志字段 字段 | 含义  \r\n---|---  \r\nStart Time | 流开始时间  \r\nEnd Time | 流开始时间  \r\nSource IP | 源IP  \r\nSource NAT IP | 转换后的源IP  \r\nDest IP | 目的IP  \r\nDest NAT IP | 转换后的目的IP  \r\nSource Port | 源端口  \r\nSource NAT Port | 转化后的源端口  \r\nDest Port | 目的端口  \r\nDest NAT Port | 转换后的目的端口  \r\nProtocol | 协议类型  \r\nIN Volume | 入向字节数  \r\nOUT Volume  | 出向字节数  \r\nIN Packets | 入向包数  \r\nOUT Packets | 出向包数  \r\nFacility | Facility  \r\nLevel | 级别  \r\nOperator | 操作字  \r\nIP TOS | IP TOS  \r\nLog Type | 日志类型  \r\nNAT Type | NAT 类型  \r\nIngress VRF ID | 入向VRF ID  \r\nEgress VRF ID | 出向VRF ID  \r\nModule | 模块  \r\nRack ID | Rack ID  \r\nShelf ID | Shelf ID  \r\nSlot ID | Slot ID  \r\nCPU ID | CPU ID  \r\nHost Name | 主机名（最长128字节）  \r\nSource Zone | Source Zone  \r\nDest Zone | Dest Zone  \r\n  \r\nFireWall安全日志\r\n\r\nFireWall安全日志的一级索引查询条件参见表7。\r\n\r\n表7 FireWall安全日志查询条件 查询条件 | 是否必选  \r\n---|---  \r\nTime Range | 必选  \r\nSource IP | 可选  \r\nSource NAT IP  \r\nDest IP   \r\nDest NAT IP  \r\nSource Port   \r\nSource NAT Port  \r\nDest Port  \r\nDest NAT Port  \r\nProtocol  \r\nLog Type  \r\nModule  \r\nLevel  \r\nRack ID  \r\nShelf ID  \r\nSlot ID  \r\nCPU ID  \r\n  \r\nFireWall安全日志字段参见表8。", "answer": "Logging日志查询预定义模板包含以下几种：\n\n  * Log Query\n    * General Query\n  * CGNAT\n    * Create Session Log (CGNAT)\n    * Delete Session Log (CGNAT)\n    * Statistics Data\n  * FIREWALL\n    * Create Session Log (Firewall)\n    * Delete Session Log (Firewall)\n    * Security Log\n    * System Log\n    * Session Statistics Data\n    * Security Statistics Data"}
{"id": 98, "query": "EMSPLus如何配置分发IP地址", "recall": "[1]:配置分发IP地址\r: 配置分发IP地址\r\n\r\n摘要\r\n\r\n配置MDS(Message Dispatch Service, 消息分发服务)节点的数据分发的模块号和IP地址。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSDSPIP命令，配置MDS节点的数据分发IP地址，如图1所示。\r\n\r\n图1 ADD MDSDSPIP命令表1 ADD MDSDSPIP命令参数名称| 参数说明  \r\n---|---  \r\nGroup ID| MDS对同一组的多个IP地址进行负载均衡数据分发，可通过SHOW MDSDSPIP命令查询组号对应的数据分发IP地址。  \r\nModel Type| ADD MODULE命令中配置的模块类型，可通过SHOW MODULE命令查询Module type。\r\n     * 当模块类型选择DCU_RP Module (DCU_RP)、DCU_MU Module (DCU_MU)或者ASC Module (ASC)时，表示MDS分发数据到同一网元的模块。\r\n     * 当模块类型选择MDS Module (MDS)时，表示MDS分发数据到另一个网元中的MDS（即MDS级联中的目的MDS）。  \r\nIP| MDS分发数据到DCU/ASC，则该地址是DCU/ASC的Local IP For Upload Data地址。可使用SHOW COMMCFG命令查询DCU/ASC相关IP地址。MDS级联，即MDS分发数据到另一个MDS，则该地址是目的MDS节点的实IP地址，MDS级联的组网结构示例参见“MDS级联”。  \r\n  \r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=<数据分发的模块类型>,IPADDR=<DCU/ASC的Local IP For Upload Data地址>\r\n\r\nADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=MDS,IPADDR=<目的MDS节点的实IP地址>\n\n[2]:配置过程\r: 配置过程\r\n\r\n本节包含以下内容：\r\n\r\n  * 配置MDS\r\n\r\n  * 配置MU参数\r\n\r\n\r\n\r\n\r\n配置MDS\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)主要配置：\r\n\r\n  1. 在EMSPlus客户端，单击System，选择Terminal进入终端配置。\r\n\r\n  2. 单击Add MDS External NE Configuration或使用命令ADD MDS EXTERNALNE，添加和MDS对接的外部网元，这里主要是配置对端网元的IP地址、端口号和网元类型。\r\n\r\n  3. 单击Add MDS External NE Data Dispatch Configuration或使用命令ADD MDSEXTNEDATADSP，配置外部网元类型、组号和对应的MU(Merging Unit, 合并单元)，主要是配置对于收到配置的外部网元和对应的局号的消息发到MU上进行消息的处理。\r\n\r\n  4. 单击Add MDS Dispatch IP Address Configuration或是使用命令ADD MDSDSPIP，配置MDS将消息转发到MU的IP地址和组号。\r\n\r\n  5. 单击SYNC MDS DATA或是使用命令SYNC MDS，进行MDS配置数据的同步。\r\n\r\n\r\n\r\n\r\n配置MU参数\r\n\r\nMU(Merging Unit, 合并单元)主要配置：\r\n\r\n  1. 在EMSPlus客户端，单击Add DCU_MU Special Parameter Configuration或使用命令ADD DCUMUCFG，配置MU专有的参数。\r\n\r\n当不同逻辑子网的CGNAT和CHR的私网IPV4地址存在冲突时，可选参数Private IP Conflict Mode配置为ON，其余情况下均不需要配置，默认为OFF。\r\n\r\n若其中的必选参数已在EMSPlus实例化时配置，可单击Set DCU_MU Special ParameterConfiguration或使用命令SET DCUMUCFG配置可选参数。\r\n\r\n  2. （可选）根据业务需求，单击Add APN Address Configuration或使用命令ADD APNADDRCFG，配置APN和VRFID匹配，两者的对应关系由业务侧提供。\r\n\r\n  3. 单击Add MU Save Configuration或使用命令ADD MUSAVECFG，配置MU数据存储参数。\r\n\r\n  4. （可选）根据业务需求，单击Set Packet Filter Configuration或使用命令SET PKTFILTERCFG，配置包过滤。\r\n\r\n  5. （可选）根据业务需求，单击Add IPDR IP Filter或使用命令ADD IPDRIPFILTER，配置IPDR IP过滤器。\r\n\r\n  6. 单击SYNC MU DATA或使用命令SYNC MU，同步MU配置数据。\n\n[3]:配置CU合并（可选）\r: 配置CU合并（可选）\r\n\r\n摘要\r\n\r\n对于CU(Control Plane and User Plane, 控制面和用户面)合并场景，需要配置ASC节点，将SMF(Session Management Function, 会话管理功能)消息与UPF(User Plane Function, 用户平面功能)消息合并。\r\n\r\nASC节点从SMF消息中取出部分字段填充到UPF消息中，并将UPF消息发送到DCU或MU。当报文经过ASC节点后，就没有SMF消息了。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD ASCDSPIP命令，配置ASC节点数据分发的IP地址（DCU或者MU的IP地址），如图1所示。\r\n\r\n图1 ADD ASCDSPIP命令表1 ADD ASCDSPIP命令参数参数名称| 参数说明  \r\n---|---  \r\nGroup ID| ASC对同一组的多个IP(Internet Protocol, 因特网协议)地址进行负载均衡数据分发，可通过SHOW ASCDSPIP命令查询组号对应的模块类型和数据分发IP地址。  \r\nModel Type| 对于EMSPLus（Logging）局，选择DCU_MU Moduel (DCU_MU)。可通过SHOW MODULE命令查询Module type。  \r\nIP| 接收ASC分发数据的目的地址。对于EMSPLus（Logging）局，设置MU的IP地址。可使用SHOW COMMCFG命令查询DCU/MU相关IP地址。  \r\n  \r\n  2. 执行ADD ASCEXTNEDATADSP命令，配置UPF消息发送到DCU还是MU，如图2所示。\r\n\r\n图2 ADD ASCEXTNEDATADSP命令表2 ADD ASCEXTNEDATADSP命令参数参数名称| 参数说明  \r\n---|---  \r\nNet Type| ASC节点接入的网元类型，选择UPF (UPF)。  \r\nGroup ID| 通过SHOW MDSDSPIP命令查询组号对应的模块类型和数据分发IP地址。  \r\nTarget| 数据分发目标的类型。对于EMSPLus（Logging）局，选择Send to CU (SEND_TO_CU)。  \r\n  \r\n  3. 执行SYNC ASC命令，传送配置数据到ASC，如图3所示。\r\n\r\n图3 SYNC ASC命令\n\n[4]:配置CU合并（可选）\r: 配置CU合并（可选）\r\n\r\n摘要\r\n\r\n对于CU(Control Plane and User Plane, 控制面和用户面)合并场景，需要配置ASC节点，将SMF(Session Management Function, 会话管理功能)消息与UPF(User Plane Function, 用户平面功能)消息合并。\r\n\r\nASC节点从SMF消息中取出部分字段填充到UPF消息中，并将UPF消息发送到DCU或MU。当报文经过ASC节点后，就没有SMF消息了。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD ASCDSPIP命令，配置ASC节点数据分发的IP地址（DCU或者MU的IP地址），如图1所示。\r\n\r\n图1 ADD ASCDSPIP命令表1 ADD ASCDSPIP命令参数参数名称| 参数说明  \r\n---|---  \r\nGroup ID| ASC对同一组的多个IP(Internet Protocol, 因特网协议)地址进行负载均衡数据分发，可通过SHOW ASCDSPIP命令查询组号对应的模块类型和数据分发IP地址。  \r\nModel Type| 对于EMSPlus（Reporting）局，选择DCU_RP Moduel (DCU_RP)。可通过SHOW MODULE命令查询Module type。  \r\nIP| 接收ASC分发数据的目的地址。对于EMSPlus（Reporting）局，设置DCU的IP地址。可使用SHOW COMMCFG命令查询DCU/MU相关IP地址。  \r\n  \r\n  2. 执行ADD ASCEXTNEDATADSP命令，配置UPF消息发送到DCU还是MU，如图2所示。\r\n\r\n图2 ADD ASCEXTNEDATADSP命令表2 ADD ASCEXTNEDATADSP命令参数参数名称| 参数说明  \r\n---|---  \r\nNet Type| ASC节点接入的网元类型，选择UPF (UPF)。  \r\nGroup ID| 通过SHOW MDSDSPIP命令查询组号对应的模块类型和数据分发IP地址。  \r\nTarget| 数据分发目标的类型。对于EMSPlus（Reporting）局，选择Send to DCU (SEND_TO_DCU)。  \r\n  \r\n  3. 执行SYNC ASC命令，传送配置数据到ASC，如图3所示。\r\n\r\n图3 SYNC ASC命令\n\n[5]:配置MDS节点的外部网元\r: 配置MDS节点的外部网元\r\n\r\n摘要\r\n\r\nMDS(Message Dispatch Service, 消息分发服务)节点的数据源主要来自于外部接入的5GC(5G Core Network, 5G核心网)网元（例如SMF(Session Management Function, 会话管理功能)、AMF(Access and Mobility Management Function, 接入和移动管理功能)、UPF(User Plane Function, 用户平面功能)）。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSEXTERNALNE命令，配置MDS节点的外部接入网元，如图1所示。\r\n\r\n图1 ADD MDSEXTERNALNE命令表1 ADD MDSEXTERNALNE命令参数参数名称| 参数说明  \r\n---|---  \r\nIP| 外接网元对接EMSPlus的业务地址。外接网元与EMSPLus（CHR）局对接，上报业务数据。当MDS节点接收FTU的数据源时，配置为FTU使用的承载消息的网络平面的地址，通常为FTU在GI面的地址。  \r\nStart Port| 外接网元向EMSPLus（CHR）局发送信息的起始端口。接入IP为FTU节点的地址时，填写为1。  \r\nEnd Port| 外接网元向EMSPLus（CHR）局发送信息的结束端口。如果仅需要配置一个端口，则Start Port和End Port配置一致。接入IP为FTU节点的地址时，填写为65535。  \r\nNE Type| MDS节点接入的网元类型。例如：\r\n     * MDS节点接收SMF数据源，选择SMF (SMF)。\r\n     * MDS节点接收FTU的数据源时，选择FTU处理的相应网元类型。  \r\n  \r\n说明：\r\n\r\n在各网元IP地址不重复的情况下，配置Start Port为1、End Port为65535。\r\n\r\n  2. 根据产品具体需求，执行对应的命令操作。\r\n\r\nADD MDSEXTERNALNE:IP=<外接网元对接EMSPlus的业务地址>,STARTPORT=<外接网元发送信息的起始端口>,ENDPORT=<外接网元发送信息的结束端口>,NETYPE=<MDS节点接入的网元类型>", "answer": "EMSPlus配置分发IP地址的步骤如下：\n\n   1. 在EMSPlus客户端的MML Terminal窗口，执行ADD MDSDSPIP命令。\n   2. 根据需要配置的模块类型（如DCU_RP Module、DCU_MU Module、ASC Module或MDS Module），设置相应的参数。\n   3. 设置GROUPID（组号）、MODULETYPE（数据分发的模块类型）和IPADDR（DCU/ASC的Local IP For Upload Data地址或目的MDS节点的实IP地址）。\n\n具体命令格式如下：\n- 对于DCU/ASC：`ADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=<数据分发的模块类型>,IPADDR=<DCU/ASC的Local IP For Upload Data地址>`\n- 对于MDS级联：`ADD MDSDSPIP:GROUPID=<组号>,MODULETYPE=MDS,IPADDR=<目的MDS节点的实IP地址>`"}
{"id": 99, "query": "ZXUN uMAC管理平面采用了哪些安全措施。", "recall": "[1]:管理平面\r: 管理平面\r\n\r\n管理平面的安全措施是针对操作用户的安全管理。\r\n\r\n用户超时退出\r\n\r\n管理员可以为每个用户设置超时退出功能。\r\n\r\n用户通过SSH方式登录操作系统，在一段时间内未进行任何操作时，自动退出系统。默认空闲超时时间为900秒，该时长可通过手工修改配置文件进行配置。\r\n\r\n用户密码有效期\r\n\r\n管理员可以为每个用户设置密码有效期。\r\n\r\n  * 有效期可配置，在有效期内，用户可使用密码成功登录系统。\r\n\r\n  * 到期前强制用户修改密码，到期后密码失效。\r\n\r\n  * 密码有效期功能可开启或关闭。\r\n\r\n\r\n\r\n\r\n密码长度和强度\r\n\r\n管理员可以设置密码长度及强度，用户在修改密码时，需要满足密码长度及强度的策略要求。\r\n\r\n  * 密码强度策略是全局的，不具体到每个用户。\r\n\r\n  * 强密码至少包含大写字母（A~Z）、小写字母（a~z）、数字（0~9）、特殊符号（如：!，$，#，%等）4类中的2种类型。\r\n\r\n  * 密码的最小长度可配置，最大长度不超过64位。\r\n\r\n  * 不得使用用户名作为密码。\r\n\r\n\r\n\r\n\r\n登录失败若干次锁定账户\r\n\r\n管理员可以为每个用户设置锁定功能。用户在登录时，密码输入失败，在失败若干次（失败次数可配置）后，锁定此用户，只能通过管理员解锁。\r\n\r\n密码重复控制\r\n\r\n管理员可以为用户设置密码重复控制功能，同时可以设置重复控制次数。用户在重设密码时，最近N次（含N次）内用过的密码不允许重复使用（N为可配置值）。\n\n[2]:功能-AMF\r: 功能-AMF\r\n\r\n服务化架构\r\n\r\nZXUN uMAC作为AMF(Access and Mobility Management Function, 接入和移动管理功能)时，采用SBA(Service Based Architecture, 基于服务的架构)架构，与NRF(NF Repository Function, 网络功能仓储)交互，实现NF(Network Function, 网络功能)业务管理和NF业务发现功能等，与其他NF通过SBI(Service Based Interface, 基于服务的接口)接口交互，实现NF间的服务调用。采用SBA架构，可以实现核心网软件化、灵活化、开放化和智能化，同时更符合电信领域的业务部署要求，在提供功能独立性、重用性、弹性、健壮性、安全性的同时，也保证了业务处理性能。\r\n\r\n注册管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) TS23.501定义的注册管理功能。该功能控制移动用户对5GC(5G Core Network, 5G核心网)网络的访问，并在用户移动时跟踪用户的位置。主要过程包括注册、去注册、注册区域管理等。\r\n\r\n移动管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) 23.501定义的移动性管理功能。支持关于移动性定时器管理、移动性限制、用户位置信息报告、系统内切换和系统间切换等功能。\r\n\r\n连接管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) TS23.501定义的连接管理功能。连接管理支持建立和释放N1接口UE(User Equipment, 用户设备)与AMF(Access and Mobility Management Function, 接入和移动管理功能)之间的NAS(Non-Access Stratum, 非接入层)信令连接以及N2接口AN(Access Network, 接入网)与AMF(Access and Mobility Management Function, 接入和移动管理功能)之间的连接，还支持业务请求、智能寻呼、UE可达性管理、MICO(Mobile Initiated Connection Only, 仅限移动发起连接)等功能。\r\n\r\n安全管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) TS33.501定义的安全要求。在用户访问5GC(5G Core Network, 5G核心网)网络期间，ZXUN uMAC作为AMF(Access and Mobility Management Function, 接入和移动管理功能)使用一系列安全措施进行用户鉴权、加密用户ID，并保护NAS(Non-Access Stratum, 非接入层)信令消息的完整性。安全管理支持5G AKA鉴权、EAP-AKA'鉴权、秘钥派生与传递、NAS信令加密、NAS信令完整性保护、4/5G互操作安全上下文映射等功能。\r\n\r\n网络切片功能\r\n\r\nZXUN uMAC作为AMF(Access and Mobility Management Function, 接入和移动管理功能)支持网络切片功能，支持用户注册过程中为UE确定Allowed NSSAI(Network Slice Selection Assistance Information, 网络切片选择辅助信息)和Rejected NSSAI(Network Slice Selection Assistance Information, 网络切片选择辅助信息)，选择支持Allowed NSSAI的AMF，并把Allowed NSSAI等信息通知UE和RAN(Radio Access Network, 无线接入网)。\r\n\r\n策略控制功能\r\n\r\nZXUN uMAC作为AMF(Access and Mobility Management Function,\n\n[3]:安全策略\r: 安全策略\r\n\r\n中兴通讯基于多年ZXUN uMAC设备开发经验和安全实践，确定如下总体策略：\r\n\r\n  * 安全规划：遵循国际和国内安全标准，将业界安全最佳实践和安全技术要求规划到安全基线中，不断提高产品安全水平。\r\n\r\n  * 立体防护：通过在管理平面、控制平面和数据平面采用立体安全措施保障产品安全。\r\n\r\n  * 分权分域：提供分权分域的技术手段，在产品部署中，根据任务所需权限和资源的具体情况分配用户最小的权限和资源以减少潜在的安全威胁。\r\n\r\n  * 审计跟踪：记录安全事件，事后进行追踪，改进产品安全措施。\n\n[4]:管理面安全\r: 管理面安全\r\n\r\n管理面安全模块设计如图1所示。\r\n\r\n图1 管理面安全设计\r\n\r\n管理平面，为了保障产品的操作系统和管理应用能够正常运行，围绕配置管理接入服务的可用性、安全性，以及重要数据的安全性，主要覆盖包括：\r\n\r\n  * 安全登录\r\n\r\n  * 账号安全认证、口令安全策略\r\n\r\n  * 账号的防暴力攻击\r\n\r\n  * 服务授权、CLI授权\r\n\r\n  * SNMP访问授权\r\n\r\n  * FTP访问授权、文件授权\r\n\r\n  * Web访问安全\r\n\r\n  * 审计日志功能\r\n\r\n\r\n\r\n\r\n管理面安全建议使用原则：\r\n\r\n  * 禁用未使用的管理协议服务：网络设备需要的管理协议服务需要按需开启，对于不需要使用的管理协议，建议关闭相应服务。\r\n\r\n  * 基于设备VTY的ACL访问控制对终端登录进行保护：Telnet/STelnet提供ACL限制远程访问的IP地址范围，优先使用SSH、SFTP、HTTPS、SNMPv3替代Telnet、FTP、SNMPv1/2等不安全的明文协议进行设备远程访问。\r\n\r\n  * 支持多种Security Access Protocol。\r\n\r\n\r\n\r\n\r\n子主题：\r\n\r\n  * 认证授权功能\r\n\r\n  * 访问类型控制\r\n\r\n  * 管理终端控制\r\n\r\n  * 用户账户支持密码强度检查\r\n\r\n  * 防暴力破解\r\n\r\n  * 密码安全性\r\n\r\n  * 分权分域\r\n\r\n  * 安全传输协议SSH\r\n\r\n  * SFTP访问控制\r\n\r\n  * WEBGUI安全访问\r\n\r\n  * 安全审计（日志管理）\r\n\r\n  * 服务质量分析SQA\r\n\r\n  * Banner信息定制（最小化）\n\n[5]:控制面安全\r: 控制面安全\r\n\r\n控制面安全主要包括CPU安全、路由安全以及报文防攻击等。\r\n\r\n图1 控制面安全\r\n\r\n子主题：\r\n\r\n  * CPU安全\r\n\r\n  * 禁用未使用的服务\r\n\r\n  * ARP防攻击\r\n\r\n  * IGMP防攻击\r\n\r\n  * 路由协议防攻击\r\n\r\n  * TCP防攻击\r\n\r\n  * TCP/IP防攻击\r\n\r\n  * GTSM\r\n\r\n  * Keychain\r\n\r\n  * 路由策略", "answer": "ZXUN uMAC管理平面采用的安全措施包括：\n\n1. 用户超时退出：为每个用户设置超时退出功能，如果用户在一段时间内未进行任何操作，将自动退出系统。\n2. 用户密码有效期：管理员可以为每个用户设置密码有效期，到期前强制用户修改密码，到期后密码失效。\n3. 密码长度和强度：设置密码长度及强度，要求强密码至少包含大写字母、小写字母、数字、特殊符号4类中的2种类型。\n4. 登录失败若干次锁定账户：设置锁定功能，用户在登录时，密码连续输入失败若干次后，将锁定账户。\n5. 密码重复控制：设置密码重复控制功能，限制用户在重设密码时，最近N次内用过的密码不允许重复使用。\n\n此外，管理面安全还包括以下措施：\n\n1. 安全登录\n2. 账号安全认证、口令安全策略\n3. 账号的防暴力攻击\n4. 服务授权、CLI授权\n5. SNMP访问授权\n6. FTP访问授权、文件授权\n7. Web访问安全\n8. 审计日志功能\n\n以及建议使用原则：\n\n1. 禁用未使用的管理协议服务\n2. 基于设备VTY的ACL访问控制对终端登录进行保护\n3. 支持多种Security Access Protocol\n\n还包括子主题中的多项安全措施，如：\n\n1. 认证授权功能\n2. 访问类型控制\n3. 管理终端控制\n4. 用户账户支持密码强度检查\n5. 防暴力破解\n6. 密码安全性\n7. 分权分域\n8. 安全传输协议SSH\n9. SFTP访问控制\n10. WEBGUI安全访问\n11. 安全审计（日志管理）\n12. 服务质量分析SQA\n13. Banner信息定制（最小化）等。"}
{"id": 100, "query": "ZXUN uMAC针对密码安全保护，采用哪些安全措施。", "recall": "[1]:数据保护措施\r: 数据保护措施\r\n\r\nZXUN uMAC在提供个人数据处理功能的同时，也采取了一系列数据保护措施。\r\n\r\n**数据收集：**\r\n\r\n  * 操作维护用户填写个人数据时，ZXUN uMAC提供了必填和选填选项，可以选择填写哪些个人数据字段。对于密码，ZXUN uMAC在录入时就会进行哈希处理，再进行传输。\r\n\r\n\r\n\r\n\r\n**数据存储：**\r\n\r\n  * 操作维护用户的密码和密钥等数据，ZXUN uMAC会对其进行加密存储。ZXUN uMAC支持本地存储和备份，可备份ZXUN uMAC数据库的所有数据。不允许操作维护用户直接访问数据库中的数据。\r\n\r\n\r\n\r\n\r\n**数据使用：**\r\n\r\n  * ZXUN uMAC支持操作维护账号权限管理，管理员可基于角色分配权限。用户需要通过用户名密码的方式完成身份认证，并支持开启双因素认证。ZXUN uMAC支持记录操作日志、系统日志和安全日志，支持将日志信息发送到指定的日志服务器。\r\n\r\n\r\n\r\n\r\n**数据传输：**\r\n\r\n  * ZXUN uMAC在系统内通过HTTPS的方式或者内部接口方式传输数据，对外提供HTTPS/SFTP方式进行通信。\r\n\r\n\r\n\r\n\r\n**数据删除：**\r\n\r\n  * ZXUN uMAC支持操作维护用户删除账号里的非必填数据，支持管理员删除普通用户的账号信息。配置信息只有授权用户才能删除。日志数据会随存储空间或者预设时间期限自动删除。\n\n[2]:安全标准\r: 安全标准\r\n\r\nZXUN uMAC遵循的安全标准如下：\r\n\r\n  * UL 60950\r\n\r\n  * IEC 60950\r\n\r\n  * EN 60950\n\n[3]:管理平面\r: 管理平面\r\n\r\n管理平面的安全措施是针对操作用户的安全管理。\r\n\r\n用户超时退出\r\n\r\n管理员可以为每个用户设置超时退出功能。\r\n\r\n用户通过SSH方式登录操作系统，在一段时间内未进行任何操作时，自动退出系统。默认空闲超时时间为900秒，该时长可通过手工修改配置文件进行配置。\r\n\r\n用户密码有效期\r\n\r\n管理员可以为每个用户设置密码有效期。\r\n\r\n  * 有效期可配置，在有效期内，用户可使用密码成功登录系统。\r\n\r\n  * 到期前强制用户修改密码，到期后密码失效。\r\n\r\n  * 密码有效期功能可开启或关闭。\r\n\r\n\r\n\r\n\r\n密码长度和强度\r\n\r\n管理员可以设置密码长度及强度，用户在修改密码时，需要满足密码长度及强度的策略要求。\r\n\r\n  * 密码强度策略是全局的，不具体到每个用户。\r\n\r\n  * 强密码至少包含大写字母（A~Z）、小写字母（a~z）、数字（0~9）、特殊符号（如：!，$，#，%等）4类中的2种类型。\r\n\r\n  * 密码的最小长度可配置，最大长度不超过64位。\r\n\r\n  * 不得使用用户名作为密码。\r\n\r\n\r\n\r\n\r\n登录失败若干次锁定账户\r\n\r\n管理员可以为每个用户设置锁定功能。用户在登录时，密码输入失败，在失败若干次（失败次数可配置）后，锁定此用户，只能通过管理员解锁。\r\n\r\n密码重复控制\r\n\r\n管理员可以为用户设置密码重复控制功能，同时可以设置重复控制次数。用户在重设密码时，最近N次（含N次）内用过的密码不允许重复使用（N为可配置值）。\n\n[4]:ZUF-79-07 安全管理\r: ZUF-79-07 安全管理\r\n\r\n子主题：\r\n\r\n  * ZUF-79-07-001 5G AKA鉴权\r\n\r\n  * ZUF-79-07-002 EAP-AKA'鉴权\r\n\r\n  * ZUF-79-07-003 秘钥派生与传递\r\n\r\n  * ZUF-79-07-004 AS算法选择\r\n\r\n  * ZUF-79-07-005 NAS信令加密\r\n\r\n  * ZUF-79-07-006 NAS信令完整性保护\r\n\r\n  * ZUF-79-07-007 4/5G互操作安全上下文映射\r\n\r\n  * ZUF-79-07-008 加密用户标识SUCI\r\n\r\n  * ZUF-79-07-009 初始NAS消息保护\r\n\r\n  * ZUF-79-07-010 PEI检查\n\n[5]:密码安全性\r: 密码安全性\r\n\r\n一次性密码设置\r\n\r\n通过配置once-password配置一次性密码，用户使用一次性密码登录时强制修改密码。新密码必须满足当前强密码要求。密码修改成功后，一次性密码自动删除，新密码生效。\r\n\r\n密码过期时间\r\n\r\n通过配置password-duration设置密码的过期时间。在密码过期前3天，每次用户登录时都会提示用户修改密码，并在过期前上报告警。如果超过设置的过期时间，用户仍然不更改密码，该用户不能再登录。\r\n\r\n历史密码限制\r\n\r\n缺省情况下，密码不能与最近5次以内的历史密码相同（与当前密码相同不视为与历史密码相同，即当前密码不包含在历史密码之内），可以配置为2-10.\r\n\r\n密码恢复功能\r\n\r\n当用户忘记密码时，可以对密码进行恢复。恢复密码的前提是对应的用户账号配置了密码恢复问题及答案。恢复密码时，只要用户能够正确回答恢复密码的问题，就可以重新设置密码。\r\n\r\n密码保存\r\n\r\n选择关键字irreversible时，明文密码进行不可逆加密，采用的不可逆加密算法是SHA256。不选择关键字irreversible时，明文密码进行可逆加密，采用的可逆加密算法是3DES。无论是明文输入还是密文输入，配置文件中都以密文形式体现。\r\n\r\n密码显示\r\n\r\n密码不明文显示，在日志等中以****显示。在配置密码时，通过***掩码显示，通过两次输入确认。", "answer": "ZXUN uMAC针对密码安全保护，采用了以下安全措施：\n\n1. 密码在录入时进行哈希处理后再传输。\n2. 对操作维护用户的密码和密钥等数据进行加密存储。\n3. 支持开启双因素认证。\n4. 设置密码有效期，并要求在密码到期前强制用户修改密码。\n5. 管理员可以设置密码长度和强度，要求密码至少包含大写字母、小写字母、数字、特殊符号中的2种类型，并限制密码的最小长度和最大长度。\n6. 登录失败若干次后锁定账户，需由管理员解锁。\n7. 设置密码重复控制功能，不允许用户重复使用最近N次内用过的密码。\n8. 提供一次性密码设置，使用一次性密码登录后强制修改密码。\n9. 设置密码过期时间，并在过期前提示用户修改密码。\n10. 历史密码限制，防止用户使用过去一定次数内的密码。\n11. 提供密码恢复功能，通过密码恢复问题及答案来帮助用户重设密码。\n12. 对明文密码进行不可逆加密（SHA256）或可逆加密（3DES）。\n13. 在日志和配置过程中，密码以密文形式体现，不显示明文密码。"}
{"id": 101, "query": "如何查询指定用户详单？", "recall": "[1]:新建用户\r: 单击Execute，给角色授权命令集。\r\n\r\n\r\n\r\n\r\n相关任务\r\n\r\n任务目的| 任务操作  \r\n---|---  \r\n修改用户信息| 在Terminal窗口中，输入SET USER命令，并单击Execute，修改用户信息。  \r\n删除用户| 在Terminal窗口中，输入DEL USER命令，并单击Execute，删除用户。  \r\n复制用户| 在Terminal窗口中，输入COPY USER命令，并单击Execute，复制用户信息。  \r\n查询用户| 在Terminal窗口中，输入SHOW USER命令，并单击Execute，复制用户信息。  \r\n删除用户角色| 在Terminal窗口中，输入DEL USER ROLE命令，并单击Execute，删除用户角色。  \r\n查询用户角色| 在Terminal窗口中，输入SHOW USER ROLE命令，并单击Execute，查询用户角色。  \r\n修改本用户密码| 在Terminal窗口中，输入SET PASSWORD命令，并单击Execute，修改本用户密码。  \r\n修改本用户登录提示信息| 在Terminal窗口中，输入SET LOGINTIP命令，并单击Execute，修改本用户登录提示信息。  \r\n增加用户登录IP范围| 在Terminal窗口中，输入ADD USER IPSEC命令，并单击Execute，增加用户登录IP范围。  \r\n删除用户登录IP范围| 在Terminal窗口中，输入DEL USER IPSEC命令，并单击Execute，删除用户登录IP范围。  \r\n查询用户登录IP范围| 在Terminal窗口中，输入SHOW USER IPSEC命令，并单击Execute，查询用户登录IP范围。  \r\n删除用户所有登录IP范围| 在Terminal窗口中，输入DEL USER ALLIPSEC命令，并单击Execute，删除用户所有登录IP范围。  \r\n查询所有用户| 在Terminal窗口中，输入SHOW ALL USER命令，并单击Execute，查询所有用户。\n\n[2]:查询用户上网日志\r: 查询用户上网日志\r\n\r\n摘要\r\n\r\n通过IPDR功能，维护人员可以查询选定时间范围的IP(Internet Protocol, 因特网协议)地址的使用情况，如使用该IP的用户号码和IMSI(International Mobile Subscriber Identity, 国际移动用户标识)号码。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的IPDR窗口，单击功能操作区的Query。\r\n\r\n  2. 选择左侧菜单All→Predefined Query→IPDR→IPDR，打开上网日志查询页面，如图1所示。\r\n\r\n图1 IPDR页签\r\n\r\n  3. 单击More Conditions，展开更多条件设置区域，如图2所示。\r\n\r\n图2 IPDR窗口表1 查询上网日志参数说明参数名称| 参数说明  \r\n---|---  \r\n| 选择查询的时间段。  \r\nRecords| 查询结果显示的记录数。  \r\nMSISDN(Mobile Station International Subscriber Directory Number, 移动台国际用户目录号)| 根据用户的MSISDN或IMSI号码，查询该用户的上网日志信息。  \r\nIMSI  \r\nPublic Source IP| 根据公网IP地址和端口号，查询指定时间段内使用该IP地址和端口号的用户信息。  \r\nPublic Source Port  \r\nPrivate Source IP| 根据私网IP地址和端口号，查询指定时间段内使用该IP地址和端口号的用户信息。  \r\nPrivate Source Port  \r\nDest IP| 根据目的IP地址和端口号，查询指定时间段内访问该IP地址和端口号的用户信息。  \r\nDest Port  \r\nDest Nat IP| 根据经过NAT转换后的目的端口号，查询指定时间段内访问该IP地址和端口号的用户信息。  \r\nDest Nat Port  \r\n  \r\n  4. 配置上网日志查询的参数。\r\n\r\n  5. 单击按钮，查询结果显示在页面下方，如图3所示。\r\n\r\n图3 查询结果表2 上网日志详细信息参数说明输出字段名| 输出字段说明  \r\n---|---  \r\nStart Time| 用户上网业务的上线时间  \r\nEnd Time| 用户上网业务的下线时间  \r\nActive Time| 用户上网业务的在线时间  \r\nPrivate IP| 用户上网时被分配的私网IP地址  \r\nPublic IP| 用户上网时使用的公网IP地址  \r\nDest IP| 用户访问的目的IP地址  \r\nIMSI| 用户的IMSI号码  \r\nMSISDN| 用户手机号码。为了保护用户隐私，在查询结果和导出的文件中，用户手机号码的部分位数以“*”代替。  \r\nPrivate Port| 用户上网时使用的私网端口号  \r\nPublic Port| 用户上网时使用的公网端口号  \r\nDest Port| 用户访问的目的端口号  \r\nProtocol| 用户上网时使用的协议类型\n\n[3]:按字段统计日志数据\r: 按字段统计日志数据\r\n\r\n摘要\r\n\r\n在日志查询结果中，EMSPlus系统支持按照任意字段进行统计，统计出各种查询结果值的数量和占比。在统计出的饼图中，系统还支持随心钻功能，对任意一个结果值进行钻取，进一步查询符合条件的网元业务数据详单（XDR）。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的CHR页面，选择左侧导航树的数据分析→专家模式→通用日志查询，打开专家模式(通用日志查询)页面，如图1所示。\r\n\r\n图1 5GC报表查询页面\r\n\r\n  2. 单击按钮，查询结果显示在页面下方，如图2所示。\r\n\r\n图2 5GC报表查询结果\r\n\r\n  3. 右击Detail Content区域某一字段，例如StartTime，继续统计这个用户的所有失败事件，如图3所示。\r\n\r\n图3 Detail Content区域统计日志数据\r\n\r\n  4. 选择快捷菜单Column Statistics，EMSPlus系统根据StartTime字段进行统计，展示出这个用户各种失败事件的次数和百分比，如图4所示。\r\n\r\n图4 统计页面显示\r\n\r\n  5. （可选）单击，可以跳转到趋势分析，参见“查询通用趋势分析”。\r\n\r\n\r\n\r\n\r\n相关操作\r\n\r\n  * 在图4页面，单击Statistics for StartTime区域圆饼图上方的Topic/Item，使其颜色变灰，则此Topic/Item的统计信息不显示在圆饼图中，如图5所示。\r\n\r\n图5 统计页面显示\r\n\r\n  * 在圆饼图中，单击Topic/Item项目所在色块，可以直接对该项目进行钻取，系统自动将当前的查询条件带入自定义查询框中，并查询出符合条件的所有XDR，如图6所示。\r\n\r\n图6 自定义查询框\n\n[4]:查询通用日志\r: 查询通用日志\r\n\r\n摘要\r\n\r\n本节介绍如何按照自定义条件查询网元的失败日志。\r\n\r\n步骤\r\n\r\n  1. 在EMSPlus客户端的CHR页面，选择左侧导航树的数据分析→专家模式→通用日志查询，打开专家模式(通用日志查询)页面，如图1所示。\r\n\r\n说明：\r\n\r\n系统最多可以同时打开3个通用日志查询页面，并在页签右上角以数字显示。\r\n\r\n图1 通用日志查询\r\n\r\n  2. 单击More Conditions，展开更多条件区域，如图2所示。\r\n\r\n图2 通用日志查询条件表1 通用日志查询参数说明参数名称| 参数说明  \r\n---|---  \r\n|  默认查询4小时内的日志，最多可查询3天范围内日志数据。  \r\nRecords| 查询结果显示的记录数。  \r\nIMSI_SUPI| 根据用户的IMSI(International Mobile Subscriber Identity, 国际移动用户标识)号码，查询该用户的上网日志信息。  \r\nMSISDN_GPSI| 根据用户的手机号码，查询该用户的上网日志信息。  \r\nNFType| 如果需要查询指定的网元类型，单击Please select区域，选择需查询的网元类型。其中：\r\n     * in：查询选择的网元类型的日志数据。\r\n     * not in：查询除这些网元之外的网元类型的日志数据。  \r\nNFID| 如果需要查询指定的网元ID，单击，并选择具体的网元。其中：\r\n     * in：查询选择的网元的日志数据。\r\n     * not in：查询除这些网元之外的网元的日志数据。  \r\nCause| 如果需要按照指定失败原因进行查询，单击，并选择失败原因。其中：\r\n     * in：查询选择的失败原因的日志数据。\r\n     * not in：查询除这些原因之外的失败原因的日志数据。  \r\nSequential| 选择查询结果是否按照时间排序。  \r\nFailure Logs| 选择是否只搜索业务失败日志。  \r\nValid Fields| 选择在Detail Content区域，是否只显示有数据的字段。  \r\nInput Advanced Query Condition| 多字段结合逻辑表达式的高级查询条件区域，可以按照自定义的条件进行查询。  \r\n表2 通用日志查询按钮说明按钮| 使用说明  \r\n---|---  \r\n| 跳转至NFType的概要分析，参见“查询概要分析报表”。单击统计项进行钻取分析，最终可以钻取到网元业务数据详单（XDR）。对应的查询条件会带入概要分析中。  \r\n| 跳转至通用趋势分析，参见“查询通用趋势分析”。对应的查询条件会带入通用趋势分析中。  \r\n| 将当前的通用日志查询保存到收藏夹中（收藏的查询条件不包括起止时间）。  \r\n  \r\n  3. 根据实际需要，输入日志的查询参数，便于用户分析定位问题。\r\n\r\n  4. （可选）如果需要定制查询结果的字段，单击按钮，选择需要显示的字段，并单击Confirm按钮，如图3所示。\r\n\r\n图3 选择结果中的字段\r\n\r\n  5. （可选）如果需要选择一种或多种网元类型，单击NFType中的输入框，从下拉列表框中选择网元类型，如图4所示。\r\n\r\n图4 选择网元类型\r\n\r\n  6. （可选）如果需要选择指定的网元，单击NFID后面的。在弹出的对话框中选择网元，并单击按钮，将其添加到右侧列表中，单击OK按钮，如图5所示。\r\n\r\n图5 选择网元号\r\n\r\n  7.\n\n[5]:用户报表\r: 用户报表\r\n\r\n支持分不同粒度（15min/小时/天/周/月），按用户维度与APN(Access Point Name, 接入点名称)、RAT(Radio Access Technology, 无线接入技术)、PLMN(Public Land Mobile Network, 公共陆地移动网)、位置（包括区域、小区等）、业务类型/应用类型等多个维度进行组合分析，分析指标包括总流量、上行流量、下行流量、上行流速、下行流速、连接数、连接时长等。并可以通过趋势分析、TOP分析等手段，结合图形直观呈现。\r\n\r\n表1 查询条件 条件区 | 字段 | 必选/可选  \r\n---|---|---  \r\n时间 | 时间粒度 | 必选  \r\n时间 | 必选  \r\n记录数（Records） | 必选  \r\n条件1区 | IMSI(International Mobile Subscriber Identity, 国际移动用户标识) | 可选  \r\nMSISDN(Mobile Station International Subscriber Directory Number,", "answer": "查询指定用户详单可以通过以下步骤进行：\n\n1. 在EMSPlus客户端的IPDR窗口，选择左侧菜单All→Predefined Query→IPDR→IPDR，打开上网日志查询页面。\n2. 单击More Conditions，展开更多条件设置区域。\n3. 配置查询参数，如选择时间段、输入要查询的用户的MSISDN或IMSI号码。\n4. 单击查询按钮，查询结果显示在页面下方，包含用户的详单信息。\n\n另外，对于通用日志查询：\n\n1. 在EMSPlus客户端的CHR页面，选择左侧导航树的数据分析→专家模式→通用日志查询。\n2. 单击More Conditions，展开更多条件区域。\n3. 根据需要输入查询参数，如IMSI_SUPI或MSISDN_GPSI，以指定用户。\n4. 如果需要定制查询结果的字段，可以单击相应按钮进行选择。\n5. 单击查询按钮，查询并显示指定用户的详单信息。\n\n以上步骤可以根据上下文信息得出，具体操作可能还需要根据实际软件界面进行。"}
{"id": 102, "query": "业务告警分哪几种？", "recall": "[1]:告警处理介绍\r: 告警处理介绍\r\n\r\n告警处理总述\r\n\r\n告警处理相关信息包括告警码、告警名称、告警描述、告警属性、可能原因、处理意见等。本文将对这些告警处理相关信息进行逐一介绍，从而帮助ZXUN uMAC维护人员更好地了解和针对性地处理网元告警。\r\n\r\n告警码\r\n\r\n告警系统为每个告警定义了一个告警码，用于区分告警的标识。告警码最多由32 bits的字段定义，表示具体的告警码码值。\r\n\r\n告警名称\r\n\r\n告警名称用于简洁直观地反映故障原因、现象等内容。\r\n\r\n告警描述\r\n\r\n告警描述是对具体某个告警信息的详细说明。\r\n\r\n告警属性\r\n\r\n告警属性包括告警级别、告警类型和自动清除属性。\r\n\r\n  * 告警级别\r\n\r\n按照对系统的影响程度，告警分为四种级别：严重、主要、次要和警告，详细说明参见表1。\r\n\r\n表1 告警级别说明告警级别| 级别说明  \r\n---|---  \r\n严重（一级）| 在系统运行中出现严重错误，导致系统陷于瘫痪，并且无法自行恢复正常的故障。表示正常业务受到严重影响，需要立即修复。  \r\n主要（二级）| 系统功能出现严重错误，严重影响系统运行和用户使用，但无需重启系统就可以恢复，或者无法自行恢复但对系统影响相对较小的故障。表示系统出现影响正常业务的迹象，需要紧急修复。  \r\n次要（三级）| 系统功能实现出现错误，导致某些功能不能正常使用，或者系统某些功能未能实现，但对系统其他功能没有严重影响的故障。表示系统存在不影响正常业务的因素，但应采取纠正措施，以免发生更严重的故障。  \r\n警告（四级）| 系统的重要和基本功能不受影响，只对用户使用造成轻微影响。表示系统存在潜在的或即将影响正常业务的问题，应采取措施诊断纠正，以免其转变成一个更加严重的，影响正常业务的故障。  \r\n  \r\n  * 告警类型\r\n\r\n按告警触发条件以及对系统的影响，告警分为五种类型：通信告警、处理错误告警、服务质量告警、设备告警、环境告警，详细说明参见表2。\r\n\r\n表2 告警类型说明告警类型| 类型说明  \r\n---|---  \r\n通信告警| 与信息传输过程相关的告警类型。  \r\n处理错误告警| 与软件或进程故障相关的告警类型。  \r\n服务质量告警| 与服务质量降级相关的告警类型。  \r\n设备告警| 与设备故障相关的告警类型。  \r\n环境告警| 与设备所处的环境相关的告警类型。  \r\n  \r\n  * 确认状态\r\n\r\n显示告警信息的当前处理状态。\r\n\r\n\r\n\r\n\r\n可能原因\r\n\r\n罗列出可能产生该告警的各种原因。\n\n[2]:* AMF告警\r: * AMF告警\r\n    * 3305242932 DNS服务器不可达\r\n    * 3305242933 DNS服务器TCP链路中断\r\n    * 3305242626 NRF节点不可达告警\r\n    * 3305242914 AUSF不可达\r\n    * 3305242915 UDM不可达\r\n    * 3305242916 SMF不可达\r\n    * 3305242917 SMSF不可达\r\n    * 3305242920 PCF不可达\r\n    * 3305242924 gNB断链退服告警\r\n    * 3305504772 业务过负荷告警\r\n    * 3305504773 License容灾告警\r\n    * 3305504774 License超授权值业务受限告警\r\n    * 3306291478 CPU一级过负荷告警\r\n    * 3307340054 CPU二级过负荷告警\r\n    * 3308388630 CPU三级过负荷告警\r\n    * 3306291479 动态gNB局容量不足一级告警\r\n    * 3307340055 动态gNB局容量不足二级告警\r\n    * 3308388631 动态gNB局容量不足三级告警\r\n    * 3309437207 动态gNB局容量不足四级告警\r\n    * 3306553345 用户License不足一级告警\r\n    * 3307601921 用户License不足二级告警\r\n    * 3308650497 用户License不足三级告警\r\n    * 3309699073 用户License不足四级告警\r\n    * 3305242925 NRF注册更新失败告警\r\n    * 3306553349 TAList管辖的gNodeB站点超限一级告警\r\n    * 3307601925 TAList管辖的gNodeB站点超限二级告警\r\n    * 3306291204 表容量使用率过高一级告警\r\n    * 3307339780 表容量使用率过高二级告警\r\n    * 3308388356 表容量使用率过高三级告警\r\n    * 3306291208 系统资源容量不足一级告警\r\n    * 3307339784 系统资源容量不足二级告警\r\n    * 3308388360 系统资源容量不足三级告警\r\n    * 3306291507 信令跟踪缓存使用率过高一级告警\r\n    * 3307340083 信令跟踪缓存使用率过高二级告警\r\n    * 3308388659 信令跟踪缓存使用率过高三级告警\r\n    * 3305242904 NSSF不可达\r\n    * 3305242905 LMF不可达\r\n    * 3305242931 备份AMF节点故障告警\r\n  * AMF通知\r\n    * 2114060401 GTP节点不可达通知\r\n    * 3305242934 DNS服务器不可用\r\n    * 3305242913 NF拥塞通知\r\n    * 3305242918 Abort偶联通知\r\n    * 3305242919 删除局向通知\r\n    * 3305242921 EMS+检测链路状态发生变化\r\n    * 3305242922 软采检测链路状态发生变化\r\n    * 3305242923 NGAP收到偶联投入使用指示\r\n    * 3305242928\n\n[3]:AMF告警\r: AMF告警\r\n\r\n子主题：\r\n\r\n  * 3305242932 DNS服务器不可达\r\n\r\n  * 3305242933 DNS服务器TCP链路中断\r\n\r\n  * 3305242626 NRF节点不可达告警\r\n\r\n  * 3305242914 AUSF不可达\r\n\r\n  * 3305242915 UDM不可达\r\n\r\n  * 3305242916 SMF不可达\r\n\r\n  * 3305242917 SMSF不可达\r\n\r\n  * 3305242920 PCF不可达\r\n\r\n  * 3305242924 gNB断链退服告警\r\n\r\n  * 3305504772 业务过负荷告警\r\n\r\n  * 3305504773 License容灾告警\r\n\r\n  * 3305504774 License超授权值业务受限告警\r\n\r\n  * 3306291478 CPU一级过负荷告警\r\n\r\n  * 3307340054 CPU二级过负荷告警\r\n\r\n  * 3308388630 CPU三级过负荷告警\r\n\r\n  * 3306291479 动态gNB局容量不足一级告警\r\n\r\n  * 3307340055 动态gNB局容量不足二级告警\r\n\r\n  * 3308388631 动态gNB局容量不足三级告警\r\n\r\n  * 3309437207 动态gNB局容量不足四级告警\r\n\r\n  * 3306553345 用户License不足一级告警\r\n\r\n  * 3307601921 用户License不足二级告警\r\n\r\n  * 3308650497 用户License不足三级告警\r\n\r\n  * 3309699073 用户License不足四级告警\r\n\r\n  * 3305242925 NRF注册更新失败告警\r\n\r\n  * 3306553349 TAList管辖的gNodeB站点超限一级告警\r\n\r\n  * 3307601925 TAList管辖的gNodeB站点超限二级告警\r\n\r\n  * 3306291204 表容量使用率过高一级告警\r\n\r\n  * 3307339780 表容量使用率过高二级告警\r\n\r\n  * 3308388356 表容量使用率过高三级告警\r\n\r\n  * 3306291208 系统资源容量不足一级告警\r\n\r\n  * 3307339784 系统资源容量不足二级告警\r\n\r\n  * 3308388360 系统资源容量不足三级告警\r\n\r\n  * 3306291507 信令跟踪缓存使用率过高一级告警\r\n\r\n  * 3307340083 信令跟踪缓存使用率过高二级告警\r\n\r\n  * 3308388659 信令跟踪缓存使用率过高三级告警\r\n\r\n  * 3305242904 NSSF不可达\r\n\r\n  * 3305242905 LMF不可达\r\n\r\n  * 3305242931 备份AMF节点故障告警\n\n[4]:* AMF告警\r: * 2114322560 License项缺失\r\n    * 2114322696 eNodeB断链告警\r\n    * 2114322676 SGs口VLR局向不可达\r\n    * 2114060407 话单命名资源不足\r\n    * 2114322576 DNS服务器不可达\r\n    * 2114322577 DNS服务器TCP链路中断\r\n    * 2114322578 eNodeB动态偶联容量不足\r\n    * 2114060585 配置更改后网元未重启\r\n    * 2114060437 某APN建立承载速率过快\r\n    * 2114060438 签约某APN的用户发送NAS MM信令速率过快\r\n    * 2114060439 签约某Group ID的用户发送NAS MM信令速率过快\r\n    * 2114060440 签约某Group ID的用户发送NAS SM信令速率过快\r\n    * 2114060441 签约某Group ID与APN的用户建立承载数过多\r\n    * 2114060442 签约某Group ID与APN的用户发送NAS MM信令速率过快\r\n    * 2114060443 签约某Group ID与APN的用户发送NAS SM信令速率过快\r\n    * 2114060447 某APN建立承载数过多\r\n    * 2115371312 动态eNodeB局容量不足一级告警\r\n    * 2116419888 动态eNodeB局容量不足二级告警\r\n    * 2117468464 动态eNodeB局容量不足三级告警\r\n    * 2118517040 动态eNodeB局容量不足四级告警\r\n    * 2114322745 ESMLC不可达\r\n    * 2114585129 出向业务过负荷告警\r\n    * 3305504773 License容灾告警\r\n    * 3305504774 License超授权值业务受限告警\r\n    * 2114322980 UP KPI指标异常告警\r\n    * 2115633158 表容量使用率过高一级告警\r\n    * 2116681734 表容量使用率过高二级告警\r\n    * 2117730310 表容量使用率过高三级告警\r\n    * 2115109417 系统资源容量不足一级告警\r\n    * 2116157993 系统资源容量不足二级告警\r\n    * 2117206569 系统资源容量不足三级告警\r\n    * 2114322734 TAList管辖的eNodeB站点超限一级告警\r\n    * 2114322733 TAList管辖的eNodeB站点超限二级告警\r\n    * 2114322979 CMP KPI指标异常告警\r\n    * 2114322746 CBC局向不可达\r\n    * 6001 C0分发入队失败\r\n    * 2114584631 业务拥塞告警\r\n  * MME/SGSN通知\r\n    * 2114060320 SGSN上报SGSN不可达\r\n    * 2114060322 开始SGSN负荷卸载通知\r\n    * 2114060323 开始MSC负荷卸载通知\r\n    * 2114060324 取消SGSN负荷卸载通知\r\n    * 2114060325 取消MSC负荷卸载通知\r\n    *\n\n[5]:3491758083 限速丢包告警\r: 3491758083 限速丢包告警\r\n\r\n告警描述\r\n\r\n限速功能属于分报文类型的限速，即可以针对多个类型的报文进行限速。IPS支持两类限速功能：\r\n\r\n  * 上报ROSNG的协议报文（如NOARP、ARP、IP、OSPF、BGP、BFD、ICMP、LDP、IPSEC）的限速功能\r\n\r\n该限速功能默认开启，可通过SET PROTOCOLMSGMETER命令修改限速门限值。\r\n\r\n  * 基于ACL规则的业务报文（如TCP、SCTP）的限速功能\r\n\r\n该限速功能由各个业务提供限速配置。IPS仅提供限速和上报限速告警的通道。\r\n\r\n\r\n\r\n\r\n当某类报文的PPS超过限速门限值，就会触发一次该类报文的限速。在一个限速告警周期（告警周期包括告警上报和告警恢复）内只上报一次该类报文的限速告警，即仅当该类报文的告警恢复后，才能在下次触发该类报文限速时上报下一条限速告警；否则，上报告警被抑制。\r\n\r\nIPS限速告警的上报与恢复的时间由报文驱动或定时器守护，无须人工干预。\r\n\r\nIPS限速告警的恢复机制分为三类：\r\n\r\n  * 上报某类报文的限速告警超过60秒后不再触发该类报文的限速，即可自动恢复告警。\r\n\r\n  * 定时器定时扫描到某类报文距离上一次触发限速已超过60秒，仍未恢复告警，则立即触发该类型报文的告警恢复。\r\n\r\n说明：\r\n\r\n部分类型报文触发限速后，不再发送该类型的报文，此时限速丢包告警无法自动恢复。\r\n\r\n  * SC主备切换时，强制恢复告警。\r\n\r\n\r\n\r\n\r\n告警属性\r\n\r\n  * 告警级别：次要\r\n\r\n  * 告警类型：服务质量告警\r\n\r\n  * 自动清除：是\r\n\r\n\r\n\r\n\r\n告警参数\r\n\r\n参数名称| 参数含义  \r\n---|---  \r\nNFS名称| 表示服务名称。  \r\nSC实例| 表示服务实例号。  \r\n限速信息| 表示该用户登录时所使用终端的IP地址。  \r\n限速触发的丢包类型| 表示触发限速的报文分类，目前有协议报文ROSNG_STACK和业务报文APP_ACL两类。  \r\n报文分组类型| 表示触发限速的报文类型，如协议报文NOARP、ARP、OSPF、BGP、BFD、ICMP、LDP等，如基于ACL规则转发的业务报文SCTP、TCP等。  \r\n转发通道| 表示报文的转发通道，其中协议报文走的是TIPC通道，业务报文走的是RAW通道。  \r\n限速类型| 表示报文限速类型，PPS（按报文个数）限速和BPS（按报文字节数）限速。  \r\n承诺限速速率| 表示报文限速门限值，超过该门限值即限速丢包。\r\n\r\n  * ROSNG_STACK协议报文可以通过SHOW PROTOCOLMSGMETER和SET PROTOCOLMSGMETER命令查询和配置。\r\n  * APP_ACL业务报文由业务的配置命令更新与下发，IPS不提供命令支持。", "answer": "业务告警分为以下几种：\n\n1. 通信告警\n2. 处理错误告警\n3. 服务质量告警\n4. 设备告警\n5. 环境告警\n\n这些告警类型根据告警触发条件以及对系统的影响进行分类。具体说明可以参考上文中的表2。"}
{"id": 103, "query": "ZXUN uMAC系统为什么采用服务化架构", "recall": "[1]:服务组成\r: 服务组成\r\n\r\n业务服务和服务组件说明\r\n\r\n为了适应5GC网络的灵活性、扩展性，ZXUN uMAC系统采用服务化架构。服务化架构由一系列业务服务NFS(Network Function Service, 网络功能服务)和服务组件SC(Service Component, 服务组件)构成。\r\n\r\n  * 业务服务，是NF的具体功能，能够独立完成某个具体功能的软件实体，服务间采用松耦合，具有支持独立发布、部署、升级、运维等特征，多个业务服务组合可实现一定的业务功能。\r\n\r\n  * 服务组件，是微服务架构下的最小单元，具备独立的负荷分担、集群管理、弹性等功能。多个服务组件组成一个业务服务。\r\n\r\n\r\n\r\n\r\n业务服务模型和资源模型的映射关系\r\n\r\n业务服务模型和资源模型是解耦的。业务服务既可以运行在VM资源模型（IaaS形态），也可以运行在POD资源模型（CaaS形态），业务功能逻辑呈现一致，底层的部署方式不同。\r\n\r\n服务组件的运行载体为VRU(Virtual Running Unit, 虚拟运行单元)，VRU在IaaS形态部署时呈现为容器实例，在CaaS形态部署时呈现为POD实例。\r\n\r\n业务服务模型和资源模型的映射关系如图1所示。\r\n\r\n图1 业务服务模型和资源模型的映射关系\r\n\r\n各业务服务和服务组件介绍\r\n\r\n各业务服务及其包含的服务组件介绍参见下表。\r\n\r\n服务分类| 服务| 说明| 归属NF| 服务组件| 功能描述  \r\n---|---|---|---|---|---  \r\n平台支撑&网管运维类服务| Service Governance| 微服务治理，又称CommonS_TMSP。| 公共服务SMF/AMF/PCF/UPF……| sc-tmsp-mgt| 管理SC，服务部署资源的编排，升级，自愈。  \r\nsc-tmsp-smc| 管理SC，服务管理，服务注册，发现，升级。  \r\nsc-tmsp-mp| 本服务配置管理，性能统计管理等。  \r\nsc-tmsp-rosng| 路由协议栈SC。  \r\nsc-tmsp-amu| 仲裁SC，对其他SC提供主备仲裁。  \r\nOperation and Maintenance| 操作维护，又称CommonS_OAM。| 公共服务SMF/AMF/PCF/UPF……| sc-oam-gateway| OAM接入网关，负责管理口http/ssh等协议接入。  \r\nsc-oam-main| OAM主控制单元，负责OAM配置、告警、性能、安全、日志等。  \r\nsc-oam-umf| OAM统一消息上报单元，负责信令跟踪消息上报。  \r\nsc-oam-ccmf| OAM配置管理单元，负责配置数据校验、存储、同步。  \r\nsc-oam-upgrade| OAM升级管理单元，负责业务SC和OAM自身升级控制。  \r\nsc-oam-postgre| OAM数据库，负责存储OAM配置、安全、接入等数据。  \r\nsc-oam-web| 提供本地网管web服务。  \r\nAMF Management Process| 业务公共服务，又称Namf_MP。| AMF/MME/SGSN| sc-amf-mp-dba| MME/SGSN网元级配置、告警、性能统计等。\n\n[2]:特性描述\r: 特性描述\r\n\r\n本节包含以下内容：\r\n\r\n  * 术语\r\n\r\n  * 描述\r\n\r\n  * 应用场景\r\n\r\n  * 客户收益\r\n\r\n  * 实现原理\r\n\r\n  * 系统影响\r\n\r\n  * 应用限制\r\n\r\n  * 特性交互\r\n\r\n  * 遵循标准\r\n\r\n  * 特性能力\r\n\r\n  * 版本要求及变更记录\r\n\r\n  * 可获得性\r\n\r\n  * O&M相关\r\n\r\n\r\n\r\n\r\n术语\r\n\r\n术语| 含义  \r\n---|---  \r\nSOA(Service Oriented Architecture, 面向服务的架构)| Service-oriented architecture，面向服务的架构，是一个软件架构模型。服务是一个可以通过网络进行远程访问的独立功能单元，可以独立运作和升级。面向服务的架构要求以服务形态呈现功能，通过网络和定义良好的接口，将特定功能发布给用户或其他组件使用。  \r\nMSA(Micro Service Architecture, 微服务架构)| Microservice architecture，微服务架构，一种软件架构模型，是SOA架构的一种变化。在微服务架构中，服务被精细分割，使用轻量级的接口和网络传输协议。通过将应用切分成更小粒度的服务，可以提高模块化程度，并使得服务更容易被理解，更容易部署和测试，更多的可靠性和弹性。微服务架构支持功能持续发布和集成。  \r\nTMSP(Telecom Microservices Platform, 电信级微服务平台)| Telecom Microservices Platform，电信级微服务平台，提供微服务运行环境，支持微服务生命周期管理。  \r\n  \r\n描述\r\n\r\n定义\r\n\r\nSBA(Service Based Architecture, 基于服务的架构)（Service Based Architecture，服务化架构）是3GPP定义的基于服务的架构体系，是全新的电信业务部署架构。SBA明确定义了5GC中需要呈现的服务，以及需要集中管理的数据上下文。\r\n\r\n3GPP标准定义了SBA架构的如下内容。\r\n\r\n  * 适当粒度的NF Service（将NF的功能进行服务化，简称NFS(Network Function Service, 网络功能服务)），以及关键数据的存储和访问模型。\r\n\r\n  * NF Service之间的交互由SBI接口完成。\r\n\r\n\r\n\r\n\r\nZXUN uMAC采用SBA部署AMF，来实现核心网软件化、灵活化、开放化和智能化。\r\n\r\n背景知识\r\n\r\nSBA(Service Based Architecture, 基于服务的架构)是5G标准引入的新架构模型，在SOA(Service Oriented Architecture, 面向服务的架构)和MSA(Micro Service Architecture, 微服务架构)之间取了平衡，其服务和数据对象的划分粒度位于两者之间，避免服务的功能集太庞大，业务变更困难；也避免服务的功能集划分过细，导致性能损失。\r\n\r\nSBA更符合电信领域的业务部署要求，在提供功能独立性、重用性、弹性、健壮性、安全性的同时，也保证了业务处理性能。\r\n\r\nZXUN uMAC实现符合3GPP SBA的要求，基于3GPP的定义提供服务，并提供了下列主要的服务化特性：\r\n\r\n  * NF Service独立管理，NF Service之间无耦合，独立部署。\n\n[3]:功能-AMF\r: 功能-AMF\r\n\r\n服务化架构\r\n\r\nZXUN uMAC作为AMF(Access and Mobility Management Function, 接入和移动管理功能)时，采用SBA(Service Based Architecture, 基于服务的架构)架构，与NRF(NF Repository Function, 网络功能仓储)交互，实现NF(Network Function, 网络功能)业务管理和NF业务发现功能等，与其他NF通过SBI(Service Based Interface, 基于服务的接口)接口交互，实现NF间的服务调用。采用SBA架构，可以实现核心网软件化、灵活化、开放化和智能化，同时更符合电信领域的业务部署要求，在提供功能独立性、重用性、弹性、健壮性、安全性的同时，也保证了业务处理性能。\r\n\r\n注册管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) TS23.501定义的注册管理功能。该功能控制移动用户对5GC(5G Core Network, 5G核心网)网络的访问，并在用户移动时跟踪用户的位置。主要过程包括注册、去注册、注册区域管理等。\r\n\r\n移动管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) 23.501定义的移动性管理功能。支持关于移动性定时器管理、移动性限制、用户位置信息报告、系统内切换和系统间切换等功能。\r\n\r\n连接管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) TS23.501定义的连接管理功能。连接管理支持建立和释放N1接口UE(User Equipment, 用户设备)与AMF(Access and Mobility Management Function, 接入和移动管理功能)之间的NAS(Non-Access Stratum, 非接入层)信令连接以及N2接口AN(Access Network, 接入网)与AMF(Access and Mobility Management Function, 接入和移动管理功能)之间的连接，还支持业务请求、智能寻呼、UE可达性管理、MICO(Mobile Initiated Connection Only, 仅限移动发起连接)等功能。\r\n\r\n安全管理功能\r\n\r\nZXUN uMAC支持3GPP(3rd Generation Partnership Project, 第三代合作伙伴计划) TS33.501定义的安全要求。在用户访问5GC(5G Core Network, 5G核心网)网络期间，ZXUN uMAC作为AMF(Access and Mobility Management Function, 接入和移动管理功能)使用一系列安全措施进行用户鉴权、加密用户ID，并保护NAS(Non-Access Stratum, 非接入层)信令消息的完整性。安全管理支持5G AKA鉴权、EAP-AKA'鉴权、秘钥派生与传递、NAS信令加密、NAS信令完整性保护、4/5G互操作安全上下文映射等功能。\r\n\r\n网络切片功能\r\n\r\nZXUN uMAC作为AMF(Access and Mobility Management Function, 接入和移动管理功能)支持网络切片功能，支持用户注册过程中为UE确定Allowed NSSAI(Network Slice Selection Assistance Information, 网络切片选择辅助信息)和Rejected NSSAI(Network Slice Selection Assistance Information, 网络切片选择辅助信息)，选择支持Allowed NSSAI的AMF，并把Allowed NSSAI等信息通知UE和RAN(Radio Access Network, 无线接入网)。\r\n\r\n策略控制功能\r\n\r\nZXUN uMAC作为AMF(Access and Mobility Management Function,\n\n[4]:特性描述\r: 1. 管理员将ZXUN uMAC的版本包上载到版本仓库中，版本包以服务/微服务粒度区分。\r\n\r\n  2. 管理员在MANO的编排界面上创建NF。\r\n\r\n  3. NFS编排功能从版本库中获取服务/微服务信息，用作编排。\r\n\r\n  4. 管理员根据版本库中可用的服务/微服务，编排NF内的服务化架构。\r\n\r\n  5. 管理员发起NF和NFS的实例化。\r\n\r\n  6. MANO根据编排结果，从版本库中提取版本，实例化NF(Network Function, 网络功能)和NFS(Network Function Service, 网络功能服务)。\r\n\r\n\r\n\r\n\r\nSBA架构下，实例化的服务和微服务各自具备独立的弹性和冗余可靠性。\r\n\r\nNF实现\r\n\r\n针对5GC架构，在NF层次下，3GPP协议进一步细分了NF对外提供的服务（NF Service）。\r\n\r\n为实现SBA架构的要求，ZXUN uMAC提供了服务化架构平台TMSP(Telecom Microservices Platform, 电信级微服务平台)，平台支持服务和微服务粒度的部署与管理，并提取一些共性功能作为公共微服务，以协助各类服务的部署。\r\n\r\nZXUN uMAC对服务和微服务的定义如下：\r\n\r\n  * 服务的定义： 3GPP规范定义的NF Service，或厂商扩展的NF Service，能通过NRF完成注册和发现的网络服务，对外提供服务化接口，具备3GPP定义的服务特征。\r\n\r\n  * 微服务的定义：基于云原生架构和电信业务特征，具备独立性和自组织能力的单一功能体，称之为微服务。微服务通过TMSP内部高效消息总线提供业务能力，协助NF Service提供完整的服务功能。微服务是NF Service的组成部分，可被3GPP定义的NF Service专享或共享。\r\n\r\n\r\n\r\n\r\nZXUN uMAC中NF的服务和微服务参见各个NF实现说明，ZXUN uMAC中提供的公共微服务参见表1。\r\n\r\n表1 公共微服务公共微服务| 说明  \r\n---|---  \r\nHTTP LB| 支持SBI(Service Based Interface, 基于服务的接口)接口协议层的处理和负载均衡分发。  \r\nSIG LB| 支持非SBI接口的各类信令协议处理和负载均衡分发，当网元支持2/3/4/5G业务融合部署时，SIG LB微服务也提供2/3/4G主要信令消息的处理和负载均衡分发。  \r\nIPS (IP Interface)| 支持IP接口和路由转发功能。  \r\n  \r\nAMF实现\r\n\r\n图3 AMF SBA架构图\r\n\r\nAMF涉及的服务/微服务参见下表。\r\n\r\n服务/微服务| 说明  \r\n---|---  \r\n服务| Communication| \r\n\r\n  * 为其他NF提供访问UE和AN的能力。\r\n  * 支持SMF发起的EBI(EPS Bearer ID, EPS承载标识)分配请求，以便支持和EPS(Evolved Packet System, 演进的分组系统)的互操作。\r\n\r\n  \r\nMT| 允许NF确认UE是可达的。  \r\nEvent Exposure| 允许其他NF订阅并获取事件和统计信息通知，这些事件和统计与用户移动性相关。  \r\nLocation| 向Communication服务和MT服务提供UE位置信息订阅和通知服务。\n\n[5]:服务治理机制\r: 服务治理机制\r\n\r\n描述\r\n\r\nZXUN uMAC产品业务服务组件众多，而且随着5G业务生态的不断壮大，业务服务组件可能会越来越多，必须有一套治理机制来保障服务间的交互、通信能够快速、安全、可靠地完成。\r\n\r\nZXUN uMAC产品根据自身特点提供了服务治理服务-**微服务治理** （Service Governance）。该服务可以提供业务服务组件的注册、发现，以及服务间内部通信支撑，保证系统正常、可靠运行。\r\n\r\n服务组件注册发现机制\r\n\r\n不同类型的SC(Service Component, 服务组件)间，通过SCR（Service Component Responsible，SC注册中心）来实现注册和发现。双方根据服务名称来发现对方的SCCU（Service Component Control Unit，服务组件控制单元）主用节点，从SCCU获取对方的节点列表、节点状态、转发策略。SCCU主用节点和使用本服务其他SCI间保持服务节点和转发策略的实时同步。\r\n\r\n服务组件注册发现机制，如图1所示。\r\n\r\n图1 服务组件注册发现机制\r\n\r\n服务组件间内部通信机制\r\n\r\nZXUN uMAC提供了两个管理中心用于保证服务组件间的内部通信。\r\n\r\n  * 服务管理中心\r\n\r\n由服务组件**sc-tmsp-smc** 提供SCR(Service Component Repository, 服务组件仓库)功能，用于存储SC注册信息和提供订阅发现能力。\r\n\r\n  * 通信管理中心\r\n\r\n由服务组件**sc-tmsp-mgt** 提供服务组件之间的可靠性通信和RAW通信能力，同时负责维护内部通道的链路健康状态检测。\r\n\r\n\r\n\r\n\r\n服务组件间内部通信机制，如图2所示。\r\n\r\n图2 服务组件间内部通信机制\r\n\r\n服务组件间内部通信机制说明：\r\n\r\n  * 服务间转发信息同步：依靠**服务管理中心** 提供的服务注册发现机制，各服务相互同步各自的转发表信息到SCCU(Service Component Control Unit, 服务组件控制单元)保存，SCCU再将转发信息同步给本服务内的SC，为各自SC间通信提供转发规则数据。\r\n\r\n  * 通信节点管理：由**通信管理中心** 提供对内部管理面，内部业务面两个通信平面的网络状态提供健康检测。\r\n\r\n  * 服务组件间通信：依靠SCCU同步的转发表信息，完成和其他SC的点对点通信。", "answer": "ZXUN uMAC系统采用服务化架构的原因主要包括以下几点：\n\n1. 适应5GC网络的灵活性和扩展性：服务化架构能够更好地满足5GC网络对灵活性和扩展性的要求。\n\n2. 独立性和松耦合：业务服务作为独立的软件实体，可以实现服务的独立发布、部署、升级和运维，服务间采用松耦合，提高了系统的灵活性和可维护性。\n\n3. 功能模块化：通过将应用切分成更小粒度的服务，可以提高模块化程度，使得服务更容易被理解、部署和测试。\n\n4. 业务功能一致性：业务服务既可以运行在VM资源模型，也可以运行在POD资源模型，但业务功能逻辑呈现一致，底层的部署方式不同，这样保证了业务功能的一致性。\n\n5. 支持弹性与冗余：在SBA架构下，实例化的服务和微服务各自具备独立的弹性和冗余可靠性，提高了系统的健壮性和可靠性。\n\n6. 遵循标准：符合3GPP SBA的要求，基于3GPP的定义提供服务，有助于实现标准化和互操作性。\n\n7. 提供服务治理：通过服务治理机制，如服务注册、发现和内部通信支撑，保证了服务间的交互、通信能够快速、安全、可靠地完成。\n\n综上所述，服务化架构为ZXUN uMAC系统带来了更高的灵活性、可扩展性、模块化和可靠性，同时满足了5GC网络对业务处理性能和互操作性的需求。"}
